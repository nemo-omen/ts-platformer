{
  "version": 3,
  "sources": ["../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/webpack/universalModuleDefinition", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/webpack/bootstrap", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/export.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/well-known-symbol.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/array-method-uses-to-length.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/to-length.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/fails.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/global.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/to-object.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/is-object.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/has.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/object-define-property.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/array-method-is-strict.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/descriptors.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/add-to-unscopables.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/to-indexed-object.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/array-iteration.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/to-integer.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/create-non-enumerable-property.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/an-object.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/is-array.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/to-absolute-index.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/iterators.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/a-function.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/create-property.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/array-species-create.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/array-method-has-species-support.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/create-property-descriptor.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/indexed-object.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/get-built-in.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/require-object-coercible.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/internal-state.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/set-global.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/to-primitive.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/shared-key.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/is-pure.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/hidden-keys.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/classof-raw.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/path.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/array-includes.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/enum-bug-keys.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/object-get-prototype-of.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/function-bind-context.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/inspect-source.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/shared-store.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/ie8-dom-define.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/document-create-element.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/shared.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/uid.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/define-iterator.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/object-get-own-property-descriptor.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/redefine.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/object-keys-internal.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/iterators-core.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/native-symbol.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/object-create.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/set-to-string-tag.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/engine-v8-version.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/flatten-into-array.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/array-reduce.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Loader.css", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/css-loader/dist/runtime/api.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/es/array/index.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.string.iterator.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/string-multibyte.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/native-weak-map.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/(webpack)/buildin/global.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/object-property-is-enumerable.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/copy-constructor-properties.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/own-keys.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/object-get-own-property-names.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/object-get-own-property-symbols.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/is-forced.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/create-iterator-constructor.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/correct-prototype-getter.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/use-symbol-as-uid.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/object-define-properties.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/object-keys.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/html.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/object-set-prototype-of.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/a-possible-prototype.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.from.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/array-from.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/call-with-safe-iteration-closing.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/is-array-iterator-method.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/get-iterator-method.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/classof.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/to-string-tag-support.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/check-correctness-of-iteration.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.is-array.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.of.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.concat.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/engine-user-agent.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.copy-within.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/array-copy-within.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.every.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.fill.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/array-fill.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.filter.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.find.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.find-index.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.flat.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.flat-map.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.for-each.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/array-for-each.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.includes.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.index-of.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.iterator.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.join.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.last-index-of.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/array-last-index-of.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.map.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.reduce.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.reduce-right.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.reverse.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.slice.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.some.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.sort.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.species.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/set-species.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.splice.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.unscopables.flat.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.array.unscopables.flat-map.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/es/function/index.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.function.bind.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/internals/function-bind.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.function.name.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/home/travis/build/excaliburjs/Excalibur/node_modules/core-js/modules/es.function.has-instance.js", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Promises.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Polyfill.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Collision/Side.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Math/Random.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Util/Util.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Util/Log.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Util/Decorators.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Algebra.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Physics.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Drawing/Color.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Events.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Collision/CollisionType.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Collision/CollisionContact.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Collision/CollisionJumpTable.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Collision/ClosestLineJumpTable.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Screen.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Collision/Circle.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Collision/Edge.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Collision/ConvexPolygon.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Collision/BoundingBox.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/EventDispatcher.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Class.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Resources/Resource.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Drawing/SpriteEffects.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Configurable.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Actions/RotationType.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Drawing/Sprite.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Resources/Texture.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Drawing/Animation.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Actions/Action.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Util/EasingFunctions.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Actions/ActionContext.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Collision/Shape.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Collision/Body.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Traits/TileMapCollisionDetection.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Util/CullingBox.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Traits/OffscreenCulling.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Traits/CapturePointer.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Util/DrawUtil.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Collision/CollisionGroup.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Collision/Pair.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Collision/Collider.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/EntityComponentSystem/Component.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Util/Observable.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/EntityComponentSystem/Entity.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Actor.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/ScreenElement.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Timer.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/TileMap.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Resources/Sound/AudioContext.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Util/WebAudio.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Camera.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Loader.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Loader.logo.png", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Util/Detector.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Collision/DynamicTree.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Collision/DynamicTreeCollisionBroadphase.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Util/SortedList.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Label.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Trigger.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Util/Actors.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/EntityComponentSystem/Util.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/EntityComponentSystem/System.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/PostProcessing/ColorBlindCorrector.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/EntityComponentSystem/Query.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/EntityComponentSystem/QueryManager.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/EntityComponentSystem/EntityManager.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/EntityComponentSystem/SystemManager.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Scene.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Input/Keyboard.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/DebugFlags.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Debug.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Input/Pointer.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Input/PointerEvents.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Input/Gamepad.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Input/Pointers.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Util/Browser.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Engine.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Particles.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Events/MediaEvents.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Actions/Index.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Collision/CollisionGroupManager.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Drawing/Polygon.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Drawing/SpriteSheet.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Interfaces/AudioImplementation.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Interfaces/LifecycleEvents.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Math/PerlinNoise.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Resources/Sound/AudioInstance.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Util/Sound.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Resources/Sound/Sound.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/Resources/Gif.ts", "../../node_modules/.deno/excalibur@0.24.5/node_modules/excalibur/dist/webpack:/ex/index.ts"],
  "sourcesContent": ["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ex\"] = factory();\n\telse\n\t\troot[\"ex\"] = factory();\n})(window, function() {\nreturn ", " \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 139);\n", "var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar setGlobal = require('../internals/set-global');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target      - name of the target object\n  options.global      - target is the global object\n  options.stat        - export as static methods of target\n  options.proto       - export as prototype methods of target\n  options.real        - real prototype method for the `pure` version\n  options.forced      - export even if the native feature is available\n  options.bind        - bind methods to the target, required for the `pure` version\n  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n  options.sham        - add a flag to not completely full polyfills\n  options.enumerable  - export as enumerable property\n  options.noTargetGet - prevent calling a getter on target\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || setGlobal(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.noTargetGet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty === typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    // extend global\n    redefine(target, key, sourceProperty, options);\n  }\n};\n", "var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar has = require('../internals/has');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!has(WellKnownSymbolsStore, name)) {\n    if (NATIVE_SYMBOL && has(Symbol, name)) WellKnownSymbolsStore[name] = Symbol[name];\n    else WellKnownSymbolsStore[name] = createWellKnownSymbol('Symbol.' + name);\n  } return WellKnownSymbolsStore[name];\n};\n", "var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar has = require('../internals/has');\n\nvar defineProperty = Object.defineProperty;\nvar cache = {};\n\nvar thrower = function (it) { throw it; };\n\nmodule.exports = function (METHOD_NAME, options) {\n  if (has(cache, METHOD_NAME)) return cache[METHOD_NAME];\n  if (!options) options = {};\n  var method = [][METHOD_NAME];\n  var ACCESSORS = has(options, 'ACCESSORS') ? options.ACCESSORS : false;\n  var argument0 = has(options, 0) ? options[0] : thrower;\n  var argument1 = has(options, 1) ? options[1] : undefined;\n\n  return cache[METHOD_NAME] = !!method && !fails(function () {\n    if (ACCESSORS && !DESCRIPTORS) return true;\n    var O = { length: -1 };\n\n    if (ACCESSORS) defineProperty(O, 1, { enumerable: true, get: thrower });\n    else O[1] = 1;\n\n    method.call(O, argument0, argument1);\n  });\n};\n", "var toInteger = require('../internals/to-integer');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.github.io/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n", "module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n", "var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line no-undef\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func\n  Function('return this')();\n", "var requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `ToObject` abstract operation\n// https://tc39.github.io/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return Object(requireObjectCoercible(argument));\n};\n", "module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n", "var hasOwnProperty = {}.hasOwnProperty;\n\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n", "var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar anObject = require('../internals/an-object');\nvar toPrimitive = require('../internals/to-primitive');\n\nvar nativeDefineProperty = Object.defineProperty;\n\n// `Object.defineProperty` method\n// https://tc39.github.io/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? nativeDefineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return nativeDefineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n", "'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n", "var fails = require('../internals/fails');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !fails(function () {\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n", "var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar definePropertyModule = require('../internals/object-define-property');\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  definePropertyModule.f(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n", "// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n", "var bind = require('../internals/function-bind-context');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = [].push;\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push.call(target, value); // filter\n        } else if (IS_EVERY) return false;  // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6)\n};\n", "var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `ToInteger` abstract operation\n// https://tc39.github.io/ecma262/#sec-tointeger\nmodule.exports = function (argument) {\n  return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);\n};\n", "var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n", "var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it)) {\n    throw TypeError(String(it) + ' is not an object');\n  } return it;\n};\n", "var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.github.io/ecma262/#sec-isarray\nmodule.exports = Array.isArray || function isArray(arg) {\n  return classof(arg) == 'Array';\n};\n", "var toInteger = require('../internals/to-integer');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toInteger(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n", "module.exports = {};\n", "module.exports = function (it) {\n  if (typeof it != 'function') {\n    throw TypeError(String(it) + ' is not a function');\n  } return it;\n};\n", "'use strict';\nvar toPrimitive = require('../internals/to-primitive');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPrimitive(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n", "var isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.github.io/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return new (C === undefined ? Array : C)(length === 0 ? 0 : length);\n};\n", "var fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (METHOD_NAME) {\n  // We can't use this feature detection in V8 since it causes\n  // deoptimization and serious performance degradation\n  // https://github.com/zloirock/core-js/issues/677\n  return V8_VERSION >= 51 || !fails(function () {\n    var array = [];\n    var constructor = array.constructor = {};\n    constructor[SPECIES] = function () {\n      return { foo: 1 };\n    };\n    return array[METHOD_NAME](Boolean).foo !== 1;\n  });\n};\n", "module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n", "var fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar split = ''.split;\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins\n  return !Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split.call(it, '') : Object(it);\n} : Object;\n", "var path = require('../internals/path');\nvar global = require('../internals/global');\n\nvar aFunction = function (variable) {\n  return typeof variable == 'function' ? variable : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global[namespace])\n    : path[namespace] && path[namespace][method] || global[namespace] && global[namespace][method];\n};\n", "// `RequireObjectCoercible` abstract operation\n// https://tc39.github.io/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n  return it;\n};\n", "var NATIVE_WEAK_MAP = require('../internals/native-weak-map');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar objectHas = require('../internals/has');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP) {\n  var store = new WeakMap();\n  var wmget = store.get;\n  var wmhas = store.has;\n  var wmset = store.set;\n  set = function (it, metadata) {\n    wmset.call(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget.call(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas.call(store, it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return objectHas(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return objectHas(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n", "var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nmodule.exports = function (key, value) {\n  try {\n    createNonEnumerableProperty(global, key, value);\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n", "var isObject = require('../internals/is-object');\n\n// `ToPrimitive` abstract operation\n// https://tc39.github.io/ecma262/#sec-toprimitive\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (input, PREFERRED_STRING) {\n  if (!isObject(input)) return input;\n  var fn, val;\n  if (PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (typeof (fn = input.valueOf) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (!PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n", "var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n", "module.exports = false;\n", "module.exports = {};\n", "var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n", "var global = require('../internals/global');\n\nmodule.exports = global;\n", "var toIndexedObject = require('../internals/to-indexed-object');\nvar toLength = require('../internals/to-length');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n", "// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n", "var has = require('../internals/has');\nvar toObject = require('../internals/to-object');\nvar sharedKey = require('../internals/shared-key');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar IE_PROTO = sharedKey('IE_PROTO');\nvar ObjectPrototype = Object.prototype;\n\n// `Object.getPrototypeOf` method\n// https://tc39.github.io/ecma262/#sec-object.getprototypeof\nmodule.exports = CORRECT_PROTOTYPE_GETTER ? Object.getPrototypeOf : function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectPrototype : null;\n};\n", "var aFunction = require('../internals/a-function');\n\n// optional / simple context binding\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 0: return function () {\n      return fn.call(that);\n    };\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n", "var store = require('../internals/shared-store');\n\nvar functionToString = Function.toString;\n\n// this helper broken in `3.4.1-3.4.4`, so we can't use `shared` helper\nif (typeof store.inspectSource != 'function') {\n  store.inspectSource = function (it) {\n    return functionToString.call(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n", "var global = require('../internals/global');\nvar setGlobal = require('../internals/set-global');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || setGlobal(SHARED, {});\n\nmodule.exports = store;\n", "var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n", "var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n", "var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.6.5',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2020 Denis Pushkarev (zloirock.ru)'\n});\n", "var id = 0;\nvar postfix = Math.random();\n\nmodule.exports = function (key) {\n  return 'Symbol(' + String(key === undefined ? '' : key) + ')_' + (++id + postfix).toString(36);\n};\n", "'use strict';\nvar $ = require('../internals/export');\nvar createIteratorConstructor = require('../internals/create-iterator-constructor');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\nvar Iterators = require('../internals/iterators');\nvar IteratorsCore = require('../internals/iterators-core');\n\nvar IteratorPrototype = IteratorsCore.IteratorPrototype;\nvar BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;\nvar ITERATOR = wellKnownSymbol('iterator');\nvar KEYS = 'keys';\nvar VALUES = 'values';\nvar ENTRIES = 'entries';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {\n  createIteratorConstructor(IteratorConstructor, NAME, next);\n\n  var getIterationMethod = function (KIND) {\n    if (KIND === DEFAULT && defaultIterator) return defaultIterator;\n    if (!BUGGY_SAFARI_ITERATORS && KIND in IterablePrototype) return IterablePrototype[KIND];\n    switch (KIND) {\n      case KEYS: return function keys() { return new IteratorConstructor(this, KIND); };\n      case VALUES: return function values() { return new IteratorConstructor(this, KIND); };\n      case ENTRIES: return function entries() { return new IteratorConstructor(this, KIND); };\n    } return function () { return new IteratorConstructor(this); };\n  };\n\n  var TO_STRING_TAG = NAME + ' Iterator';\n  var INCORRECT_VALUES_NAME = false;\n  var IterablePrototype = Iterable.prototype;\n  var nativeIterator = IterablePrototype[ITERATOR]\n    || IterablePrototype['@@iterator']\n    || DEFAULT && IterablePrototype[DEFAULT];\n  var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);\n  var anyNativeIterator = NAME == 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;\n  var CurrentIteratorPrototype, methods, KEY;\n\n  // fix native\n  if (anyNativeIterator) {\n    CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));\n    if (IteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {\n      if (!IS_PURE && getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {\n        if (setPrototypeOf) {\n          setPrototypeOf(CurrentIteratorPrototype, IteratorPrototype);\n        } else if (typeof CurrentIteratorPrototype[ITERATOR] != 'function') {\n          createNonEnumerableProperty(CurrentIteratorPrototype, ITERATOR, returnThis);\n        }\n      }\n      // Set @@toStringTag to native iterators\n      setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);\n      if (IS_PURE) Iterators[TO_STRING_TAG] = returnThis;\n    }\n  }\n\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEFAULT == VALUES && nativeIterator && nativeIterator.name !== VALUES) {\n    INCORRECT_VALUES_NAME = true;\n    defaultIterator = function values() { return nativeIterator.call(this); };\n  }\n\n  // define iterator\n  if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {\n    createNonEnumerableProperty(IterablePrototype, ITERATOR, defaultIterator);\n  }\n  Iterators[NAME] = defaultIterator;\n\n  // export additional methods\n  if (DEFAULT) {\n    methods = {\n      values: getIterationMethod(VALUES),\n      keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),\n      entries: getIterationMethod(ENTRIES)\n    };\n    if (FORCED) for (KEY in methods) {\n      if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {\n        redefine(IterablePrototype, KEY, methods[KEY]);\n      }\n    } else $({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME }, methods);\n  }\n\n  return methods;\n};\n", "var DESCRIPTORS = require('../internals/descriptors');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar has = require('../internals/has');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\nvar nativeGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? nativeGetOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return nativeGetOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (has(O, P)) return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O, P), O[P]);\n};\n", "var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar setGlobal = require('../internals/set-global');\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar getInternalState = InternalStateModule.get;\nvar enforceInternalState = InternalStateModule.enforce;\nvar TEMPLATE = String(String).split('String');\n\n(module.exports = function (O, key, value, options) {\n  var unsafe = options ? !!options.unsafe : false;\n  var simple = options ? !!options.enumerable : false;\n  var noTargetGet = options ? !!options.noTargetGet : false;\n  if (typeof value == 'function') {\n    if (typeof key == 'string' && !has(value, 'name')) createNonEnumerableProperty(value, 'name', key);\n    enforceInternalState(value).source = TEMPLATE.join(typeof key == 'string' ? key : '');\n  }\n  if (O === global) {\n    if (simple) O[key] = value;\n    else setGlobal(key, value);\n    return;\n  } else if (!unsafe) {\n    delete O[key];\n  } else if (!noTargetGet && O[key]) {\n    simple = true;\n  }\n  if (simple) O[key] = value;\n  else createNonEnumerableProperty(O, key, value);\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, 'toString', function toString() {\n  return typeof this == 'function' && getInternalState(this).source || inspectSource(this);\n});\n", "var has = require('../internals/has');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !has(hiddenKeys, key) && has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~indexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n", "'use strict';\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar BUGGY_SAFARI_ITERATORS = false;\n\nvar returnThis = function () { return this; };\n\n// `%IteratorPrototype%` object\n// https://tc39.github.io/ecma262/#sec-%iteratorprototype%-object\nvar IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;\n\nif ([].keys) {\n  arrayIterator = [].keys();\n  // Safari 8 has buggy iterators w/o `next`\n  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;\n  else {\n    PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));\n    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;\n  }\n}\n\nif (IteratorPrototype == undefined) IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nif (!IS_PURE && !has(IteratorPrototype, ITERATOR)) {\n  createNonEnumerableProperty(IteratorPrototype, ITERATOR, returnThis);\n}\n\nmodule.exports = {\n  IteratorPrototype: IteratorPrototype,\n  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS\n};\n", "var fails = require('../internals/fails');\n\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  // Chrome 38 Symbol has incorrect toString conversion\n  // eslint-disable-next-line no-undef\n  return !String(Symbol());\n});\n", "var anObject = require('../internals/an-object');\nvar defineProperties = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    /* global ActiveXObject */\n    activeXDocument = document.domain && new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = activeXDocument ? NullProtoObjectViaActiveX(activeXDocument) : NullProtoObjectViaIFrame();\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.github.io/ecma262/#sec-object.create\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : defineProperties(result, Properties);\n};\n", "var defineProperty = require('../internals/object-define-property').f;\nvar has = require('../internals/has');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n\nmodule.exports = function (it, TAG, STATIC) {\n  if (it && !has(it = STATIC ? it : it.prototype, TO_STRING_TAG)) {\n    defineProperty(it, TO_STRING_TAG, { configurable: true, value: TAG });\n  }\n};\n", "var global = require('../internals/global');\nvar userAgent = require('../internals/engine-user-agent');\n\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  version = match[0] + match[1];\n} else if (userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = match[1];\n  }\n}\n\nmodule.exports = version && +version;\n", "'use strict';\nvar isArray = require('../internals/is-array');\nvar toLength = require('../internals/to-length');\nvar bind = require('../internals/function-bind-context');\n\n// `FlattenIntoArray` abstract operation\n// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\nvar flattenIntoArray = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {\n  var targetIndex = start;\n  var sourceIndex = 0;\n  var mapFn = mapper ? bind(mapper, thisArg, 3) : false;\n  var element;\n\n  while (sourceIndex < sourceLen) {\n    if (sourceIndex in source) {\n      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];\n\n      if (depth > 0 && isArray(element)) {\n        targetIndex = flattenIntoArray(target, original, element, toLength(element.length), targetIndex, depth - 1) - 1;\n      } else {\n        if (targetIndex >= 0x1FFFFFFFFFFFFF) throw TypeError('Exceed the acceptable array length');\n        target[targetIndex] = element;\n      }\n\n      targetIndex++;\n    }\n    sourceIndex++;\n  }\n  return targetIndex;\n};\n\nmodule.exports = flattenIntoArray;\n", "var aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\nvar toLength = require('../internals/to-length');\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    aFunction(callbackfn);\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = toLength(O.length);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw TypeError('Reduce of empty array with no initial value');\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n", "// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"/* Buttons styles start */\\n\\nbutton#excalibur-play {\\n  display: inline-block;\\n  position: relative;\\n  z-index: 999;\\n  border-radius: 6px;\\n  border: none;\\n  /*border: 3px solid;\\n    border-color: white;\\n    box-shadow: 0 0 10px #ccc;*/\\n  padding: 1rem 1.5rem 1rem 4rem;\\n  margin: 0;\\n  text-decoration: none;\\n  background: #00b233;\\n  color: #ffffff;\\n  font-family: sans-serif;\\n  font-size: 2rem;\\n  line-height: 1;\\n  cursor: pointer;\\n  text-align: center;\\n  transition: background 250ms ease-in-out, transform 150ms ease;\\n  -webkit-appearance: none;\\n  -moz-appearance: none;\\n\\n  -webkit-animation: excalibur-button-fadein 200ms; /* Safari, Chrome and Opera > 12.1 */\\n  -moz-animation: excalibur-button-fadein 200ms; /* Firefox < 16 */\\n  -ms-animation: excalibur-button-fadein 200ms; /* Internet Explorer */\\n  -o-animation: excalibur-button-fadein 200ms; /* Opera < 12.1 */\\n  animation: excalibur-button-fadein 200ms;\\n}\\n\\n/*\\nbutton#excalibur-play {\\n  display: none;\\n}*/\\n\\nbutton#excalibur-play:after {\\n  position: absolute;\\n  content: '';\\n  border: 8px solid;\\n  border-color: transparent transparent transparent white;\\n  left: 35px;\\n  top: 24px;\\n  width: 0;\\n  height: 0;\\n}\\n\\nbutton#excalibur-play:before {\\n  position: absolute;\\n  content: '';\\n  border: 3px solid;\\n  left: 19px;\\n  top: 14px;\\n  border-radius: 20px;\\n  width: 30px;\\n  height: 30px;\\n}\\n\\nbutton#excalibur-play:hover,\\nbutton#excalibur-play:focus {\\n  background: #00982c;\\n}\\n\\nbutton#excalibur-play:focus {\\n  outline: 1px solid #fff;\\n  outline-offset: -4px;\\n}\\n\\nbutton#excalibur-play:active {\\n  transform: scale(0.99);\\n}\\n\\n@keyframes excalibur-button-fadein {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n/* Firefox < 16 */\\n@-moz-keyframes excalibur-button-fadein {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n/* Safari, Chrome and Opera > 12.1 */\\n@-webkit-keyframes excalibur-button-fadein {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n/* Internet Explorer */\\n@-ms-keyframes excalibur-button-fadein {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n/* Opera < 12.1 */\\n@-o-keyframes excalibur-button-fadein {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://Loader.css\"],\"names\":[],\"mappings\":\"AAAA,yBAAyB;;AAEzB;EACE,qBAAqB;EACrB,kBAAkB;EAClB,YAAY;EACZ,kBAAkB;EAClB,YAAY;EACZ;;+BAE6B;EAC7B,8BAA8B;EAC9B,SAAS;EACT,qBAAqB;EACrB,mBAAmB;EACnB,cAAc;EACd,uBAAuB;EACvB,eAAe;EACf,cAAc;EACd,eAAe;EACf,kBAAkB;EAClB,8DAA8D;EAC9D,wBAAwB;EACxB,qBAAqB;;EAErB,gDAAgD,EAAE,oCAAoC;EACtF,6CAA6C,EAAE,iBAAiB;EAChE,4CAA4C,EAAE,sBAAsB;EACpE,2CAA2C,EAAE,iBAAiB;EAC9D,wCAAwC;AAC1C;;AAEA;;;EAGE;;AAEF;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;EACjB,uDAAuD;EACvD,UAAU;EACV,SAAS;EACT,QAAQ;EACR,SAAS;AACX;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;EACjB,UAAU;EACV,SAAS;EACT,mBAAmB;EACnB,WAAW;EACX,YAAY;AACd;;AAEA;;EAEE,mBAAmB;AACrB;;AAEA;EACE,uBAAuB;EACvB,oBAAoB;AACtB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,iBAAiB;AACjB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,oCAAoC;AACpC;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,sBAAsB;AACtB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,iBAAiB;AACjB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF\",\"sourcesContent\":[\"/* Buttons styles start */\\n\\nbutton#excalibur-play {\\n  display: inline-block;\\n  position: relative;\\n  z-index: 999;\\n  border-radius: 6px;\\n  border: none;\\n  /*border: 3px solid;\\n    border-color: white;\\n    box-shadow: 0 0 10px #ccc;*/\\n  padding: 1rem 1.5rem 1rem 4rem;\\n  margin: 0;\\n  text-decoration: none;\\n  background: #00b233;\\n  color: #ffffff;\\n  font-family: sans-serif;\\n  font-size: 2rem;\\n  line-height: 1;\\n  cursor: pointer;\\n  text-align: center;\\n  transition: background 250ms ease-in-out, transform 150ms ease;\\n  -webkit-appearance: none;\\n  -moz-appearance: none;\\n\\n  -webkit-animation: excalibur-button-fadein 200ms; /* Safari, Chrome and Opera > 12.1 */\\n  -moz-animation: excalibur-button-fadein 200ms; /* Firefox < 16 */\\n  -ms-animation: excalibur-button-fadein 200ms; /* Internet Explorer */\\n  -o-animation: excalibur-button-fadein 200ms; /* Opera < 12.1 */\\n  animation: excalibur-button-fadein 200ms;\\n}\\n\\n/*\\nbutton#excalibur-play {\\n  display: none;\\n}*/\\n\\nbutton#excalibur-play:after {\\n  position: absolute;\\n  content: '';\\n  border: 8px solid;\\n  border-color: transparent transparent transparent white;\\n  left: 35px;\\n  top: 24px;\\n  width: 0;\\n  height: 0;\\n}\\n\\nbutton#excalibur-play:before {\\n  position: absolute;\\n  content: '';\\n  border: 3px solid;\\n  left: 19px;\\n  top: 14px;\\n  border-radius: 20px;\\n  width: 30px;\\n  height: 30px;\\n}\\n\\nbutton#excalibur-play:hover,\\nbutton#excalibur-play:focus {\\n  background: #00982c;\\n}\\n\\nbutton#excalibur-play:focus {\\n  outline: 1px solid #fff;\\n  outline-offset: -4px;\\n}\\n\\nbutton#excalibur-play:active {\\n  transform: scale(0.99);\\n}\\n\\n@keyframes excalibur-button-fadein {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n/* Firefox < 16 */\\n@-moz-keyframes excalibur-button-fadein {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n/* Safari, Chrome and Opera > 12.1 */\\n@-webkit-keyframes excalibur-button-fadein {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n/* Internet Explorer */\\n@-ms-keyframes excalibur-button-fadein {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n/* Opera < 12.1 */\\n@-o-keyframes excalibur-button-fadein {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n", "\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}", "require('../../modules/es.string.iterator');\nrequire('../../modules/es.array.from');\nrequire('../../modules/es.array.is-array');\nrequire('../../modules/es.array.of');\nrequire('../../modules/es.array.concat');\nrequire('../../modules/es.array.copy-within');\nrequire('../../modules/es.array.every');\nrequire('../../modules/es.array.fill');\nrequire('../../modules/es.array.filter');\nrequire('../../modules/es.array.find');\nrequire('../../modules/es.array.find-index');\nrequire('../../modules/es.array.flat');\nrequire('../../modules/es.array.flat-map');\nrequire('../../modules/es.array.for-each');\nrequire('../../modules/es.array.includes');\nrequire('../../modules/es.array.index-of');\nrequire('../../modules/es.array.iterator');\nrequire('../../modules/es.array.join');\nrequire('../../modules/es.array.last-index-of');\nrequire('../../modules/es.array.map');\nrequire('../../modules/es.array.reduce');\nrequire('../../modules/es.array.reduce-right');\nrequire('../../modules/es.array.reverse');\nrequire('../../modules/es.array.slice');\nrequire('../../modules/es.array.some');\nrequire('../../modules/es.array.sort');\nrequire('../../modules/es.array.species');\nrequire('../../modules/es.array.splice');\nrequire('../../modules/es.array.unscopables.flat');\nrequire('../../modules/es.array.unscopables.flat-map');\nvar path = require('../../internals/path');\n\nmodule.exports = path.Array;\n", "'use strict';\nvar charAt = require('../internals/string-multibyte').charAt;\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\n\nvar STRING_ITERATOR = 'String Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);\n\n// `String.prototype[@@iterator]` method\n// https://tc39.github.io/ecma262/#sec-string.prototype-@@iterator\ndefineIterator(String, 'String', function (iterated) {\n  setInternalState(this, {\n    type: STRING_ITERATOR,\n    string: String(iterated),\n    index: 0\n  });\n// `%StringIteratorPrototype%.next` method\n// https://tc39.github.io/ecma262/#sec-%stringiteratorprototype%.next\n}, function next() {\n  var state = getInternalState(this);\n  var string = state.string;\n  var index = state.index;\n  var point;\n  if (index >= string.length) return { value: undefined, done: true };\n  point = charAt(string, index);\n  state.index += point.length;\n  return { value: point, done: false };\n});\n", "var toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `String.prototype.{ codePointAt, at }` methods implementation\nvar createMethod = function (CONVERT_TO_STRING) {\n  return function ($this, pos) {\n    var S = String(requireObjectCoercible($this));\n    var position = toInteger(pos);\n    var size = S.length;\n    var first, second;\n    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;\n    first = S.charCodeAt(position);\n    return first < 0xD800 || first > 0xDBFF || position + 1 === size\n      || (second = S.charCodeAt(position + 1)) < 0xDC00 || second > 0xDFFF\n        ? CONVERT_TO_STRING ? S.charAt(position) : first\n        : CONVERT_TO_STRING ? S.slice(position, position + 2) : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.codePointAt` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.codepointat\n  codeAt: createMethod(false),\n  // `String.prototype.at` method\n  // https://github.com/mathiasbynens/String.prototype.at\n  charAt: createMethod(true)\n};\n", "var global = require('../internals/global');\nvar inspectSource = require('../internals/inspect-source');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = typeof WeakMap === 'function' && /native code/.test(inspectSource(WeakMap));\n", "var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n", "'use strict';\nvar nativePropertyIsEnumerable = {}.propertyIsEnumerable;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !nativePropertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.github.io/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : nativePropertyIsEnumerable;\n", "var has = require('../internals/has');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!has(target, key)) defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n  }\n};\n", "var getBuiltIn = require('../internals/get-built-in');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? keys.concat(getOwnPropertySymbols(it)) : keys;\n};\n", "var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertynames\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n", "exports.f = Object.getOwnPropertySymbols;\n", "var fails = require('../internals/fails');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : typeof detection == 'function' ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n", "'use strict';\nvar IteratorPrototype = require('../internals/iterators-core').IteratorPrototype;\nvar create = require('../internals/object-create');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar Iterators = require('../internals/iterators');\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (IteratorConstructor, NAME, next) {\n  var TO_STRING_TAG = NAME + ' Iterator';\n  IteratorConstructor.prototype = create(IteratorPrototype, { next: createPropertyDescriptor(1, next) });\n  setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);\n  Iterators[TO_STRING_TAG] = returnThis;\n  return IteratorConstructor;\n};\n", "var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n", "var NATIVE_SYMBOL = require('../internals/native-symbol');\n\nmodule.exports = NATIVE_SYMBOL\n  // eslint-disable-next-line no-undef\n  && !Symbol.sham\n  // eslint-disable-next-line no-undef\n  && typeof Symbol.iterator == 'symbol';\n", "var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.github.io/ecma262/#sec-object.defineproperties\nmodule.exports = DESCRIPTORS ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], Properties[key]);\n  return O;\n};\n", "var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.github.io/ecma262/#sec-object.keys\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n", "var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n", "var anObject = require('../internals/an-object');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.github.io/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    setter = Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set;\n    setter.call(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    anObject(O);\n    aPossiblePrototype(proto);\n    if (CORRECT_SETTER) setter.call(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n", "var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it) && it !== null) {\n    throw TypeError(\"Can't set \" + String(it) + ' as a prototype');\n  } return it;\n};\n", "var $ = require('../internals/export');\nvar from = require('../internals/array-from');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\n\nvar INCORRECT_ITERATION = !checkCorrectnessOfIteration(function (iterable) {\n  Array.from(iterable);\n});\n\n// `Array.from` method\n// https://tc39.github.io/ecma262/#sec-array.from\n$({ target: 'Array', stat: true, forced: INCORRECT_ITERATION }, {\n  from: from\n});\n", "'use strict';\nvar bind = require('../internals/function-bind-context');\nvar toObject = require('../internals/to-object');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar toLength = require('../internals/to-length');\nvar createProperty = require('../internals/create-property');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\n// `Array.from` method implementation\n// https://tc39.github.io/ecma262/#sec-array.from\nmodule.exports = function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n  var O = toObject(arrayLike);\n  var C = typeof this == 'function' ? this : Array;\n  var argumentsLength = arguments.length;\n  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;\n  var mapping = mapfn !== undefined;\n  var iteratorMethod = getIteratorMethod(O);\n  var index = 0;\n  var length, result, step, iterator, next, value;\n  if (mapping) mapfn = bind(mapfn, argumentsLength > 2 ? arguments[2] : undefined, 2);\n  // if the target is not iterable or it's an array with the default iterator - use a simple case\n  if (iteratorMethod != undefined && !(C == Array && isArrayIteratorMethod(iteratorMethod))) {\n    iterator = iteratorMethod.call(O);\n    next = iterator.next;\n    result = new C();\n    for (;!(step = next.call(iterator)).done; index++) {\n      value = mapping ? callWithSafeIterationClosing(iterator, mapfn, [step.value, index], true) : step.value;\n      createProperty(result, index, value);\n    }\n  } else {\n    length = toLength(O.length);\n    result = new C(length);\n    for (;length > index; index++) {\n      value = mapping ? mapfn(O[index], index) : O[index];\n      createProperty(result, index, value);\n    }\n  }\n  result.length = index;\n  return result;\n};\n", "var anObject = require('../internals/an-object');\n\n// call something on iterator step with safe closing on error\nmodule.exports = function (iterator, fn, value, ENTRIES) {\n  try {\n    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (error) {\n    var returnMethod = iterator['return'];\n    if (returnMethod !== undefined) anObject(returnMethod.call(iterator));\n    throw error;\n  }\n};\n", "var wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n", "var classof = require('../internals/classof');\nvar Iterators = require('../internals/iterators');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n", "var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : result;\n};\n", "var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n", "var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var called = 0;\n  var iteratorWithReturn = {\n    next: function () {\n      return { done: !!called++ };\n    },\n    'return': function () {\n      SAFE_CLOSING = true;\n    }\n  };\n  iteratorWithReturn[ITERATOR] = function () {\n    return this;\n  };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(iteratorWithReturn, function () { throw 2; });\n} catch (error) { /* empty */ }\n\nmodule.exports = function (exec, SKIP_CLOSING) {\n  if (!SKIP_CLOSING && !SAFE_CLOSING) return false;\n  var ITERATION_SUPPORT = false;\n  try {\n    var object = {};\n    object[ITERATOR] = function () {\n      return {\n        next: function () {\n          return { done: ITERATION_SUPPORT = true };\n        }\n      };\n    };\n    exec(object);\n  } catch (error) { /* empty */ }\n  return ITERATION_SUPPORT;\n};\n", "var $ = require('../internals/export');\nvar isArray = require('../internals/is-array');\n\n// `Array.isArray` method\n// https://tc39.github.io/ecma262/#sec-array.isarray\n$({ target: 'Array', stat: true }, {\n  isArray: isArray\n});\n", "'use strict';\nvar $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar createProperty = require('../internals/create-property');\n\nvar ISNT_GENERIC = fails(function () {\n  function F() { /* empty */ }\n  return !(Array.of.call(F) instanceof F);\n});\n\n// `Array.of` method\n// https://tc39.github.io/ecma262/#sec-array.of\n// WebKit Array.of isn't generic\n$({ target: 'Array', stat: true, forced: ISNT_GENERIC }, {\n  of: function of(/* ...args */) {\n    var index = 0;\n    var argumentsLength = arguments.length;\n    var result = new (typeof this == 'function' ? this : Array)(argumentsLength);\n    while (argumentsLength > index) createProperty(result, index, arguments[index++]);\n    result.length = argumentsLength;\n    return result;\n  }\n});\n", "'use strict';\nvar $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\n\n// We can't use this feature detection in V8 since it causes\n// deoptimization and serious performance degradation\n// https://github.com/zloirock/core-js/issues/679\nvar IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  concat: function concat(arg) { // eslint-disable-line no-unused-vars\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = toLength(E.length);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n", "var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('navigator', 'userAgent') || '';\n", "var $ = require('../internals/export');\nvar copyWithin = require('../internals/array-copy-within');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.copyWithin` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.copywithin\n$({ target: 'Array', proto: true }, {\n  copyWithin: copyWithin\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('copyWithin');\n", "'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\n\nvar min = Math.min;\n\n// `Array.prototype.copyWithin` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.copywithin\nmodule.exports = [].copyWithin || function copyWithin(target /* = 0 */, start /* = 0, end = @length */) {\n  var O = toObject(this);\n  var len = toLength(O.length);\n  var to = toAbsoluteIndex(target, len);\n  var from = toAbsoluteIndex(start, len);\n  var end = arguments.length > 2 ? arguments[2] : undefined;\n  var count = min((end === undefined ? len : toAbsoluteIndex(end, len)) - from, len - to);\n  var inc = 1;\n  if (from < to && to < from + count) {\n    inc = -1;\n    from += count - 1;\n    to += count - 1;\n  }\n  while (count-- > 0) {\n    if (from in O) O[to] = O[from];\n    else delete O[to];\n    to += inc;\n    from += inc;\n  } return O;\n};\n", "'use strict';\nvar $ = require('../internals/export');\nvar $every = require('../internals/array-iteration').every;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('every');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('every');\n\n// `Array.prototype.every` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.every\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH }, {\n  every: function every(callbackfn /* , thisArg */) {\n    return $every(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n", "var $ = require('../internals/export');\nvar fill = require('../internals/array-fill');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.fill` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.fill\n$({ target: 'Array', proto: true }, {\n  fill: fill\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('fill');\n", "'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\n\n// `Array.prototype.fill` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.fill\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var argumentsLength = arguments.length;\n  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);\n  var end = argumentsLength > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n", "'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n// Edge 14- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n", "'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength(FIND);\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES || !USES_TO_LENGTH }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n", "'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength(FIND_INDEX);\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES || !USES_TO_LENGTH }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n", "'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar toInteger = require('../internals/to-integer');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flat` method\n// https://github.com/tc39/proposal-flatMap\n$({ target: 'Array', proto: true }, {\n  flat: function flat(/* depthArg = 1 */) {\n    var depthArg = arguments.length ? arguments[0] : undefined;\n    var O = toObject(this);\n    var sourceLen = toLength(O.length);\n    var A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toInteger(depthArg));\n    return A;\n  }\n});\n", "'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar aFunction = require('../internals/a-function');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flatMap` method\n// https://github.com/tc39/proposal-flatMap\n$({ target: 'Array', proto: true }, {\n  flatMap: function flatMap(callbackfn /* , thisArg */) {\n    var O = toObject(this);\n    var sourceLen = toLength(O.length);\n    var A;\n    aFunction(callbackfn);\n    A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, 1, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    return A;\n  }\n});\n", "'use strict';\nvar $ = require('../internals/export');\nvar forEach = require('../internals/array-for-each');\n\n// `Array.prototype.forEach` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\n$({ target: 'Array', proto: true, forced: [].forEach != forEach }, {\n  forEach: forEach\n});\n", "'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\nmodule.exports = (!STRICT_METHOD || !USES_TO_LENGTH) ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n} : [].forEach;\n", "'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.includes` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true, forced: !USES_TO_LENGTH }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n", "'use strict';\nvar $ = require('../internals/export');\nvar $indexOf = require('../internals/array-includes').indexOf;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar nativeIndexOf = [].indexOf;\n\nvar NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('indexOf');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.indexOf` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n$({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || !STRICT_METHOD || !USES_TO_LENGTH }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? nativeIndexOf.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n", "'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar Iterators = require('../internals/iterators');\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\n\nvar ARRAY_ITERATOR = 'Array Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR);\n\n// `Array.prototype.entries` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.entries\n// `Array.prototype.keys` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.keys\n// `Array.prototype.values` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.values\n// `Array.prototype[@@iterator]` method\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@iterator\n// `CreateArrayIterator` internal method\n// https://tc39.github.io/ecma262/#sec-createarrayiterator\nmodule.exports = defineIterator(Array, 'Array', function (iterated, kind) {\n  setInternalState(this, {\n    type: ARRAY_ITERATOR,\n    target: toIndexedObject(iterated), // target\n    index: 0,                          // next index\n    kind: kind                         // kind\n  });\n// `%ArrayIteratorPrototype%.next` method\n// https://tc39.github.io/ecma262/#sec-%arrayiteratorprototype%.next\n}, function () {\n  var state = getInternalState(this);\n  var target = state.target;\n  var kind = state.kind;\n  var index = state.index++;\n  if (!target || index >= target.length) {\n    state.target = undefined;\n    return { value: undefined, done: true };\n  }\n  if (kind == 'keys') return { value: index, done: false };\n  if (kind == 'values') return { value: target[index], done: false };\n  return { value: [index, target[index]], done: false };\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values%\n// https://tc39.github.io/ecma262/#sec-createunmappedargumentsobject\n// https://tc39.github.io/ecma262/#sec-createmappedargumentsobject\nIterators.Arguments = Iterators.Array;\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n", "'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n", "var $ = require('../internals/export');\nvar lastIndexOf = require('../internals/array-last-index-of');\n\n// `Array.prototype.lastIndexOf` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.lastindexof\n$({ target: 'Array', proto: true, forced: lastIndexOf !== [].lastIndexOf }, {\n  lastIndexOf: lastIndexOf\n});\n", "'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar min = Math.min;\nvar nativeLastIndexOf = [].lastIndexOf;\nvar NEGATIVE_ZERO = !!nativeLastIndexOf && 1 / [1].lastIndexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('lastIndexOf');\n// For preventing possible almost infinite loop in non-standard implementations, test the forward version of the method\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\nvar FORCED = NEGATIVE_ZERO || !STRICT_METHOD || !USES_TO_LENGTH;\n\n// `Array.prototype.lastIndexOf` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.lastindexof\nmodule.exports = FORCED ? function lastIndexOf(searchElement /* , fromIndex = @[*-1] */) {\n  // convert -0 to +0\n  if (NEGATIVE_ZERO) return nativeLastIndexOf.apply(this, arguments) || 0;\n  var O = toIndexedObject(this);\n  var length = toLength(O.length);\n  var index = length - 1;\n  if (arguments.length > 1) index = min(index, toInteger(arguments[1]));\n  if (index < 0) index = length + index;\n  for (;index >= 0; index--) if (index in O && O[index] === searchElement) return index || 0;\n  return -1;\n} : nativeLastIndexOf;\n", "'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n// FF49- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('map');\n\n// `Array.prototype.map` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n", "'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('reduce');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('reduce', { 1: 0 });\n\n// `Array.prototype.reduce` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    return $reduce(this, callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n", "'use strict';\nvar $ = require('../internals/export');\nvar $reduceRight = require('../internals/array-reduce').right;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('reduceRight');\n// For preventing possible almost infinite loop in non-standard implementations, test the forward version of the method\nvar USES_TO_LENGTH = arrayMethodUsesToLength('reduce', { 1: 0 });\n\n// `Array.prototype.reduceRight` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.reduceright\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH }, {\n  reduceRight: function reduceRight(callbackfn /* , initialValue */) {\n    return $reduceRight(this, callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n", "'use strict';\nvar $ = require('../internals/export');\nvar isArray = require('../internals/is-array');\n\nvar nativeReverse = [].reverse;\nvar test = [1, 2];\n\n// `Array.prototype.reverse` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.reverse\n// fix for Safari 12.0 bug\n// https://bugs.webkit.org/show_bug.cgi?id=188794\n$({ target: 'Array', proto: true, forced: String(test) === String(test.reverse()) }, {\n  reverse: function reverse() {\n    // eslint-disable-next-line no-self-assign\n    if (isArray(this)) this.length = this.length;\n    return nativeReverse.call(this);\n  }\n});\n", "'use strict';\nvar $ = require('../internals/export');\nvar isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar createProperty = require('../internals/create-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('slice', { ACCESSORS: true, 0: 0, 1: 2 });\n\nvar SPECIES = wellKnownSymbol('species');\nvar nativeSlice = [].slice;\nvar max = Math.max;\n\n// `Array.prototype.slice` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.slice\n// fallback for not array-like ES3 strings and DOM objects\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  slice: function slice(start, end) {\n    var O = toIndexedObject(this);\n    var length = toLength(O.length);\n    var k = toAbsoluteIndex(start, length);\n    var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n    // inline `ArraySpeciesCreate` for usage native `Array#slice` where it's possible\n    var Constructor, result, n;\n    if (isArray(O)) {\n      Constructor = O.constructor;\n      // cross-realm fallback\n      if (typeof Constructor == 'function' && (Constructor === Array || isArray(Constructor.prototype))) {\n        Constructor = undefined;\n      } else if (isObject(Constructor)) {\n        Constructor = Constructor[SPECIES];\n        if (Constructor === null) Constructor = undefined;\n      }\n      if (Constructor === Array || Constructor === undefined) {\n        return nativeSlice.call(O, k, fin);\n      }\n    }\n    result = new (Constructor === undefined ? Array : Constructor)(max(fin - k, 0));\n    for (n = 0; k < fin; k++, n++) if (k in O) createProperty(result, n, O[k]);\n    result.length = n;\n    return result;\n  }\n});\n", "'use strict';\nvar $ = require('../internals/export');\nvar $some = require('../internals/array-iteration').some;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('some');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('some');\n\n// `Array.prototype.some` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.some\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH }, {\n  some: function some(callbackfn /* , thisArg */) {\n    return $some(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n", "'use strict';\nvar $ = require('../internals/export');\nvar aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar fails = require('../internals/fails');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar test = [];\nvar nativeSort = test.sort;\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar STRICT_METHOD = arrayMethodIsStrict('sort');\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD;\n\n// `Array.prototype.sort` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? nativeSort.call(toObject(this))\n      : nativeSort.call(toObject(this), aFunction(comparefn));\n  }\n});\n", "var setSpecies = require('../internals/set-species');\n\n// `Array[@@species]` getter\n// https://tc39.github.io/ecma262/#sec-get-array-@@species\nsetSpecies('Array');\n", "'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar definePropertyModule = require('../internals/object-define-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (CONSTRUCTOR_NAME) {\n  var Constructor = getBuiltIn(CONSTRUCTOR_NAME);\n  var defineProperty = definePropertyModule.f;\n\n  if (DESCRIPTORS && Constructor && !Constructor[SPECIES]) {\n    defineProperty(Constructor, SPECIES, {\n      configurable: true,\n      get: function () { return this; }\n    });\n  }\n};\n", "'use strict';\nvar $ = require('../internals/export');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('splice', { ACCESSORS: true, 0: 0, 1: 2 });\n\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = toLength(O.length);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toInteger(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n", "// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\naddToUnscopables('flat');\n", "// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\naddToUnscopables('flatMap');\n", "require('../../modules/es.function.bind');\nrequire('../../modules/es.function.name');\nrequire('../../modules/es.function.has-instance');\nvar path = require('../../internals/path');\n\nmodule.exports = path.Function;\n", "var $ = require('../internals/export');\nvar bind = require('../internals/function-bind');\n\n// `Function.prototype.bind` method\n// https://tc39.github.io/ecma262/#sec-function.prototype.bind\n$({ target: 'Function', proto: true }, {\n  bind: bind\n});\n", "'use strict';\nvar aFunction = require('../internals/a-function');\nvar isObject = require('../internals/is-object');\n\nvar slice = [].slice;\nvar factories = {};\n\nvar construct = function (C, argsLength, args) {\n  if (!(argsLength in factories)) {\n    for (var list = [], i = 0; i < argsLength; i++) list[i] = 'a[' + i + ']';\n    // eslint-disable-next-line no-new-func\n    factories[argsLength] = Function('C,a', 'return new C(' + list.join(',') + ')');\n  } return factories[argsLength](C, args);\n};\n\n// `Function.prototype.bind` method implementation\n// https://tc39.github.io/ecma262/#sec-function.prototype.bind\nmodule.exports = Function.bind || function bind(that /* , ...args */) {\n  var fn = aFunction(this);\n  var partArgs = slice.call(arguments, 1);\n  var boundFunction = function bound(/* args... */) {\n    var args = partArgs.concat(slice.call(arguments));\n    return this instanceof boundFunction ? construct(fn, args.length, args) : fn.apply(that, args);\n  };\n  if (isObject(fn.prototype)) boundFunction.prototype = fn.prototype;\n  return boundFunction;\n};\n", "var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n", "'use strict';\nvar isObject = require('../internals/is-object');\nvar definePropertyModule = require('../internals/object-define-property');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar HAS_INSTANCE = wellKnownSymbol('hasInstance');\nvar FunctionPrototype = Function.prototype;\n\n// `Function.prototype[@@hasInstance]` method\n// https://tc39.github.io/ecma262/#sec-function.prototype-@@hasinstance\nif (!(HAS_INSTANCE in FunctionPrototype)) {\n  definePropertyModule.f(FunctionPrototype, HAS_INSTANCE, { value: function (O) {\n    if (typeof this != 'function' || !isObject(O)) return false;\n    if (!isObject(this.prototype)) return O instanceof this;\n    // for environment w/o native `@@hasInstance` logic enough `instanceof`, but add this:\n    while (O = getPrototypeOf(O)) if (this.prototype === O) return true;\n    return false;\n  } });\n}\n", "// Promises/A+ Spec http://promises-aplus.github.io/promises-spec/\n\n/**\n * Valid states for a promise to be in\n */\nexport enum PromiseState {\n  Resolved,\n  Rejected,\n  Pending\n}\n\nexport interface PromiseLike<T> {\n  then(successCallback?: (value?: T) => any, rejectCallback?: (value?: T) => any): PromiseLike<T>;\n  error(rejectCallback?: (value?: any) => any): PromiseLike<T>;\n\n  //Cannot define static methods on interfaces\n  //wrap<T>(value?: T): IPromise<T>;\n\n  resolve(value?: T): PromiseLike<T>;\n  reject(value?: any): PromiseLike<T>;\n\n  state(): PromiseState;\n}\n\n/**\n * Promises are used to do asynchronous work and they are useful for\n * creating a chain of actions. In Excalibur they are used for loading,\n * sounds, animation, actions, and more.\n *\n * [[include:Promises.md]]\n */\nexport class Promise<T> implements PromiseLike<T> {\n  private _state: PromiseState = PromiseState.Pending;\n  private _value: T;\n  private _successCallbacks: { (value?: T): any }[] = [];\n  private _rejectCallback: (value?: any) => any = () => {\n    return;\n  };\n  private _errorCallback: (value?: any) => any;\n\n  /**\n   * Create and resolve a Promise with an optional value\n   * @param value  An optional value to wrap in a resolved promise\n   */\n  public static resolve<T>(value?: T): Promise<T> {\n    const promise = new Promise<T>().resolve(value);\n\n    return promise;\n  }\n\n  /**\n   * Create and reject a Promise with an optional value\n   * @param value  An optional value to wrap in a rejected promise\n   */\n  public static reject<T>(value?: T): Promise<T> {\n    const promise = new Promise<T>().reject(value);\n\n    return promise;\n  }\n\n  /**\n   * Returns a new promise that resolves when all the promises passed to it resolve, or rejects\n   * when at least 1 promise rejects.\n   */\n  public static join<T>(promises: Promise<T>[]): Promise<T>;\n\n  /**\n   * Returns a new promise that resolves when all the promises passed to it resolve, or rejects\n   * when at least 1 promise rejects.\n   */\n  public static join<T>(...promises: Promise<T>[]): Promise<T>;\n\n  public static join<T>() {\n    let promises: Promise<T>[] = [];\n\n    if (arguments.length > 0 && !Array.isArray(arguments[0])) {\n      for (let _i = 0; _i < arguments.length; _i++) {\n        promises[_i - 0] = arguments[_i];\n      }\n    } else if (arguments.length === 1 && Array.isArray(arguments[0])) {\n      promises = arguments[0];\n    }\n\n    const joinedPromise = new Promise<T>();\n    if (!promises || !promises.length) {\n      return joinedPromise.resolve();\n    }\n\n    const total = promises.length;\n    let successes = 0;\n    let rejects = 0;\n    const errors: any = [];\n\n    promises.forEach((p) => {\n      p.then(\n        () => {\n          successes += 1;\n          if (successes === total) {\n            joinedPromise.resolve();\n          } else if (successes + rejects + errors.length === total) {\n            joinedPromise.reject(errors);\n          }\n        },\n        () => {\n          rejects += 1;\n          if (successes + rejects + errors.length === total) {\n            joinedPromise.reject(errors);\n          }\n        }\n      ).error((e) => {\n        errors.push(e);\n        if (errors.length + successes + rejects === total) {\n          joinedPromise.reject(errors);\n        }\n      });\n    });\n\n    return joinedPromise;\n  }\n\n  /**\n   * Chain success and reject callbacks after the promise is resolved\n   * @param successCallback  Call on resolution of promise\n   * @param rejectCallback   Call on rejection of promise\n   */\n  public then(successCallback?: (value?: T) => any, rejectCallback?: (value?: any) => any) {\n    if (successCallback) {\n      this._successCallbacks.push(successCallback);\n\n      // If the promise is already resolved call immediately\n      if (this.state() === PromiseState.Resolved) {\n        try {\n          successCallback.call(this, this._value);\n        } catch (e) {\n          this._handleError(e);\n        }\n      }\n    }\n    if (rejectCallback) {\n      this._rejectCallback = rejectCallback;\n\n      // If the promise is already rejected call immediately\n      if (this.state() === PromiseState.Rejected) {\n        try {\n          rejectCallback.call(this, this._value);\n        } catch (e) {\n          this._handleError(e);\n        }\n      }\n    }\n\n    return this;\n  }\n\n  /**\n   * Add an error callback to the promise\n   * @param errorCallback  Call if there was an error in a callback\n   */\n  public error(errorCallback?: (value?: any) => any) {\n    if (errorCallback) {\n      this._errorCallback = errorCallback;\n    }\n    return this;\n  }\n\n  /**\n   * Resolve the promise and pass an option value to the success callbacks\n   * @param value  Value to pass to the success callbacks\n   */\n  public resolve(value?: T): Promise<T> {\n    if (this._state === PromiseState.Pending) {\n      this._value = value;\n      try {\n        this._state = PromiseState.Resolved;\n        this._successCallbacks.forEach((cb) => {\n          cb.call(this, this._value);\n        });\n      } catch (e) {\n        this._handleError(e);\n      }\n    } else {\n      throw new Error('Cannot resolve a promise that is not in a pending state!');\n    }\n    return this;\n  }\n\n  /**\n   * Reject the promise and pass an option value to the reject callbacks\n   * @param value  Value to pass to the reject callbacks\n   */\n  public reject(value?: any) {\n    if (this._state === PromiseState.Pending) {\n      this._value = value;\n      try {\n        this._state = PromiseState.Rejected;\n        this._rejectCallback.call(this, this._value);\n      } catch (e) {\n        this._handleError(e);\n      }\n    } else {\n      throw new Error('Cannot reject a promise that is not in a pending state!');\n    }\n    return this;\n  }\n\n  /**\n   * Inspect the current state of a promise\n   */\n  public state(): PromiseState {\n    return this._state;\n  }\n\n  private _handleError(e: any) {\n    if (this._errorCallback) {\n      this._errorCallback.call(this, e);\n    } else {\n      // rethrow error\n      throw e;\n    }\n  }\n}\n", "import 'core-js/es/array';\nimport 'core-js/es/function';\n\nexport function polyfill() {\n  /* istanbul ignore next */\n  if (typeof window === 'undefined') {\n    window = <any>{\n      audioContext: function() {\n        return;\n      }\n    };\n  }\n  /* istanbul ignore next */\n  if (typeof window !== 'undefined' && !window.requestAnimationFrame) {\n    (<any>window).requestAnimationFrame =\n      (<any>window).webkitRequestAnimationFrame ||\n      (<any>window).mozRequestAnimationFrame ||\n      function(callback: Function) {\n        window.setInterval(callback, 1000 / 60);\n      };\n  }\n  /* istanbul ignore next */\n  if (typeof window !== 'undefined' && !window.cancelAnimationFrame) {\n    (<any>window).cancelAnimationFrame =\n      (<any>window).webkitCancelAnimationFrame ||\n      (<any>window).mozCancelAnimationFrame ||\n      function() {\n        return;\n      };\n  }\n  /* istanbul ignore next */\n  if (typeof window !== 'undefined' && !(<any>window).AudioContext) {\n    (<any>window).AudioContext =\n      (<any>window).AudioContext ||\n      (<any>window).webkitAudioContext ||\n      (<any>window).mozAudioContext ||\n      (<any>window).msAudioContext ||\n      (<any>window).oAudioContext;\n  }\n\n  /* istanbul ignore next */\n  if (typeof window !== 'undefined' && !(<any>window).devicePixelRatio) {\n    (<any>window).devicePixelRatio = window.devicePixelRatio || 1;\n  }\n}\n", "/**\n * An enum that describes the sides of an Actor for collision\n */\nexport enum Side {\n  None = 'None',\n  Top = 'Top',\n  Bottom = 'Bottom',\n  Left = 'Left',\n  Right = 'Right'\n}\n", "/**\n * Pseudo-Random Utility\n *\n * A pseudo-random utility to add seeded random support for help in\n * generating things like terrain or reproducible randomness. Uses the\n * [Mersenne Twister](https://en.wikipedia.org/wiki/Mersenne_Twister) algorithm.\n *\n * [[include:Random.md]]\n */\n\n/**\n * 32-bit mask\n */\nconst BITMASK32: number = 0xffffffff;\n\n/**\n * Pseudo-random number generator following the Mersenne_Twister algorithm. Given a seed this generator will produce the same sequence\n * of numbers each time it is called.\n * See https://en.wikipedia.org/wiki/Mersenne_Twister for more details.\n * Uses the MT19937-32 (2002) implementation documented here http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/MT2002/emt19937ar.html\n *\n * Api inspired by http://chancejs.com/# https://github.com/chancejs/chancejs\n */\nexport class Random {\n  // Separation point of one one word, the number of bits in the lower bitmask 0 <= r <= w-1\n  private _lowerMask: number = 0x7fffffff; // 31 bits same as _r\n  private _upperMask: number = 0x80000000; // 34 high bits\n\n  // Word size, 64 bits\n  private _w: number = 32;\n\n  // Degree of recurrence\n  private _n: number = 624;\n\n  // Middle word, an offset used in the recurrence defining the series x, 1<=m<n\n  private _m: number = 397;\n  // coefficients of teh rational normal form twist matrix\n  private _a: number = 0x9908b0df;\n\n  // tempering bit shifts and masks\n  private _u: number = 11;\n  private _s: number = 7;\n  private _b: number = 0x9d2c5680;\n  private _t: number = 15;\n  private _c: number = 0xefc60000;\n  private _l: number = 18;\n  private _f: number = 1812433253;\n\n  private _mt: number[];\n\n  private _index: number;\n\n  /**\n   * If no seed is specified, the Date.now() is used\n   */\n  constructor(public seed?: number) {\n    this._mt = new Array<number>(this._n);\n    // need to mask to support higher bit machines\n    this._mt[0] = (seed || Date.now()) >>> 0;\n\n    for (let i = 1; i < this._n; i++) {\n      const s = this._mt[i - 1] ^ (this._mt[i - 1] >>> (this._w - 2));\n      // numbers are bigger than the JS max safe int, add in 16-bit chunks to prevent IEEE rounding errors on high bits\n      this._mt[i] = (((this._f * ((s & 0xffff0000) >>> 16)) << 16) + this._f * (s & 0xffff) + i) >>> 0;\n    }\n    this._index = this._n;\n  }\n\n  /**\n   * Apply the twist\n   */\n  private _twist(): void {\n    const mag01 = [0x0, this._a];\n    let y = 0,\n      i = 0;\n    for (; i < this._n - this._m; i++) {\n      y = (this._mt[i] & this._upperMask) | (this._mt[i + 1] & this._lowerMask);\n      this._mt[i] = this._mt[i + this._m] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\n    }\n    for (; i < this._n - 1; i++) {\n      y = (this._mt[i] & this._upperMask) | (this._mt[i + 1] & this._lowerMask);\n      this._mt[i] = this._mt[i + (this._m - this._n)] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\n    }\n    y = (this._mt[this._n - 1] & this._upperMask) | (this._mt[0] & this._lowerMask);\n    this._mt[this._n - 1] = this._mt[this._m - 1] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\n\n    this._index = 0;\n  }\n\n  /**\n   * Return next 32 bit integer number in sequence\n   */\n  public nextInt(): number {\n    if (this._index >= this._n) {\n      this._twist();\n    }\n\n    let y = this._mt[this._index++];\n\n    y ^= y >>> this._u;\n    y ^= (y << this._s) & this._b;\n    y ^= (y << this._t) & this._c;\n    y ^= y >>> this._l;\n\n    return y >>> 0;\n  }\n\n  /**\n   * Return a random floating point number between [0, 1)\n   */\n  public next(): number {\n    return this.nextInt() * (1.0 / 4294967296.0); // divided by 2^32\n  }\n\n  /**\n   * Return a random floating point in range [min, max) min is included, max is not included\n   */\n  public floating(min: number, max: number): number {\n    return (max - min) * this.next() + min;\n  }\n\n  /**\n   * Return a random integer in range [min, max] min is included, max is included.\n   * Implemented with rejection sampling, see https://medium.com/@betable/tifu-by-using-math-random-f1c308c4fd9d#.i13tdiu5a\n   */\n  public integer(min: number, max: number): number {\n    return Math.floor((max - min + 1) * this.next() + min);\n  }\n\n  /**\n   * Returns true or false randomly with 50/50 odds by default.\n   * By default the likelihood of returning a true is .5 (50%).\n   * @param likelihood takes values between [0, 1]\n   */\n  public bool(likelihood: number = 0.5): boolean {\n    return this.next() <= likelihood;\n  }\n\n  /**\n   * Returns one element from an array at random\n   */\n  public pickOne<T>(array: Array<T>): T {\n    return array[this.integer(0, array.length - 1)];\n  }\n\n  /**\n   * Returns a new array random picking elements from the original\n   * @param array Original array to pick from\n   * @param numPicks can be any positive number\n   * @param allowDuplicates indicates whether the returned set is allowed duplicates (it does not mean there will always be duplicates\n   * just that it is possible)\n   */\n  public pickSet<T>(array: Array<T>, numPicks: number, allowDuplicates: boolean = false): Array<T> {\n    if (allowDuplicates) {\n      return this._pickSetWithDuplicates(array, numPicks);\n    } else {\n      return this._pickSetWithoutDuplicates(array, numPicks);\n    }\n  }\n\n  /**\n   * Returns a new array randomly picking elements in the original (not reused)\n   * @param numPicks must be less than or equal to the number of elements in the array.\n   */\n  private _pickSetWithoutDuplicates<T>(array: Array<T>, numPicks: number): Array<T> {\n    if (numPicks > array.length || numPicks < 0) {\n      throw new Error('Invalid number of elements to pick, must pick a value 0 < n <= length');\n    }\n    if (numPicks === array.length) {\n      return array;\n    }\n\n    const result: Array<T> = new Array<T>(numPicks);\n    let currentPick = 0;\n    const tempArray = array.slice(0);\n    while (currentPick < numPicks) {\n      const index = this.integer(0, tempArray.length - 1);\n      result[currentPick++] = tempArray[index];\n      tempArray.splice(index, 1);\n    }\n\n    return result;\n  }\n\n  /**\n   * Returns a new array random picking elements from the original allowing duplicates\n   * @param numPicks can be any positive number\n   */\n  private _pickSetWithDuplicates<T>(array: Array<T>, numPicks: number): Array<T> {\n    // Typescript numbers are all floating point, so do we add check for int? (or floor the input?)\n    if (numPicks < 0) {\n      throw new Error('Invalid number of elements to pick, must pick a value 0 <= n < MAX_INT');\n    }\n    const result = new Array<T>(numPicks);\n    for (let i = 0; i < numPicks; i++) {\n      result[i] = this.pickOne(array);\n    }\n    return result;\n  }\n\n  /**\n   * Returns a new array that has its elements shuffled. Using the Fisher/Yates method\n   * https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\n   */\n  public shuffle<T>(array: Array<T>): Array<T> {\n    const tempArray = array.slice(0);\n    let swap: T = null;\n    for (let i = 0; i < tempArray.length - 2; i++) {\n      const randomIndex = this.integer(i, tempArray.length - 1);\n      swap = tempArray[i];\n      tempArray[i] = tempArray[randomIndex];\n      tempArray[randomIndex] = swap;\n    }\n\n    return tempArray;\n  }\n\n  /**\n   * Generate a list of random integer numbers\n   * @param length the length of the final array\n   * @param min the minimum integer number to generate inclusive\n   * @param max the maximum integer number to generate inclusive\n   */\n  public range(length: number, min: number, max: number): Array<number> {\n    const result: Array<number> = new Array(length);\n    for (let i = 0; i < length; i++) {\n      result[i] = this.integer(min, max);\n    }\n    return result;\n  }\n\n  /**\n   * Returns the result of a d4 dice roll\n   */\n  public d4() {\n    return this.integer(1, 4);\n  }\n\n  /**\n   * Returns the result of a d6 dice roll\n   */\n  public d6() {\n    return this.integer(1, 6);\n  }\n\n  /**\n   * Returns the result of a d8 dice roll\n   */\n  public d8() {\n    return this.integer(1, 8);\n  }\n\n  /**\n   * Returns the result of a d10 dice roll\n   */\n  public d10() {\n    return this.integer(1, 10);\n  }\n\n  /**\n   * Returns the result of a d12 dice roll\n   */\n  public d12() {\n    return this.integer(1, 12);\n  }\n\n  /**\n   * Returns the result of a d20 dice roll\n   */\n  public d20() {\n    return this.integer(1, 20);\n  }\n}\n", "import { Vector } from '../Algebra';\nimport { Random } from '../Math/Random';\nimport { Side } from '../Collision/Side';\n\n/**\n * Two PI constant\n */\nexport const TwoPI: number = Math.PI * 2;\n\n/**\n * Merges one or more objects into a single target object\n *\n * @param deep Whether or not to do a deep clone\n * @param target The target object to attach properties on\n * @param objects The objects whose properties to merge\n * @returns Merged object with properties from other objects\n */\nexport function extend(deep: boolean, target: any, ...objects: any[]): any;\n\n/**\n * Merges one or more objects into a single target object\n *\n * @param target The target object to attach properties on\n * @param object2 The second object whose properties to merge\n * @returns Merged object with properties from other objects\n */\nexport function extend<T1, T2>(target: T1, object2: T2): T1 & T2;\n\n/**\n * Merges one or more objects into a single target object\n *\n * @param target The target object to attach properties on\n * @param object2 The second object whose properties to merge\n * @param object3 The third object whose properties to merge\n * @returns Merged object with properties from other objects\n */\nexport function extend<T1, T2, T3>(target: T1, object2: T2, object3: T3): T1 & T2 & T3;\n\n/**\n * Merges one or more objects into a single target object\n *\n * @param target The target object to attach properties on\n * @param objects The objects whose properties to merge\n * @returns Merged object with properties from other objects\n */\nexport function extend(target: any, ...objects: any[]): any;\n\n/**\n * Merges one or more objects into a single target object\n *\n * @returns Merged object with properties from other objects\n * @credit https://gomakethings.com/vanilla-javascript-version-of-jquery-extend/\n */\nexport function extend() {\n  const extended: { [key: string]: any } = {};\n  let deep = false;\n  let i = 0;\n  const length = arguments.length;\n\n  // Check if a deep merge\n  if (Object.prototype.toString.call(arguments[0]) === '[object Boolean]') {\n    deep = arguments[0];\n    i++;\n  }\n\n  // Merge the object into the extended object\n  const assignExists = typeof (<any>Object).assign === 'function';\n  let merge = null;\n  if (!assignExists) {\n    merge = function(obj: any) {\n      for (const prop in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, prop)) {\n          // If deep merge and property is an object, merge properties\n          if (deep && Object.prototype.toString.call(obj[prop]) === '[object Object]') {\n            extended[prop] = extend(true, extended[prop], obj[prop]);\n          } else {\n            extended[prop] = obj[prop];\n          }\n        }\n      }\n    };\n  } else {\n    merge = (<any>Object).assign;\n  }\n\n  // Loop through each object and conduct a merge\n  for (; i < length; i++) {\n    const obj = arguments[i];\n    if (!assignExists) {\n      merge(obj);\n    } else {\n      merge(extended, obj);\n    }\n  }\n\n  return extended;\n}\n\nexport function base64Encode(inputStr: string) {\n  const b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n  let outputStr = '';\n  let i = 0;\n\n  while (i < inputStr.length) {\n    //all three \"& 0xff\" added below are there to fix a known bug\n    //with bytes returned by xhr.responseText\n    const byte1 = inputStr.charCodeAt(i++) & 0xff;\n    const byte2 = inputStr.charCodeAt(i++) & 0xff;\n    const byte3 = inputStr.charCodeAt(i++) & 0xff;\n\n    const enc1 = byte1 >> 2;\n    const enc2 = ((byte1 & 3) << 4) | (byte2 >> 4);\n\n    let enc3, enc4;\n    if (isNaN(byte2)) {\n      enc3 = enc4 = 64;\n    } else {\n      enc3 = ((byte2 & 15) << 2) | (byte3 >> 6);\n      if (isNaN(byte3)) {\n        enc4 = 64;\n      } else {\n        enc4 = byte3 & 63;\n      }\n    }\n\n    outputStr += b64.charAt(enc1) + b64.charAt(enc2) + b64.charAt(enc3) + b64.charAt(enc4);\n  }\n\n  return outputStr;\n}\n\n/**\n * Sugar that will use `nullishVal` if it's not null or undefined. Simulates the `??` operator\n * @param nullishVal\n * @param defaultVal\n */\nexport function nullish<T>(nullishVal: T | undefined | null, defaultVal: T): T {\n  return nullishVal !== null && nullishVal !== undefined ? nullishVal : defaultVal;\n}\n\n/**\n * Clamps a value between a min and max inclusive\n */\nexport function clamp(val: number, min: number, max: number) {\n  return Math.min(Math.max(min, val), max);\n}\n\nexport function randomInRange(min: number, max: number, random: Random = new Random()): number {\n  return random ? random.floating(min, max) : min + Math.random() * (max - min);\n}\n\nexport function randomIntInRange(min: number, max: number, random: Random = new Random()): number {\n  return random ? random.integer(min, max) : Math.round(randomInRange(min, max));\n}\n\nexport function canonicalizeAngle(angle: number): number {\n  let tmpAngle = angle;\n  if (angle > TwoPI) {\n    while (tmpAngle > TwoPI) {\n      tmpAngle -= TwoPI;\n    }\n  }\n\n  if (angle < 0) {\n    while (tmpAngle < 0) {\n      tmpAngle += TwoPI;\n    }\n  }\n  return tmpAngle;\n}\n\nexport function toDegrees(radians: number): number {\n  return (180 / Math.PI) * radians;\n}\n\nexport function toRadians(degrees: number): number {\n  return (degrees / 180) * Math.PI;\n}\n\nexport function getPosition(el: HTMLElement): Vector {\n  let oLeft: number = 0,\n    oTop: number = 0;\n\n  const calcOffsetLeft = (parent: HTMLElement) => {\n    oLeft += parent.offsetLeft;\n\n    if (parent.offsetParent) {\n      calcOffsetLeft(<HTMLElement>parent.offsetParent);\n    }\n  };\n  const calcOffsetTop = (parent: HTMLElement) => {\n    oTop += parent.offsetTop;\n    if (parent.offsetParent) {\n      calcOffsetTop(<HTMLElement>parent.offsetParent);\n    }\n  };\n\n  calcOffsetLeft(el);\n  calcOffsetTop(el);\n\n  return new Vector(oLeft, oTop);\n}\n\nexport function addItemToArray<T>(item: T, array: T[]): boolean {\n  if (array.indexOf(item) === -1) {\n    array.push(item);\n    return true;\n  }\n  return false;\n}\n\nexport function removeItemFromArray<T>(item: T, array: T[]): boolean {\n  let index = -1;\n  if ((index = array.indexOf(item)) > -1) {\n    array.splice(index, 1);\n    return true;\n  }\n\n  return false;\n}\n\nexport function contains(array: Array<any>, obj: any): boolean {\n  for (let i = 0; i < array.length; i++) {\n    if (array[i] === obj) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function getOppositeSide(side: Side) {\n  if (side === Side.Top) {\n    return Side.Bottom;\n  }\n  if (side === Side.Bottom) {\n    return Side.Top;\n  }\n  if (side === Side.Left) {\n    return Side.Right;\n  }\n  if (side === Side.Right) {\n    return Side.Left;\n  }\n\n  return Side.None;\n}\n\n/**\n * Returns the side in the direction of the vector supplied\n * @param direction Vector to check\n */\nexport function getSideFromDirection(direction: Vector) {\n  const directions = [Vector.Left, Vector.Right, Vector.Up, Vector.Down];\n  const directionEnum = [Side.Left, Side.Right, Side.Top, Side.Bottom];\n\n  let max = -Number.MAX_VALUE;\n  let maxIndex = -1;\n  for (let i = 0; i < directions.length; i++) {\n    if (directions[i].dot(direction) > max) {\n      max = directions[i].dot(direction);\n      maxIndex = i;\n    }\n  }\n  return directionEnum[maxIndex];\n}\n\n/**\n * Excalibur's dynamically resizing collection\n */\nexport class Collection<T> {\n  /**\n   * Default collection size\n   */\n  public static DefaultSize = 200;\n  private _internalArray: T[] = null;\n  private _endPointer: number = 0;\n\n  /**\n   * @param initialSize  Initial size of the internal backing array\n   */\n  constructor(initialSize: number = Collection.DefaultSize) {\n    this._internalArray = new Array<T>(initialSize);\n  }\n\n  private _resize() {\n    const newSize = this._internalArray.length * 2;\n    const newArray = new Array<T>(newSize);\n    const count = this.count();\n    for (let i = 0; i < count; i++) {\n      newArray[i] = this._internalArray[i];\n    }\n\n    delete this._internalArray;\n    this._internalArray = newArray;\n  }\n\n  /**\n   * Push elements to the end of the collection\n   */\n  public push(element: T): T {\n    if (this._endPointer === this._internalArray.length) {\n      this._resize();\n    }\n    return (this._internalArray[this._endPointer++] = element);\n  }\n\n  /**\n   * Removes elements from the end of the collection\n   */\n  public pop(): T {\n    this._endPointer = this._endPointer - 1 < 0 ? 0 : this._endPointer - 1;\n    return this._internalArray[this._endPointer];\n  }\n\n  /**\n   * Returns the count of the collection\n   */\n  public count(): number {\n    return this._endPointer;\n  }\n\n  /**\n   * Empties the collection\n   */\n  public clear() {\n    this._endPointer = 0;\n  }\n\n  /**\n   * Returns the size of the internal backing array\n   */\n  public internalSize(): number {\n    return this._internalArray.length;\n  }\n\n  /**\n   * Returns an element at a specific index\n   * @param index  Index of element to retrieve\n   */\n  public elementAt(index: number): T {\n    if (index >= this.count()) {\n      //Logger.getInstance().error('Invalid parameter: ' + index);\n      throw new Error('Invalid index ' + index);\n    }\n    return this._internalArray[index];\n  }\n\n  /**\n   * Inserts an element at a specific index\n   * @param index  Index to insert the element\n   * @param value  Element to insert\n   */\n  public insert(index: number, value: T): T {\n    if (index >= this.count()) {\n      this._resize();\n    }\n    return (this._internalArray[index] = value);\n  }\n\n  /**\n   * Removes an element at a specific index\n   * @param index  Index of element to remove\n   */\n  public remove(index: number): T {\n    const count = this.count();\n    if (count === 0) {\n      //Logger.getInstance().error('Invalid parameter: ' + index);\n      throw new Error('Invalid parameter ' + index);\n    }\n    // O(n) Shift\n    const removed = this._internalArray[index];\n    for (let i = index; i < count; i++) {\n      this._internalArray[i] = this._internalArray[i + 1];\n    }\n    this._endPointer--;\n    return removed;\n  }\n\n  /**\n   * Removes an element by reference\n   * @param element  Element to retrieve\n   */\n  public removeElement(element: T) {\n    const index = this._internalArray.indexOf(element);\n    this.remove(index);\n  }\n\n  /**\n   * Returns a array representing the collection\n   */\n  public toArray(): T[] {\n    return this._internalArray.slice(0, this._endPointer);\n  }\n\n  /**\n   * Iterate over every element in the collection\n   * @param func  Callback to call for each element passing a reference to the element and its index, returned values are ignored\n   */\n  public forEach(func: (element: T, index: number) => any) {\n    let i = 0;\n    const count = this.count();\n    for (i; i < count; i++) {\n      func.call(this, this._internalArray[i], i);\n    }\n  }\n\n  /**\n   * Mutate every element in the collection\n   * @param func  Callback to call for each element passing a reference to the element and its index, any values returned mutate\n   * the collection\n   */\n  public map(func: (element: T, index: number) => any) {\n    const count = this.count();\n    for (let i = 0; i < count; i++) {\n      this._internalArray[i] = func.call(this, this._internalArray[i], i);\n    }\n  }\n}\n\n/**\n * Used for exhaustive checks at compile time\n */\nexport function fail(message: never): never {\n  throw new Error(message);\n}\n", "/* eslint-disable no-console */\n/**\n * Logging level that Excalibur will tag\n */\nexport enum LogLevel {\n  Debug,\n  Info,\n  Warn,\n  Error,\n  Fatal\n}\n\n/**\n * Static singleton that represents the logging facility for Excalibur.\n * Excalibur comes built-in with a [[ConsoleAppender]] and [[ScreenAppender]].\n * Derive from [[Appender]] to create your own logging appenders.\n *\n * [[include:Logger.md]]\n */\nexport class Logger {\n  private static _instance: Logger = null;\n  private _appenders: Appender[] = [];\n\n  constructor() {\n    if (Logger._instance) {\n      throw new Error('Logger is a singleton');\n    }\n    Logger._instance = this;\n    // Default console appender\n    Logger._instance.addAppender(new ConsoleAppender());\n    return Logger._instance;\n  }\n\n  /**\n   * Gets or sets the default logging level. Excalibur will only log\n   * messages if equal to or above this level. Default: [[LogLevel.Info]]\n   */\n  public defaultLevel: LogLevel = LogLevel.Info;\n\n  /**\n   * Gets the current static instance of Logger\n   */\n  public static getInstance(): Logger {\n    if (Logger._instance == null) {\n      Logger._instance = new Logger();\n    }\n    return Logger._instance;\n  }\n\n  /**\n   * Adds a new [[Appender]] to the list of appenders to write to\n   */\n  public addAppender(appender: Appender): void {\n    this._appenders.push(appender);\n  }\n\n  /**\n   * Clears all appenders from the logger\n   */\n  public clearAppenders(): void {\n    this._appenders.length = 0;\n  }\n\n  /**\n   * Logs a message at a given LogLevel\n   * @param level  The LogLevel`to log the message at\n   * @param args   An array of arguments to write to an appender\n   */\n  private _log(level: LogLevel, args: any[]): void {\n    if (level == null) {\n      level = this.defaultLevel;\n    }\n\n    const len = this._appenders.length;\n\n    for (let i = 0; i < len; i++) {\n      if (level >= this.defaultLevel) {\n        this._appenders[i].log(level, args);\n      }\n    }\n  }\n\n  /**\n   * Writes a log message at the [[LogLevel.Debug]] level\n   * @param args  Accepts any number of arguments\n   */\n  public debug(...args: any[]): void {\n    this._log(LogLevel.Debug, args);\n  }\n\n  /**\n   * Writes a log message at the [[LogLevel.Info]] level\n   * @param args  Accepts any number of arguments\n   */\n  public info(...args: any[]): void {\n    this._log(LogLevel.Info, args);\n  }\n\n  /**\n   * Writes a log message at the [[LogLevel.Warn]] level\n   * @param args  Accepts any number of arguments\n   */\n  public warn(...args: any[]): void {\n    this._log(LogLevel.Warn, args);\n  }\n\n  /**\n   * Writes a log message at the [[LogLevel.Error]] level\n   * @param args  Accepts any number of arguments\n   */\n  public error(...args: any[]): void {\n    this._log(LogLevel.Error, args);\n  }\n\n  /**\n   * Writes a log message at the [[LogLevel.Fatal]] level\n   * @param args  Accepts any number of arguments\n   */\n  public fatal(...args: any[]): void {\n    this._log(LogLevel.Fatal, args);\n  }\n}\n\n/**\n * Contract for any log appender (such as console/screen)\n */\nexport interface Appender {\n  /**\n   * Logs a message at the given [[LogLevel]]\n   * @param level  Level to log at\n   * @param args   Arguments to log\n   */\n  log(level: LogLevel, args: any[]): void;\n}\n\n/**\n * Console appender for browsers (i.e. `console.log`)\n */\nexport class ConsoleAppender implements Appender {\n  /**\n   * Logs a message at the given [[LogLevel]]\n   * @param level  Level to log at\n   * @param args   Arguments to log\n   */\n  public log(level: LogLevel, args: any[]): void {\n    // Check for console support\n    if (!console && !console.log && console.warn && console.error) {\n      // todo maybe do something better than nothing\n      return;\n    }\n\n    // Create a new console args array\n    const consoleArgs: any[] = [];\n    consoleArgs.unshift.apply(consoleArgs, args);\n    consoleArgs.unshift('[' + LogLevel[level] + '] : ');\n\n    if (level < LogLevel.Warn) {\n      // Call .log for Debug/Info\n      if (console.log.apply) {\n        // this is required on some older browsers that don't support apply on console.log :(\n        console.log.apply(console, consoleArgs);\n      } else {\n        console.log(consoleArgs.join(' '));\n      }\n    } else if (level < LogLevel.Error) {\n      // Call .warn for Warn\n      if (console.warn.apply) {\n        console.warn.apply(console, consoleArgs);\n      } else {\n        console.warn(consoleArgs.join(' '));\n      }\n    } else {\n      // Call .error for Error/Fatal\n      if (console.error.apply) {\n        console.error.apply(console, consoleArgs);\n      } else {\n        console.error(consoleArgs.join(' '));\n      }\n    }\n  }\n}\n\n/**\n * On-screen (canvas) appender\n */\nexport class ScreenAppender implements Appender {\n  // @todo Clean this up\n\n  private _messages: string[] = [];\n  private _canvas: HTMLCanvasElement;\n  private _ctx: CanvasRenderingContext2D;\n\n  /**\n   * @param width   Width of the screen appender in pixels\n   * @param height  Height of the screen appender in pixels\n   */\n  constructor(width?: number, height?: number) {\n    this._canvas = <HTMLCanvasElement>document.createElement('canvas');\n    this._canvas.width = width || window.innerWidth;\n    this._canvas.height = height || window.innerHeight;\n    this._canvas.style.position = 'absolute';\n    // eslint-disable-next-line\n    this._ctx = <CanvasRenderingContext2D>this._canvas.getContext('2d'); // eslint-disable-line\n    document.body.appendChild(this._canvas);\n  }\n\n  /**\n   * Logs a message at the given [[LogLevel]]\n   * @param level  Level to log at\n   * @param args   Arguments to log\n   */\n  public log(level: LogLevel, args: any[]): void {\n    const message = args.join(',');\n\n    this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\n\n    this._messages.unshift('[' + LogLevel[level] + '] : ' + message);\n\n    let pos = 10;\n    let opacity = 1.0;\n    for (let i = 0; i < this._messages.length; i++) {\n      this._ctx.fillStyle = 'rgba(255,255,255,' + opacity.toFixed(2) + ')';\n      this._ctx.fillText(this._messages[i], 200, pos);\n      pos += 10;\n      opacity = opacity > 0 ? opacity - 0.05 : 0;\n    }\n  }\n}\n", "import { Logger } from './Log';\nimport * as Util from './Util';\n\n/**\n * Obsolete decorator options\n */\nexport interface ObsoleteOptions {\n  // Optionally specify a custom message\n  message?: string;\n  // Optionally indicate that an alternate method to the obsolete one exists\n  alternateMethod?: string;\n  // Optional show stack trace, by default off\n  showStackTrace?: boolean;\n}\n\nexport const maxMessages = 5;\nconst obsoleteMessage: { [messageCount: string]: number } = {};\nexport const resetObsoleteCounter = () => {\n  for (const message in obsoleteMessage) {\n    obsoleteMessage[message] = 0;\n  }\n};\n\nconst logMessage = (message: string, options: ObsoleteOptions) => {\n  if (obsoleteMessage[message] < maxMessages) {\n    Logger.getInstance().warn(message);\n\n    // tslint:disable-next-line: no-console\n    if (console.trace && options.showStackTrace) {\n      // tslint:disable-next-line: no-console\n      console.trace();\n    }\n  }\n  obsoleteMessage[message]++;\n};\n\n/**\n * Obsolete decorator for marking Excalibur methods obsolete, you can optionally specify a custom message and/or alternate replacement\n * method do the deprecated one. Inspired by https://github.com/jayphelps/core-decorators.js\n */\nexport function obsolete(options?: ObsoleteOptions): any {\n  options = Util.extend(\n    {},\n    {\n      message: 'This feature will be removed in future versions of Excalibur.',\n      alternateMethod: null,\n      showStackTrack: false\n    },\n    options\n  );\n\n  return function(target: any, property: string, descriptor: PropertyDescriptor): any {\n    if (\n      descriptor &&\n      !(typeof descriptor.value === 'function' || typeof descriptor.get === 'function' || typeof descriptor.set === 'function')\n    ) {\n      throw new SyntaxError('Only classes/functions/getters/setters can be marked as obsolete');\n    }\n    const methodSignature = `${target.name || ''}${target.name && property ? '.' : ''}${property ? property : ''}`;\n\n    const message =\n      `${methodSignature} is marked obsolete: ${options.message}` +\n      (options.alternateMethod ? ` Use ${options.alternateMethod} instead` : '');\n\n    if (!obsoleteMessage[message]) {\n      obsoleteMessage[message] = 0;\n    }\n\n    // If descriptor is null it is a class\n    const method = descriptor ? { ...descriptor } : target;\n    if (!descriptor) {\n      const constructor = function() {\n        const args = Array.prototype.slice.call(arguments);\n        logMessage(message, options);\n        return new method(...args);\n      };\n      constructor.prototype = method.prototype;\n      return constructor;\n    }\n\n    if (descriptor && descriptor.value) {\n      method.value = function(this: any) {\n        logMessage(message, options);\n        return descriptor.value.apply(this, arguments);\n      };\n      return method;\n    }\n\n    if (descriptor && descriptor.get) {\n      method.get = function(this: any) {\n        logMessage(message, options);\n        return descriptor.get.apply(this, arguments);\n      };\n    }\n\n    if (descriptor && descriptor.set) {\n      method.set = function(this: any) {\n        logMessage(message, options);\n        return descriptor.set.apply(this, arguments);\n      };\n    }\n    return method;\n  };\n}\n", "import { Engine } from './Engine';\nimport * as Util from './Util/Util';\nimport { Clonable } from './Interfaces/Clonable';\nimport { obsolete } from './Util/Decorators';\n\n/**\n * A 2D vector on a plane.\n */\nexport class Vector implements Clonable<Vector> {\n  /**\n   * A (0, 0) vector\n   */\n  public static get Zero() {\n    return new Vector(0, 0);\n  }\n\n  /**\n   * A (1, 1) vector\n   */\n  public static get One() {\n    return new Vector(1, 1);\n  }\n\n  /**\n   * A (0.5, 0.5) vector\n   */\n  public static get Half() {\n    return new Vector(0.5, 0.5);\n  }\n\n  /**\n   * A unit vector pointing up (0, -1)\n   */\n  public static get Up() {\n    return new Vector(0, -1);\n  }\n\n  /**\n   * A unit vector pointing down (0, 1)\n   */\n  public static get Down() {\n    return new Vector(0, 1);\n  }\n\n  /**\n   * A unit vector pointing left (-1, 0)\n   */\n  public static get Left() {\n    return new Vector(-1, 0);\n  }\n  /**\n   * A unit vector pointing right (1, 0)\n   */\n  public static get Right() {\n    return new Vector(1, 0);\n  }\n\n  /**\n   * Returns a vector of unit length in the direction of the specified angle in Radians.\n   * @param angle The angle to generate the vector\n   */\n  public static fromAngle(angle: number) {\n    return new Vector(Math.cos(angle), Math.sin(angle));\n  }\n\n  /**\n   * Checks if vector is not null, undefined, or if any of its components are NaN or Infinity.\n   */\n  public static isValid(vec: Vector) {\n    if (vec === null || vec === undefined) {\n      return false;\n    }\n    if (isNaN(vec.x) || isNaN(vec.y)) {\n      return false;\n    }\n\n    if (vec.x === Infinity || vec.y === Infinity || vec.x === -Infinity || vec.y === -Infinity) {\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Calculates distance between two Vectors\n   * @param vec1\n   * @param vec2\n   */\n  public static distance(vec1: Vector, vec2: Vector) {\n    return Math.sqrt(Math.pow(vec1.x - vec2.x, 2) + Math.pow(vec1.y - vec2.y, 2));\n  }\n\n  /**\n   * @param x  X component of the Vector\n   * @param y  Y component of the Vector\n   */\n  constructor(public x: number, public y: number) {}\n\n  /**\n   * Sets the x and y components at once\n   */\n  public setTo(x: number, y: number) {\n    this.x = x;\n    this.y = y;\n  }\n\n  /**\n   * Compares this point against another and tests for equality\n   * @param point  The other point to compare to\n   */\n  public equals(vector: Vector, tolerance: number = 0.001): boolean {\n    return Math.abs(this.x - vector.x) <= tolerance && Math.abs(this.y - vector.y) <= tolerance;\n  }\n\n  /**\n   * The distance to another vector. If no other Vector is specified, this will return the [[magnitude]].\n   * @param v  The other vector. Leave blank to use origin vector.\n   */\n  public distance(v?: Vector): number {\n    if (!v) {\n      v = Vector.Zero;\n    }\n    return Math.sqrt(Math.pow(this.x - v.x, 2) + Math.pow(this.y - v.y, 2));\n  }\n\n  /**\n   * The magnitude (size) of the Vector\n   * @obsolete magnitude will be removed in favour of '.size' in version 0.25.0\n   */\n  @obsolete({ message: 'will be removed in favour of `.size` in version 0.25.0' })\n  public magnitude(): number {\n    return this.distance();\n  }\n\n  /**\n   * The size(magnitude) of the Vector\n   */\n  public get size(): number {\n    return this.distance();\n  }\n\n  public set size(newLength: number) {\n    const v = this.normalize().scale(newLength);\n    this.x = v.x;\n    this.y = v.y;\n  }\n\n  /**\n   * Normalizes a vector to have a magnitude of 1.\n   */\n  public normalize(): Vector {\n    const d = this.distance();\n    if (d > 0) {\n      return new Vector(this.x / d, this.y / d);\n    } else {\n      return new Vector(0, 1);\n    }\n  }\n\n  /**\n   * Returns the average (midpoint) between the current point and the specified\n   */\n  public average(vec: Vector): Vector {\n    return this.add(vec).scale(0.5);\n  }\n\n  /**\n   * Scales a vector's by a factor of size\n   * @param size  The factor to scale the magnitude by\n   */\n  public scale(scale: Vector): Vector;\n  public scale(size: number): Vector;\n  public scale(sizeOrScale: number | Vector): Vector {\n    if (sizeOrScale instanceof Vector) {\n      return new Vector(this.x * sizeOrScale.x, this.y * sizeOrScale.y);\n    } else {\n      return new Vector(this.x * sizeOrScale, this.y * sizeOrScale);\n    }\n  }\n\n  /**\n   * Adds one vector to another\n   * @param v The vector to add\n   */\n  public add(v: Vector): Vector {\n    return new Vector(this.x + v.x, this.y + v.y);\n  }\n\n  /**\n   * Subtracts a vector from another, if you subtract vector `B.sub(A)` the resulting vector points from A -> B\n   * @param v The vector to subtract\n   */\n  public sub(v: Vector): Vector {\n    return new Vector(this.x - v.x, this.y - v.y);\n  }\n\n  /**\n   * Adds one vector to this one modifying the original\n   * @param v The vector to add\n   */\n  public addEqual(v: Vector): Vector {\n    this.x += v.x;\n    this.y += v.y;\n    return this;\n  }\n\n  /**\n   * Subtracts a vector from this one modifying the original\n   * @parallel v The vector to subtract\n   */\n  public subEqual(v: Vector): Vector {\n    this.x -= v.x;\n    this.y -= v.y;\n    return this;\n  }\n\n  /**\n   * Scales this vector by a factor of size and modifies the original\n   */\n  public scaleEqual(size: number): Vector {\n    this.x *= size;\n    this.y *= size;\n    return this;\n  }\n\n  /**\n   * Performs a dot product with another vector\n   * @param v  The vector to dot\n   */\n  public dot(v: Vector): number {\n    return this.x * v.x + this.y * v.y;\n  }\n\n  /**\n   * Performs a 2D cross product with scalar. 2D cross products with a scalar return a vector.\n   * @param v  The scalar to cross\n   */\n  public cross(v: number): Vector;\n  /**\n   * Performs a 2D cross product with another vector. 2D cross products return a scalar value not a vector.\n   * @param v  The vector to cross\n   */\n  public cross(v: Vector): number;\n  public cross(v: any): any {\n    if (v instanceof Vector) {\n      return this.x * v.y - this.y * v.x;\n    } else if (typeof v === 'number') {\n      return new Vector(v * this.y, -v * this.x);\n    }\n  }\n\n  /**\n   * Returns the perpendicular vector to this one\n   */\n  public perpendicular(): Vector {\n    return new Vector(this.y, -this.x);\n  }\n\n  /**\n   * Returns the normal vector to this one, same as the perpendicular of length 1\n   */\n  public normal(): Vector {\n    return this.perpendicular().normalize();\n  }\n\n  /**\n   * Negate the current vector\n   */\n  public negate(): Vector {\n    return this.scale(-1);\n  }\n\n  /**\n   * Returns the angle of this vector.\n   */\n  public toAngle(): number {\n    return Math.atan2(this.y, this.x);\n  }\n\n  /**\n   * Rotates the current vector around a point by a certain number of\n   * degrees in radians\n   */\n  public rotate(angle: number, anchor?: Vector): Vector {\n    if (!anchor) {\n      anchor = new Vector(0, 0);\n    }\n    const sinAngle = Math.sin(angle);\n    const cosAngle = Math.cos(angle);\n    const x = cosAngle * (this.x - anchor.x) - sinAngle * (this.y - anchor.y) + anchor.x;\n    const y = sinAngle * (this.x - anchor.x) + cosAngle * (this.y - anchor.y) + anchor.y;\n    return new Vector(x, y);\n  }\n\n  /**\n   * Creates new vector that has the same values as the previous.\n   */\n  public clone(): Vector {\n    return new Vector(this.x, this.y);\n  }\n\n  /**\n   * Returns a string representation of the vector.\n   */\n  public toString(): string {\n    return `(${this.x}, ${this.y})`;\n  }\n}\n\n/**\n * A 2D ray that can be cast into the scene to do collision detection\n */\nexport class Ray {\n  public pos: Vector;\n  public dir: Vector;\n\n  /**\n   * @param pos The starting position for the ray\n   * @param dir The vector indicating the direction of the ray\n   */\n  constructor(pos: Vector, dir: Vector) {\n    this.pos = pos;\n    this.dir = dir.normalize();\n  }\n\n  /**\n   * Tests a whether this ray intersects with a line segment. Returns a number greater than or equal to 0 on success.\n   * This number indicates the mathematical intersection time.\n   * @param line  The line to test\n   */\n  public intersect(line: Line): number {\n    const numerator = line.begin.sub(this.pos);\n\n    // Test is line and ray are parallel and non intersecting\n    if (this.dir.cross(line.getSlope()) === 0 && numerator.cross(this.dir) !== 0) {\n      return -1;\n    }\n\n    // Lines are parallel\n    const divisor = this.dir.cross(line.getSlope());\n    if (divisor === 0) {\n      return -1;\n    }\n\n    const t = numerator.cross(line.getSlope()) / divisor;\n\n    if (t >= 0) {\n      const u = numerator.cross(this.dir) / divisor / line.getLength();\n      if (u >= 0 && u <= 1) {\n        return t;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * Returns the point of intersection given the intersection time\n   */\n  public getPoint(time: number): Vector {\n    return this.pos.add(this.dir.scale(time));\n  }\n}\n\n/**\n * A 2D line segment\n */\nexport class Line {\n  /**\n   * @param begin  The starting point of the line segment\n   * @param end  The ending point of the line segment\n   */\n  constructor(public begin: Vector, public end: Vector) {}\n\n  /**\n   * Gets the raw slope (m) of the line. Will return (+/-)Infinity for vertical lines.\n   */\n  public get slope() {\n    return (this.end.y - this.begin.y) / (this.end.x - this.begin.x);\n  }\n\n  /**\n   * Gets the Y-intercept (b) of the line. Will return (+/-)Infinity if there is no intercept.\n   */\n  public get intercept() {\n    return this.begin.y - this.slope * this.begin.x;\n  }\n\n  /**\n   * Gets the normal of the line\n   */\n  public normal(): Vector {\n    return this.end.sub(this.begin).normal();\n  }\n\n  /**\n   * Returns the slope of the line in the form of a vector of length 1\n   */\n  public getSlope(): Vector {\n    const begin = this.begin;\n    const end = this.end;\n    const distance = begin.distance(end);\n    return end.sub(begin).scale(1 / distance);\n  }\n\n  /**\n   * Returns the edge of the line as vector, the length of the vector is the length of the edge\n   */\n  public getEdge(): Vector {\n    const begin = this.begin;\n    const end = this.end;\n    return end.sub(begin);\n  }\n\n  /**\n   * Returns the length of the line segment in pixels\n   */\n  public getLength(): number {\n    const begin = this.begin;\n    const end = this.end;\n    const distance = begin.distance(end);\n    return distance;\n  }\n\n  /**\n   * Returns the midpoint of the edge\n   */\n  public get midpoint(): Vector {\n    return this.begin.add(this.end).scale(0.5);\n  }\n\n  /**\n   * Flips the direction of the line segment\n   */\n  public flip(): Line {\n    return new Line(this.end, this.begin);\n  }\n\n  /**\n   * Find the perpendicular distance from the line to a point\n   * https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\n   * @param point\n   */\n  public distanceToPoint(point: Vector) {\n    const x0 = point.x;\n    const y0 = point.y;\n\n    const l = this.getLength();\n\n    const dy = this.end.y - this.begin.y;\n    const dx = this.end.x - this.begin.x;\n    const distance = Math.abs(dy * x0 - dx * y0 + this.end.x * this.begin.y - this.end.y * this.begin.x) / l;\n    return distance;\n  }\n\n  /**\n   * Find the perpendicular line from the line to a point\n   * https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\n   * (a - p) - ((a - p) * n)n\n   * a is a point on the line\n   * p is the arbitrary point above the line\n   * n is a unit vector in direction of the line\n   * @param point\n   */\n  public findVectorToPoint(point: Vector): Vector {\n    const aMinusP = this.begin.sub(point);\n    const n = this.getSlope();\n\n    return aMinusP.sub(n.scale(aMinusP.dot(n)));\n  }\n\n  /**\n   * Finds a point on the line given only an X or a Y value. Given an X value, the function returns\n   * a new point with the calculated Y value and vice-versa.\n   *\n   * @param x The known X value of the target point\n   * @param y The known Y value of the target point\n   * @returns A new point with the other calculated axis value\n   */\n  public findPoint(x: number = null, y: number = null): Vector {\n    const m = this.slope;\n    const b = this.intercept;\n\n    if (x !== null) {\n      return new Vector(x, m * x + b);\n    } else if (y !== null) {\n      return new Vector((y - b) / m, y);\n    } else {\n      throw new Error('You must provide an X or a Y value');\n    }\n  }\n\n  /**\n   * Whether or not the given point lies on this line. This method is precise by default\n   * meaning the point must lie exactly on the line. Adjust threshold to\n   * loosen the strictness of the check for floating-point calculations.\n   */\n  public hasPoint(x: number, y: number, threshold?: number): boolean;\n\n  /**\n   * Whether or not the given point lies on this line. This method is precise by default\n   * meaning the point must lie exactly on the line. Adjust threshold to\n   * loosen the strictness of the check for floating-point calculations.\n   */\n  public hasPoint(v: Vector, threshold?: number): boolean;\n\n  /**\n   * @see http://stackoverflow.com/a/11908158/109458\n   */\n  public hasPoint(): boolean {\n    let currPoint: Vector;\n    let threshold = 0;\n\n    if (typeof arguments[0] === 'number' && typeof arguments[1] === 'number') {\n      currPoint = new Vector(arguments[0], arguments[1]);\n      threshold = arguments[2] || 0;\n    } else if (arguments[0] instanceof Vector) {\n      currPoint = arguments[0];\n      threshold = arguments[1] || 0;\n    } else {\n      throw 'Could not determine the arguments for Vector.hasPoint';\n    }\n\n    const dxc = currPoint.x - this.begin.x;\n    const dyc = currPoint.y - this.begin.y;\n\n    const dx1 = this.end.x - this.begin.x;\n    const dy1 = this.end.y - this.begin.y;\n\n    const cross = dxc * dy1 - dyc * dx1;\n\n    // check whether point lines on the line\n    if (Math.abs(cross) > threshold) {\n      return false;\n    }\n\n    // check whether point lies in-between start and end\n    if (Math.abs(dx1) >= Math.abs(dy1)) {\n      return dx1 > 0 ? this.begin.x <= currPoint.x && currPoint.x <= this.end.x : this.end.x <= currPoint.x && currPoint.x <= this.begin.x;\n    } else {\n      return dy1 > 0 ? this.begin.y <= currPoint.y && currPoint.y <= this.end.y : this.end.y <= currPoint.y && currPoint.y <= this.begin.y;\n    }\n  }\n}\n\n/**\n * A 1 dimensional projection on an axis, used to test overlaps\n */\nexport class Projection {\n  constructor(public min: number, public max: number) {}\n  public overlaps(projection: Projection): boolean {\n    return this.max > projection.min && projection.max > this.min;\n  }\n\n  public getOverlap(projection: Projection): number {\n    if (this.overlaps(projection)) {\n      if (this.max > projection.max) {\n        return projection.max - this.min;\n      } else {\n        return this.max - projection.min;\n      }\n    }\n    return 0;\n  }\n}\n\nexport class GlobalCoordinates {\n  public static fromPagePosition(x: number, y: number, engine: Engine): GlobalCoordinates;\n  public static fromPagePosition(pos: Vector, engine: Engine): GlobalCoordinates;\n  public static fromPagePosition(xOrPos: number | Vector, yOrEngine: number | Engine, engineOrUndefined?: Engine): GlobalCoordinates {\n    let pageX: number;\n    let pageY: number;\n    let pagePos: Vector;\n    let engine: Engine;\n\n    if (arguments.length === 3) {\n      pageX = <number>xOrPos;\n      pageY = <number>yOrEngine;\n      pagePos = new Vector(pageX, pageY);\n      engine = engineOrUndefined;\n    } else {\n      pagePos = <Vector>xOrPos;\n      pageX = pagePos.x;\n      pageY = pagePos.y;\n      engine = <Engine>yOrEngine;\n    }\n\n    const screenX: number = pageX - Util.getPosition(engine.canvas).x;\n    const screenY: number = pageY - Util.getPosition(engine.canvas).y;\n    const screenPos = new Vector(screenX, screenY);\n    const worldPos = engine.screenToWorldCoordinates(screenPos);\n\n    return new GlobalCoordinates(worldPos, pagePos, screenPos);\n  }\n\n  constructor(public worldPos: Vector, public pagePos: Vector, public screenPos: Vector) {}\n}\n\n/**\n * Shorthand for creating new Vectors - returns a new Vector instance with the\n * provided X and Y components.\n *\n * @param x  X component of the Vector\n * @param y  Y component of the Vector\n */\nexport function vec(x: number, y: number): Vector {\n  return new Vector(x, y);\n}\n", "import { Vector } from './Algebra';\nimport { obsolete } from './Util/Decorators';\n\n/**\n * Possible collision resolution strategies\n *\n * The default is [[CollisionResolutionStrategy.Box]] which performs simple axis aligned arcade style physics.\n *\n * More advanced rigid body physics are enabled by setting [[CollisionResolutionStrategy.RigidBody]] which allows for complicated\n * simulated physical interactions.\n */\nexport enum CollisionResolutionStrategy {\n  Box,\n  RigidBody\n}\n\n/**\n * Possible broadphase collision pair identification strategies\n *\n * The default strategy is [[BroadphaseStrategy.DynamicAABBTree]] which uses a binary tree of axis-aligned bounding boxes to identify\n * potential collision pairs which is O(nlog(n)) faster. The other possible strategy is the [[BroadphaseStrategy.Naive]] strategy\n * which loops over every object for every object in the scene to identify collision pairs which is O(n^2) slower.\n */\nexport enum BroadphaseStrategy {\n  Naive,\n  DynamicAABBTree\n}\n\n/**\n * Possible numerical integrators for position and velocity\n */\nexport enum Integrator {\n  Euler\n}\n\n/**\n * The [[Physics]] object is the global configuration object for all Excalibur physics.\n *\n * [[include:Physics.md]]\n */\n/* istanbul ignore next */\nexport class Physics {\n  /**\n   * Global acceleration that is applied to all vanilla actors that have a [[CollisionType.Active|active]] collision type.\n   * Global acceleration won't effect [[Label|labels]], [[ScreenElement|ui actors]], or [[Trigger|triggers]] in Excalibur.\n   *\n   * This is a great way to globally simulate effects like gravity.\n   */\n  public static acc = new Vector(0, 0);\n\n  /**\n   * Globally switches all Excalibur physics behavior on or off.\n   */\n  public static enabled = true;\n\n  /**\n   * Gets or sets the number of collision passes for Excalibur to perform on physics bodies.\n   *\n   * Reducing collision passes may cause things not to collide as expected in your game, but may increase performance.\n   *\n   * More passes can improve the visual quality of collisions when many objects are on the screen. This can reduce jitter, improve the\n   * collision resolution of fast move objects, or the stability of large numbers of objects stacked together.\n   *\n   * Fewer passes will improve the performance of the game at the cost of collision quality, more passes will improve quality at the\n   * cost of performance.\n   *\n   * The default is set to 5 passes which is a good start.\n   */\n  public static collisionPasses = 5;\n\n  /**\n   * Gets or sets the broadphase pair identification strategy.\n   *\n   * The default strategy is [[BroadphaseStrategy.DynamicAABBTree]] which uses a binary tree of axis-aligned bounding boxes to identify\n   * potential collision pairs which is O(nlog(n)) faster. The other possible strategy is the [[BroadphaseStrategy.Naive]] strategy\n   * which loops over every object for every object in the scene to identify collision pairs which is O(n^2) slower.\n   */\n  public static broadphaseStrategy: BroadphaseStrategy = BroadphaseStrategy.DynamicAABBTree;\n\n  /**\n   * Globally switches the debug information for the broadphase strategy\n   */\n  public static broadphaseDebug: boolean = false;\n  /**\n   * Show the normals as a result of collision on the screen.\n   */\n  public static showCollisionNormals: boolean = false;\n  /**\n   * Show the position, velocity, and acceleration as graphical vectors.\n   */\n  public static showMotionVectors: boolean = false;\n  /**\n   * Show the axis-aligned bounding boxes of the collision bodies on the screen.\n   */\n  public static showBounds: boolean = false;\n  /**\n   * Show the bounding collision area shapes\n   */\n  public static showArea: boolean = false;\n  /**\n   * Show points of collision interpreted by excalibur as a result of collision.\n   */\n  public static showContacts: boolean = false;\n  /**\n   * Show the surface normals of the collision areas.\n   */\n  public static showNormals: boolean = false;\n  /**\n   * Gets or sets the global collision resolution strategy (narrowphase).\n   *\n   * The default is [[CollisionResolutionStrategy.Box]] which performs simple axis aligned arcade style physics.\n   *\n   * More advanced rigid body physics are enabled by setting [[CollisionResolutionStrategy.RigidBody]] which allows for complicated\n   * simulated physical interactions.\n   */\n  public static collisionResolutionStrategy: CollisionResolutionStrategy = CollisionResolutionStrategy.Box;\n  /**\n   * The default mass to use if none is specified\n   */\n  public static defaultMass: number = 10;\n  /**\n   * Gets or sets the position and velocity positional integrator, currently only Euler is supported.\n   */\n  public static integrator: Integrator = Integrator.Euler;\n  /**\n   * Number of steps to use in integration. A higher number improves the positional accuracy over time. This can be useful to increase\n   * if you have fast moving objects in your simulation or you have a large number of objects and need to increase stability.\n   */\n  public static integrationSteps = 1;\n  /**\n   * Gets or sets whether rotation is allowed in a RigidBody collision resolution\n   */\n  public static allowRigidBodyRotation = true;\n\n  /**\n   * Configures Excalibur to use box physics. Box physics which performs simple axis aligned arcade style physics.\n   */\n  public static useBoxPhysics(): void {\n    Physics.collisionResolutionStrategy = CollisionResolutionStrategy.Box;\n  }\n\n  /**\n   * Configures Excalibur to use rigid body physics. Rigid body physics allows for complicated\n   * simulated physical interactions.\n   */\n  public static useRigidBodyPhysics(): void {\n    Physics.collisionResolutionStrategy = CollisionResolutionStrategy.RigidBody;\n  }\n\n  /**\n   * Small value to help collision passes settle themselves after the narrowphase.\n   */\n  public static collisionShift = 0.001;\n\n  /**\n   * Factor to add to the RigidBody BoundingBox, bounding box (dimensions += vel * dynamicTreeVelocityMultiplier);\n   */\n  public static dynamicTreeVelocityMultiplier = 2;\n\n  @obsolete({\n    message: 'Alias for incorrect spelling used in older versions, will be removed in v0.25.0',\n    alternateMethod: 'dynamicTreeVelocityMultiplier'\n  })\n  public static get dynamicTreeVelocityMultiplyer() {\n    return Physics.dynamicTreeVelocityMultiplier;\n  }\n\n  public static set dynamicTreeVelocityMultiplyer(value: number) {\n    Physics.dynamicTreeVelocityMultiplier = value;\n  }\n\n  /**\n   * Pad RigidBody BoundingBox by a constant amount\n   */\n  public static boundsPadding = 5;\n\n  /**\n   * Surface epsilon is used to help deal with surface penetration\n   */\n  public static surfaceEpsilon = 0.1;\n\n  /**\n   * Enable fast moving body checking, this enables checking for collision pairs via raycast for fast moving objects to prevent\n   * bodies from tunneling through one another.\n   */\n  public static checkForFastBodies = true;\n\n  /**\n   * Disable minimum fast moving body raycast, by default if ex.Physics.checkForFastBodies = true Excalibur will only check if the\n   * body is moving at least half of its minimum dimension in an update. If ex.Physics.disableMinimumSpeedForFastBody is set to true,\n   * Excalibur will always perform the fast body raycast regardless of speed.\n   */\n  public static disableMinimumSpeedForFastBody = false;\n}\n", "import { obsolete } from '../Util/Decorators';\n\n/**\n * Provides standard colors (e.g. [[Color.Black]])\n * but you can also create custom colors using RGB, HSL, or Hex. Also provides\n * useful color operations like [[Color.lighten]], [[Color.darken]], and more.\n *\n * [[include:Colors.md]]\n */\nexport class Color {\n  /**\n   * Red channel\n   */\n  public r: number;\n  /**\n   * Green channel\n   */\n  public g: number;\n  /**\n   * Blue channel\n   */\n  public b: number;\n  /**\n   * Alpha channel (between 0 and 1)\n   */\n  public a: number;\n\n  /**\n   * Hue\n   */\n  public h: number;\n  /**\n   * Saturation\n   */\n  public s: number;\n  /**\n   * Lightness\n   */\n  public l: number;\n\n  /**\n   * Creates a new instance of Color from an r, g, b, a\n   *\n   * @param r  The red component of color (0-255)\n   * @param g  The green component of color (0-255)\n   * @param b  The blue component of color (0-255)\n   * @param a  The alpha component of color (0-1.0)\n   */\n  constructor(r: number, g: number, b: number, a?: number) {\n    this.r = r;\n    this.g = g;\n    this.b = b;\n    this.a = a != null ? a : 1;\n  }\n\n  /**\n   * Creates a new instance of Color from an r, g, b, a\n   *\n   * @param r  The red component of color (0-255)\n   * @param g  The green component of color (0-255)\n   * @param b  The blue component of color (0-255)\n   * @param a  The alpha component of color (0-1.0)\n   */\n  public static fromRGB(r: number, g: number, b: number, a?: number): Color {\n    return new Color(r, g, b, a);\n  }\n\n  /**\n   * Creates a new instance of Color from a hex string\n   *\n   * @param hex  CSS color string of the form #ffffff, the alpha component is optional\n   */\n  public static fromHex(hex: string): Color {\n    const hexRegEx: RegExp = /^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i;\n    let match = null;\n    if ((match = hex.match(hexRegEx))) {\n      const r = parseInt(match[1], 16);\n      const g = parseInt(match[2], 16);\n      const b = parseInt(match[3], 16);\n      let a = 1;\n      if (match[4]) {\n        a = parseInt(match[4], 16) / 255;\n      }\n      return new Color(r, g, b, a);\n    } else {\n      throw new Error('Invalid hex string: ' + hex);\n    }\n  }\n\n  /**\n   * Creates a new instance of Color from hsla values\n   *\n   * @param h  Hue is represented [0-1]\n   * @param s  Saturation is represented [0-1]\n   * @param l  Luminance is represented [0-1]\n   * @param a  Alpha is represented [0-1]\n   */\n  public static fromHSL(h: number, s: number, l: number, a: number = 1.0): Color {\n    const temp = new HSLColor(h, s, l, a);\n    return temp.toRGBA();\n  }\n\n  /**\n   * Lightens the current color by a specified amount\n   *\n   * @param factor  The amount to lighten by [0-1]\n   */\n  public lighten(factor: number = 0.1): Color {\n    const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\n    temp.l += (1 - temp.l) * factor;\n    return temp.toRGBA();\n  }\n\n  /**\n   * Darkens the current color by a specified amount\n   *\n   * @param factor  The amount to darken by [0-1]\n   */\n  public darken(factor: number = 0.1): Color {\n    const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\n    temp.l -= temp.l * factor;\n    return temp.toRGBA();\n  }\n\n  /**\n   * Saturates the current color by a specified amount\n   *\n   * @param factor  The amount to saturate by [0-1]\n   */\n  public saturate(factor: number = 0.1): Color {\n    const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\n    temp.s += temp.s * factor;\n    return temp.toRGBA();\n  }\n\n  /**\n   * Desaturates the current color by a specified amount\n   *\n   * @param factor  The amount to desaturate by [0-1]\n   */\n  public desaturate(factor: number = 0.1): Color {\n    const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\n    temp.s -= temp.s * factor;\n    return temp.toRGBA();\n  }\n\n  /**\n   * Multiplies a color by another, results in a darker color\n   *\n   * @param color  The other color\n   */\n  public multiply(color: Color): Color {\n    const newR = (((color.r / 255) * this.r) / 255) * 255;\n    const newG = (((color.g / 255) * this.g) / 255) * 255;\n    const newB = (((color.b / 255) * this.b) / 255) * 255;\n    const newA = color.a * this.a;\n    return new Color(newR, newG, newB, newA);\n  }\n\n  /**\n   * Multiplies a color by another, results in a darker color\n   * @param color\n   * @obsolete Alias for incorrect spelling used in older versions, use multiply instead, will be removed in v0.25.0\n   */\n  @obsolete({ message: 'Alias for incorrect spelling used in older versions, use multiply instead, will be removed in v0.25.0' })\n  public mulitiply(color: Color): Color {\n    return this.multiply(color);\n  }\n\n  /**\n   * Screens a color by another, results in a lighter color\n   *\n   * @param color  The other color\n   */\n  public screen(color: Color): Color {\n    const color1 = color.invert();\n    const color2 = color.invert();\n    return color1.multiply(color2).invert();\n  }\n\n  /**\n   * Inverts the current color\n   */\n  public invert(): Color {\n    return new Color(255 - this.r, 255 - this.g, 255 - this.b, 1.0 - this.a);\n  }\n\n  /**\n   * Averages the current color with another\n   *\n   * @param color  The other color\n   */\n  public average(color: Color): Color {\n    const newR = (color.r + this.r) / 2;\n    const newG = (color.g + this.g) / 2;\n    const newB = (color.b + this.b) / 2;\n    const newA = (color.a + this.a) / 2;\n    return new Color(newR, newG, newB, newA);\n  }\n\n  /**\n   * Returns a CSS string representation of a color.\n   *\n   * @param format Color representation, accepts: rgb, hsl, or hex\n   */\n  public toString(format: 'rgb' | 'hsl' | 'hex' = 'rgb') {\n    switch (format) {\n      case 'rgb':\n        return this.toRGBA();\n      case 'hsl':\n        return this.toHSLA();\n      case 'hex':\n        return this.toHex();\n      default:\n        throw new Error('Invalid Color format');\n    }\n  }\n\n  /**\n   * Returns Hex Value of a color component\n   * @param c color component\n   * @see https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\n   */\n  private _componentToHex(c: number) {\n    const hex = c.toString(16);\n    return hex.length === 1 ? '0' + hex : hex;\n  }\n\n  /**\n   * Return Hex representation of a color.\n   */\n  public toHex() {\n    return '#' + this._componentToHex(this.r) + this._componentToHex(this.g) + this._componentToHex(this.b);\n  }\n\n  /**\n   * Return RGBA representation of a color.\n   */\n  public toRGBA() {\n    const result = String(this.r.toFixed(0)) + ', ' + String(this.g.toFixed(0)) + ', ' + String(this.b.toFixed(0));\n    if (this.a !== undefined || this.a !== null) {\n      return 'rgba(' + result + ', ' + String(this.a) + ')';\n    }\n    return 'rgb(' + result + ')';\n  }\n\n  /**\n   * Return HSLA representation of a color.\n   */\n  public toHSLA() {\n    return HSLColor.fromRGBA(this.r, this.g, this.b, this.a).toString();\n  }\n\n  /**\n   * Returns a CSS string representation of a color.\n   */\n  public fillStyle() {\n    return this.toString();\n  }\n\n  /**\n   * Returns a clone of the current color.\n   */\n  public clone(): Color {\n    return new Color(this.r, this.g, this.b, this.a);\n  }\n\n  /**\n   * Black (#000000)\n   */\n  public static get Black(): Color {\n    return Color.fromHex('#000000');\n  }\n\n  /**\n   * White (#FFFFFF)\n   */\n  public static get White(): Color {\n    return Color.fromHex('#FFFFFF');\n  }\n\n  /**\n   * Gray (#808080)\n   */\n  public static get Gray(): Color {\n    return Color.fromHex('#808080');\n  }\n\n  /**\n   * Light gray (#D3D3D3)\n   */\n  public static get LightGray(): Color {\n    return Color.fromHex('#D3D3D3');\n  }\n\n  /**\n   * Dark gray (#A9A9A9)\n   */\n  public static get DarkGray(): Color {\n    return Color.fromHex('#A9A9A9');\n  }\n\n  /**\n   * Yellow (#FFFF00)\n   */\n  public static get Yellow(): Color {\n    return Color.fromHex('#FFFF00');\n  }\n\n  /**\n   * Orange (#FFA500)\n   */\n  public static get Orange(): Color {\n    return Color.fromHex('#FFA500');\n  }\n\n  /**\n   * Red (#FF0000)\n   */\n  public static get Red(): Color {\n    return Color.fromHex('#FF0000');\n  }\n\n  /**\n   * Vermilion (#FF5B31)\n   */\n  public static get Vermilion(): Color {\n    return Color.fromHex('#FF5B31');\n  }\n\n  /**\n   * Vermilion (#FF5B31)\n   * @obsolete Alias for incorrect spelling used in older versions, use multiply instead, will be removed in v0.25.0\n   */\n  @obsolete({\n    message: 'Alias for incorrect spelling used in older versions',\n    alternateMethod: 'Vermilion'\n  })\n  public static get Vermillion(): Color {\n    return Color.Vermilion;\n  }\n\n  /**\n   * Rose (#FF007F)\n   */\n  public static get Rose(): Color {\n    return Color.fromHex('#FF007F');\n  }\n\n  /**\n   * Magenta (#FF00FF)\n   */\n  public static get Magenta(): Color {\n    return Color.fromHex('#FF00FF');\n  }\n\n  /**\n   * Violet (#7F00FF)\n   */\n  public static get Violet(): Color {\n    return Color.fromHex('#7F00FF');\n  }\n\n  /**\n   * Blue (#0000FF)\n   */\n  public static get Blue(): Color {\n    return Color.fromHex('#0000FF');\n  }\n\n  /**\n   * Azure (#007FFF)\n   */\n  public static get Azure(): Color {\n    return Color.fromHex('#007FFF');\n  }\n\n  /**\n   * Cyan (#00FFFF)\n   */\n  public static get Cyan(): Color {\n    return Color.fromHex('#00FFFF');\n  }\n\n  /**\n   * Viridian (#59978F)\n   */\n  public static get Viridian(): Color {\n    return Color.fromHex('#59978F');\n  }\n\n  /**\n   * Green (#00FF00)\n   */\n  public static get Green(): Color {\n    return Color.fromHex('#00FF00');\n  }\n\n  /**\n   * Chartreuse (#7FFF00)\n   */\n  public static get Chartreuse(): Color {\n    return Color.fromHex('#7FFF00');\n  }\n\n  /**\n   * Transparent (#FFFFFF00)\n   */\n  public static get Transparent(): Color {\n    return Color.fromHex('#FFFFFF00');\n  }\n}\n\n/**\n * Internal HSL Color representation\n *\n * http://en.wikipedia.org/wiki/HSL_and_HSV\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\n */\nclass HSLColor {\n  constructor(public h: number, public s: number, public l: number, public a: number) {}\n\n  public static hue2rgb(p: number, q: number, t: number): number {\n    if (t < 0) {\n      t += 1;\n    }\n    if (t > 1) {\n      t -= 1;\n    }\n    if (t < 1 / 6) {\n      return p + (q - p) * 6 * t;\n    }\n    if (t < 1 / 2) {\n      return q;\n    }\n    if (t < 2 / 3) {\n      return p + (q - p) * (2 / 3 - t) * 6;\n    }\n    return p;\n  }\n\n  public static fromRGBA(r: number, g: number, b: number, a: number): HSLColor {\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    const max = Math.max(r, g, b),\n      min = Math.min(r, g, b);\n    let h, s;\n    const l = (max + min) / 2;\n\n    if (max === min) {\n      h = s = 0; // achromatic\n    } else {\n      const d = max - min;\n      s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n      switch (max) {\n        case r:\n          h = (g - b) / d + (g < b ? 6 : 0);\n          break;\n        case g:\n          h = (b - r) / d + 2;\n          break;\n        case b:\n          h = (r - g) / d + 4;\n          break;\n      }\n      h /= 6;\n    }\n\n    return new HSLColor(h, s, l, a);\n  }\n\n  public toRGBA(): Color {\n    let r: number, g: number, b: number;\n\n    if (this.s === 0) {\n      r = g = b = this.l; // achromatic\n    } else {\n      const q = this.l < 0.5 ? this.l * (1 + this.s) : this.l + this.s - this.l * this.s;\n      const p = 2 * this.l - q;\n      r = HSLColor.hue2rgb(p, q, this.h + 1 / 3);\n      g = HSLColor.hue2rgb(p, q, this.h);\n      b = HSLColor.hue2rgb(p, q, this.h - 1 / 3);\n    }\n\n    return new Color(r * 255, g * 255, b * 255, this.a);\n  }\n\n  public toString(): string {\n    const h = this.h.toFixed(0),\n      s = this.s.toFixed(0),\n      l = this.l.toFixed(0),\n      a = this.a.toFixed(0);\n    return `hsla(${h}, ${s}, ${l}, ${a})`;\n  }\n}\n", "import { Scene } from './Scene';\nimport { Vector } from './Algebra';\nimport { Actor } from './Actor';\nimport { Trigger } from './Trigger';\nimport { FrameStats } from './Debug';\nimport { Engine } from './Engine';\nimport { TileMap } from './TileMap';\nimport { Side } from './Collision/Side';\nimport * as Input from './Input/Index';\nimport { Pair } from './index';\nimport { Collider } from './Collision/Collider';\nimport { Entity } from './EntityComponentSystem/Entity';\nimport { OnInitialize, OnPreUpdate, OnPostUpdate } from './Interfaces/LifecycleEvents';\n\nexport enum EventTypes {\n  Kill = 'kill',\n  PreKill = 'prekill',\n  PostKill = 'postkill',\n\n  PreDraw = 'predraw',\n  PostDraw = 'postdraw',\n\n  PreDebugDraw = 'predebugdraw',\n  PostDebugDraw = 'postdebugdraw',\n\n  PreUpdate = 'preupdate',\n  PostUpdate = 'postupdate',\n\n  PreFrame = 'preframe',\n  PostFrame = 'postframe',\n\n  PreCollision = 'precollision',\n  CollisionStart = 'collisionstart',\n  CollisionEnd = 'collisionend',\n  PostCollision = 'postcollision',\n\n  Initialize = 'initialize',\n  Activate = 'activate',\n  Deactivate = 'deactivate',\n\n  ExitViewport = 'exitviewport',\n  EnterViewport = 'enterviewport',\n\n  ExitTrigger = 'exit',\n  EnterTrigger = 'enter',\n\n  Connect = 'connect',\n  Disconnect = 'disconnect',\n  Button = 'button',\n  Axis = 'axis',\n\n  Subscribe = 'subscribe',\n  Unsubscribe = 'unsubscribe',\n\n  Visible = 'visible',\n  Hidden = 'hidden',\n  Start = 'start',\n  Stop = 'stop',\n\n  PointerUp = 'pointerup',\n  PointerDown = 'pointerdown',\n  PointerMove = 'pointermove',\n  PointerEnter = 'pointerenter',\n  PointerLeave = 'pointerleave',\n  PointerCancel = 'pointercancel',\n  PointerWheel = 'pointerwheel',\n\n  Up = 'up',\n  Down = 'down',\n  Move = 'move',\n  Enter = 'enter',\n  Leave = 'leave',\n  Cancel = 'cancel',\n  Wheel = 'wheel',\n\n  Press = 'press',\n  Release = 'release',\n  Hold = 'hold',\n\n  PointerDragStart = 'pointerdragstart',\n  PointerDragEnd = 'pointerdragend',\n  PointerDragEnter = 'pointerdragenter',\n  PointerDragLeave = 'pointerdragleave',\n  PointerDragMove = 'pointerdragmove'\n}\n\n/* istanbul ignore next */\n/* compiler only: these are internal to lib */\nexport type kill = 'kill';\nexport type prekill = 'prekill';\nexport type postkill = 'postkill';\n\nexport type predraw = 'predraw';\nexport type postdraw = 'postdraw';\n\nexport type predebugdraw = 'predebugdraw';\nexport type postdebugdraw = 'postdebugdraw';\n\nexport type preupdate = 'preupdate';\nexport type postupdate = 'postupdate';\n\nexport type preframe = 'preframe';\nexport type postframe = 'postframe';\n\nexport type precollision = 'precollision';\nexport type collisionstart = 'collisionstart';\nexport type collisionend = 'collisionend';\nexport type postcollision = 'postcollision';\n\nexport type initialize = 'initialize';\nexport type activate = 'activate';\nexport type deactivate = 'deactivate';\n\nexport type exitviewport = 'exitviewport';\nexport type enterviewport = 'enterviewport';\n\nexport type exittrigger = 'exit';\nexport type entertrigger = 'enter';\n\nexport type connect = 'connect';\nexport type disconnect = 'disconnect';\nexport type button = 'button';\nexport type axis = 'axis';\n\nexport type subscribe = 'subscribe';\nexport type unsubscribe = 'unsubscribe';\n\nexport type visible = 'visible';\nexport type hidden = 'hidden';\nexport type start = 'start';\nexport type stop = 'stop';\n\nexport type pointerup = 'pointerup';\nexport type pointerdown = 'pointerdown';\nexport type pointermove = 'pointermove';\nexport type pointerenter = 'pointerenter';\nexport type pointerleave = 'pointerleave';\nexport type pointercancel = 'pointercancel';\nexport type pointerwheel = 'pointerwheel';\n\nexport type up = 'up';\nexport type down = 'down';\nexport type move = 'move';\nexport type enter = 'enter';\nexport type leave = 'leave';\nexport type cancel = 'cancel';\nexport type wheel = 'wheel';\n\nexport type press = 'press';\nexport type release = 'release';\nexport type hold = 'hold';\n\nexport type pointerdragstart = 'pointerdragstart';\nexport type pointerdragend = 'pointerdragend';\nexport type pointerdragenter = 'pointerdragenter';\nexport type pointerdragleave = 'pointerdragleave';\nexport type pointerdragmove = 'pointerdragmove';\n\n/**\n * Base event type in Excalibur that all other event types derive from. Not all event types are thrown on all Excalibur game objects,\n * some events are unique to a type, others are not.\n *\n */\nexport class GameEvent<T, U = T> {\n  /**\n   * Target object for this event.\n   */\n  public target: T;\n\n  /**\n   * Other target object for this event\n   */\n  public other: U | null;\n\n  /**\n   * If set to false, prevents event from propagating to other actors. If true it will be propagated\n   * to all actors that apply.\n   */\n  public get bubbles(): boolean {\n    return this._bubbles;\n  }\n\n  public set bubbles(value: boolean) {\n    this._bubbles = value;\n  }\n\n  private _bubbles: boolean = true;\n  /**\n   * Prevents event from bubbling\n   */\n  public stopPropagation() {\n    this.bubbles = false;\n  }\n}\n\n/**\n * The 'kill' event is emitted on actors when it is killed. The target is the actor that was killed.\n */\nexport class KillEvent extends GameEvent<Actor> {\n  constructor(public target: Actor) {\n    super();\n  }\n}\n\n/**\n * The 'prekill' event is emitted directly before an actor is killed.\n */\nexport class PreKillEvent extends GameEvent<Actor> {\n  constructor(public target: Actor) {\n    super();\n  }\n}\n\n/**\n * The 'postkill' event is emitted directly after the actor is killed.\n */\nexport class PostKillEvent extends GameEvent<Actor> {\n  constructor(public target: Actor) {\n    super();\n  }\n}\n\n/**\n * The 'start' event is emitted on engine when has started and is ready for interaction.\n */\nexport class GameStartEvent extends GameEvent<Engine> {\n  constructor(public target: Engine) {\n    super();\n  }\n}\n\n/**\n * The 'stop' event is emitted on engine when has been stopped and will no longer take input, update or draw.\n */\nexport class GameStopEvent extends GameEvent<Engine> {\n  constructor(public target: Engine) {\n    super();\n  }\n}\n\n/**\n * The 'predraw' event is emitted on actors, scenes, and engine before drawing starts. Actors' predraw happens inside their graphics\n * transform so that all drawing takes place with the actor as the origin.\n *\n */\nexport class PreDrawEvent extends GameEvent<Entity | Scene | Engine | TileMap> {\n  constructor(public ctx: CanvasRenderingContext2D, public delta: number, public target: Entity | Scene | Engine | TileMap) {\n    super();\n  }\n}\n\n/**\n * The 'postdraw' event is emitted on actors, scenes, and engine after drawing finishes. Actors' postdraw happens inside their graphics\n * transform so that all drawing takes place with the actor as the origin.\n *\n */\nexport class PostDrawEvent extends GameEvent<Entity | Scene | Engine | TileMap> {\n  constructor(public ctx: CanvasRenderingContext2D, public delta: number, public target: Entity | Scene | Engine | TileMap) {\n    super();\n  }\n}\n\n/**\n * The 'predebugdraw' event is emitted on actors, scenes, and engine before debug drawing starts.\n */\nexport class PreDebugDrawEvent extends GameEvent<Entity | Actor | Scene | Engine> {\n  constructor(public ctx: CanvasRenderingContext2D, public target: Entity | Actor | Scene | Engine) {\n    super();\n  }\n}\n\n/**\n * The 'postdebugdraw' event is emitted on actors, scenes, and engine after debug drawing starts.\n */\nexport class PostDebugDrawEvent extends GameEvent<Entity | Actor | Scene | Engine> {\n  constructor(public ctx: CanvasRenderingContext2D, public target: Entity | Actor | Scene | Engine) {\n    super();\n  }\n}\n\n/**\n * The 'preupdate' event is emitted on actors, scenes, camera, and engine before the update starts.\n */\nexport class PreUpdateEvent<T extends OnPreUpdate = Entity> extends GameEvent<T> {\n  constructor(public engine: Engine, public delta: number, public target: T) {\n    super();\n  }\n}\n\n/**\n * The 'postupdate' event is emitted on actors, scenes, camera, and engine after the update ends.\n */\nexport class PostUpdateEvent<T extends OnPostUpdate = Entity> extends GameEvent<T> {\n  constructor(public engine: Engine, public delta: number, public target: T) {\n    super();\n  }\n}\n\n/**\n * The 'preframe' event is emitted on the engine, before the frame begins.\n */\nexport class PreFrameEvent extends GameEvent<Engine> {\n  constructor(public engine: Engine, public prevStats: FrameStats) {\n    super();\n    this.target = engine;\n  }\n}\n\n/**\n * The 'postframe' event is emitted on the engine, after a frame ends.\n */\nexport class PostFrameEvent extends GameEvent<Engine> {\n  constructor(public engine: Engine, public stats: FrameStats) {\n    super();\n    this.target = engine;\n  }\n}\n\n/**\n * Event received when a gamepad is connected to Excalibur. [[Gamepads]] receives this event.\n */\nexport class GamepadConnectEvent extends GameEvent<Input.Gamepad> {\n  constructor(public index: number, public gamepad: Input.Gamepad) {\n    super();\n    this.target = gamepad;\n  }\n}\n\n/**\n * Event received when a gamepad is disconnected from Excalibur. [[Gamepads]] receives this event.\n */\nexport class GamepadDisconnectEvent extends GameEvent<Input.Gamepad> {\n  constructor(public index: number, public gamepad: Input.Gamepad) {\n    super();\n    this.target = gamepad;\n  }\n}\n\n/**\n * Gamepad button event. See [[Gamepads]] for information on responding to controller input. [[Gamepad]] instances receive this event;\n */\nexport class GamepadButtonEvent extends GameEvent<Input.Gamepad> {\n  /**\n   * @param button  The Gamepad button\n   * @param value   A numeric value between 0 and 1\n   */\n  constructor(public button: Input.Buttons, public value: number, public target: Input.Gamepad) {\n    super();\n  }\n}\n\n/**\n * Gamepad axis event. See [[Gamepads]] for information on responding to controller input. [[Gamepad]] instances receive this event;\n */\nexport class GamepadAxisEvent extends GameEvent<Input.Gamepad> {\n  /**\n   * @param axis  The Gamepad axis\n   * @param value A numeric value between -1 and 1\n   */\n  constructor(public axis: Input.Axes, public value: number, public target: Input.Gamepad) {\n    super();\n  }\n}\n\n/**\n * Subscribe event thrown when handlers for events other than subscribe are added. Meta event that is received by\n * [[EventDispatcher|event dispatchers]].\n */\nexport class SubscribeEvent<T> extends GameEvent<T> {\n  constructor(public topic: string, public handler: (event: GameEvent<T>) => void) {\n    super();\n  }\n}\n\n/**\n * Unsubscribe event thrown when handlers for events other than unsubscribe are removed. Meta event that is received by\n * [[EventDispatcher|event dispatchers]].\n */\nexport class UnsubscribeEvent<T> extends GameEvent<T> {\n  constructor(public topic: string, public handler: (event: GameEvent<T>) => void) {\n    super();\n  }\n}\n\n/**\n * Event received by the [[Engine]] when the browser window is visible on a screen.\n */\nexport class VisibleEvent extends GameEvent<Engine> {\n  constructor(public target: Engine) {\n    super();\n  }\n}\n\n/**\n * Event received by the [[Engine]] when the browser window is hidden from all screens.\n */\nexport class HiddenEvent extends GameEvent<Engine> {\n  constructor(public target: Engine) {\n    super();\n  }\n}\n\n/**\n * Event thrown on an [[Actor|actor]] when a collision will occur this frame if it resolves\n */\nexport class PreCollisionEvent<T extends Collider | Entity = Actor> extends GameEvent<T> {\n  /**\n   * @param actor         The actor the event was thrown on\n   * @param other         The actor that will collided with the current actor\n   * @param side          The side that will be collided with the current actor\n   * @param intersection  Intersection vector\n   */\n  constructor(actor: T, public other: T, public side: Side, public intersection: Vector) {\n    super();\n    this.target = actor;\n  }\n\n  public get actor() {\n    return this.target;\n  }\n\n  public set actor(actor: T) {\n    this.target = actor;\n  }\n}\n\n/**\n * Event thrown on an [[Actor|actor]] when a collision has been resolved (body reacted) this frame\n */\nexport class PostCollisionEvent<T extends Collider | Entity = Actor> extends GameEvent<T> {\n  /**\n   * @param actor         The actor the event was thrown on\n   * @param other         The actor that did collide with the current actor\n   * @param side          The side that did collide with the current actor\n   * @param intersection  Intersection vector\n   */\n  constructor(actor: T, public other: T, public side: Side, public intersection: Vector) {\n    super();\n    this.target = actor;\n  }\n\n  public get actor() {\n    return this.target;\n  }\n\n  public set actor(actor: T) {\n    this.target = actor;\n  }\n}\n\n/**\n * Event thrown the first time an [[Actor|actor]] collides with another, after an actor is in contact normal collision events are fired.\n */\nexport class CollisionStartEvent<T extends Collider | Entity = Actor> extends GameEvent<T> {\n  /**\n   *\n   * @param actor\n   * @param other\n   * @param pair\n   */\n  constructor(actor: T, public other: T, public pair: Pair) {\n    super();\n    this.target = actor;\n  }\n\n  public get actor() {\n    return this.target;\n  }\n\n  public set actor(actor: T) {\n    this.target = actor;\n  }\n}\n\n/**\n * Event thrown when the [[Actor|actor]] is no longer colliding with another\n */\nexport class CollisionEndEvent<T extends Collider | Entity = Actor> extends GameEvent<T> {\n  /**\n   *\n   */\n  constructor(actor: T, public other: T) {\n    super();\n    this.target = actor;\n  }\n\n  public get actor() {\n    return this.target;\n  }\n\n  public set actor(actor: T) {\n    this.target = actor;\n  }\n}\n\n/**\n * Event thrown on an [[Actor]] and a [[Scene]] only once before the first update call\n */\nexport class InitializeEvent<T extends OnInitialize = Entity> extends GameEvent<T> {\n  /**\n   * @param engine  The reference to the current engine\n   */\n  constructor(public engine: Engine, public target: T) {\n    super();\n  }\n}\n\n/**\n * Event thrown on a [[Scene]] on activation\n */\nexport class ActivateEvent extends GameEvent<Scene> {\n  /**\n   * @param oldScene  The reference to the old scene\n   */\n  constructor(public oldScene: Scene, public target: Scene) {\n    super();\n  }\n}\n\n/**\n * Event thrown on a [[Scene]] on deactivation\n */\nexport class DeactivateEvent extends GameEvent<Scene> {\n  /**\n   * @param newScene  The reference to the new scene\n   */\n  constructor(public newScene: Scene, public target: Scene) {\n    super();\n  }\n}\n\n/**\n * Event thrown on an [[Actor]] when it completely leaves the screen.\n */\nexport class ExitViewPortEvent extends GameEvent<Entity> {\n  constructor(public target: Entity) {\n    super();\n  }\n}\n\n/**\n * Event thrown on an [[Actor]] when it completely leaves the screen.\n */\nexport class EnterViewPortEvent extends GameEvent<Entity> {\n  constructor(public target: Entity) {\n    super();\n  }\n}\n\nexport class EnterTriggerEvent extends GameEvent<Actor> {\n  constructor(public target: Trigger, public actor: Actor) {\n    super();\n  }\n}\n\nexport class ExitTriggerEvent extends GameEvent<Actor> {\n  constructor(public target: Trigger, public actor: Actor) {\n    super();\n  }\n}\n", "/**\n * An enum that describes the types of collisions actors can participate in\n */\nexport enum CollisionType {\n  /**\n   * Actors with the `PreventCollision` setting do not participate in any\n   * collisions and do not raise collision events.\n   */\n  PreventCollision = 'PreventCollision',\n  /**\n   * Actors with the `Passive` setting only raise collision events, but are not\n   * influenced or moved by other actors and do not influence or move other actors.\n   */\n  Passive = 'Passive',\n  /**\n   * Actors with the `Active` setting raise collision events and participate\n   * in collisions with other actors and will be push or moved by actors sharing\n   * the `Active` or `Fixed` setting.\n   */\n  Active = 'Active',\n  /**\n   * Actors with the `Fixed` setting raise collision events and participate in\n   * collisions with other actors. Actors with the `Fixed` setting will not be\n   * pushed or moved by other actors sharing the `Fixed`. Think of Fixed\n   * actors as \"immovable/unstoppable\" objects. If two `Fixed` actors meet they will\n   * not be pushed or moved by each other, they will not interact except to throw\n   * collision events.\n   */\n  Fixed = 'Fixed'\n}\n", "import { Body } from './Body';\nimport { Vector } from '../Algebra';\nimport { Physics, CollisionResolutionStrategy } from '../Physics';\nimport { PostCollisionEvent, PreCollisionEvent } from '../Events';\nimport * as Util from '../Util/Util';\nimport { CollisionType } from './CollisionType';\nimport { Collider } from './Collider';\n\n/**\n * Collision contacts are used internally by Excalibur to resolve collision between colliders. This\n * Pair prevents collisions from being evaluated more than one time\n */\nexport class CollisionContact {\n  /**\n   * The id of this collision contact\n   */\n  id: string;\n  /**\n   * The first collider in the collision\n   */\n  colliderA: Collider;\n  /**\n   * The second collider in the collision\n   */\n  colliderB: Collider;\n  /**\n   * The minimum translation vector to resolve penetration, pointing away from colliderA\n   */\n  mtv: Vector;\n  /**\n   * The point of collision shared between colliderA and colliderB\n   */\n  point: Vector;\n  /**\n   * The collision normal, pointing away from colliderA\n   */\n  normal: Vector;\n\n  constructor(colliderA: Collider, colliderB: Collider, mtv: Vector, point: Vector, normal: Vector) {\n    this.colliderA = colliderA;\n    this.colliderB = colliderB;\n    this.mtv = mtv;\n    this.point = point;\n    this.normal = normal;\n  }\n\n  resolve(strategy: CollisionResolutionStrategy) {\n    if (strategy === CollisionResolutionStrategy.RigidBody) {\n      this._resolveRigidBodyCollision();\n    } else if (strategy === CollisionResolutionStrategy.Box) {\n      this._resolveBoxCollision();\n    } else {\n      throw new Error('Unknown collision resolution strategy');\n    }\n  }\n\n  private _applyBoxImpulse(colliderA: Collider, colliderB: Collider, mtv: Vector) {\n    if (colliderA.type === CollisionType.Active && colliderB.type !== CollisionType.Passive) {\n      // Resolve overlaps\n      if (colliderA.type === CollisionType.Active && colliderB.type === CollisionType.Active) {\n        // split overlaps if both are Active\n        mtv = mtv.scale(0.5);\n      }\n      // Apply mtv\n      colliderA.body.pos.y += mtv.y;\n      colliderA.body.pos.x += mtv.x;\n\n      const mtvDir = mtv.normalize();\n\n      // only adjust if velocity is opposite\n      if (mtvDir.dot(colliderA.body.vel) < 0) {\n        // Cancel out velocity in direction of mtv\n        const velAdj = mtvDir.scale(mtvDir.dot(colliderA.body.vel.negate()));\n\n        colliderA.body.vel = colliderA.body.vel.add(velAdj);\n      }\n\n      colliderA.emit('postcollision', new PostCollisionEvent(colliderA, colliderB, Util.getSideFromDirection(mtv), mtv));\n    }\n  }\n\n  private _resolveBoxCollision() {\n    const side = Util.getSideFromDirection(this.mtv);\n    const mtv = this.mtv.negate();\n    // Publish collision events on both participants\n    this.colliderA.emit('precollision', new PreCollisionEvent(this.colliderA, this.colliderB, side, mtv));\n    this.colliderB.emit('precollision', new PreCollisionEvent(this.colliderB, this.colliderA, Util.getOppositeSide(side), mtv.negate()));\n\n    this._applyBoxImpulse(this.colliderA, this.colliderB, mtv);\n    this._applyBoxImpulse(this.colliderB, this.colliderA, mtv.negate());\n  }\n\n  private _resolveRigidBodyCollision() {\n    // perform collision on bounding areas\n    const bodyA: Body = this.colliderA.body;\n    const bodyB: Body = this.colliderB.body;\n    const mtv = this.mtv; // normal pointing away from colliderA\n    let normal = this.normal; // normal pointing away from colliderA\n    if (bodyA === bodyB) {\n      // sanity check for existing pairs\n      return;\n    }\n\n    // Publish collision events on both participants\n    const side = Util.getSideFromDirection(this.mtv);\n    this.colliderA.emit('precollision', new PreCollisionEvent(this.colliderA, this.colliderB, side, this.mtv));\n    this.colliderB.emit(\n      'precollision',\n      new PreCollisionEvent(this.colliderB, this.colliderA, Util.getOppositeSide(side), this.mtv.negate())\n    );\n\n    // If any of the participants are passive then short circuit\n    if (this.colliderA.type === CollisionType.Passive || this.colliderB.type === CollisionType.Passive) {\n      return;\n    }\n\n    const invMassA = this.colliderA.type === CollisionType.Fixed ? 0 : 1 / this.colliderA.mass;\n    const invMassB = this.colliderB.type === CollisionType.Fixed ? 0 : 1 / this.colliderB.mass;\n\n    const invMoiA = this.colliderA.type === CollisionType.Fixed ? 0 : 1 / this.colliderA.inertia;\n    const invMoiB = this.colliderB.type === CollisionType.Fixed ? 0 : 1 / this.colliderB.inertia;\n\n    // average restitution more realistic\n    const coefRestitution = Math.min(this.colliderA.bounciness, this.colliderB.bounciness);\n\n    const coefFriction = Math.min(this.colliderA.friction, this.colliderB.friction);\n\n    normal = normal.normalize();\n    const tangent = normal.normal().normalize();\n\n    const ra = this.point.sub(this.colliderA.center); // point relative to colliderA position\n    const rb = this.point.sub(this.colliderB.center); /// point relative to colliderB\n\n    // Relative velocity in linear terms\n    // Angular to linear velocity formula -> omega = v/r\n    const rv = bodyB.vel.add(rb.cross(-bodyB.rx)).sub(bodyA.vel.sub(ra.cross(bodyA.rx)));\n    const rvNormal = rv.dot(normal);\n    const rvTangent = rv.dot(tangent);\n\n    const raTangent = ra.dot(tangent);\n    const raNormal = ra.dot(normal);\n\n    const rbTangent = rb.dot(tangent);\n    const rbNormal = rb.dot(normal);\n\n    // If objects are moving away ignore\n    if (rvNormal > 0) {\n      return;\n    }\n\n    // Collision impulse formula from Chris Hecker\n    // https://en.wikipedia.org/wiki/Collision_response\n    const impulse =\n      -((1 + coefRestitution) * rvNormal) / (invMassA + invMassB + invMoiA * raTangent * raTangent + invMoiB * rbTangent * rbTangent);\n\n    if (this.colliderA.type === CollisionType.Fixed) {\n      bodyB.vel = bodyB.vel.add(normal.scale(impulse * invMassB));\n      if (Physics.allowRigidBodyRotation) {\n        bodyB.rx -= impulse * invMoiB * -rb.cross(normal);\n      }\n      bodyB.addMtv(mtv);\n    } else if (this.colliderB.type === CollisionType.Fixed) {\n      bodyA.vel = bodyA.vel.sub(normal.scale(impulse * invMassA));\n      if (Physics.allowRigidBodyRotation) {\n        bodyA.rx += impulse * invMoiA * -ra.cross(normal);\n      }\n      bodyA.addMtv(mtv.negate());\n    } else {\n      bodyB.vel = bodyB.vel.add(normal.scale(impulse * invMassB));\n      bodyA.vel = bodyA.vel.sub(normal.scale(impulse * invMassA));\n\n      if (Physics.allowRigidBodyRotation) {\n        bodyB.rx -= impulse * invMoiB * -rb.cross(normal);\n        bodyA.rx += impulse * invMoiA * -ra.cross(normal);\n      }\n\n      // Split the mtv in half for the two bodies, potentially we could do something smarter here\n      bodyB.addMtv(mtv.scale(0.5));\n      bodyA.addMtv(mtv.scale(-0.5));\n    }\n\n    // Friction portion of impulse\n    if (coefFriction && rvTangent) {\n      // Columb model of friction, formula for impulse due to friction from\n      // https://en.wikipedia.org/wiki/Collision_response\n\n      // tangent force exerted by body on another in contact\n      const t = rv.sub(normal.scale(rv.dot(normal))).normalize();\n\n      // impulse in the direction of tangent force\n      const jt = rv.dot(t) / (invMassA + invMassB + raNormal * raNormal * invMoiA + rbNormal * rbNormal * invMoiB);\n\n      let frictionImpulse = new Vector(0, 0);\n      if (Math.abs(jt) <= impulse * coefFriction) {\n        frictionImpulse = t.scale(jt).negate();\n      } else {\n        frictionImpulse = t.scale(-impulse * coefFriction);\n      }\n\n      if (this.colliderA.type === CollisionType.Fixed) {\n        // apply frictional impulse\n        bodyB.vel = bodyB.vel.add(frictionImpulse.scale(invMassB));\n        if (Physics.allowRigidBodyRotation) {\n          bodyB.rx += frictionImpulse.dot(t) * invMoiB * rb.cross(t);\n        }\n      } else if (this.colliderB.type === CollisionType.Fixed) {\n        // apply frictional impulse\n        bodyA.vel = bodyA.vel.sub(frictionImpulse.scale(invMassA));\n        if (Physics.allowRigidBodyRotation) {\n          bodyA.rx -= frictionImpulse.dot(t) * invMoiA * ra.cross(t);\n        }\n      } else {\n        // apply frictional impulse\n        bodyB.vel = bodyB.vel.add(frictionImpulse.scale(invMassB));\n        bodyA.vel = bodyA.vel.sub(frictionImpulse.scale(invMassA));\n\n        // apply frictional impulse\n        if (Physics.allowRigidBodyRotation) {\n          bodyB.rx += frictionImpulse.dot(t) * invMoiB * rb.cross(t);\n          bodyA.rx -= frictionImpulse.dot(t) * invMoiA * ra.cross(t);\n        }\n      }\n    }\n\n    this.colliderA.emit('postcollision', new PostCollisionEvent(this.colliderA, this.colliderB, side, this.mtv));\n    this.colliderB.emit(\n      'postcollision',\n      new PostCollisionEvent(this.colliderB, this.colliderA, Util.getOppositeSide(side), this.mtv.negate())\n    );\n  }\n}\n", "import { Circle } from './Circle';\nimport { CollisionContact } from './CollisionContact';\nimport { ConvexPolygon } from './ConvexPolygon';\nimport { Edge } from './Edge';\n\nimport { Vector } from '../Algebra';\n\nexport const CollisionJumpTable = {\n  CollideCircleCircle(circleA: Circle, circleB: Circle): CollisionContact {\n    const radius = circleA.radius + circleB.radius;\n    const circleAPos = circleA.worldPos;\n    const circleBPos = circleB.worldPos;\n    if (circleAPos.distance(circleBPos) > radius) {\n      return null;\n    }\n\n    const axisOfCollision = circleBPos.sub(circleAPos).normalize();\n    const mvt = axisOfCollision.scale(radius - circleBPos.distance(circleAPos));\n\n    const pointOfCollision = circleA.getFurthestPoint(axisOfCollision);\n\n    return new CollisionContact(circleA.collider, circleB.collider, mvt, pointOfCollision, axisOfCollision);\n  },\n\n  CollideCirclePolygon(circle: Circle, polygon: ConvexPolygon): CollisionContact {\n    let minAxis = circle.testSeparatingAxisTheorem(polygon);\n    if (!minAxis) {\n      return null;\n    }\n\n    // make sure that the minAxis is pointing away from circle\n    const samedir = minAxis.dot(polygon.center.sub(circle.center));\n    minAxis = samedir < 0 ? minAxis.negate() : minAxis;\n\n    const verts: Vector[] = [];\n\n    const point1 = polygon.getFurthestPoint(minAxis.negate());\n    const point2 = circle.getFurthestPoint(minAxis); //.add(cc);\n    if (circle.contains(point1)) {\n      verts.push(point1);\n    }\n    if (polygon.contains(point2)) {\n      verts.push(point2);\n    }\n    if (verts.length === 0) {\n      return null;\n    }\n\n    return new CollisionContact(\n      circle.collider,\n      polygon.collider,\n      minAxis,\n      verts.length === 2 ? verts[0].average(verts[1]) : verts[0],\n      minAxis.normalize()\n    );\n  },\n\n  CollideCircleEdge(circle: Circle, edge: Edge): CollisionContact {\n    // center of the circle\n    const cc = circle.center;\n    // vector in the direction of the edge\n    const e = edge.end.sub(edge.begin);\n\n    // amount of overlap with the circle's center along the edge direction\n    const u = e.dot(edge.end.sub(cc));\n    const v = e.dot(cc.sub(edge.begin));\n\n    // Potential region A collision (circle is on the left side of the edge, before the beginning)\n    if (v <= 0) {\n      const da = edge.begin.sub(cc);\n      const dda = da.dot(da); // quick and dirty way of calc'n distance in r^2 terms saves some sqrts\n      // save some sqrts\n      if (dda > circle.radius * circle.radius) {\n        return null; // no collision\n      }\n      return new CollisionContact(\n        circle.collider,\n        edge.collider,\n        da.normalize().scale(circle.radius - Math.sqrt(dda)),\n        edge.begin,\n        da.normalize()\n      );\n    }\n\n    // Potential region B collision (circle is on the right side of the edge, after the end)\n    if (u <= 0) {\n      const db = edge.end.sub(cc);\n      const ddb = db.dot(db);\n      if (ddb > circle.radius * circle.radius) {\n        return null;\n      }\n      return new CollisionContact(\n        circle.collider,\n        edge.collider,\n        db.normalize().scale(circle.radius - Math.sqrt(ddb)),\n        edge.end,\n        db.normalize()\n      );\n    }\n\n    // Otherwise potential region AB collision (circle is in the middle of the edge between the beginning and end)\n    const den = e.dot(e);\n    const pointOnEdge = edge.begin\n      .scale(u)\n      .add(edge.end.scale(v))\n      .scale(1 / den);\n    const d = cc.sub(pointOnEdge);\n\n    const dd = d.dot(d);\n    if (dd > circle.radius * circle.radius) {\n      return null; // no collision\n    }\n\n    let n = e.perpendicular();\n    // flip correct direction\n    if (n.dot(cc.sub(edge.begin)) < 0) {\n      n.x = -n.x;\n      n.y = -n.y;\n    }\n\n    n = n.normalize();\n\n    const mvt = n.scale(Math.abs(circle.radius - Math.sqrt(dd)));\n    return new CollisionContact(circle.collider, edge.collider, mvt.negate(), pointOnEdge, n.negate());\n  },\n\n  CollideEdgeEdge(): CollisionContact {\n    // Edge-edge collision doesn't make sense\n    return null;\n  },\n\n  CollidePolygonEdge(polygon: ConvexPolygon, edge: Edge): CollisionContact {\n    // 3 cases:\n    // (1) Polygon lands on the full face\n    // (2) Polygon lands on the right point\n    // (3) Polygon lands on the left point\n\n    const e = edge.end.sub(edge.begin);\n    let edgeNormal = e.normal();\n\n    if (polygon.contains(edge.begin)) {\n      const { distance: mtv, face } = polygon.getClosestFace(edge.begin);\n      if (mtv) {\n        return new CollisionContact(polygon.collider, edge.collider, mtv.negate(), edge.begin.add(mtv.negate()), face.normal().negate());\n      }\n    }\n\n    if (polygon.contains(edge.end)) {\n      const { distance: mtv, face } = polygon.getClosestFace(edge.end);\n      if (mtv) {\n        return new CollisionContact(polygon.collider, edge.collider, mtv.negate(), edge.end.add(mtv.negate()), face.normal().negate());\n      }\n    }\n\n    const pc = polygon.center;\n    const ec = edge.center;\n    const dir = ec.sub(pc).normalize();\n\n    // build a temporary polygon from the edge to use SAT\n    const linePoly = new ConvexPolygon({\n      collider: edge.collider,\n      points: [edge.begin, edge.end, edge.end.add(dir.scale(30)), edge.begin.add(dir.scale(30))]\n    });\n\n    let minAxis = polygon.testSeparatingAxisTheorem(linePoly);\n\n    // no minAxis, no overlap, no collision\n    if (!minAxis) {\n      return null;\n    }\n\n    // flip the normal and axis to always have positive collisions\n    edgeNormal = edgeNormal.dot(dir) < 0 ? edgeNormal.negate() : edgeNormal;\n    minAxis = minAxis.dot(dir) < 0 ? minAxis.negate() : minAxis;\n\n    return new CollisionContact(polygon.collider, edge.collider, minAxis, polygon.getFurthestPoint(edgeNormal), edgeNormal);\n  },\n\n  CollidePolygonPolygon(polyA: ConvexPolygon, polyB: ConvexPolygon): CollisionContact {\n    // do a SAT test to find a min axis if it exists\n    let minAxis = polyA.testSeparatingAxisTheorem(polyB);\n\n    // no overlap, no collision return null\n    if (!minAxis) {\n      return null;\n    }\n\n    // make sure that minAxis is pointing from A -> B\n    const sameDir = minAxis.dot(polyB.center.sub(polyA.center));\n    minAxis = sameDir < 0 ? minAxis.negate() : minAxis;\n\n    // find rough point of collision\n    // todo this could be better\n    const verts: Vector[] = [];\n    const pointA = polyA.getFurthestPoint(minAxis);\n    const pointB = polyB.getFurthestPoint(minAxis.negate());\n\n    if (polyB.contains(pointA)) {\n      verts.push(pointA);\n    }\n\n    if (polyA.contains(pointB)) {\n      verts.push(pointB);\n    }\n    // no candidates, pick something\n    if (verts.length === 0) {\n      verts.push(pointB);\n    }\n\n    const contact = verts.length === 2 ? verts[0].add(verts[1]).scale(0.5) : verts[0];\n\n    return new CollisionContact(polyA.collider, polyB.collider, minAxis, contact, minAxis.normalize());\n  }\n};\n", "import { Line, Vector, Ray } from '../Algebra';\nimport { ConvexPolygon } from './ConvexPolygon';\nimport { Edge } from './Edge';\nimport { Circle } from './Circle';\n\n/**\n * Finds the closes line between 2 line segments, were the magnitude of u, v are the lengths of each segment\n * L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\n * L2 = Q(t) = q0 + t * v, where t is time and q0 is the start of the line\n * @param p0 Point where L1 begins\n * @param u Direction and length of L1\n * @param q0 Point were L2 begins\n * @param v Direction and length of L2\n */\nexport function ClosestLine(p0: Vector, u: Vector, q0: Vector, v: Vector) {\n  // Distance between 2 lines http://geomalgorithms.com/a07-_distance.html\n\n  // w(s, t) = P(s) - Q(t)\n  // The w(s, t) that has the minimum distance we will say is w(sClosest, tClosest) = wClosest\n  //\n  // wClosest is the vector that is uniquely perpendicular to the 2 line directions u & v.\n  // wClosest = w0 + sClosest * u - tClosest * v, where w0 is p0 - q0\n  //\n  // The closest point between 2 lines then satisfies this pair of equations\n  // 1: u * wClosest = 0\n  // 2: v * wClosest = 0\n  //\n  // Substituting wClosest into the equations we get\n  //\n  // 1: (u * u) * sClosest - (u * v) tClosest = -u * w0\n  // 2: (v * u) * sClosest - (v * v) tClosest = -v * w0\n\n  // simplify w0\n  const w0 = p0.sub(q0);\n\n  // simplify (u * u);\n  const a = u.dot(u);\n  // simplify (u * v);\n  const b = u.dot(v);\n  // simplify (v * v)\n  const c = v.dot(v);\n  // simplify (u * w0)\n  const d = u.dot(w0);\n  // simplify (v * w0)\n  const e = v.dot(w0);\n\n  // denominator ac - b^2\n  const denom = a * c - b * b;\n  let sDenom = denom;\n  let tDenom = denom;\n  // if denom is 0 they are parallel, use any point from either as the start in this case p0\n  if (denom === 0 || denom <= 0.01) {\n    const tClosestParallel = d / b;\n    return new Line(p0, q0.add(v.scale(tClosestParallel)));\n  }\n\n  // Solve for sClosest for infinite line\n  let sClosest = b * e - c * d; // / denom;\n\n  // Solve for tClosest for infinite line\n  let tClosest = a * e - b * d; // / denom;\n\n  // Solve for segments candidate edges, if sClosest and tClosest are outside their segments\n  if (sClosest < 0) {\n    sClosest = 0;\n    tClosest = e;\n    tDenom = c;\n  } else if (sClosest > sDenom) {\n    sClosest = sDenom;\n    tClosest = e + b;\n    tDenom = c;\n  }\n\n  if (tClosest < 0) {\n    tClosest = 0;\n    if (-d < 0) {\n      sClosest = 0;\n    } else if (-d > a) {\n      sClosest = sDenom;\n    } else {\n      sClosest = -d;\n      sDenom = a;\n    }\n  } else if (tClosest > tDenom) {\n    tClosest = tDenom;\n    if (-d + b < 0) {\n      sClosest = 0;\n    } else if (-d + b > a) {\n      sClosest = sDenom;\n    } else {\n      sClosest = -d + b;\n      sDenom = a;\n    }\n  }\n  sClosest = Math.abs(sClosest) < 0.001 ? 0 : sClosest / sDenom;\n  tClosest = Math.abs(tClosest) < 0.001 ? 0 : tClosest / tDenom;\n\n  return new Line(p0.add(u.scale(sClosest)), q0.add(v.scale(tClosest)));\n}\n\nexport const ClosestLineJumpTable = {\n  PolygonPolygonClosestLine(polygonA: ConvexPolygon, polygonB: ConvexPolygon) {\n    // Find the 2 closest faces on each polygon\n    const otherWorldPos = polygonB.worldPos;\n    const otherDirection = otherWorldPos.sub(polygonA.worldPos);\n    const thisDirection = otherDirection.negate();\n\n    const rayTowardsOther = new Ray(polygonA.worldPos, otherDirection);\n    const rayTowardsThis = new Ray(otherWorldPos, thisDirection);\n\n    const thisPoint = polygonA.rayCast(rayTowardsOther).add(rayTowardsOther.dir.scale(0.1));\n    const otherPoint = polygonB.rayCast(rayTowardsThis).add(rayTowardsThis.dir.scale(0.1));\n\n    const thisFace = polygonA.getClosestFace(thisPoint);\n    const otherFace = polygonB.getClosestFace(otherPoint);\n\n    // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\n    const p0 = thisFace.face.begin;\n    const u = thisFace.face.getEdge();\n\n    // L2 = Q(t) = q0 + t * v, where t is time and q0 is the start of the line\n    const q0 = otherFace.face.begin;\n    const v = otherFace.face.getEdge();\n\n    return ClosestLine(p0, u, q0, v);\n  },\n\n  PolygonEdgeClosestLine(polygon: ConvexPolygon, edge: Edge) {\n    // Find the 2 closest faces on each polygon\n    const otherWorldPos = edge.worldPos;\n    const otherDirection = otherWorldPos.sub(polygon.worldPos);\n\n    const rayTowardsOther = new Ray(polygon.worldPos, otherDirection);\n\n    const thisPoint = polygon.rayCast(rayTowardsOther).add(rayTowardsOther.dir.scale(0.1));\n\n    const thisFace = polygon.getClosestFace(thisPoint);\n\n    // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\n    const p0 = thisFace.face.begin;\n    const u = thisFace.face.getEdge();\n\n    // L2 = Q(t) = q0 + t * v, where t is time and q0 is the start of the line\n    const edgeLine = edge.asLine();\n    const edgeStart = edgeLine.begin;\n    const edgeVector = edgeLine.getEdge();\n    const q0 = edgeStart;\n    const v = edgeVector;\n\n    return ClosestLine(p0, u, q0, v);\n  },\n\n  PolygonCircleClosestLine(polygon: ConvexPolygon, circle: Circle) {\n    // https://math.stackexchange.com/questions/1919177/how-to-find-point-on-line-closest-to-sphere\n    // Find the 2 closest faces on each polygon\n    const otherWorldPos = circle.worldPos;\n    const otherDirection = otherWorldPos.sub(polygon.worldPos);\n\n    const rayTowardsOther = new Ray(polygon.worldPos, otherDirection.normalize());\n\n    const thisPoint = polygon.rayCast(rayTowardsOther).add(rayTowardsOther.dir.scale(0.1));\n\n    const thisFace = polygon.getClosestFace(thisPoint);\n\n    // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\n    const p0 = thisFace.face.begin;\n    const u = thisFace.face.getEdge();\n\n    // Time of minimum distance\n    let t = (u.x * (otherWorldPos.x - p0.x) + u.y * (otherWorldPos.y - p0.y)) / (u.x * u.x + u.y * u.y);\n\n    // If time of minimum is past the edge clamp\n    if (t > 1) {\n      t = 1;\n    } else if (t < 0) {\n      t = 0;\n    }\n\n    // Minimum distance\n    const d = Math.sqrt(Math.pow(p0.x + u.x * t - otherWorldPos.x, 2) + Math.pow(p0.y + u.y * t - otherWorldPos.y, 2)) - circle.radius;\n\n    const circlex = ((p0.x + u.x * t - otherWorldPos.x) * circle.radius) / (circle.radius + d);\n    const circley = ((p0.y + u.y * t - otherWorldPos.y) * circle.radius) / (circle.radius + d);\n    return new Line(u.scale(t).add(p0), new Vector(otherWorldPos.x + circlex, otherWorldPos.y + circley));\n  },\n\n  CircleCircleClosestLine(circleA: Circle, circleB: Circle) {\n    // Find the 2 closest faces on each polygon\n    const otherWorldPos = circleB.worldPos;\n    const otherDirection = otherWorldPos.sub(circleA.worldPos);\n\n    const thisWorldPos = circleA.worldPos;\n    const thisDirection = thisWorldPos.sub(circleB.worldPos);\n\n    const rayTowardsOther = new Ray(circleA.worldPos, otherDirection);\n    const rayTowardsThis = new Ray(circleB.worldPos, thisDirection);\n\n    const thisPoint = circleA.rayCast(rayTowardsOther);\n    const otherPoint = circleB.rayCast(rayTowardsThis);\n\n    return new Line(thisPoint, otherPoint);\n  },\n\n  CircleEdgeClosestLine(circle: Circle, edge: Edge) {\n    // https://math.stackexchange.com/questions/1919177/how-to-find-point-on-line-closest-to-sphere\n    const circleWorlPos = circle.worldPos;\n\n    // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\n    const edgeLine = edge.asLine();\n    const edgeStart = edgeLine.begin;\n    const edgeVector = edgeLine.getEdge();\n    const p0 = edgeStart;\n    const u = edgeVector;\n\n    // Time of minimum distance\n    let t = (u.x * (circleWorlPos.x - p0.x) + u.y * (circleWorlPos.y - p0.y)) / (u.x * u.x + u.y * u.y);\n\n    // If time of minimum is past the edge clamp to edge\n    if (t > 1) {\n      t = 1;\n    } else if (t < 0) {\n      t = 0;\n    }\n\n    // Minimum distance\n    const d = Math.sqrt(Math.pow(p0.x + u.x * t - circleWorlPos.x, 2) + Math.pow(p0.y + u.y * t - circleWorlPos.y, 2)) - circle.radius;\n\n    const circlex = ((p0.x + u.x * t - circleWorlPos.x) * circle.radius) / (circle.radius + d);\n    const circley = ((p0.y + u.y * t - circleWorlPos.y) * circle.radius) / (circle.radius + d);\n    return new Line(u.scale(t).add(p0), new Vector(circleWorlPos.x + circlex, circleWorlPos.y + circley));\n  },\n\n  EdgeEdgeClosestLine(edgeA: Edge, edgeB: Edge) {\n    // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\n    const edgeLineA = edgeA.asLine();\n    const edgeStartA = edgeLineA.begin;\n    const edgeVectorA = edgeLineA.getEdge();\n    const p0 = edgeStartA;\n    const u = edgeVectorA;\n\n    // L2 = Q(t) = q0 + t * v, where t is time and q0 is the start of the line\n    const edgeLineB = edgeB.asLine();\n    const edgeStartB = edgeLineB.begin;\n    const edgeVectorB = edgeLineB.getEdge();\n    const q0 = edgeStartB;\n    const v = edgeVectorB;\n\n    return ClosestLine(p0, u, q0, v);\n  }\n};\n", "import { Vector } from './Algebra';\nimport { Logger } from './Util/Log';\nimport { Camera } from './Camera';\nimport { BrowserEvents } from './Util/Browser';\nimport { BoundingBox } from './Collision/Index';\n\n/**\n * Enum representing the different display modes available to Excalibur.\n */\nexport enum DisplayMode {\n  /**\n   * Use the entire screen's css width/height for the game resolution dynamically. This is not the same as [[Screen.goFullScreen]]\n   */\n  FullScreen = 'FullScreen',\n\n  /**\n   * Use the parent DOM container's css width/height for the game resolution dynamically\n   */\n  Container = 'Container',\n\n  /**\n   * Default, use a specified resolution for the game\n   */\n  Fixed = 'Fixed',\n\n  /**\n   * Allow the game to be positioned with the [[EngineOptions.position]] option\n   */\n  Position = 'Position'\n}\n\n/**\n * Convenience class for quick resolutions\n * Mostly sourced from https://emulation.gametechwiki.com/index.php/Resolution\n */\nexport class Resolution {\n  public static get SVGA(): ScreenDimension {\n    return { width: 800, height: 600 };\n  }\n\n  public static get Standard(): ScreenDimension {\n    return { width: 1920, height: 1080 };\n  }\n\n  public static get Atari2600(): ScreenDimension {\n    return { width: 160, height: 192 };\n  }\n\n  public static get GameBoy(): ScreenDimension {\n    return { width: 160, height: 144 };\n  }\n\n  public static get GameBoyAdvance(): ScreenDimension {\n    return { width: 240, height: 160 };\n  }\n\n  public static get NintendoDS(): ScreenDimension {\n    return { width: 256, height: 192 };\n  }\n\n  public static get NES(): ScreenDimension {\n    return { width: 256, height: 224 };\n  }\n\n  public static get SNES(): ScreenDimension {\n    return { width: 256, height: 244 };\n  }\n}\n\n/**\n * Interface describing the absolute CSS position of the game window. For use when [[DisplayMode.Position]]\n * is specified and when the user wants to define exact pixel spacing of the window.\n * When a number is given, the value is interpreted as pixels\n */\nexport interface AbsolutePosition {\n  top?: number | string;\n  left?: number | string;\n  right?: number | string;\n  bottom?: number | string;\n}\n\nexport type CanvasPosition = string | AbsolutePosition;\n\nexport interface ScreenDimension {\n  width: number;\n  height: number;\n}\n\nexport interface ExcaliburGraphicsContext {\n  save(): void;\n  resetTransform(): void;\n  scale(x: number, y: number): void;\n  imageSmoothingEnabled: boolean;\n  restore(): void;\n}\n\nexport interface ScreenOptions {\n  /**\n   * Canvas element to build a screen on\n   */\n  canvas: HTMLCanvasElement;\n  /**\n   * Graphics context for the screen\n   */\n  context: ExcaliburGraphicsContext;\n\n  /**\n   * Browser abstraction\n   */\n  browser: BrowserEvents;\n  /**\n   * Optionally set antialiasing, defaults to true. If set to true, images will be smoothed\n   */\n  antialiasing?: boolean;\n  /**\n   * Optionally override the pixel ratio to use for the screen, otherwise calculated automatically from the browser\n   */\n  pixelRatio?: number;\n  /**\n   * Optionally specify the actual pixel resolution in width/height pixels (also known as logical resolution), by default the\n   * resolution will be the same as the viewport. Resolution will be overridden by DisplayMode.Container and DisplayMode.FullScreen.\n   */\n  resolution?: ScreenDimension;\n  /**\n   * Visual viewport size in css pixel, if resolution is not specified it will be the same as the viewport\n   */\n  viewport: ScreenDimension;\n  /**\n   * Set the display mode of the screen, by default DisplayMode.Fixed.\n   */\n  displayMode?: DisplayMode;\n  /**\n   * Specify how the game window is to be positioned when the [[DisplayMode.Position]] is chosen. This option MUST be specified\n   * if the DisplayMode is set as [[DisplayMode.Position]]. The position can be either a string or an [[AbsolutePosition]].\n   * String must be in the format of css style background-position. The vertical position must precede the horizontal position in strings.\n   *\n   * Valid String examples: \"top left\", \"top\", \"bottom\", \"middle\", \"middle center\", \"bottom right\"\n   * Valid [[AbsolutePosition]] examples: `{top: 5, right: 10%}`, `{bottom: 49em, left: 10px}`, `{left: 10, bottom: 40}`\n   */\n  position?: CanvasPosition;\n}\n\n/**\n * The Screen handles all aspects of interacting with the screen for Excalibur.\n *\n * [[include:Screens.md]]\n */\nexport class Screen {\n  private _canvas: HTMLCanvasElement;\n  private _ctx: ExcaliburGraphicsContext;\n  private _antialiasing: boolean = true;\n  private _browser: BrowserEvents;\n  private _camera: Camera;\n  private _resolution: ScreenDimension;\n  private _resolutionStack: ScreenDimension[] = [];\n  private _viewport: ScreenDimension;\n  private _viewportStack: ScreenDimension[] = [];\n  private _pixelRatio: number | null = null;\n  private _position: CanvasPosition;\n  private _displayMode: DisplayMode;\n  private _isFullScreen = false;\n  private _mediaQueryList: MediaQueryList;\n  private _isDisposed = false;\n  private _logger = Logger.getInstance();\n\n  constructor(options: ScreenOptions) {\n    this.viewport = options.viewport;\n    this.resolution = options.resolution ?? { ...this.viewport };\n    this._displayMode = options.displayMode ?? DisplayMode.Fixed;\n    this._canvas = options.canvas;\n    this._ctx = options.context;\n    this._antialiasing = options.antialiasing ?? this._antialiasing;\n    this._browser = options.browser;\n    this._position = options.position;\n    this._pixelRatio = options.pixelRatio;\n    this._applyDisplayMode();\n\n    this._mediaQueryList = this._browser.window.nativeComponent.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);\n    this._mediaQueryList.addEventListener('change', this._pixelRatioChangeHandler);\n  }\n\n  public dispose(): void {\n    if (!this._isDisposed) {\n      // Clean up handlers\n      this._isDisposed = true;\n      this._browser.window.off('resize', this._windowResizeHandler);\n      this._mediaQueryList.removeEventListener('change', this._pixelRatioChangeHandler);\n    }\n  }\n\n  private _pixelRatioChangeHandler = () => {\n    this._logger.debug('Pixel Ratio Change', window.devicePixelRatio);\n    this.applyResolutionAndViewport();\n  };\n\n  private _windowResizeHandler = () => {\n    const parent = <any>(this.displayMode === DisplayMode.Container ? <any>(this.canvas.parentElement || document.body) : <any>window);\n    this._logger.debug('View port resized');\n    this._setHeightByDisplayMode(parent);\n    this._logger.info('parent.clientHeight ' + parent.clientHeight);\n    this.applyResolutionAndViewport();\n  };\n\n  public get pixelRatio(): number {\n    if (this._pixelRatio) {\n      return this._pixelRatio;\n    }\n\n    if (window.devicePixelRatio < 1) {\n      return 1;\n    }\n\n    const devicePixelRatio = window.devicePixelRatio || 1;\n\n    return devicePixelRatio;\n  }\n\n  public get isHiDpi() {\n    return this.pixelRatio !== 1;\n  }\n\n  public get displayMode(): DisplayMode {\n    return this._displayMode;\n  }\n\n  public get canvas(): HTMLCanvasElement {\n    return this._canvas;\n  }\n\n  public get resolution(): ScreenDimension {\n    return this._resolution;\n  }\n\n  public set resolution(resolution: ScreenDimension) {\n    this._resolution = resolution;\n  }\n\n  public get viewport(): ScreenDimension {\n    if (this._viewport) {\n      return this._viewport;\n    }\n    return this._resolution;\n  }\n\n  public set viewport(viewport: ScreenDimension) {\n    this._viewport = viewport;\n  }\n\n  public get scaledWidth() {\n    return this._resolution.width * this.pixelRatio;\n  }\n\n  public get scaledHeight() {\n    return this._resolution.height * this.pixelRatio;\n  }\n\n  public setCurrentCamera(camera: Camera) {\n    this._camera = camera;\n  }\n\n  public pushResolutionAndViewport() {\n    this._resolutionStack.push(this.resolution);\n    this._viewportStack.push(this.viewport);\n\n    this.resolution = { ...this.resolution };\n    this.viewport = { ...this.viewport };\n  }\n\n  public popResolutionAndViewport() {\n    this.resolution = this._resolutionStack.pop();\n    this.viewport = this._viewportStack.pop();\n  }\n\n  public applyResolutionAndViewport() {\n    this._canvas.width = this.scaledWidth;\n    this._canvas.height = this.scaledHeight;\n\n    this._canvas.style.imageRendering = this._antialiasing ? 'auto' : 'pixelated';\n    this._canvas.style.width = this.viewport.width + 'px';\n    this._canvas.style.height = this.viewport.height + 'px';\n\n    // After messing with the canvas width/height the graphics context is invalidated and needs to have some properties reset\n    this._ctx.resetTransform();\n    this._ctx.scale(this.pixelRatio, this.pixelRatio);\n    this._ctx.imageSmoothingEnabled = this._antialiasing;\n  }\n\n  public get antialiasing() {\n    return this._antialiasing;\n  }\n\n  public set antialiasing(isSmooth: boolean) {\n    this._antialiasing = isSmooth;\n    this._ctx.imageSmoothingEnabled = this._antialiasing;\n  }\n\n  /**\n   * Returns true if excalibur is fullscreened using the browser fullscreen api\n   */\n  public get isFullScreen() {\n    return this._isFullScreen;\n  }\n\n  /**\n   * Requests to go fullscreen using the browser fullscreen api\n   */\n  public goFullScreen(): Promise<void> {\n    return this._canvas.requestFullscreen().then(() => {\n      this._isFullScreen = true;\n    });\n  }\n\n  /**\n   * Requests to exit fullscreen using the browser fullscreen api\n   */\n  public exitFullScreen(): Promise<void> {\n    return document.exitFullscreen().then(() => {\n      this._isFullScreen = false;\n    });\n  }\n\n  /**\n   * Transforms the current x, y from screen coordinates to world coordinates\n   * @param point  Screen coordinate to convert\n   */\n  public screenToWorldCoordinates(point: Vector): Vector {\n    let newX = point.x;\n    let newY = point.y;\n\n    // transform back to world space\n    newX = (newX / this.viewport.width) * this.drawWidth;\n    newY = (newY / this.viewport.height) * this.drawHeight;\n\n    // transform based on zoom\n    newX = newX - this.halfDrawWidth;\n    newY = newY - this.halfDrawHeight;\n\n    // shift by focus\n    newX += this._camera?.x ?? 0;\n    newY += this._camera?.y ?? 0;\n\n    return new Vector(Math.floor(newX), Math.floor(newY));\n  }\n\n  /**\n   * Transforms a world coordinate, to a screen coordinate\n   * @param point  World coordinate to convert\n   */\n  public worldToScreenCoordinates(point: Vector): Vector {\n    let screenX = point.x;\n    let screenY = point.y;\n\n    // shift by focus\n    screenX -= this._camera?.x ?? 0;\n    screenY -= this._camera?.y ?? 0;\n\n    // transform back on zoom\n    screenX = screenX + this.halfDrawWidth;\n    screenY = screenY + this.halfDrawHeight;\n\n    // transform back to screen space\n    screenX = (screenX * this.viewport.width) / this.drawWidth;\n    screenY = (screenY * this.viewport.height) / this.drawHeight;\n\n    return new Vector(Math.floor(screenX), Math.floor(screenY));\n  }\n\n  /**\n   * Returns a BoundingBox of the top left corner of the screen\n   * and the bottom right corner of the screen.\n   */\n  public getWorldBounds(): BoundingBox {\n    const left = this.screenToWorldCoordinates(Vector.Zero).x;\n    const top = this.screenToWorldCoordinates(Vector.Zero).y;\n    const right = left + this.drawWidth;\n    const bottom = top + this.drawHeight;\n\n    return new BoundingBox(left, top, right, bottom);\n  }\n\n  /**\n   * The width of the game canvas in pixels (physical width component of the\n   * resolution of the canvas element)\n   */\n  public get canvasWidth(): number {\n    return this.canvas.width;\n  }\n\n  /**\n   * Returns half width of the game canvas in pixels (half physical width component)\n   */\n  public get halfCanvasWidth(): number {\n    return this.canvas.width / 2;\n  }\n\n  /**\n   * The height of the game canvas in pixels, (physical height component of\n   * the resolution of the canvas element)\n   */\n  public get canvasHeight(): number {\n    return this.canvas.height;\n  }\n\n  /**\n   * Returns half height of the game canvas in pixels (half physical height component)\n   */\n  public get halfCanvasHeight(): number {\n    return this.canvas.height / 2;\n  }\n\n  /**\n   * Returns the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n   */\n  public get drawWidth(): number {\n    if (this._camera) {\n      return this.scaledWidth / this._camera.z / this.pixelRatio;\n    }\n    return this.scaledWidth / this.pixelRatio;\n  }\n\n  /**\n   * Returns half the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n   */\n  public get halfDrawWidth(): number {\n    return this.drawWidth / 2;\n  }\n\n  /**\n   * Returns the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n   */\n  public get drawHeight(): number {\n    if (this._camera) {\n      return this.scaledHeight / this._camera.z / this.pixelRatio;\n    }\n    return this.scaledHeight / this.pixelRatio;\n  }\n\n  /**\n   * Returns half the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n   */\n  public get halfDrawHeight(): number {\n    return this.drawHeight / 2;\n  }\n\n  private _applyDisplayMode() {\n    if (this.displayMode === DisplayMode.FullScreen || this.displayMode === DisplayMode.Container) {\n      const parent = <any>(this.displayMode === DisplayMode.Container ? <any>(this.canvas.parentElement || document.body) : <any>window);\n\n      this._setHeightByDisplayMode(parent);\n\n      this._browser.window.on('resize', this._windowResizeHandler);\n    } else if (this.displayMode === DisplayMode.Position) {\n      this._initializeDisplayModePosition(this._position);\n    }\n  }\n\n  /**\n   * Sets the internal canvas height based on the selected display mode.\n   */\n  private _setHeightByDisplayMode(parent: HTMLElement | Window) {\n    if (this.displayMode === DisplayMode.Container) {\n      this.resolution = {\n        width: (<HTMLElement>parent).clientWidth,\n        height: (<HTMLElement>parent).clientHeight\n      };\n\n      this.viewport = this.resolution;\n    }\n\n    if (this.displayMode === DisplayMode.FullScreen) {\n      document.body.style.margin = '0px';\n      document.body.style.overflow = 'hidden';\n      this.resolution = {\n        width: (<Window>parent).innerWidth,\n        height: (<Window>parent).innerHeight\n      };\n\n      this.viewport = this.resolution;\n    }\n  }\n\n  private _initializeDisplayModePosition(position: CanvasPosition) {\n    if (!position) {\n      throw new Error('DisplayMode of Position was selected but no position option was given');\n    } else {\n      this.canvas.style.display = 'block';\n      this.canvas.style.position = 'absolute';\n\n      if (typeof position === 'string') {\n        const specifiedPosition = position.split(' ');\n\n        switch (specifiedPosition[0]) {\n          case 'top':\n            this.canvas.style.top = '0px';\n            break;\n          case 'bottom':\n            this.canvas.style.bottom = '0px';\n            break;\n          case 'middle':\n            this.canvas.style.top = '50%';\n            const offsetY = -this.halfDrawHeight;\n            this.canvas.style.marginTop = offsetY.toString();\n            break;\n          default:\n            throw new Error('Invalid Position Given');\n        }\n\n        if (specifiedPosition[1]) {\n          switch (specifiedPosition[1]) {\n            case 'left':\n              this.canvas.style.left = '0px';\n              break;\n            case 'right':\n              this.canvas.style.right = '0px';\n              break;\n            case 'center':\n              this.canvas.style.left = '50%';\n              const offsetX = -this.halfDrawWidth;\n              this.canvas.style.marginLeft = offsetX.toString();\n              break;\n            default:\n              throw new Error('Invalid Position Given');\n          }\n        }\n      } else {\n        if (position.top) {\n          typeof position.top === 'number'\n            ? (this.canvas.style.top = position.top.toString() + 'px')\n            : (this.canvas.style.top = position.top);\n        }\n        if (position.right) {\n          typeof position.right === 'number'\n            ? (this.canvas.style.right = position.right.toString() + 'px')\n            : (this.canvas.style.right = position.right);\n        }\n        if (position.bottom) {\n          typeof position.bottom === 'number'\n            ? (this.canvas.style.bottom = position.bottom.toString() + 'px')\n            : (this.canvas.style.bottom = position.bottom);\n        }\n        if (position.left) {\n          typeof position.left === 'number'\n            ? (this.canvas.style.left = position.left.toString() + 'px')\n            : (this.canvas.style.left = position.left);\n        }\n      }\n    }\n  }\n}\n", "import { BoundingBox } from './BoundingBox';\nimport { CollisionJumpTable } from './CollisionJumpTable';\nimport { CollisionContact } from './CollisionContact';\nimport { CollisionShape } from './CollisionShape';\nimport { ConvexPolygon } from './ConvexPolygon';\nimport { Edge } from './Edge';\n\nimport { Vector, Ray, Projection, Line } from '../Algebra';\nimport { Physics } from '../Physics';\nimport { Color } from '../Drawing/Color';\nimport { Collider } from './Collider';\n\nimport { ClosestLineJumpTable } from './ClosestLineJumpTable';\n\nexport interface CircleOptions {\n  /**\n   * Optional pixel offset to shift the circle relative to the collider, by default (0, 0).\n   */\n  offset?: Vector;\n  /**\n   * Required radius of the circle\n   */\n  radius: number;\n  /**\n   * Optional collider to associate with this shape\n   */\n  collider?: Collider;\n}\n\n/**\n * This is a circle collision shape for the excalibur rigid body physics simulation\n *\n * Example:\n * [[include:CircleShape.md]]\n */\nexport class Circle implements CollisionShape {\n  /**\n   * Position of the circle relative to the collider, by default (0, 0) meaning the shape is positioned on top of the collider.\n   */\n  public offset: Vector = Vector.Zero;\n\n  public get worldPos(): Vector {\n    if (this.collider && this.collider.body) {\n      return this.collider.body.pos.add(this.offset);\n    }\n    return this.offset;\n  }\n\n  /**\n   * This is the radius of the circle\n   */\n  public radius: number;\n\n  /**\n   * The collider associated for this shape, if any.\n   */\n  public collider?: Collider;\n\n  constructor(options: CircleOptions) {\n    this.offset = options.offset || Vector.Zero;\n    this.radius = options.radius || 0;\n    this.collider = options.collider || null;\n  }\n\n  /**\n   * Returns a clone of this shape, not associated with any collider\n   */\n  public clone(): Circle {\n    return new Circle({\n      offset: this.offset.clone(),\n      radius: this.radius,\n      collider: null\n    });\n  }\n\n  /**\n   * Get the center of the collision shape in world coordinates\n   */\n  public get center(): Vector {\n    if (this.collider && this.collider.body) {\n      return this.offset.add(this.collider.body.pos);\n    }\n    return this.offset;\n  }\n\n  /**\n   * Tests if a point is contained in this collision shape\n   */\n  public contains(point: Vector): boolean {\n    let pos = this.offset;\n    if (this.collider && this.collider.body) {\n      pos = this.collider.body.pos;\n    }\n    const distance = pos.distance(point);\n    if (distance <= this.radius) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Casts a ray at the Circle shape and returns the nearest point of collision\n   * @param ray\n   */\n  public rayCast(ray: Ray, max: number = Infinity): Vector {\n    //https://en.wikipedia.org/wiki/Line%E2%80%93sphere_intersection\n    const c = this.center;\n    const dir = ray.dir;\n    const orig = ray.pos;\n\n    const discriminant = Math.sqrt(Math.pow(dir.dot(orig.sub(c)), 2) - Math.pow(orig.sub(c).distance(), 2) + Math.pow(this.radius, 2));\n\n    if (discriminant < 0) {\n      // no intersection\n      return null;\n    } else {\n      let toi = 0;\n      if (discriminant === 0) {\n        toi = -dir.dot(orig.sub(c));\n        if (toi > 0 && toi < max) {\n          return ray.getPoint(toi);\n        }\n        return null;\n      } else {\n        const toi1 = -dir.dot(orig.sub(c)) + discriminant;\n        const toi2 = -dir.dot(orig.sub(c)) - discriminant;\n\n        const positiveToi: number[] = [];\n        if (toi1 >= 0) {\n          positiveToi.push(toi1);\n        }\n\n        if (toi2 >= 0) {\n          positiveToi.push(toi2);\n        }\n\n        const mintoi = Math.min(...positiveToi);\n        if (mintoi <= max) {\n          return ray.getPoint(mintoi);\n        }\n        return null;\n      }\n    }\n  }\n\n  public getClosestLineBetween(shape: CollisionShape): Line {\n    if (shape instanceof Circle) {\n      return ClosestLineJumpTable.CircleCircleClosestLine(this, shape);\n    } else if (shape instanceof ConvexPolygon) {\n      return ClosestLineJumpTable.PolygonCircleClosestLine(shape, this).flip();\n    } else if (shape instanceof Edge) {\n      return ClosestLineJumpTable.CircleEdgeClosestLine(this, shape).flip();\n    } else {\n      throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof shape}`);\n    }\n  }\n\n  /**\n   * @inheritdoc\n   */\n  public collide(shape: CollisionShape): CollisionContact {\n    if (shape instanceof Circle) {\n      return CollisionJumpTable.CollideCircleCircle(this, shape);\n    } else if (shape instanceof ConvexPolygon) {\n      return CollisionJumpTable.CollideCirclePolygon(this, shape);\n    } else if (shape instanceof Edge) {\n      return CollisionJumpTable.CollideCircleEdge(this, shape);\n    } else {\n      throw new Error(`Circle could not collide with unknown CollisionShape ${typeof shape}`);\n    }\n  }\n\n  /**\n   * Find the point on the shape furthest in the direction specified\n   */\n  public getFurthestPoint(direction: Vector): Vector {\n    return this.center.add(direction.normalize().scale(this.radius));\n  }\n\n  /**\n   * Get the axis aligned bounding box for the circle shape in world coordinates\n   */\n  public get bounds(): BoundingBox {\n    let bodyPos = Vector.Zero;\n    if (this.collider && this.collider.body) {\n      bodyPos = this.collider.body.pos;\n    }\n    return new BoundingBox(\n      this.offset.x + bodyPos.x - this.radius,\n      this.offset.y + bodyPos.y - this.radius,\n      this.offset.x + bodyPos.x + this.radius,\n      this.offset.y + bodyPos.y + this.radius\n    );\n  }\n\n  /**\n   * Get the axis aligned bounding box for the circle shape in local coordinates\n   */\n  public get localBounds(): BoundingBox {\n    return new BoundingBox(\n      this.offset.x - this.radius,\n      this.offset.y - this.radius,\n      this.offset.x + this.radius,\n      this.offset.y + this.radius\n    );\n  }\n\n  /**\n   * Get axis not implemented on circles, since there are infinite axis in a circle\n   */\n  public get axes(): Vector[] {\n    return null;\n  }\n\n  /**\n   * Returns the moment of inertia of a circle given it's mass\n   * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\n   */\n  public get inertia(): number {\n    const mass = this.collider ? this.collider.mass : Physics.defaultMass;\n    return (mass * this.radius * this.radius) / 2;\n  }\n\n  /**\n   * Tests the separating axis theorem for circles against polygons\n   */\n  public testSeparatingAxisTheorem(polygon: ConvexPolygon): Vector {\n    const axes = polygon.axes;\n    const pc = polygon.center;\n    // Special SAT with circles\n    const closestPointOnPoly = polygon.getFurthestPoint(this.offset.sub(pc));\n    axes.push(this.offset.sub(closestPointOnPoly).normalize());\n\n    let minOverlap = Number.MAX_VALUE;\n    let minAxis = null;\n    let minIndex = -1;\n    for (let i = 0; i < axes.length; i++) {\n      const proj1 = polygon.project(axes[i]);\n      const proj2 = this.project(axes[i]);\n      const overlap = proj1.getOverlap(proj2);\n      if (overlap <= 0) {\n        return null;\n      } else {\n        if (overlap < minOverlap) {\n          minOverlap = overlap;\n          minAxis = axes[i];\n          minIndex = i;\n        }\n      }\n    }\n    if (minIndex < 0) {\n      return null;\n    }\n    return minAxis.normalize().scale(minOverlap);\n  }\n\n  /* istanbul ignore next */\n  public recalc(): void {\n    // circles don't cache\n  }\n\n  /**\n   * Project the circle along a specified axis\n   */\n  public project(axis: Vector): Projection {\n    const scalars = [];\n    const point = this.center;\n    const dotProduct = point.dot(axis);\n    scalars.push(dotProduct);\n    scalars.push(dotProduct + this.radius);\n    scalars.push(dotProduct - this.radius);\n    return new Projection(Math.min.apply(Math, scalars), Math.max.apply(Math, scalars));\n  }\n\n  public draw(ctx: CanvasRenderingContext2D, color: Color = Color.Green, pos: Vector = Vector.Zero) {\n    const newPos = pos.add(this.offset);\n    ctx.beginPath();\n    ctx.fillStyle = color.toString();\n    ctx.arc(newPos.x, newPos.y, this.radius, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.fill();\n  }\n\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D, color: Color = Color.Green) {\n    const body = this.collider.body;\n    const pos = body ? body.pos.add(this.offset) : this.offset;\n    const rotation = body ? body.rotation : 0;\n\n    ctx.beginPath();\n    ctx.strokeStyle = color.toString();\n    ctx.arc(pos.x, pos.y, this.radius, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.stroke();\n    ctx.beginPath();\n    ctx.moveTo(pos.x, pos.y);\n    ctx.lineTo(Math.cos(rotation) * this.radius + pos.x, Math.sin(rotation) * this.radius + pos.y);\n    ctx.closePath();\n    ctx.stroke();\n  }\n}\n", "import { Body } from './Body';\nimport { BoundingBox } from './BoundingBox';\nimport { CollisionContact } from './CollisionContact';\nimport { CollisionJumpTable } from './CollisionJumpTable';\nimport { CollisionShape } from './CollisionShape';\nimport { Circle } from './Circle';\nimport { ConvexPolygon } from './ConvexPolygon';\n\nimport { Vector, Ray, Projection, Line } from '../Algebra';\nimport { Physics } from '../Physics';\nimport { Color } from '../Drawing/Color';\nimport { Collider } from './Collider';\nimport { ClosestLineJumpTable } from './ClosestLineJumpTable';\n\nexport interface EdgeOptions {\n  /**\n   * The beginning of the edge defined in local coordinates to the collider\n   */\n  begin: Vector;\n  /**\n   * The ending of the edge defined in local coordinates to the collider\n   */\n  end: Vector;\n  /**\n   * Optionally the collider associated with this edge\n   */\n  collider?: Collider;\n}\n\n/**\n * Edge is a single line collision shape to create collisions with a single line.\n *\n * Example:\n * [[include:EdgeShape.md]]\n */\nexport class Edge implements CollisionShape {\n  body: Body;\n  collider?: Collider;\n  offset: Vector;\n  begin: Vector;\n  end: Vector;\n\n  constructor(options: EdgeOptions) {\n    this.begin = options.begin || Vector.Zero;\n    this.end = options.end || Vector.Zero;\n    this.collider = options.collider || null;\n    this.offset = this.center;\n  }\n\n  /**\n   * Returns a clone of this Edge, not associated with any collider\n   */\n  public clone(): Edge {\n    return new Edge({\n      begin: this.begin.clone(),\n      end: this.end.clone(),\n      collider: null\n    });\n  }\n\n  public get worldPos(): Vector {\n    if (this.collider && this.collider.body) {\n      return this.collider.body.pos.add(this.offset);\n    }\n    return this.offset;\n  }\n\n  /**\n   * Get the center of the collision area in world coordinates\n   */\n  public get center(): Vector {\n    const pos = this.begin.average(this.end).add(this._getBodyPos());\n    return pos;\n  }\n\n  private _getBodyPos(): Vector {\n    let bodyPos = Vector.Zero;\n    if (this.collider && this.collider.body) {\n      bodyPos = this.collider.body.pos;\n    }\n    return bodyPos;\n  }\n\n  private _getTransformedBegin(): Vector {\n    const body = this.collider ? this.collider.body : null;\n    const angle = body ? body.rotation : 0;\n    return this.begin.rotate(angle).add(this._getBodyPos());\n  }\n\n  private _getTransformedEnd(): Vector {\n    const body = this.collider ? this.collider.body : null;\n    const angle = body ? body.rotation : 0;\n    return this.end.rotate(angle).add(this._getBodyPos());\n  }\n\n  /**\n   * Returns the slope of the line in the form of a vector\n   */\n  public getSlope(): Vector {\n    const begin = this._getTransformedBegin();\n    const end = this._getTransformedEnd();\n    const distance = begin.distance(end);\n    return end.sub(begin).scale(1 / distance);\n  }\n\n  /**\n   * Returns the length of the line segment in pixels\n   */\n  public getLength(): number {\n    const begin = this._getTransformedBegin();\n    const end = this._getTransformedEnd();\n    const distance = begin.distance(end);\n    return distance;\n  }\n\n  /**\n   * Tests if a point is contained in this collision area\n   */\n  public contains(): boolean {\n    return false;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  public rayCast(ray: Ray, max: number = Infinity): Vector {\n    const numerator = this._getTransformedBegin().sub(ray.pos);\n\n    // Test is line and ray are parallel and non intersecting\n    if (ray.dir.cross(this.getSlope()) === 0 && numerator.cross(ray.dir) !== 0) {\n      return null;\n    }\n\n    // Lines are parallel\n    const divisor = ray.dir.cross(this.getSlope());\n    if (divisor === 0) {\n      return null;\n    }\n\n    const t = numerator.cross(this.getSlope()) / divisor;\n\n    if (t >= 0 && t <= max) {\n      const u = numerator.cross(ray.dir) / divisor / this.getLength();\n      if (u >= 0 && u <= 1) {\n        return ray.getPoint(t);\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Returns the closes line between this and another shape, from this -> shape\n   * @param shape\n   */\n  public getClosestLineBetween(shape: CollisionShape): Line {\n    if (shape instanceof Circle) {\n      return ClosestLineJumpTable.CircleEdgeClosestLine(shape, this);\n    } else if (shape instanceof ConvexPolygon) {\n      return ClosestLineJumpTable.PolygonEdgeClosestLine(shape, this).flip();\n    } else if (shape instanceof Edge) {\n      return ClosestLineJumpTable.EdgeEdgeClosestLine(this, shape);\n    } else {\n      throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof shape}`);\n    }\n  }\n\n  /**\n   * @inheritdoc\n   */\n  public collide(shape: CollisionShape): CollisionContact {\n    if (shape instanceof Circle) {\n      return CollisionJumpTable.CollideCircleEdge(shape, this);\n    } else if (shape instanceof ConvexPolygon) {\n      return CollisionJumpTable.CollidePolygonEdge(shape, this);\n    } else if (shape instanceof Edge) {\n      return CollisionJumpTable.CollideEdgeEdge();\n    } else {\n      throw new Error(`Edge could not collide with unknown CollisionShape ${typeof shape}`);\n    }\n  }\n\n  /**\n   * Find the point on the shape furthest in the direction specified\n   */\n  public getFurthestPoint(direction: Vector): Vector {\n    const transformedBegin = this._getTransformedBegin();\n    const transformedEnd = this._getTransformedEnd();\n    if (direction.dot(transformedBegin) > 0) {\n      return transformedBegin;\n    } else {\n      return transformedEnd;\n    }\n  }\n\n  private _boundsFromBeginEnd(begin: Vector, end: Vector) {\n    return new BoundingBox(Math.min(begin.x, end.x), Math.min(begin.y, end.y), Math.max(begin.x, end.x), Math.max(begin.y, end.y));\n  }\n\n  /**\n   * Get the axis aligned bounding box for the edge shape in world space\n   */\n  public get bounds(): BoundingBox {\n    const transformedBegin = this._getTransformedBegin();\n    const transformedEnd = this._getTransformedEnd();\n    return this._boundsFromBeginEnd(transformedBegin, transformedEnd);\n  }\n\n  /**\n   * Get the axis aligned bounding box for the edge shape in local space\n   */\n  public get localBounds(): BoundingBox {\n    return this._boundsFromBeginEnd(this.begin, this.end);\n  }\n\n  /**\n   * Returns this edge represented as a line in world coordinates\n   */\n  public asLine(): Line {\n    return new Line(this._getTransformedBegin(), this._getTransformedEnd());\n  }\n\n  public asLocalLine(): Line {\n    return new Line(this.begin, this.end);\n  }\n\n  /**\n   * Get the axis associated with the edge\n   */\n  public get axes(): Vector[] {\n    const e = this._getTransformedEnd().sub(this._getTransformedBegin());\n    const edgeNormal = e.normal();\n\n    const axes = [];\n    axes.push(edgeNormal);\n    axes.push(edgeNormal.negate());\n    axes.push(edgeNormal.normal());\n    axes.push(edgeNormal.normal().negate());\n    return axes;\n  }\n\n  /**\n   * Get the moment of inertia for an edge\n   * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\n   */\n  public get inertia(): number {\n    const mass = this.collider ? this.collider.mass : Physics.defaultMass;\n    const length = this.end.sub(this.begin).distance() / 2;\n    return mass * length * length;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  public recalc(): void {\n    // edges don't have any cached data\n  }\n\n  /**\n   * Project the edge along a specified axis\n   */\n  public project(axis: Vector): Projection {\n    const scalars = [];\n\n    const points = [this._getTransformedBegin(), this._getTransformedEnd()];\n    const len = points.length;\n    for (let i = 0; i < len; i++) {\n      scalars.push(points[i].dot(axis));\n    }\n\n    return new Projection(Math.min.apply(Math, scalars), Math.max.apply(Math, scalars));\n  }\n\n  public draw(ctx: CanvasRenderingContext2D, color: Color = Color.Green, pos: Vector = Vector.Zero) {\n    const begin = this.begin.add(pos);\n    const end = this.end.add(pos);\n    ctx.strokeStyle = color.toString();\n    ctx.beginPath();\n    ctx.moveTo(begin.x, begin.y);\n    ctx.lineTo(end.x, end.y);\n    ctx.closePath();\n    ctx.stroke();\n  }\n\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D, color: Color = Color.Red) {\n    const begin = this._getTransformedBegin();\n    const end = this._getTransformedEnd();\n    ctx.strokeStyle = color.toString();\n    ctx.beginPath();\n    ctx.moveTo(begin.x, begin.y);\n    ctx.lineTo(end.x, end.y);\n    ctx.closePath();\n    ctx.stroke();\n  }\n}\n", "import { Color } from '../Drawing/Color';\nimport { Physics } from '../Physics';\nimport { BoundingBox } from './BoundingBox';\nimport { Edge } from './Edge';\nimport { CollisionJumpTable } from './CollisionJumpTable';\nimport { Circle } from './Circle';\nimport { CollisionContact } from './CollisionContact';\nimport { CollisionShape } from './CollisionShape';\nimport { Vector, Line, Ray, Projection } from '../Algebra';\nimport { Collider } from './Collider';\nimport { ClosestLineJumpTable } from './ClosestLineJumpTable';\n\nexport interface ConvexPolygonOptions {\n  /**\n   * Pixel offset relative to a collider's position\n   */\n\n  offset?: Vector;\n  /**\n   * Points in the polygon in order around the perimeter in local coordinates\n   */\n  points: Vector[];\n  /**\n   * Whether points are specified in clockwise or counter clockwise order, default counter-clockwise\n   */\n  clockwiseWinding?: boolean;\n  /**\n   * Collider to associate optionally with this shape\n   */\n  collider?: Collider;\n}\n\n/**\n * Polygon collision shape for detecting collisions\n *\n * Example:\n * [[include:BoxAndPolygonShape.md]]\n */\nexport class ConvexPolygon implements CollisionShape {\n  public offset: Vector;\n  public points: Vector[];\n\n  /**\n   * Collider associated with this shape\n   */\n  public collider?: Collider;\n\n  private _transformedPoints: Vector[] = [];\n  private _axes: Vector[] = [];\n  private _sides: Line[] = [];\n\n  constructor(options: ConvexPolygonOptions) {\n    this.offset = options.offset || Vector.Zero;\n    const winding = !!options.clockwiseWinding;\n    this.points = (winding ? options.points.reverse() : options.points) || [];\n    this.collider = this.collider = options.collider || null;\n\n    // calculate initial transformation\n    this._calculateTransformation();\n  }\n\n  /**\n   * Returns a clone of this ConvexPolygon, not associated with any collider\n   */\n  public clone(): ConvexPolygon {\n    return new ConvexPolygon({\n      offset: this.offset.clone(),\n      points: this.points.map((p) => p.clone()),\n      collider: null\n    });\n  }\n\n  public get worldPos(): Vector {\n    if (this.collider && this.collider.body) {\n      return this.collider.body.pos.add(this.offset);\n    }\n    return this.offset;\n  }\n\n  /**\n   * Get the center of the collision shape in world coordinates\n   */\n  public get center(): Vector {\n    const body = this.collider ? this.collider.body : null;\n    if (body) {\n      return body.pos.add(this.offset);\n    }\n    return this.offset;\n  }\n\n  /**\n   * Calculates the underlying transformation from the body relative space to world space\n   */\n  private _calculateTransformation() {\n    const body = this.collider ? this.collider.body : null;\n    const pos = body ? body.pos.add(this.offset) : this.offset;\n    const angle = body ? body.rotation : 0;\n    const scale = body ? body.scale : Vector.One;\n\n    const len = this.points.length;\n    this._transformedPoints.length = 0; // clear out old transform\n    for (let i = 0; i < len; i++) {\n      this._transformedPoints[i] = this.points[i]\n        .scale(scale)\n        .rotate(angle)\n        .add(pos);\n    }\n  }\n\n  /**\n   * Gets the points that make up the polygon in world space, from actor relative space (if specified)\n   */\n  public getTransformedPoints(): Vector[] {\n    // only recalculate geometry if, hasn't been calculated\n    if (\n      !this._transformedPoints.length ||\n      // or the position or rotation has changed in world space\n      (this.collider &&\n        this.collider.body &&\n        (!this.collider.body.oldPos.equals(this.collider.body.pos) ||\n          this.collider.body.oldRotation !== this.collider.body.rotation ||\n          this.collider.body.oldScale !== this.collider.body.scale))\n    ) {\n      this._calculateTransformation();\n    }\n    return this._transformedPoints;\n  }\n\n  /**\n   * Gets the sides of the polygon in world space\n   */\n  public getSides(): Line[] {\n    if (this._sides.length) {\n      return this._sides;\n    }\n    const lines = [];\n    const points = this.getTransformedPoints();\n    const len = points.length;\n    for (let i = 0; i < len; i++) {\n      lines.push(new Line(points[i], points[(i - 1 + len) % len]));\n    }\n    this._sides = lines;\n    return this._sides;\n  }\n\n  public recalc(): void {\n    this._sides.length = 0;\n    this._axes.length = 0;\n    this._transformedPoints.length = 0;\n    this.getTransformedPoints();\n    this.getSides();\n  }\n\n  /**\n   * Tests if a point is contained in this collision shape in world space\n   */\n  public contains(point: Vector): boolean {\n    // Always cast to the right, as long as we cast in a consistent fixed direction we\n    // will be fine\n    const testRay = new Ray(point, new Vector(1, 0));\n    const intersectCount = this.getSides().reduce(function(accum, side) {\n      if (testRay.intersect(side) >= 0) {\n        return accum + 1;\n      }\n      return accum;\n    }, 0);\n\n    if (intersectCount % 2 === 0) {\n      return false;\n    }\n    return true;\n  }\n\n  public getClosestLineBetween(shape: CollisionShape): Line {\n    if (shape instanceof Circle) {\n      return ClosestLineJumpTable.PolygonCircleClosestLine(this, shape);\n    } else if (shape instanceof ConvexPolygon) {\n      return ClosestLineJumpTable.PolygonPolygonClosestLine(this, shape);\n    } else if (shape instanceof Edge) {\n      return ClosestLineJumpTable.PolygonEdgeClosestLine(this, shape);\n    } else {\n      throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof shape}`);\n    }\n  }\n\n  /**\n   * Returns a collision contact if the 2 collision shapes collide, otherwise collide will\n   * return null.\n   * @param shape\n   */\n  public collide(shape: CollisionShape): CollisionContact {\n    if (shape instanceof Circle) {\n      return CollisionJumpTable.CollideCirclePolygon(shape, this);\n    } else if (shape instanceof ConvexPolygon) {\n      return CollisionJumpTable.CollidePolygonPolygon(this, shape);\n    } else if (shape instanceof Edge) {\n      return CollisionJumpTable.CollidePolygonEdge(this, shape);\n    } else {\n      throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof shape}`);\n    }\n  }\n\n  /**\n   * Find the point on the shape furthest in the direction specified\n   */\n  public getFurthestPoint(direction: Vector): Vector {\n    const pts = this.getTransformedPoints();\n    let furthestPoint = null;\n    let maxDistance = -Number.MAX_VALUE;\n    for (let i = 0; i < pts.length; i++) {\n      const distance = direction.dot(pts[i]);\n      if (distance > maxDistance) {\n        maxDistance = distance;\n        furthestPoint = pts[i];\n      }\n    }\n    return furthestPoint;\n  }\n\n  /**\n   * Finds the closes face to the point using perpendicular distance\n   * @param point point to test against polygon\n   */\n  public getClosestFace(point: Vector): { distance: Vector; face: Line } {\n    const sides = this.getSides();\n    let min = Number.POSITIVE_INFINITY;\n    let faceIndex = -1;\n    let distance = -1;\n    for (let i = 0; i < sides.length; i++) {\n      const dist = sides[i].distanceToPoint(point);\n      if (dist < min) {\n        min = dist;\n        faceIndex = i;\n        distance = dist;\n      }\n    }\n\n    if (faceIndex !== -1) {\n      return {\n        distance: sides[faceIndex].normal().scale(distance),\n        face: sides[faceIndex]\n      };\n    }\n\n    return null;\n  }\n\n  /**\n   * Get the axis aligned bounding box for the polygon shape in world coordinates\n   */\n  public get bounds(): BoundingBox {\n    const points = this.getTransformedPoints();\n\n    return BoundingBox.fromPoints(points);\n  }\n\n  /**\n   * Get the axis aligned bounding box for the polygon shape in local coordinates\n   */\n  public get localBounds(): BoundingBox {\n    return BoundingBox.fromPoints(this.points);\n  }\n\n  /**\n   * Get the moment of inertia for an arbitrary polygon\n   * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\n   */\n  public get inertia(): number {\n    const mass = this.collider ? this.collider.mass : Physics.defaultMass;\n    let numerator = 0;\n    let denominator = 0;\n    for (let i = 0; i < this.points.length; i++) {\n      const iplusone = (i + 1) % this.points.length;\n      const crossTerm = this.points[iplusone].cross(this.points[i]);\n      numerator +=\n        crossTerm *\n        (this.points[i].dot(this.points[i]) + this.points[i].dot(this.points[iplusone]) + this.points[iplusone].dot(this.points[iplusone]));\n      denominator += crossTerm;\n    }\n    return (mass / 6) * (numerator / denominator);\n  }\n\n  /**\n   * Casts a ray into the polygon and returns a vector representing the point of contact (in world space) or null if no collision.\n   */\n  public rayCast(ray: Ray, max: number = Infinity) {\n    // find the minimum contact time greater than 0\n    // contact times less than 0 are behind the ray and we don't want those\n    const sides = this.getSides();\n    const len = sides.length;\n    let minContactTime = Number.MAX_VALUE;\n    let contactIndex = -1;\n    for (let i = 0; i < len; i++) {\n      const contactTime = ray.intersect(sides[i]);\n      if (contactTime >= 0 && contactTime < minContactTime && contactTime <= max) {\n        minContactTime = contactTime;\n        contactIndex = i;\n      }\n    }\n\n    // contact was found\n    if (contactIndex >= 0) {\n      return ray.getPoint(minContactTime);\n    }\n\n    // no contact found\n    return null;\n  }\n\n  /**\n   * Get the axis associated with the convex polygon\n   */\n  public get axes(): Vector[] {\n    if (this._axes.length) {\n      return this._axes;\n    }\n\n    const axes = [];\n    const points = this.getTransformedPoints();\n    const len = points.length;\n    for (let i = 0; i < len; i++) {\n      axes.push(points[i].sub(points[(i + 1) % len]).normal());\n    }\n    this._axes = axes;\n    return this._axes;\n  }\n\n  /**\n   * Perform Separating Axis test against another polygon, returns null if no overlap in polys\n   * Reference http://www.dyn4j.org/2010/01/sat/\n   */\n  public testSeparatingAxisTheorem(other: ConvexPolygon): Vector {\n    const poly1 = this;\n    const poly2 = other;\n    const axes = poly1.axes.concat(poly2.axes);\n\n    let minOverlap = Number.MAX_VALUE;\n    let minAxis = null;\n    let minIndex = -1;\n    for (let i = 0; i < axes.length; i++) {\n      const proj1 = poly1.project(axes[i]);\n      const proj2 = poly2.project(axes[i]);\n      const overlap = proj1.getOverlap(proj2);\n      if (overlap <= 0) {\n        return null;\n      } else {\n        if (overlap < minOverlap) {\n          minOverlap = overlap;\n          minAxis = axes[i];\n          minIndex = i;\n        }\n      }\n    }\n\n    // Sanity check\n    if (minIndex === -1) {\n      return null;\n    }\n\n    return minAxis.normalize().scale(minOverlap);\n  }\n\n  /**\n   * Project the edges of the polygon along a specified axis\n   */\n  public project(axis: Vector): Projection {\n    const points = this.getTransformedPoints();\n    const len = points.length;\n    let min = Number.MAX_VALUE;\n    let max = -Number.MAX_VALUE;\n    for (let i = 0; i < len; i++) {\n      const scalar = points[i].dot(axis);\n      min = Math.min(min, scalar);\n      max = Math.max(max, scalar);\n    }\n\n    return new Projection(min, max);\n  }\n\n  public draw(ctx: CanvasRenderingContext2D, color: Color = Color.Green, pos: Vector = Vector.Zero) {\n    ctx.beginPath();\n    ctx.fillStyle = color.toString();\n    const newPos = pos.add(this.offset);\n    // Iterate through the supplied points and construct a 'polygon'\n    const firstPoint = this.points[0].add(newPos);\n    ctx.moveTo(firstPoint.x, firstPoint.y);\n    this.points\n      .map((p) => p.add(newPos))\n      .forEach(function(point) {\n        ctx.lineTo(point.x, point.y);\n      });\n    ctx.lineTo(firstPoint.x, firstPoint.y);\n    ctx.closePath();\n    ctx.fill();\n  }\n\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D, color: Color = Color.Red) {\n    ctx.beginPath();\n    ctx.strokeStyle = color.toString();\n    // Iterate through the supplied points and construct a 'polygon'\n    const firstPoint = this.getTransformedPoints()[0];\n    ctx.moveTo(firstPoint.x, firstPoint.y);\n    this.getTransformedPoints().forEach(function(point) {\n      ctx.lineTo(point.x, point.y);\n    });\n    ctx.lineTo(firstPoint.x, firstPoint.y);\n    ctx.closePath();\n    ctx.stroke();\n  }\n}\n", "import { ConvexPolygon } from './ConvexPolygon';\n\nimport { Actor } from '../Actor';\nimport { Vector, Ray } from '../Algebra';\nimport { Color } from '../Drawing/Color';\nimport { Side } from './Side';\n\nexport interface BoundingBoxOptions {\n  left: number;\n  right: number;\n  top: number;\n  bottom: number;\n}\n\n/**\n * Axis Aligned collision primitive for Excalibur.\n */\nexport class BoundingBox {\n  public top: number;\n  public right: number;\n  public bottom: number;\n  public left: number;\n\n  /**\n   * Constructor allows passing of either an object with all coordinate components,\n   * or the coordinate components passed separately.\n   * @param leftOrOptions    Either x coordinate of the left edge or an options object\n   * containing the four coordinate components.\n   * @param top     y coordinate of the top edge\n   * @param right   x coordinate of the right edge\n   * @param bottom  y coordinate of the bottom edge\n   */\n  constructor(leftOrOptions: number | BoundingBoxOptions = 0, top: number = 0, right: number = 0, bottom: number = 0) {\n    if (typeof leftOrOptions === 'object') {\n      this.left = leftOrOptions.left;\n      this.top = leftOrOptions.top;\n      this.right = leftOrOptions.right;\n      this.bottom = leftOrOptions.bottom;\n    } else if (typeof leftOrOptions === 'number') {\n      this.left = leftOrOptions;\n      this.top = top;\n      this.right = right;\n      this.bottom = bottom;\n    }\n  }\n\n  /**\n   * Given bounding box A & B, returns the side relative to A when intersection is performed.\n   * @param intersection Intersection vector between 2 bounding boxes\n   */\n  public static getSideFromIntersection(intersection: Vector): Side {\n    if (!intersection) {\n      return Side.None;\n    }\n    if (intersection) {\n      if (Math.abs(intersection.x) > Math.abs(intersection.y)) {\n        if (intersection.x < 0) {\n          return Side.Right;\n        }\n        return Side.Left;\n      } else {\n        if (intersection.y < 0) {\n          return Side.Bottom;\n        }\n        return Side.Top;\n      }\n    }\n    return Side.None;\n  }\n\n  public static fromPoints(points: Vector[]): BoundingBox {\n    let minX = Infinity;\n    let minY = Infinity;\n    let maxX = -Infinity;\n    let maxY = -Infinity;\n    for (let i = 0; i < points.length; i++) {\n      if (points[i].x < minX) {\n        minX = points[i].x;\n      }\n      if (points[i].x > maxX) {\n        maxX = points[i].x;\n      }\n      if (points[i].y < minY) {\n        minY = points[i].y;\n      }\n      if (points[i].y > maxY) {\n        maxY = points[i].y;\n      }\n    }\n    return new BoundingBox(minX, minY, maxX, maxY);\n  }\n\n  public static fromDimension(width: number, height: number, anchor: Vector = Vector.Half, pos: Vector = Vector.Zero) {\n    return new BoundingBox(\n      -width * anchor.x + pos.x,\n      -height * anchor.y + pos.y,\n      width - width * anchor.x + pos.x,\n      height - height * anchor.y + pos.y\n    );\n  }\n\n  /**\n   * Returns the calculated width of the bounding box\n   */\n  public get width() {\n    return this.right - this.left;\n  }\n\n  /**\n   * Returns the calculated height of the bounding box\n   */\n  public get height() {\n    return this.bottom - this.top;\n  }\n\n  /**\n   * Returns the center of the bounding box\n   */\n  public get center(): Vector {\n    return new Vector((this.left + this.right) / 2, (this.top + this.bottom) / 2);\n  }\n\n  public translate(pos: Vector): BoundingBox {\n    return new BoundingBox(this.left + pos.x, this.top + pos.y, this.right + pos.x, this.bottom + pos.y);\n  }\n\n  /**\n   * Rotates a bounding box by and angle and around a point, if no point is specified (0, 0) is used by default. The resulting bounding\n   * box is also axis-align. This is useful when a new axis-aligned bounding box is needed for rotated geometry.\n   */\n  public rotate(angle: number, point: Vector = Vector.Zero): BoundingBox {\n    const points = this.getPoints().map((p) => p.rotate(angle, point));\n    return BoundingBox.fromPoints(points);\n  }\n\n  public scale(scale: Vector, point: Vector = Vector.Zero): BoundingBox {\n    const shifted = this.translate(point);\n    return new BoundingBox(shifted.left * scale.x, shifted.top * scale.y, shifted.right * scale.x, shifted.bottom * scale.y);\n  }\n\n  /**\n   * Returns the perimeter of the bounding box\n   */\n  public getPerimeter(): number {\n    const wx = this.width;\n    const wy = this.height;\n    return 2 * (wx + wy);\n  }\n\n  public getPoints(): Vector[] {\n    const results = [];\n    results.push(new Vector(this.left, this.top));\n    results.push(new Vector(this.right, this.top));\n    results.push(new Vector(this.right, this.bottom));\n    results.push(new Vector(this.left, this.bottom));\n    return results;\n  }\n\n  /**\n   * Creates a Polygon collision area from the points of the bounding box\n   */\n  public toPolygon(actor?: Actor): ConvexPolygon {\n    let maybeCollider = null;\n    if (actor && actor.body && actor.body.collider) {\n      maybeCollider = actor.body.collider;\n    }\n    return new ConvexPolygon({\n      collider: maybeCollider,\n      points: this.getPoints(),\n      offset: Vector.Zero\n    });\n  }\n\n  /**\n   * Determines whether a ray intersects with a bounding box\n   */\n  public rayCast(ray: Ray, farClipDistance = Infinity): boolean {\n    // algorithm from https://tavianator.com/fast-branchless-raybounding-box-intersections/\n    let tmin = -Infinity;\n    let tmax = +Infinity;\n\n    const xinv = ray.dir.x === 0 ? Number.MAX_VALUE : 1 / ray.dir.x;\n    const yinv = ray.dir.y === 0 ? Number.MAX_VALUE : 1 / ray.dir.y;\n\n    const tx1 = (this.left - ray.pos.x) * xinv;\n    const tx2 = (this.right - ray.pos.x) * xinv;\n    tmin = Math.min(tx1, tx2);\n    tmax = Math.max(tx1, tx2);\n\n    const ty1 = (this.top - ray.pos.y) * yinv;\n    const ty2 = (this.bottom - ray.pos.y) * yinv;\n    tmin = Math.max(tmin, Math.min(ty1, ty2));\n    tmax = Math.min(tmax, Math.max(ty1, ty2));\n\n    return tmax >= Math.max(0, tmin) && tmin < farClipDistance;\n  }\n\n  public rayCastTime(ray: Ray, farClipDistance = Infinity): number {\n    // algorithm from https://tavianator.com/fast-branchless-raybounding-box-intersections/\n    let tmin = -Infinity;\n    let tmax = +Infinity;\n\n    const xinv = ray.dir.x === 0 ? Number.MAX_VALUE : 1 / ray.dir.x;\n    const yinv = ray.dir.y === 0 ? Number.MAX_VALUE : 1 / ray.dir.y;\n\n    const tx1 = (this.left - ray.pos.x) * xinv;\n    const tx2 = (this.right - ray.pos.x) * xinv;\n    tmin = Math.min(tx1, tx2);\n    tmax = Math.max(tx1, tx2);\n\n    const ty1 = (this.top - ray.pos.y) * yinv;\n    const ty2 = (this.bottom - ray.pos.y) * yinv;\n    tmin = Math.max(tmin, Math.min(ty1, ty2));\n    tmax = Math.min(tmax, Math.max(ty1, ty2));\n\n    if (tmax >= Math.max(0, tmin) && tmin < farClipDistance) {\n      return tmin;\n    }\n    return -1;\n  }\n\n  /**\n   * Tests whether a point is contained within the bounding box\n   * @param p  The point to test\n   */\n  public contains(p: Vector): boolean;\n\n  /**\n   * Tests whether another bounding box is totally contained in this one\n   * @param bb  The bounding box to test\n   */\n  public contains(bb: BoundingBox): boolean;\n  public contains(val: any): boolean {\n    if (val instanceof Vector) {\n      return this.left <= val.x && this.top <= val.y && this.bottom >= val.y && this.right >= val.x;\n    } else if (val instanceof BoundingBox) {\n      if (this.left < val.left && this.top < val.top && val.bottom < this.bottom && val.right < this.right) {\n        return true;\n      }\n      return false;\n    }\n    return false;\n  }\n\n  /**\n   * Combines this bounding box and another together returning a new bounding box\n   * @param other  The bounding box to combine\n   */\n  public combine(other: BoundingBox): BoundingBox {\n    const compositeBB = new BoundingBox(\n      Math.min(this.left, other.left),\n      Math.min(this.top, other.top),\n      Math.max(this.right, other.right),\n      Math.max(this.bottom, other.bottom)\n    );\n    return compositeBB;\n  }\n\n  public get dimensions(): Vector {\n    return new Vector(this.width, this.height);\n  }\n\n  /**\n   * Test wether this bounding box intersects with another returning\n   * the intersection vector that can be used to resolve the collision. If there\n   * is no intersection null is returned.\n   *\n   * @param other  Other [[BoundingBox]] to test intersection with\n   * @returns A Vector in the direction of the current BoundingBox, this <- other\n   */\n  public intersect(other: BoundingBox): Vector {\n    const totalBoundingBox = this.combine(other);\n\n    // If the total bounding box is less than or equal the sum of the 2 bounds then there is collision\n    if (\n      totalBoundingBox.width < other.width + this.width &&\n      totalBoundingBox.height < other.height + this.height &&\n      !totalBoundingBox.dimensions.equals(other.dimensions) &&\n      !totalBoundingBox.dimensions.equals(this.dimensions)\n    ) {\n      // collision\n      let overlapX = 0;\n      // right edge is between the other's left and right edge\n      /**\n       *     +-this-+\n       *     |      |\n       *     |    +-other-+\n       *     +----|-+     |\n       *          |       |\n       *          +-------+\n       *         <---\n       *          ^ overlap\n       */\n      if (this.right >= other.left && this.right <= other.right) {\n        overlapX = other.left - this.right;\n        // right edge is past the other's right edge\n        /**\n         *     +-other-+\n         *     |       |\n         *     |    +-this-+\n         *     +----|--+   |\n         *          |      |\n         *          +------+\n         *          --->\n         *          ^ overlap\n         */\n      } else {\n        overlapX = other.right - this.left;\n      }\n\n      let overlapY = 0;\n      // top edge is between the other's top and bottom edge\n      /**\n       *     +-other-+\n       *     |       |\n       *     |    +-this-+   | <- overlap\n       *     +----|--+   |   |\n       *          |      |  \\ /\n       *          +------+   '\n       */\n      if (this.top <= other.bottom && this.top >= other.top) {\n        overlapY = other.bottom - this.top;\n        // top edge is above the other top edge\n        /**\n         *     +-this-+         .\n         *     |      |        / \\\n         *     |    +-other-+   | <- overlap\n         *     +----|-+     |   |\n         *          |       |\n         *          +-------+\n         */\n      } else {\n        overlapY = other.top - this.bottom;\n      }\n\n      if (Math.abs(overlapX) < Math.abs(overlapY)) {\n        return new Vector(overlapX, 0);\n      } else {\n        return new Vector(0, overlapY);\n      }\n      // Case of total containment of one bounding box by another\n    } else if (totalBoundingBox.dimensions.equals(other.dimensions) || totalBoundingBox.dimensions.equals(this.dimensions)) {\n      let overlapX = 0;\n      // this is wider than the other\n      if (this.width - other.width >= 0) {\n        // This right edge is closest to the others right edge\n        if (this.right - other.right <= other.left - this.left) {\n          overlapX = other.left - this.right;\n          // This left edge is closest to the others left edge\n        } else {\n          overlapX = other.right - this.left;\n        }\n        // other is wider than this\n      } else {\n        // This right edge is closest to the others right edge\n        if (other.right - this.right <= this.left - other.left) {\n          overlapX = this.left - other.right;\n          // This left edge is closest to the others left edge\n        } else {\n          overlapX = this.right - other.left;\n        }\n      }\n\n      let overlapY = 0;\n      // this is taller than other\n      if (this.height - other.height >= 0) {\n        // The bottom edge is closest to the others bottom edge\n        if (this.bottom - other.bottom <= other.top - this.top) {\n          overlapY = other.top - this.bottom;\n        } else {\n          overlapY = other.bottom - this.top;\n        }\n        // other is taller than this\n      } else {\n        // The bottom edge is closest to the others bottom edge\n        if (other.bottom - this.bottom <= this.top - other.top) {\n          overlapY = this.top - other.bottom;\n        } else {\n          overlapY = this.bottom - other.top;\n        }\n      }\n\n      if (Math.abs(overlapX) < Math.abs(overlapY)) {\n        return new Vector(overlapX, 0);\n      } else {\n        return new Vector(0, overlapY);\n      }\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Test whether the bounding box has intersected with another bounding box, returns the side of the current bb that intersected.\n   * @param bb The other actor to test\n   */\n  public intersectWithSide(bb: BoundingBox): Side {\n    const intersect = this.intersect(bb);\n    return BoundingBox.getSideFromIntersection(intersect);\n  }\n\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D, color: Color = Color.Yellow) {\n    ctx.strokeStyle = color.toString();\n    ctx.strokeRect(this.left, this.top, this.width, this.height);\n  }\n}\n", "import { GameEvent, SubscribeEvent, UnsubscribeEvent } from './Events';\nimport { Eventable } from './Interfaces/Evented';\n\n/**\n * Excalibur's internal event dispatcher implementation.\n * Callbacks are fired immediately after an event is published.\n * Typically you will use [[Class.eventDispatcher]] since most classes in\n * Excalibur inherit from [[Class]]. You will rarely create an `EventDispatcher`\n * yourself.\n *\n * [[include:Events.md]]\n */\nexport class EventDispatcher<T = any> implements Eventable {\n  private _handlers: { [key: string]: { (event: GameEvent<T>): void }[] } = {};\n  private _wiredEventDispatchers: Eventable[] = [];\n\n  private _target: T;\n\n  /**\n   * @param target  The object that will be the recipient of events from this event dispatcher\n   */\n  constructor(target: T) {\n    this._target = target;\n  }\n\n  /**\n   * Clears any existing handlers or wired event dispatchers on this event dispatcher\n   */\n  public clear() {\n    this._handlers = {};\n    this._wiredEventDispatchers = [];\n  }\n\n  /**\n   * Emits an event for target\n   * @param eventName  The name of the event to publish\n   * @param event      Optionally pass an event data object to the handler\n   */\n  public emit(eventName: string, event: GameEvent<T>) {\n    if (!eventName) {\n      // key not mapped\n      return;\n    }\n    eventName = eventName.toLowerCase();\n    const target = this._target;\n    if (!event) {\n      event = new GameEvent();\n    }\n    event.target = target;\n\n    let i: number, len: number;\n\n    if (this._handlers[eventName]) {\n      i = 0;\n      len = this._handlers[eventName].length;\n\n      for (i; i < len; i++) {\n        this._handlers[eventName][i].call(target, event);\n      }\n    }\n\n    i = 0;\n    len = this._wiredEventDispatchers.length;\n\n    for (i; i < len; i++) {\n      this._wiredEventDispatchers[i].emit(eventName, event);\n    }\n  }\n\n  /**\n   * Subscribe an event handler to a particular event name, multiple handlers per event name are allowed.\n   * @param eventName  The name of the event to subscribe to\n   * @param handler    The handler callback to fire on this event\n   */\n  public on(eventName: string, handler: (event: GameEvent<T>) => void) {\n    eventName = eventName.toLowerCase();\n    if (!this._handlers[eventName]) {\n      this._handlers[eventName] = [];\n    }\n    this._handlers[eventName].push(handler);\n\n    // meta event handlers\n    if (eventName !== 'unsubscribe' && eventName !== 'subscribe') {\n      this.emit('subscribe', new SubscribeEvent(eventName, handler));\n    }\n  }\n\n  /**\n   * Unsubscribe an event handler(s) from an event. If a specific handler\n   * is specified for an event, only that handler will be unsubscribed.\n   * Otherwise all handlers will be unsubscribed for that event.\n   *\n   * @param eventName  The name of the event to unsubscribe\n   * @param handler    Optionally the specific handler to unsubscribe\n   *\n   */\n  public off(eventName: string, handler?: (event: GameEvent<T>) => void) {\n    eventName = eventName.toLowerCase();\n    const eventHandlers = this._handlers[eventName];\n\n    if (eventHandlers) {\n      // if no explicit handler is give with the event name clear all handlers\n      if (!handler) {\n        this._handlers[eventName].length = 0;\n      } else {\n        const index = eventHandlers.indexOf(handler);\n        this._handlers[eventName].splice(index, 1);\n      }\n    }\n    // meta event handlers\n    if (eventName !== 'unsubscribe' && eventName !== 'subscribe') {\n      this.emit('unsubscribe', new UnsubscribeEvent(eventName, handler));\n    }\n  }\n\n  /**\n   * Once listens to an event one time, then unsubscribes from that event\n   *\n   * @param eventName The name of the event to subscribe to once\n   * @param handler   The handler of the event that will be auto unsubscribed\n   */\n  public once(eventName: string, handler: (event: GameEvent<T>) => void) {\n    const metaHandler = (event: GameEvent<T>) => {\n      const ev = event || new GameEvent();\n      ev.target = ev.target || this._target;\n\n      this.off(eventName, handler);\n      handler.call(ev.target, ev);\n    };\n\n    this.on(eventName, metaHandler);\n  }\n\n  /**\n   * Wires this event dispatcher to also receive events from another\n   */\n  public wire(eventDispatcher: EventDispatcher): void {\n    eventDispatcher._wiredEventDispatchers.push(this);\n  }\n\n  /**\n   * Unwires this event dispatcher from another\n   */\n  public unwire(eventDispatcher: EventDispatcher): void {\n    const index = eventDispatcher._wiredEventDispatchers.indexOf(this);\n    if (index > -1) {\n      eventDispatcher._wiredEventDispatchers.splice(index, 1);\n    }\n  }\n}\n", "import { GameEvent } from './Events';\nimport { EventDispatcher } from './EventDispatcher';\nimport { Eventable } from './Interfaces/Evented';\n\n/**\n * Excalibur base class that provides basic functionality such as [[EventDispatcher]]\n * and extending abilities for vanilla Javascript projects\n */\nexport class Class implements Eventable {\n  /**\n   * Direct access to the game object event dispatcher.\n   */\n  public eventDispatcher: EventDispatcher;\n\n  constructor() {\n    this.eventDispatcher = new EventDispatcher(this);\n  }\n\n  /**\n   * Alias for `addEventListener`. You can listen for a variety of\n   * events off of the engine; see the events section below for a complete list.\n   * @param eventName  Name of the event to listen for\n   * @param handler    Event handler for the thrown event\n   */\n  public on(eventName: string, handler: (event: GameEvent<any>) => void) {\n    this.eventDispatcher.on(eventName, handler);\n  }\n\n  /**\n   * Alias for `removeEventListener`. If only the eventName is specified\n   * it will remove all handlers registered for that specific event. If the eventName\n   * and the handler instance are specified only that handler will be removed.\n   *\n   * @param eventName  Name of the event to listen for\n   * @param handler    Event handler for the thrown event\n   */\n  public off(eventName: string, handler?: (event: GameEvent<any>) => void) {\n    this.eventDispatcher.off(eventName, handler);\n  }\n\n  /**\n   * Emits a new event\n   * @param eventName   Name of the event to emit\n   * @param eventObject Data associated with this event\n   */\n  public emit(eventName: string, eventObject: GameEvent<any>) {\n    this.eventDispatcher.emit(eventName, eventObject);\n  }\n\n  /**\n   * Once listens to an event one time, then unsubscribes from that event\n   *\n   * @param eventName The name of the event to subscribe to once\n   * @param handler   The handler of the event that will be auto unsubscribed\n   */\n  public once(eventName: string, handler: (event: GameEvent<any>) => void) {\n    this.eventDispatcher.once(eventName, handler);\n  }\n}\n", "import { Loadable } from '../Interfaces/Loadable';\nimport { Class } from '../Class';\nimport { Engine } from '../Engine';\nimport { Promise } from '../Promises';\nimport { Logger } from '../Util/Log';\n\n/**\n * The [[Resource]] type allows games built in Excalibur to load generic resources.\n * For any type of remote resource it is recommended to use [[Resource]] for preloading.\n *\n * [[include:Resources.md]]\n */\nexport class Resource<T> extends Class implements Loadable {\n  public data: T = null;\n  public logger: Logger = Logger.getInstance();\n  public arrayBuffer: ArrayBuffer = null;\n\n  /**\n   * @param path          Path to the remote resource\n   * @param responseType  The type to expect as a response: \"\" | \"arraybuffer\" | \"blob\" | \"document\" | \"json\" | \"text\";\n   * @param bustCache     Whether or not to cache-bust requests\n   */\n  constructor(\n    public path: string,\n    public responseType: '' | 'arraybuffer' | 'blob' | 'document' | 'json' | 'text',\n    public bustCache: boolean = true\n  ) {\n    super();\n  }\n\n  /**\n   * Returns true if the Resource is completely loaded and is ready\n   * to be drawn.\n   */\n  public isLoaded(): boolean {\n    return this.data !== null;\n  }\n\n  public wireEngine(_engine: Engine) {\n    // override me\n  }\n\n  private _cacheBust(uri: string): string {\n    const query: RegExp = /\\?\\w*=\\w*/;\n    if (query.test(uri)) {\n      uri += '&__=' + Date.now();\n    } else {\n      uri += '?__=' + Date.now();\n    }\n    return uri;\n  }\n\n  private _start() {\n    this.logger.debug('Started loading resource ' + this.path);\n  }\n\n  /**\n   * Begin loading the resource and returns a promise to be resolved on completion\n   */\n  public load(): Promise<T> {\n    const complete = new Promise<T>();\n\n    // Exit early if we already have data\n    if (this.data !== null) {\n      this.logger.debug('Already have data for resource', this.path);\n      complete.resolve(this.data);\n      this.oncomplete();\n      return complete;\n    }\n\n    const request = new XMLHttpRequest();\n    request.open('GET', this.bustCache ? this._cacheBust(this.path) : this.path, true);\n    request.responseType = this.responseType;\n    request.onloadstart = () => {\n      this._start();\n    };\n    request.onprogress = this.onprogress;\n    request.onerror = this.onerror;\n    request.onload = () => {\n      // XHR on file:// success status is 0, such as with PhantomJS\n      if (request.status !== 0 && request.status !== 200) {\n        this.logger.error('Failed to load resource ', this.path, ' server responded with error code', request.status);\n        this.onerror(request.response);\n        complete.resolve(request.response);\n        return;\n      }\n\n      this.data = this.processData(request.response);\n\n      this.oncomplete();\n      this.logger.debug('Completed loading resource', this.path);\n      complete.resolve(this.data);\n    };\n    request.send();\n    return complete;\n  }\n\n  /**\n   * Returns the loaded data once the resource is loaded\n   */\n  public getData(): any {\n    return this.data;\n  }\n\n  public getArrayData(): any {\n    return this.arrayBuffer;\n  }\n\n  /**\n   * Sets the data for this resource directly\n   */\n  public setData(data: any) {\n    this.data = this.processData(data);\n  }\n\n  /**\n   * This method is meant to be overridden to handle any additional\n   * processing. Such as decoding downloaded audio bits.\n   */\n  public processData(data: T): any {\n    // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseType\n    // Blob requires an object url\n    if (this.responseType === 'blob') {\n      return URL.createObjectURL(data);\n    }\n    return data;\n  }\n\n  public onprogress: (e: any) => void = () => {\n    return;\n  };\n\n  public oncomplete: () => void = () => {\n    return;\n  };\n\n  public onerror: (e: any) => void = () => {\n    return;\n  };\n}\n", "/**\n * These effects can be applied to any bitmap image but are mainly used\n * for [[Sprite]] effects or [[Animation]] effects.\n *\n * [[include:SpriteEffects.md]]\n */\n\n/**\n * @typedoc\n */\n\nimport { Color } from './Color';\n\n/**\n * The interface that all sprite effects must implement\n */\nexport interface SpriteEffect {\n  /**\n   * Should update individual pixels values\n   * @param x          The pixel's x coordinate\n   * @param y          The pixel's y coordinate\n   * @param imageData  The sprite's raw pixel data\n   */\n  updatePixel(x: number, y: number, imageData: ImageData): void;\n}\n\n/**\n * Applies the \"Grayscale\" effect to a sprite, removing color information.\n */\nexport class Grayscale implements SpriteEffect {\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    const avg = (pixel[firstPixel + 0] + pixel[firstPixel + 1] + pixel[firstPixel + 2]) / 3;\n    pixel[firstPixel + 0] = avg;\n    pixel[firstPixel + 1] = avg;\n    pixel[firstPixel + 2] = avg;\n  }\n}\n\n/**\n * Applies the \"Invert\" effect to a sprite, inverting the pixel colors.\n */\nexport class Invert implements SpriteEffect {\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    pixel[firstPixel + 0] = 255 - pixel[firstPixel + 0];\n    pixel[firstPixel + 1] = 255 - pixel[firstPixel + 1];\n    pixel[firstPixel + 2] = 255 - pixel[firstPixel + 2];\n  }\n}\n\n/**\n * Applies the \"Opacity\" effect to a sprite, setting the alpha of all pixels to a given value.\n */\nexport class Opacity implements SpriteEffect {\n  /**\n   * @param opacity  The new opacity of the sprite from 0-1.0\n   */\n  constructor(public opacity: number) {}\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    if (pixel[firstPixel + 3] !== 0) {\n      pixel[firstPixel + 3] = Math.round(this.opacity * pixel[firstPixel + 3]);\n    }\n  }\n}\n\n/**\n * Applies the \"Colorize\" effect to a sprite, changing the color channels of all the pixels to an\n * average of the original color and the provided color\n */\nexport class Colorize implements SpriteEffect {\n  /**\n   * @param color  The color to apply to the sprite\n   */\n  constructor(public color: Color) {}\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    if (pixel[firstPixel + 3] !== 0) {\n      pixel[firstPixel + 0] = (pixel[firstPixel + 0] + this.color.r) / 2;\n      pixel[firstPixel + 1] = (pixel[firstPixel + 1] + this.color.g) / 2;\n      pixel[firstPixel + 2] = (pixel[firstPixel + 2] + this.color.b) / 2;\n    }\n  }\n}\n\n/**\n * Applies the \"Lighten\" effect to a sprite, changes the lightness of the color according to HSL\n */\nexport class Lighten implements SpriteEffect {\n  /**\n   * @param factor  The factor of the effect between 0-1\n   */\n  constructor(public factor: number = 0.1) {}\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    const color = Color.fromRGB(pixel[firstPixel + 0], pixel[firstPixel + 1], pixel[firstPixel + 2], pixel[firstPixel + 3]).lighten(\n      this.factor\n    );\n    pixel[firstPixel + 0] = color.r;\n    pixel[firstPixel + 1] = color.g;\n    pixel[firstPixel + 2] = color.b;\n    pixel[firstPixel + 3] = color.a;\n  }\n}\n\n/**\n * Applies the \"Darken\" effect to a sprite, changes the darkness of the color according to HSL\n */\nexport class Darken implements SpriteEffect {\n  /**\n   * @param factor  The factor of the effect between 0-1\n   */\n  constructor(public factor: number = 0.1) {}\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    const color = Color.fromRGB(pixel[firstPixel + 0], pixel[firstPixel + 1], pixel[firstPixel + 2], pixel[firstPixel + 3]).darken(\n      this.factor\n    );\n    pixel[firstPixel + 0] = color.r;\n    pixel[firstPixel + 1] = color.g;\n    pixel[firstPixel + 2] = color.b;\n    pixel[firstPixel + 3] = color.a;\n  }\n}\n\n/**\n * Applies the \"Saturate\" effect to a sprite, saturates the color according to HSL\n */\nexport class Saturate implements SpriteEffect {\n  /**\n   * @param factor  The factor of the effect between 0-1\n   */\n  constructor(public factor: number = 0.1) {}\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    const color = Color.fromRGB(pixel[firstPixel + 0], pixel[firstPixel + 1], pixel[firstPixel + 2], pixel[firstPixel + 3]).saturate(\n      this.factor\n    );\n    pixel[firstPixel + 0] = color.r;\n    pixel[firstPixel + 1] = color.g;\n    pixel[firstPixel + 2] = color.b;\n    pixel[firstPixel + 3] = color.a;\n  }\n}\n\n/**\n * Applies the \"Desaturate\" effect to a sprite, desaturates the color according to HSL\n */\nexport class Desaturate implements SpriteEffect {\n  /**\n   * @param factor  The factor of the effect between 0-1\n   */\n  constructor(public factor: number = 0.1) {}\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    const color = Color.fromRGB(pixel[firstPixel + 0], pixel[firstPixel + 1], pixel[firstPixel + 2], pixel[firstPixel + 3]).desaturate(\n      this.factor\n    );\n    pixel[firstPixel + 0] = color.r;\n    pixel[firstPixel + 1] = color.g;\n    pixel[firstPixel + 2] = color.b;\n    pixel[firstPixel + 3] = color.a;\n  }\n}\n\n/**\n * Applies the \"Fill\" effect to a sprite, changing the color channels of all non-transparent pixels to match\n * a given color\n */\nexport class Fill implements SpriteEffect {\n  /**\n   * @param color  The color to apply to the sprite\n   */\n  constructor(public color: Color) {}\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    if (pixel[firstPixel + 3] !== 0) {\n      pixel[firstPixel + 0] = this.color.r;\n      pixel[firstPixel + 1] = this.color.g;\n      pixel[firstPixel + 2] = this.color.b;\n    }\n  }\n}\n", "export type Constructor<T> = {\n  new (...args: any[]): T;\n};\nexport function Configurable<T extends Constructor<{}>>(base: T): T {\n  return class extends base {\n    public assign(props: Partial<T>) {\n      //set the value of every property that was passed in,\n      //if the constructor previously set this value, it will be overridden here\n      for (const k in props) {\n        // eslint-disable-next-line\n        if (typeof (<any>this)[k] !== 'function') {\n          // eslint-disable-next-line\n          (<any>this)[k] = (<any>props)[k];\n        }\n      }\n    }\n\n    constructor(...args: any[]) {\n      super(...args);\n      //get the number of arguments that aren't undefined. TS passes a value to all parameters\n      //of whatever ctor is the implementation, so args.length doesn't work here.\n      const size = args.filter(function(value) {\n        return value !== undefined;\n      }).length;\n      if (size === 1 && args[0] && typeof args[0] === 'object' && !(args[0] instanceof Array)) {\n        this.assign(args[0]);\n      }\n    }\n  };\n}\n", "/**\n * An enum that describes the strategies that rotation actions can use\n */\nexport enum RotationType {\n  /**\n   * Rotation via `ShortestPath` will use the smallest angle\n   * between the starting and ending points. This strategy is the default behavior.\n   */\n  ShortestPath = 0,\n  /**\n   * Rotation via `LongestPath` will use the largest angle\n   * between the starting and ending points.\n   */\n  LongestPath = 1,\n  /**\n   * Rotation via `Clockwise` will travel in a clockwise direction,\n   * regardless of the starting and ending points.\n   */\n  Clockwise = 2,\n  /**\n   * Rotation via `CounterClockwise` will travel in a counterclockwise direction,\n   * regardless of the starting and ending points.\n   */\n  CounterClockwise = 3\n}\n", "import * as Effects from './SpriteEffects';\nimport { Color } from './Color';\n\nimport { Drawable, DrawOptions } from '../Interfaces/Drawable';\nimport { Texture } from '../Resources/Texture';\nimport { Vector } from '../Algebra';\nimport { Logger } from '../Util/Log';\nimport { clamp } from '../Util/Util';\nimport { Configurable } from '../Configurable';\n\n/**\n * @hidden\n */\nexport class SpriteImpl implements Drawable {\n  private _texture: Texture;\n\n  public x: number = 0;\n  public y: number = 0;\n\n  public get drawWidth(): number {\n    return this.width * this.scale.x;\n  }\n\n  public get drawHeight(): number {\n    return this.height * this.scale.y;\n  }\n\n  public rotation: number = 0.0;\n  public anchor: Vector = new Vector(0.0, 0.0);\n  public offset: Vector = Vector.Zero;\n  public scale: Vector = Vector.One;\n\n  public logger: Logger = Logger.getInstance();\n\n  /**\n   * Draws the sprite flipped vertically\n   */\n  public flipVertical: boolean = false;\n\n  /**\n   * Draws the sprite flipped horizontally\n   */\n  public flipHorizontal: boolean = false;\n\n  public effects: Effects.SpriteEffect[] = [];\n\n  public width: number = 0;\n  public height: number = 0;\n\n  private _spriteCanvas: HTMLCanvasElement = null;\n  private _spriteCtx: CanvasRenderingContext2D = null;\n  private _pixelData: ImageData = null;\n  private _pixelsLoaded: boolean = false;\n  private _dirtyEffect: boolean = false;\n\n  /**\n   * @param image   The backing image texture to build the Sprite\n   * @param x      The x position of the sprite\n   * @param y      The y position of the sprite\n   * @param width  The width of the sprite in pixels\n   * @param height The height of the sprite in pixels\n   */\n  constructor(imageOrConfig: Texture | SpriteArgs, x: number, y: number, width: number, height: number) {\n    let image = imageOrConfig;\n    if (imageOrConfig && !(imageOrConfig instanceof Texture)) {\n      x = imageOrConfig.x | 0;\n      y = imageOrConfig.y | 0;\n      width = imageOrConfig.width | 0;\n      height = imageOrConfig.height | 0;\n      image = imageOrConfig.image;\n      if (!image) {\n        const message = 'An image texture is required to contsruct a sprite';\n        throw new Error(message);\n      }\n    }\n\n    this.x = x || 0;\n    this.y = y || 0;\n\n    this._texture = <Texture>image;\n    this._spriteCanvas = document.createElement('canvas');\n    this._spriteCanvas.width = width;\n    this._spriteCanvas.height = height;\n    this._spriteCtx = <CanvasRenderingContext2D>this._spriteCanvas.getContext('2d'); // eslint-disable-line\n    this._texture.loaded\n      .then(() => {\n        this.width = this.width || this._texture.image.naturalWidth;\n        this.height = this.height || this._texture.image.naturalHeight;\n        this._spriteCanvas.width = this._spriteCanvas.width || this._texture.image.naturalWidth;\n        this._spriteCanvas.height = this._spriteCanvas.height || this._texture.image.naturalHeight;\n        this._loadPixels();\n        this._dirtyEffect = true;\n      })\n      .error((e) => {\n        this.logger.error('Error loading texture ', this._texture.path, e);\n      });\n\n    this.width = width;\n    this.height = height;\n  }\n\n  private _loadPixels() {\n    if (this._texture.isLoaded() && !this._pixelsLoaded) {\n      const naturalWidth = this._texture.image.naturalWidth || 0;\n      const naturalHeight = this._texture.image.naturalHeight || 0;\n\n      if (this.width > naturalWidth) {\n        this.logger.warn(`The sprite width ${this.width} exceeds the width \n                              ${naturalWidth} of the backing texture ${this._texture.path}`);\n      }\n\n      if (this.width <= 0 || naturalWidth <= 0) {\n        throw new Error(`The width of a sprite cannot be 0 or negative, sprite width: ${this.width}, original width: ${naturalWidth}`);\n      }\n\n      if (this.height > naturalHeight) {\n        this.logger.warn(`The sprite height ${this.height} exceeds the height \n                              ${naturalHeight} of the backing texture ${this._texture.path}`);\n      }\n\n      if (this.height <= 0 || naturalHeight <= 0) {\n        throw new Error(`The height of a sprite cannot be 0 or negative, sprite height: ${this.height}, original height: ${naturalHeight}`);\n      }\n\n      this._spriteCtx.drawImage(\n        this._texture.image,\n        clamp(this.x, 0, naturalWidth),\n        clamp(this.y, 0, naturalHeight),\n        clamp(this.width, 0, naturalWidth),\n        clamp(this.height, 0, naturalHeight),\n        0,\n        0,\n        this.width,\n        this.height\n      );\n\n      this._pixelsLoaded = true;\n    }\n  }\n\n  private _opacity: number = 1;\n  /**\n   * Applies the [[Opacity]] effect to a sprite, setting the alpha of all pixels to a given value\n   */\n  public opacity(value: number) {\n    this._opacity = value;\n  }\n\n  /**\n   * Applies the [[Grayscale]] effect to a sprite, removing color information.\n   */\n  public grayscale() {\n    this.addEffect(new Effects.Grayscale());\n  }\n\n  /**\n   * Applies the [[Invert]] effect to a sprite, inverting the pixel colors.\n   */\n  public invert() {\n    this.addEffect(new Effects.Invert());\n  }\n\n  /**\n   * Applies the [[Fill]] effect to a sprite, changing the color channels of all non-transparent pixels to match a given color\n   */\n  public fill(color: Color) {\n    this.addEffect(new Effects.Fill(color));\n  }\n\n  /**\n   * Applies the [[Colorize]] effect to a sprite, changing the color channels of all pixels to be the average of the original color\n   * and the provided color.\n   */\n  public colorize(color: Color) {\n    this.addEffect(new Effects.Colorize(color));\n  }\n\n  /**\n   * Applies the [[Lighten]] effect to a sprite, changes the lightness of the color according to HSL\n   */\n  public lighten(factor: number = 0.1) {\n    this.addEffect(new Effects.Lighten(factor));\n  }\n\n  /**\n   * Applies the [[Darken]] effect to a sprite, changes the darkness of the color according to HSL\n   */\n  public darken(factor: number = 0.1) {\n    this.addEffect(new Effects.Darken(factor));\n  }\n\n  /**\n   * Applies the [[Saturate]] effect to a sprite, saturates the color according to HSL\n   */\n  public saturate(factor: number = 0.1) {\n    this.addEffect(new Effects.Saturate(factor));\n  }\n\n  /**\n   * Applies the [[Desaturate]] effect to a sprite, desaturates the color according to HSL\n   */\n  public desaturate(factor: number = 0.1) {\n    this.addEffect(new Effects.Desaturate(factor));\n  }\n\n  /**\n   * Adds a new [[SpriteEffect]] to this drawing.\n   * @param effect  Effect to add to the this drawing\n   */\n  public addEffect(effect: Effects.SpriteEffect) {\n    this.effects.push(effect);\n    // We must check if the texture and the backing sprite pixels are loaded as well before\n    // an effect can be applied\n    if (!this._texture.isLoaded() || !this._pixelsLoaded) {\n      this._dirtyEffect = true;\n    } else {\n      this._applyEffects();\n    }\n  }\n\n  /**\n   * Removes a [[SpriteEffect]] from this sprite.\n   * @param effect  Effect to remove from this sprite\n   */\n  public removeEffect(effect: Effects.SpriteEffect): void;\n\n  /**\n   * Removes an effect given the index from this sprite.\n   * @param index  Index of the effect to remove from this sprite\n   */\n  public removeEffect(index: number): void;\n  public removeEffect(param: any) {\n    let indexToRemove = -1;\n    if (typeof param === 'number') {\n      indexToRemove = param;\n    } else {\n      indexToRemove = this.effects.indexOf(param);\n    }\n\n    // bounds check\n    if (indexToRemove < 0 || indexToRemove >= this.effects.length) {\n      return;\n    }\n\n    this.effects.splice(indexToRemove, 1);\n\n    // We must check if the texture and the backing sprite pixels are loaded as well before\n    // an effect can be applied\n    if (!this._texture.isLoaded() || !this._pixelsLoaded) {\n      this._dirtyEffect = true;\n    } else {\n      this._applyEffects();\n    }\n  }\n\n  private _applyEffects() {\n    const naturalWidth = this._texture.image.naturalWidth || 0;\n    const naturalHeight = this._texture.image.naturalHeight || 0;\n\n    this._spriteCtx.clearRect(0, 0, this.width, this.height);\n    this._spriteCtx.drawImage(\n      this._texture.image,\n      clamp(this.x, 0, naturalWidth),\n      clamp(this.y, 0, naturalHeight),\n      clamp(this.width, 0, naturalWidth),\n      clamp(this.height, 0, naturalHeight),\n      0,\n      0,\n      this.width,\n      this.height\n    );\n\n    if (this.effects.length > 0) {\n      this._pixelData = this._spriteCtx.getImageData(0, 0, this.width, this.height);\n\n      const len = this.effects.length;\n      for (let i = 0; i < len; i++) {\n        for (let y = 0; y < this.height; y++) {\n          for (let x = 0; x < this.width; x++) {\n            this.effects[i].updatePixel(x, y, this._pixelData);\n          }\n        }\n      }\n      this._spriteCtx.clearRect(0, 0, this.width, this.height);\n      this._spriteCtx.putImageData(this._pixelData, 0, 0);\n    }\n\n    this._dirtyEffect = false;\n  }\n\n  /**\n   * Clears all effects from the drawing and return it to its original state.\n   */\n  public clearEffects() {\n    this.effects.length = 0;\n    this._applyEffects();\n  }\n\n  /**\n   * Resets the internal state of the drawing (if any)\n   */\n  public reset() {\n    // do nothing\n  }\n\n  public debugDraw(ctx: CanvasRenderingContext2D, x: number, y: number) {\n    ctx.save();\n    ctx.translate(x, y);\n    ctx.rotate(this.rotation);\n    const xpoint = this.drawWidth * this.anchor.x;\n    const ypoint = this.drawHeight * this.anchor.y;\n\n    ctx.strokeStyle = Color.Black.toString();\n    ctx.strokeRect(-xpoint, -ypoint, this.drawWidth, this.drawHeight);\n    ctx.restore();\n  }\n\n  /**\n   * Draws the sprite appropriately to the 2D rendering context, at an x and y coordinate.\n   * @param ctx  The 2D rendering context\n   * @param x    The x coordinate of where to draw\n   * @param y    The y coordinate of where to draw\n   */\n  public draw(ctx: CanvasRenderingContext2D, x: number, y: number): void;\n  /**\n   * Draws the sprite with custom options to override internals without mutating them.\n   * @param options\n   */\n  public draw(options: DrawOptions): void;\n  public draw(ctxOrOptions: CanvasRenderingContext2D | DrawOptions, x?: number, y?: number): void {\n    if (ctxOrOptions instanceof CanvasRenderingContext2D) {\n      this._drawWithOptions({ ctx: ctxOrOptions, x, y });\n    } else {\n      this._drawWithOptions(ctxOrOptions);\n    }\n  }\n\n  private _drawWithOptions(options: DrawOptions) {\n    const { ctx, x, y, rotation, drawWidth, drawHeight, anchor, offset, opacity, flipHorizontal, flipVertical } = {\n      ...options,\n      rotation: options.rotation ?? this.rotation,\n      drawWidth: options.drawWidth ?? this.drawWidth,\n      drawHeight: options.drawHeight ?? this.drawHeight,\n      flipHorizontal: options.flipHorizontal ?? this.flipHorizontal,\n      flipVertical: options.flipVertical ?? this.flipVertical,\n      anchor: options.anchor ?? this.anchor,\n      offset: options.offset ?? this.offset,\n      opacity: options.opacity ?? this._opacity\n    };\n\n    if (this._dirtyEffect) {\n      this._applyEffects();\n    }\n\n    // calculating current dimensions\n    ctx.save();\n    const xpoint = drawWidth * anchor.x + offset.x;\n    const ypoint = drawHeight * anchor.y + offset.y;\n    ctx.translate(x, y);\n    ctx.rotate(rotation);\n\n    // todo cache flipped sprites\n    if (flipHorizontal) {\n      ctx.translate(drawWidth, 0);\n      ctx.scale(-1, 1);\n    }\n\n    if (flipVertical) {\n      ctx.translate(0, drawHeight);\n      ctx.scale(1, -1);\n    }\n\n    if (this._dirtyEffect) {\n      this._applyEffects();\n    }\n\n    const oldAlpha = ctx.globalAlpha;\n    ctx.globalAlpha = opacity ?? 1;\n    ctx.drawImage(this._spriteCanvas, 0, 0, this.width, this.height, -xpoint, -ypoint, drawWidth, drawHeight);\n    ctx.globalAlpha = oldAlpha;\n\n    ctx.restore();\n  }\n\n  /**\n   * Produces a copy of the current sprite\n   */\n  public clone(): SpriteImpl {\n    const result = new Sprite(this._texture, this.x, this.y, this.width, this.height);\n    result.scale = this.scale.clone();\n    result.rotation = this.rotation;\n    result.flipHorizontal = this.flipHorizontal;\n    result.flipVertical = this.flipVertical;\n\n    const len = this.effects.length;\n    for (let i = 0; i < len; i++) {\n      result.addEffect(this.effects[i]);\n    }\n    return result;\n  }\n}\n\n/**\n * [[include:Constructors.md]]\n */\nexport interface SpriteArgs extends Partial<SpriteImpl> {\n  image?: Texture;\n  x?: number;\n  width?: number;\n  height?: number;\n  rotation?: number;\n  anchor?: Vector;\n  scale?: Vector;\n  flipVertical?: boolean;\n  flipHorizontal?: boolean;\n}\n\n/**\n * A [[Sprite]] is one of the main drawing primitives. It is responsible for drawing\n * images or parts of images from a [[Texture]] resource to the screen.\n *\n * [[include:Sprites.md]]\n */\nexport class Sprite extends Configurable(SpriteImpl) {\n  constructor(config: SpriteArgs);\n  constructor(image: Texture, x: number, y: number, width: number, height: number);\n  constructor(imageOrConfig: Texture | SpriteArgs, x?: number, y?: number, width?: number, height?: number) {\n    super(imageOrConfig, x, y, width, height);\n  }\n}\n", "import { Resource } from './Resource';\nimport { Promise } from '../Promises';\nimport { Sprite } from '../Drawing/Sprite';\n/**\n * The [[Texture]] object allows games built in Excalibur to load image resources.\n * [[Texture]] is an [[Loadable]] which means it can be passed to a [[Loader]]\n * to pre-load before starting a level or game.\n *\n * [[include:Textures.md]]\n */\nexport class Texture extends Resource<HTMLImageElement> {\n  /**\n   * The width of the texture in pixels\n   */\n  public width: number;\n\n  /**\n   * The height of the texture in pixels\n   */\n  public height: number;\n\n  /**\n   * A [[Promise]] that resolves when the Texture is loaded.\n   */\n  public loaded: Promise<any> = new Promise<any>();\n\n  private _isLoaded: boolean = false;\n  private _sprite: Sprite = null;\n\n  /**\n   * Populated once loading is complete\n   */\n  public image: HTMLImageElement;\n\n  /**\n   * @param path       Path to the image resource or a base64 string representing an image \"data:image/png;base64,iVB...\"\n   * @param bustCache  Optionally load texture with cache busting\n   */\n  constructor(public path: string, public bustCache = true) {\n    super(path, 'blob', bustCache);\n    this._sprite = new Sprite(this, 0, 0, 0, 0);\n  }\n\n  /**\n   * Returns true if the Texture is completely loaded and is ready\n   * to be drawn.\n   */\n  public isLoaded(): boolean {\n    return this._isLoaded;\n  }\n\n  /**\n   * Begins loading the texture and returns a promise to be resolved on completion\n   */\n  public load(): Promise<HTMLImageElement> {\n    const complete = new Promise<HTMLImageElement>();\n    if (this.path.indexOf('data:image/') > -1) {\n      this.image = new Image();\n      this.image.addEventListener('load', () => {\n        this.oncomplete();\n        this._isLoaded = true;\n        this.width = this._sprite.width = this.image.naturalWidth;\n        this.height = this._sprite.height = this.image.naturalHeight;\n        this._sprite = new Sprite(this, 0, 0, this.width, this.height);\n        this.loaded.resolve(this.image);\n        complete.resolve(this.image);\n      });\n      this.image.src = this.path;\n    } else {\n      const loaded = super.load();\n      loaded.then(\n        () => {\n          this.image = new Image();\n          this.image.addEventListener('load', () => {\n            this._isLoaded = true;\n            this.width = this._sprite.width = this.image.naturalWidth;\n            this.height = this._sprite.height = this.image.naturalHeight;\n            this.loaded.resolve(this.image);\n            complete.resolve(this.image);\n          });\n          this.image.src = super.getData();\n        },\n        () => {\n          complete.reject('Error loading texture.');\n        }\n      );\n    }\n    return complete;\n  }\n\n  public asSprite(): Sprite {\n    return this._sprite;\n  }\n}\n", "import { Sprite } from './Sprite';\nimport * as Effects from './SpriteEffects';\nimport { Color } from './Color';\n\nimport { Drawable, DrawOptions } from '../Interfaces/Drawable';\nimport { Vector } from '../Algebra';\nimport { Engine } from '../Engine';\nimport * as Util from '../Util/Util';\nimport { Configurable } from '../Configurable';\n\nexport interface HasTick {\n  /**\n   *\n   * @param elapsedMilliseconds The amount of real world time in milliseconds that has elapsed that must be updated in the animation\n   */\n  tick(elapsedMilliseconds: number, idempotencyToken?: number): void;\n}\n\n/**\n * @hidden\n */\nexport class AnimationImpl implements Drawable, HasTick {\n  /**\n   * The sprite frames to play, in order. See [[SpriteSheet.getAnimationForAll]] to quickly\n   * generate an [[Animation]].\n   */\n  public sprites: Sprite[] = [];\n\n  /**\n   * Duration to show each frame (in milliseconds)\n   */\n  public speed: number;\n\n  /**\n   * Current frame index being shown\n   */\n  public currentFrame: number = 0;\n\n  private _timeLeftInFrame: number = 0;\n  private _idempotencyToken: number = -1;\n\n  public anchor: Vector = Vector.Zero;\n  public rotation: number = 0.0;\n  public scale: Vector = Vector.One;\n\n  /**\n   * Indicates whether the animation should loop after it is completed\n   */\n  public loop: boolean = true;\n\n  /**\n   * Indicates the frame index the animation should freeze on for a non-looping\n   * animation. By default it is the last frame.\n   */\n  public freezeFrame: number = -1;\n\n  private _engine: Engine;\n\n  /**\n   * Flip each frame vertically. Sets [[Sprite.flipVertical]].\n   */\n  public flipVertical: boolean = false;\n\n  /**\n   * Flip each frame horizontally. Sets [[Sprite.flipHorizontal]].\n   */\n  public flipHorizontal: boolean = false;\n\n  public drawWidth: number = 0;\n  public drawHeight: number = 0;\n  public width: number = 0;\n  public height: number = 0;\n\n  private _opacity = 1;\n\n  /**\n   * Typically you will use a [[SpriteSheet]] to generate an [[Animation]].\n   *\n   * @param engine  Reference to the current game engine\n   * @param images  An array of sprites to create the frames for the animation\n   * @param speed   The number in milliseconds to display each frame in the animation\n   * @param loop    Indicates whether the animation should loop after it is completed\n   */\n  constructor(engineOrConfig: Engine | AnimationArgs, sprites: Sprite[], speed: number, loop?: boolean) {\n    let engine = engineOrConfig;\n    if (engineOrConfig && !(engineOrConfig instanceof Engine)) {\n      const config = engineOrConfig;\n      engine = config.engine;\n      sprites = config.sprites;\n      speed = config.speed;\n      loop = config.loop;\n    }\n\n    this.sprites = sprites;\n    this.speed = speed;\n    this._engine = <Engine>engine;\n    this._timeLeftInFrame = this.speed;\n\n    if (loop != null) {\n      this.loop = loop;\n    }\n\n    if (sprites && sprites[0]) {\n      this.drawHeight = sprites[0] ? sprites[0].drawHeight : 0;\n      this.drawWidth = sprites[0] ? sprites[0].drawWidth : 0;\n\n      this.width = sprites[0] ? sprites[0].width : 0;\n      this.height = sprites[0] ? sprites[0].height : 0;\n\n      this.freezeFrame = sprites.length - 1;\n    }\n  }\n\n  /**\n   * Applies the opacity effect to a sprite, setting the alpha of all pixels to a given value\n   */\n  public opacity(value: number) {\n    this._opacity = value;\n  }\n\n  /**\n   * Applies the grayscale effect to a sprite, removing color information.\n   */\n  public grayscale() {\n    this.addEffect(new Effects.Grayscale());\n  }\n\n  /**\n   * Applies the invert effect to a sprite, inverting the pixel colors.\n   */\n  public invert() {\n    this.addEffect(new Effects.Invert());\n  }\n\n  /**\n   * Applies the fill effect to a sprite, changing the color channels of all non-transparent pixels to match a given color\n   */\n  public fill(color: Color) {\n    this.addEffect(new Effects.Fill(color));\n  }\n\n  /**\n   * Applies the colorize effect to a sprite, changing the color channels of all pixels to be the average of the original color and the\n   * provided color.\n   */\n  public colorize(color: Color) {\n    this.addEffect(new Effects.Colorize(color));\n  }\n\n  /**\n   * Applies the lighten effect to a sprite, changes the lightness of the color according to hsl\n   */\n  public lighten(factor: number = 0.1) {\n    this.addEffect(new Effects.Lighten(factor));\n  }\n\n  /**\n   * Applies the darken effect to a sprite, changes the darkness of the color according to hsl\n   */\n  public darken(factor: number = 0.1) {\n    this.addEffect(new Effects.Darken(factor));\n  }\n\n  /**\n   * Applies the saturate effect to a sprite, saturates the color according to hsl\n   */\n  public saturate(factor: number = 0.1) {\n    this.addEffect(new Effects.Saturate(factor));\n  }\n\n  /**\n   * Applies the desaturate effect to a sprite, desaturates the color according to hsl\n   */\n  public desaturate(factor: number = 0.1) {\n    this.addEffect(new Effects.Desaturate(factor));\n  }\n\n  /**\n   * Add a [[SpriteEffect]] manually\n   */\n  public addEffect(effect: Effects.SpriteEffect) {\n    for (const i in this.sprites) {\n      this.sprites[i].addEffect(effect);\n    }\n  }\n\n  /**\n   * Removes an [[SpriteEffect]] from this animation.\n   * @param effect Effect to remove from this animation\n   */\n  public removeEffect(effect: Effects.SpriteEffect): void;\n\n  /**\n   * Removes an effect given the index from this animation.\n   * @param index  Index of the effect to remove from this animation\n   */\n  public removeEffect(index: number): void;\n  public removeEffect(param: any) {\n    for (const i in this.sprites) {\n      this.sprites[i].removeEffect(param);\n    }\n  }\n\n  /**\n   * Clear all sprite effects\n   */\n  public clearEffects() {\n    for (const i in this.sprites) {\n      this.sprites[i].clearEffects();\n    }\n  }\n\n  private _setAnchor(point: Vector) {\n    //if (!this.anchor.equals(point)) {\n    for (const i in this.sprites) {\n      this.sprites[i].anchor.setTo(point.x, point.y);\n    }\n    //}\n  }\n\n  private _setRotation(radians: number) {\n    //if (this.rotation !== radians) {\n    for (const i in this.sprites) {\n      this.sprites[i].rotation = radians;\n    }\n    //}\n  }\n\n  private _setScale(scale: Vector) {\n    //if (!this.scale.equals(scale)) {\n    for (const i in this.sprites) {\n      this.sprites[i].scale = scale;\n    }\n    //}\n  }\n\n  /**\n   * Resets the animation to first frame.\n   */\n  public reset() {\n    this.currentFrame = 0;\n  }\n\n  /**\n   * Indicates whether the animation is complete, animations that loop are never complete.\n   */\n  public isDone() {\n    return !this.loop && this.currentFrame >= this.sprites.length;\n  }\n\n  /**\n   * Not meant to be called by game developers. Ticks the animation forward internally and\n   * calculates whether to change to the frame.\n   * @internal\n   */\n  public tick(elapsed: number, idempotencyToken?: number) {\n    if (this._idempotencyToken === idempotencyToken) {\n      return;\n    }\n    this._idempotencyToken = idempotencyToken;\n    this._timeLeftInFrame -= elapsed;\n    if (this._timeLeftInFrame <= 0) {\n      this.currentFrame = this.loop ? (this.currentFrame + 1) % this.sprites.length : this.currentFrame + 1;\n      this._timeLeftInFrame = this.speed;\n    }\n\n    this._updateValues();\n    const current = this.sprites[this.currentFrame];\n    if (current) {\n      this.width = current.width;\n      this.height = current.height;\n      this.drawWidth = current.drawWidth;\n      this.drawHeight = current.drawHeight;\n    }\n  }\n\n  private _updateValues(): void {\n    this._setAnchor(this.anchor);\n    this._setRotation(this.rotation);\n    this._setScale(this.scale);\n  }\n\n  /**\n   * Skips ahead a specified number of frames in the animation\n   * @param frames  Frames to skip ahead\n   */\n  public skip(frames: number) {\n    this.currentFrame = (this.currentFrame + frames) % this.sprites.length;\n  }\n\n  /**\n   * Draws the animation appropriately to the 2D rendering context, at an x and y coordinate.\n   * @param ctx  The 2D rendering context\n   * @param x    The x coordinate of where to draw\n   * @param y    The y coordinate of where to draw\n   */\n  public draw(ctx: CanvasRenderingContext2D, x: number, y: number): void;\n  /**\n   * Draws the animation with custom options to override internals without mutating them.\n   * @param options\n   */\n  public draw(options: DrawOptions): void;\n  public draw(ctxOrOptions: CanvasRenderingContext2D | DrawOptions, x?: number, y?: number) {\n    if (ctxOrOptions instanceof CanvasRenderingContext2D) {\n      this._drawWithOptions({ ctx: ctxOrOptions, x, y });\n    } else {\n      this._drawWithOptions(ctxOrOptions);\n    }\n  }\n\n  private _drawWithOptions(options: DrawOptions) {\n    const animOptions = {\n      ...options,\n      rotation: options.rotation ?? this.rotation,\n      drawWidth: options.drawWidth ?? this.drawWidth,\n      drawHeight: options.drawHeight ?? this.drawHeight,\n      flipHorizontal: options.flipHorizontal ?? this.flipHorizontal,\n      flipVertical: options.flipVertical ?? this.flipVertical,\n      anchor: options.anchor ?? this.anchor,\n      opacity: options.opacity ?? this._opacity\n    };\n\n    this._updateValues();\n    let currSprite: Sprite;\n    if (this.currentFrame < this.sprites.length) {\n      currSprite = this.sprites[this.currentFrame];\n      currSprite.draw(animOptions);\n    }\n\n    if (this.freezeFrame !== -1 && this.currentFrame >= this.sprites.length) {\n      currSprite = this.sprites[Util.clamp(this.freezeFrame, 0, this.sprites.length - 1)];\n      currSprite.draw(animOptions);\n    }\n\n    // add the calculated width\n    if (currSprite) {\n      this.drawWidth = currSprite.drawWidth;\n      this.drawHeight = currSprite.drawHeight;\n    }\n  }\n\n  /**\n   * Plays an animation at an arbitrary location in the game.\n   * @param x  The x position in the game to play\n   * @param y  The y position in the game to play\n   */\n  public play(x: number, y: number) {\n    this.reset();\n    this._engine.playAnimation(this, x, y);\n  }\n}\n\n/**\n * [[include:Constructors.md]]\n */\nexport interface AnimationArgs extends Partial<AnimationImpl> {\n  engine: Engine;\n  sprites: Sprite[];\n  speed: number;\n  loop?: boolean;\n  anchor?: Vector;\n  rotation?: number;\n  scale?: Vector;\n  flipVertical?: boolean;\n  flipHorizontal?: boolean;\n  width?: number;\n  height?: number;\n}\n\n/**\n * Animations allow you to display a series of images one after another,\n * creating the illusion of change. Generally these images will come from a [[SpriteSheet]] source.\n *\n * [[include:Animations.md]]\n */\nexport class Animation extends Configurable(AnimationImpl) {\n  constructor(config: AnimationArgs);\n  constructor(engine: Engine, images: Sprite[], speed: number, loop?: boolean);\n  constructor(engineOrConfig: Engine | AnimationArgs, images?: Sprite[], speed?: number, loop?: boolean) {\n    super(engineOrConfig, images, speed, loop);\n  }\n}\n", "import { RotationType } from './RotationType';\n\nimport { Actor } from '../Actor';\nimport { Vector } from '../Algebra';\nimport { Logger } from '../Util/Log';\nimport * as Util from '../Util/Util';\nimport { obsolete } from '../Util/Decorators';\n\n/**\n * Used for implementing actions for the [[ActionContext|Action API]].\n */\nexport interface Action {\n  update(delta: number): void;\n  isComplete(actor: Actor): boolean;\n  reset(): void;\n  stop(): void;\n}\n\nexport class EaseTo implements Action {\n  private _currentLerpTime: number = 0;\n  private _lerpDuration: number = 1 * 1000; // 1 second\n  private _lerpStart: Vector = new Vector(0, 0);\n  private _lerpEnd: Vector = new Vector(0, 0);\n  private _initialized: boolean = false;\n  private _stopped: boolean = false;\n  private _distance: number = 0;\n  constructor(\n    public actor: Actor,\n    x: number,\n    y: number,\n    duration: number,\n    public easingFcn: (currentTime: number, startValue: number, endValue: number, duration: number) => number\n  ) {\n    this._lerpDuration = duration;\n    this._lerpEnd = new Vector(x, y);\n  }\n  private _initialize() {\n    this._lerpStart = new Vector(this.actor.pos.x, this.actor.pos.y);\n    this._currentLerpTime = 0;\n    this._distance = this._lerpStart.distance(this._lerpEnd);\n  }\n\n  public update(delta: number): void {\n    if (!this._initialized) {\n      this._initialize();\n      this._initialized = true;\n    }\n\n    let newX = this.actor.pos.x;\n    let newY = this.actor.pos.y;\n    if (this._currentLerpTime < this._lerpDuration) {\n      if (this._lerpEnd.x < this._lerpStart.x) {\n        newX =\n          this._lerpStart.x -\n          (this.easingFcn(this._currentLerpTime, this._lerpEnd.x, this._lerpStart.x, this._lerpDuration) - this._lerpEnd.x);\n      } else {\n        newX = this.easingFcn(this._currentLerpTime, this._lerpStart.x, this._lerpEnd.x, this._lerpDuration);\n      }\n\n      if (this._lerpEnd.y < this._lerpStart.y) {\n        newY =\n          this._lerpStart.y -\n          (this.easingFcn(this._currentLerpTime, this._lerpEnd.y, this._lerpStart.y, this._lerpDuration) - this._lerpEnd.y);\n      } else {\n        newY = this.easingFcn(this._currentLerpTime, this._lerpStart.y, this._lerpEnd.y, this._lerpDuration);\n      }\n      this.actor.pos.x = newX;\n      this.actor.pos.y = newY;\n\n      this._currentLerpTime += delta;\n    } else {\n      this.actor.pos.x = this._lerpEnd.x;\n      this.actor.pos.y = this._lerpEnd.y;\n      //this._lerpStart = null;\n      //this._lerpEnd = null;\n      //this._currentLerpTime = 0;\n    }\n  }\n  public isComplete(actor: Actor): boolean {\n    return this._stopped || new Vector(actor.pos.x, actor.pos.y).distance(this._lerpStart) >= this._distance;\n  }\n\n  public reset(): void {\n    this._initialized = false;\n  }\n  public stop(): void {\n    this._stopped = true;\n  }\n}\n\nexport class MoveTo implements Action {\n  private _actor: Actor;\n  public x: number;\n  public y: number;\n  private _start: Vector;\n  private _end: Vector;\n  private _dir: Vector;\n  private _speed: number;\n  private _distance: number;\n  private _started = false;\n  private _stopped = false;\n  constructor(actor: Actor, destx: number, desty: number, speed: number) {\n    this._actor = actor;\n    this._end = new Vector(destx, desty);\n    this._speed = speed;\n  }\n\n  public update(_delta: number): void {\n    if (!this._started) {\n      this._started = true;\n      this._start = new Vector(this._actor.pos.x, this._actor.pos.y);\n      this._distance = this._start.distance(this._end);\n      this._dir = this._end.sub(this._start).normalize();\n    }\n    const m = this._dir.scale(this._speed);\n    this._actor.vel.x = m.x;\n    this._actor.vel.y = m.y;\n\n    if (this.isComplete(this._actor)) {\n      this._actor.pos.x = this._end.x;\n      this._actor.pos.y = this._end.y;\n      this._actor.vel.y = 0;\n      this._actor.vel.x = 0;\n    }\n  }\n\n  public isComplete(actor: Actor): boolean {\n    return this._stopped || new Vector(actor.pos.x, actor.pos.y).distance(this._start) >= this._distance;\n  }\n\n  public stop(): void {\n    this._actor.vel.y = 0;\n    this._actor.vel.x = 0;\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n\nexport class MoveBy implements Action {\n  private _actor: Actor;\n  public x: number;\n  public y: number;\n  private _distance: number;\n  private _speed: number;\n\n  private _start: Vector;\n  private _offset: Vector;\n  private _end: Vector;\n  private _dir: Vector;\n  private _started = false;\n  private _stopped = false;\n\n  constructor(actor: Actor, offsetX: number, offsetY: number, speed: number) {\n    this._actor = actor;\n    this._speed = speed;\n    this._offset = new Vector(offsetX, offsetY);\n    if (speed <= 0) {\n      Logger.getInstance().error('Attempted to moveBy with speed less than or equal to zero : ' + speed);\n      throw new Error('Speed must be greater than 0 pixels per second');\n    }\n  }\n\n  public update(_delta: number) {\n    if (!this._started) {\n      this._started = true;\n      this._start = new Vector(this._actor.pos.x, this._actor.pos.y);\n      this._end = this._start.add(this._offset);\n      this._distance = this._offset.size;\n      this._dir = this._end.sub(this._start).normalize();\n    }\n\n    this._actor.vel = this._dir.scale(this._speed);\n\n    if (this.isComplete(this._actor)) {\n      this._actor.pos.x = this._end.x;\n      this._actor.pos.y = this._end.y;\n      this._actor.vel.y = 0;\n      this._actor.vel.x = 0;\n    }\n  }\n\n  public isComplete(actor: Actor): boolean {\n    return this._stopped || actor.pos.distance(this._start) >= this._distance;\n  }\n\n  public stop(): void {\n    this._actor.vel.y = 0;\n    this._actor.vel.x = 0;\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n\nexport class Follow implements Action {\n  private _actor: Actor;\n  private _actorToFollow: Actor;\n  public x: number;\n  public y: number;\n  private _current: Vector;\n  private _end: Vector;\n  private _dir: Vector;\n  private _speed: number;\n  private _maximumDistance: number;\n  private _distanceBetween: number;\n  private _started = false;\n  private _stopped = false;\n\n  constructor(actor: Actor, actorToFollow: Actor, followDistance?: number) {\n    this._actor = actor;\n    this._actorToFollow = actorToFollow;\n    this._current = new Vector(this._actor.pos.x, this._actor.pos.y);\n    this._end = new Vector(actorToFollow.pos.x, actorToFollow.pos.y);\n    this._maximumDistance = followDistance !== undefined ? followDistance : this._current.distance(this._end);\n    this._speed = 0;\n  }\n\n  public update(_delta: number): void {\n    if (!this._started) {\n      this._started = true;\n      this._distanceBetween = this._current.distance(this._end);\n      this._dir = this._end.sub(this._current).normalize();\n    }\n\n    const actorToFollowSpeed = Math.sqrt(Math.pow(this._actorToFollow.vel.x, 2) + Math.pow(this._actorToFollow.vel.y, 2));\n    if (actorToFollowSpeed !== 0) {\n      this._speed = actorToFollowSpeed;\n    }\n    this._current.x = this._actor.pos.x;\n    this._current.y = this._actor.pos.y;\n\n    this._end.x = this._actorToFollow.pos.x;\n    this._end.y = this._actorToFollow.pos.y;\n    this._distanceBetween = this._current.distance(this._end);\n    this._dir = this._end.sub(this._current).normalize();\n\n    if (this._distanceBetween >= this._maximumDistance) {\n      const m = this._dir.scale(this._speed);\n      this._actor.vel.x = m.x;\n      this._actor.vel.y = m.y;\n    } else {\n      this._actor.vel.x = 0;\n      this._actor.vel.y = 0;\n    }\n\n    if (this.isComplete()) {\n      this._actor.pos.x = this._end.x;\n      this._actor.pos.y = this._end.y;\n      this._actor.vel.y = 0;\n      this._actor.vel.x = 0;\n    }\n  }\n\n  public stop(): void {\n    this._actor.vel.y = 0;\n    this._actor.vel.x = 0;\n    this._stopped = true;\n  }\n\n  public isComplete(): boolean {\n    // the actor following should never stop unless specified to do so\n    return this._stopped;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n\nexport class Meet implements Action {\n  private _actor: Actor;\n  private _actorToMeet: Actor;\n  public x: number;\n  public y: number;\n  private _current: Vector;\n  private _end: Vector;\n  private _dir: Vector;\n  private _speed: number;\n  private _distanceBetween: number;\n  private _started = false;\n  private _stopped = false;\n  private _speedWasSpecified = false;\n\n  constructor(actor: Actor, actorToMeet: Actor, speed?: number) {\n    this._actor = actor;\n    this._actorToMeet = actorToMeet;\n    this._current = new Vector(this._actor.pos.x, this._actor.pos.y);\n    this._end = new Vector(actorToMeet.pos.x, actorToMeet.pos.y);\n    this._speed = speed || 0;\n\n    if (speed !== undefined) {\n      this._speedWasSpecified = true;\n    }\n  }\n\n  public update(_delta: number): void {\n    if (!this._started) {\n      this._started = true;\n      this._distanceBetween = this._current.distance(this._end);\n      this._dir = this._end.sub(this._current).normalize();\n    }\n\n    const actorToMeetSpeed = Math.sqrt(Math.pow(this._actorToMeet.vel.x, 2) + Math.pow(this._actorToMeet.vel.y, 2));\n    if (actorToMeetSpeed !== 0 && !this._speedWasSpecified) {\n      this._speed = actorToMeetSpeed;\n    }\n    this._current.x = this._actor.pos.x;\n    this._current.y = this._actor.pos.y;\n\n    this._end.x = this._actorToMeet.pos.x;\n    this._end.y = this._actorToMeet.pos.y;\n    this._distanceBetween = this._current.distance(this._end);\n    this._dir = this._end.sub(this._current).normalize();\n\n    const m = this._dir.scale(this._speed);\n    this._actor.vel.x = m.x;\n    this._actor.vel.y = m.y;\n\n    if (this.isComplete()) {\n      this._actor.pos.x = this._end.x;\n      this._actor.pos.y = this._end.y;\n      this._actor.vel.y = 0;\n      this._actor.vel.x = 0;\n    }\n  }\n\n  public isComplete(): boolean {\n    return this._stopped || this._distanceBetween <= 1;\n  }\n\n  public stop(): void {\n    this._actor.vel.y = 0;\n    this._actor.vel.x = 0;\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n\nexport class RotateTo implements Action {\n  private _actor: Actor;\n  public x: number;\n  public y: number;\n  private _start: number;\n  private _end: number;\n  private _speed: number;\n  private _rotationType: RotationType;\n  private _direction: number;\n  private _distance: number;\n  private _shortDistance: number;\n  private _longDistance: number;\n  private _shortestPathIsPositive: boolean;\n  private _started = false;\n  private _stopped = false;\n  constructor(actor: Actor, angleRadians: number, speed: number, rotationType?: RotationType) {\n    this._actor = actor;\n    this._end = angleRadians;\n    this._speed = speed;\n    this._rotationType = rotationType || RotationType.ShortestPath;\n  }\n\n  public update(_delta: number): void {\n    if (!this._started) {\n      this._started = true;\n      this._start = this._actor.rotation;\n      const distance1 = Math.abs(this._end - this._start);\n      const distance2 = Util.TwoPI - distance1;\n      if (distance1 > distance2) {\n        this._shortDistance = distance2;\n        this._longDistance = distance1;\n      } else {\n        this._shortDistance = distance1;\n        this._longDistance = distance2;\n      }\n\n      this._shortestPathIsPositive = (this._start - this._end + Util.TwoPI) % Util.TwoPI >= Math.PI;\n\n      switch (this._rotationType) {\n        case RotationType.ShortestPath:\n          this._distance = this._shortDistance;\n          if (this._shortestPathIsPositive) {\n            this._direction = 1;\n          } else {\n            this._direction = -1;\n          }\n          break;\n        case RotationType.LongestPath:\n          this._distance = this._longDistance;\n          if (this._shortestPathIsPositive) {\n            this._direction = -1;\n          } else {\n            this._direction = 1;\n          }\n          break;\n        case RotationType.Clockwise:\n          this._direction = 1;\n          if (this._shortestPathIsPositive) {\n            this._distance = this._shortDistance;\n          } else {\n            this._distance = this._longDistance;\n          }\n          break;\n        case RotationType.CounterClockwise:\n          this._direction = -1;\n          if (!this._shortestPathIsPositive) {\n            this._distance = this._shortDistance;\n          } else {\n            this._distance = this._longDistance;\n          }\n          break;\n      }\n    }\n\n    this._actor.rx = this._direction * this._speed;\n\n    if (this.isComplete()) {\n      this._actor.rotation = this._end;\n      this._actor.rx = 0;\n      this._stopped = true;\n    }\n  }\n\n  public isComplete(): boolean {\n    const distanceTravelled = Math.abs(this._actor.rotation - this._start);\n    return this._stopped || distanceTravelled >= Math.abs(this._distance);\n  }\n\n  public stop(): void {\n    this._actor.rx = 0;\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n\nexport class RotateBy implements Action {\n  private _actor: Actor;\n  public x: number;\n  public y: number;\n  private _start: number;\n  private _end: number;\n  private _speed: number;\n  private _offset: number;\n\n  private _rotationType: RotationType;\n  private _direction: number;\n  private _distance: number;\n  private _shortDistance: number;\n  private _longDistance: number;\n  private _shortestPathIsPositive: boolean;\n  private _started = false;\n  private _stopped = false;\n  constructor(actor: Actor, angleRadiansOffset: number, speed: number, rotationType?: RotationType) {\n    this._actor = actor;\n    this._speed = speed;\n    this._offset = angleRadiansOffset;\n    this._rotationType = rotationType || RotationType.ShortestPath;\n  }\n\n  public update(_delta: number): void {\n    if (!this._started) {\n      this._started = true;\n      this._start = this._actor.rotation;\n      this._end = this._start + this._offset;\n\n      const distance1 = Math.abs(this._end - this._start);\n      const distance2 = Util.TwoPI - distance1;\n      if (distance1 > distance2) {\n        this._shortDistance = distance2;\n        this._longDistance = distance1;\n      } else {\n        this._shortDistance = distance1;\n        this._longDistance = distance2;\n      }\n\n      this._shortestPathIsPositive = (this._start - this._end + Util.TwoPI) % Util.TwoPI >= Math.PI;\n\n      switch (this._rotationType) {\n        case RotationType.ShortestPath:\n          this._distance = this._shortDistance;\n          if (this._shortestPathIsPositive) {\n            this._direction = 1;\n          } else {\n            this._direction = -1;\n          }\n          break;\n        case RotationType.LongestPath:\n          this._distance = this._longDistance;\n          if (this._shortestPathIsPositive) {\n            this._direction = -1;\n          } else {\n            this._direction = 1;\n          }\n          break;\n        case RotationType.Clockwise:\n          this._direction = 1;\n          if (this._shortDistance >= 0) {\n            this._distance = this._shortDistance;\n          } else {\n            this._distance = this._longDistance;\n          }\n          break;\n        case RotationType.CounterClockwise:\n          this._direction = -1;\n          if (this._shortDistance <= 0) {\n            this._distance = this._shortDistance;\n          } else {\n            this._distance = this._longDistance;\n          }\n          break;\n      }\n    }\n\n    this._actor.rx = this._direction * this._speed;\n\n    if (this.isComplete()) {\n      this._actor.rotation = this._end;\n      this._actor.rx = 0;\n      this._stopped = true;\n    }\n  }\n\n  public isComplete(): boolean {\n    const distanceTravelled = Math.abs(this._actor.rotation - this._start);\n    return this._stopped || distanceTravelled >= Math.abs(this._distance);\n  }\n\n  public stop(): void {\n    this._actor.rx = 0;\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n\n@obsolete({ message: 'ex.Action.ScaleTo will be removed in v0.25.0', alternateMethod: 'Set width and hight directly' })\nexport class ScaleTo implements Action {\n  private _actor: Actor;\n  public x: number;\n  public y: number;\n  private _startX: number;\n  private _startY: number;\n  private _endX: number;\n  private _endY: number;\n  private _speedX: number;\n  private _speedY: number;\n  private _distanceX: number;\n  private _distanceY: number;\n  private _started = false;\n  private _stopped = false;\n  constructor(actor: Actor, scaleX: number, scaleY: number, speedX: number, speedY: number) {\n    this._actor = actor;\n    this._endX = scaleX;\n    this._endY = scaleY;\n    this._speedX = speedX;\n    this._speedY = speedY;\n  }\n\n  public update(_delta: number): void {\n    if (!this._started) {\n      this._started = true;\n      this._startX = this._actor.scale.x;\n      this._startY = this._actor.scale.y;\n      this._distanceX = Math.abs(this._endX - this._startX);\n      this._distanceY = Math.abs(this._endY - this._startY);\n    }\n\n    if (!(Math.abs(this._actor.scale.x - this._startX) >= this._distanceX)) {\n      const directionX = this._endY < this._startY ? -1 : 1;\n      this._actor.sx = this._speedX * directionX;\n    } else {\n      this._actor.sx = 0;\n    }\n\n    if (!(Math.abs(this._actor.scale.y - this._startY) >= this._distanceY)) {\n      const directionY = this._endY < this._startY ? -1 : 1;\n      this._actor.sy = this._speedY * directionY;\n    } else {\n      this._actor.sy = 0;\n    }\n\n    if (this.isComplete()) {\n      this._actor.scale.x = this._endX;\n      this._actor.scale.y = this._endY;\n      this._actor.sx = 0;\n      this._actor.sy = 0;\n    }\n  }\n\n  public isComplete(): boolean {\n    return (\n      this._stopped ||\n      (Math.abs(this._actor.scale.y - this._startX) >= this._distanceX && Math.abs(this._actor.scale.y - this._startY) >= this._distanceY)\n    );\n  }\n\n  public stop(): void {\n    this._actor.sx = 0;\n    this._actor.sy = 0;\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n\n@obsolete({ message: 'ex.Action.ScaleBy will be removed in v0.25.0', alternateMethod: 'Set width and hight directly' })\nexport class ScaleBy implements Action {\n  private _actor: Actor;\n  public x: number;\n  public y: number;\n  private _startScale: Vector;\n  private _endScale: Vector;\n  private _offset: Vector;\n  private _distanceX: number;\n  private _distanceY: number;\n  private _directionX: number;\n  private _directionY: number;\n  private _started = false;\n  private _stopped = false;\n  private _speedX: number;\n  private _speedY: number;\n  constructor(actor: Actor, scaleOffsetX: number, scaleOffsetY: number, speed: number) {\n    this._actor = actor;\n    this._offset = new Vector(scaleOffsetX, scaleOffsetY);\n    this._speedX = this._speedY = speed;\n  }\n\n  public update(_delta: number): void {\n    if (!this._started) {\n      this._started = true;\n      this._startScale = this._actor.scale.clone();\n      this._endScale = this._startScale.add(this._offset);\n      this._distanceX = Math.abs(this._endScale.x - this._startScale.x);\n      this._distanceY = Math.abs(this._endScale.y - this._startScale.y);\n      this._directionX = this._endScale.x < this._startScale.x ? -1 : 1;\n      this._directionY = this._endScale.y < this._startScale.y ? -1 : 1;\n    }\n\n    this._actor.sx = this._speedX * this._directionX;\n    this._actor.sy = this._speedY * this._directionY;\n\n    if (this.isComplete()) {\n      this._actor.scale = this._endScale;\n      this._actor.sx = 0;\n      this._actor.sy = 0;\n    }\n  }\n\n  public isComplete(): boolean {\n    return (\n      this._stopped ||\n      (Math.abs(this._actor.scale.x - this._startScale.x) >= this._distanceX &&\n        Math.abs(this._actor.scale.y - this._startScale.y) >= this._distanceY)\n    );\n  }\n\n  public stop(): void {\n    this._actor.sx = 0;\n    this._actor.sy = 0;\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n\nexport class Delay implements Action {\n  public x: number;\n  public y: number;\n  private _actor: Actor;\n  private _elapsedTime: number = 0;\n  private _delay: number;\n  private _started: boolean = false;\n  private _stopped = false;\n  constructor(actor: Actor, delay: number) {\n    this._actor = actor;\n    this._delay = delay;\n  }\n\n  public update(delta: number): void {\n    if (!this._started) {\n      this._started = true;\n    }\n\n    this.x = this._actor.pos.x;\n    this.y = this._actor.pos.y;\n\n    this._elapsedTime += delta;\n  }\n\n  isComplete(): boolean {\n    return this._stopped || this._elapsedTime >= this._delay;\n  }\n\n  public stop(): void {\n    this._stopped = true;\n  }\n\n  reset(): void {\n    this._elapsedTime = 0;\n    this._started = false;\n  }\n}\n\nexport class Blink implements Action {\n  private _timeVisible: number = 0;\n  private _timeNotVisible: number = 0;\n  private _elapsedTime: number = 0;\n  private _totalTime: number = 0;\n  private _actor: Actor;\n  private _duration: number;\n  private _stopped: boolean = false;\n  private _started: boolean = false;\n  constructor(actor: Actor, timeVisible: number, timeNotVisible: number, numBlinks: number = 1) {\n    this._actor = actor;\n    this._timeVisible = timeVisible;\n    this._timeNotVisible = timeNotVisible;\n    this._duration = (timeVisible + timeNotVisible) * numBlinks;\n  }\n\n  public update(delta: number): void {\n    if (!this._started) {\n      this._started = true;\n    }\n\n    this._elapsedTime += delta;\n    this._totalTime += delta;\n    if (this._actor.visible && this._elapsedTime >= this._timeVisible) {\n      this._actor.visible = false;\n      this._elapsedTime = 0;\n    }\n\n    if (!this._actor.visible && this._elapsedTime >= this._timeNotVisible) {\n      this._actor.visible = true;\n      this._elapsedTime = 0;\n    }\n\n    if (this.isComplete()) {\n      this._actor.visible = true;\n    }\n  }\n\n  public isComplete(): boolean {\n    return this._stopped || this._totalTime >= this._duration;\n  }\n\n  public stop(): void {\n    this._actor.visible = true;\n    this._stopped = true;\n  }\n\n  public reset() {\n    this._started = false;\n    this._elapsedTime = 0;\n    this._totalTime = 0;\n  }\n}\n\nexport class Fade implements Action {\n  public x: number;\n  public y: number;\n\n  private _actor: Actor;\n  private _endOpacity: number;\n  private _speed: number;\n  private _multiplier: number = 1;\n  private _started = false;\n  private _stopped = false;\n\n  constructor(actor: Actor, endOpacity: number, speed: number) {\n    this._actor = actor;\n    this._endOpacity = endOpacity;\n    this._speed = speed;\n  }\n\n  public update(delta: number): void {\n    if (!this._started) {\n      this._started = true;\n\n      // determine direction when we start\n      if (this._endOpacity < this._actor.opacity) {\n        this._multiplier = -1;\n      } else {\n        this._multiplier = 1;\n      }\n    }\n\n    if (this._speed > 0) {\n      this._actor.opacity += (this._multiplier * (Math.abs(this._actor.opacity - this._endOpacity) * delta)) / this._speed;\n    }\n\n    this._speed -= delta;\n\n    if (this.isComplete()) {\n      this._actor.opacity = this._endOpacity;\n    }\n\n    Logger.getInstance().debug('[Action fade] Actor opacity:', this._actor.opacity);\n  }\n\n  public isComplete(): boolean {\n    return this._stopped || Math.abs(this._actor.opacity - this._endOpacity) < 0.05;\n  }\n\n  public stop(): void {\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n\nexport class Die implements Action {\n  public x: number;\n  public y: number;\n\n  private _actor: Actor;\n  private _stopped = false;\n\n  constructor(actor: Actor) {\n    this._actor = actor;\n  }\n\n  public update(_delta: number): void {\n    this._actor.actionQueue.clearActions();\n    this._actor.kill();\n    this._stopped = true;\n  }\n\n  public isComplete(): boolean {\n    return this._stopped;\n  }\n\n  public stop(): void {\n    return;\n  }\n\n  public reset(): void {\n    return;\n  }\n}\n\nexport class CallMethod implements Action {\n  public x: number;\n  public y: number;\n  private _method: () => any = null;\n  private _actor: Actor = null;\n  private _hasBeenCalled: boolean = false;\n  constructor(actor: Actor, method: () => any) {\n    this._actor = actor;\n    this._method = method;\n  }\n\n  public update(_delta: number) {\n    this._method.call(this._actor);\n    this._hasBeenCalled = true;\n  }\n  public isComplete() {\n    return this._hasBeenCalled;\n  }\n  public reset() {\n    this._hasBeenCalled = false;\n  }\n  public stop() {\n    this._hasBeenCalled = true;\n  }\n}\n\nexport class Repeat implements Action {\n  public x: number;\n  public y: number;\n  private _actor: Actor;\n  private _actionQueue: ActionQueue;\n  private _repeat: number;\n  private _originalRepeat: number;\n  private _stopped: boolean = false;\n  constructor(actor: Actor, repeat: number, actions: Action[]) {\n    this._actor = actor;\n    this._actionQueue = new ActionQueue(actor);\n    this._repeat = repeat;\n    this._originalRepeat = repeat;\n\n    const len = actions.length;\n    for (let i = 0; i < len; i++) {\n      actions[i].reset();\n      this._actionQueue.add(actions[i]);\n    }\n  }\n\n  public update(delta: number): void {\n    this.x = this._actor.pos.x;\n    this.y = this._actor.pos.y;\n    if (!this._actionQueue.hasNext()) {\n      this._actionQueue.reset();\n      this._repeat--;\n    }\n    this._actionQueue.update(delta);\n  }\n\n  public isComplete(): boolean {\n    return this._stopped || this._repeat <= 0;\n  }\n\n  public stop(): void {\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._repeat = this._originalRepeat;\n  }\n}\n\nexport class RepeatForever implements Action {\n  public x: number;\n  public y: number;\n  private _actor: Actor;\n  private _actionQueue: ActionQueue;\n  private _stopped: boolean = false;\n  constructor(actor: Actor, actions: Action[]) {\n    this._actor = actor;\n    this._actionQueue = new ActionQueue(actor);\n\n    const len = actions.length;\n    for (let i = 0; i < len; i++) {\n      actions[i].reset();\n      this._actionQueue.add(actions[i]);\n    }\n  }\n\n  public update(delta: number): void {\n    this.x = this._actor.pos.x;\n    this.y = this._actor.pos.y;\n    if (this._stopped) {\n      return;\n    }\n\n    if (!this._actionQueue.hasNext()) {\n      this._actionQueue.reset();\n    }\n\n    this._actionQueue.update(delta);\n  }\n\n  public isComplete(): boolean {\n    return this._stopped;\n  }\n\n  public stop(): void {\n    this._stopped = true;\n    this._actionQueue.clearActions();\n  }\n\n  public reset(): void {\n    return;\n  }\n}\n\n/**\n * Action Queues\n *\n * Action queues are part of the [[ActionContext|Action API]] and\n * store the list of actions to be executed for an [[Actor]].\n *\n * Actors implement [[Actor.actions]] which can be manipulated by\n * advanced users to adjust the actions currently being executed in the\n * queue.\n */\nexport class ActionQueue {\n  private _actor: Actor;\n  private _actions: Action[] = [];\n  private _currentAction: Action;\n  private _completedActions: Action[] = [];\n  constructor(actor: Actor) {\n    this._actor = actor;\n  }\n\n  public add(action: Action) {\n    this._actions.push(action);\n  }\n\n  public remove(action: Action) {\n    const index = this._actions.indexOf(action);\n    this._actions.splice(index, 1);\n  }\n\n  public clearActions(): void {\n    this._actions.length = 0;\n    this._completedActions.length = 0;\n    if (this._currentAction) {\n      this._currentAction.stop();\n    }\n  }\n\n  public getActions(): Action[] {\n    return this._actions.concat(this._completedActions);\n  }\n\n  public hasNext(): boolean {\n    return this._actions.length > 0;\n  }\n\n  public reset(): void {\n    this._actions = this.getActions();\n\n    const len = this._actions.length;\n    for (let i = 0; i < len; i++) {\n      this._actions[i].reset();\n    }\n    this._completedActions = [];\n  }\n\n  public update(delta: number) {\n    if (this._actions.length > 0) {\n      this._currentAction = this._actions[0];\n      this._currentAction.update(delta);\n\n      if (this._currentAction.isComplete(this._actor)) {\n        this._completedActions.push(this._actions.shift());\n      }\n    }\n  }\n}\n", "import { Vector } from '../Algebra';\nimport { obsolete } from '../Util/Decorators';\n\n/**\n * A definition of an EasingFunction. See [[EasingFunctions]].\n */\n// tslint:disable-next-line\nexport interface EasingFunction {\n  (currentTime: number, startValue: number, endValue: number, duration: number): number;\n}\n\n/**\n * Standard easing functions for motion in Excalibur, defined on a domain of [0, duration] and a range from [+startValue,+endValue]\n * Given a time, the function will return a value from positive startValue to positive endValue.\n *\n * ```js\n * function Linear (t) {\n *    return t * t;\n * }\n *\n * // accelerating from zero velocity\n * function EaseInQuad (t) {\n *    return t * t;\n * }\n *\n * // decelerating to zero velocity\n * function EaseOutQuad (t) {\n *    return t * (2 - t);\n * }\n *\n * // acceleration until halfway, then deceleration\n * function EaseInOutQuad (t) {\n *    return t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n * }\n *\n * // accelerating from zero velocity\n * function EaseInCubic (t) {\n *    return t * t * t;\n * }\n *\n * // decelerating to zero velocity\n * function EaseOutCubic (t) {\n *    return (--t) * t * t + 1;\n * }\n *\n * // acceleration until halfway, then deceleration\n * function EaseInOutCubic (t) {\n *    return t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n * }\n * ```\n */\nexport class EasingFunctions {\n  public static CreateReversibleEasingFunction(easing: EasingFunction) {\n    return (time: number, start: number, end: number, duration: number) => {\n      if (end < start) {\n        return start - (easing(time, end, start, duration) - end);\n      } else {\n        return easing(time, start, end, duration);\n      }\n    };\n  }\n\n  @obsolete({\n    message: 'Alias for incorrect spelling used in older versions, will be removed in v0.25.0',\n    alternateMethod: 'CreateReversibleEasingFunction'\n  })\n  public static CreateReversableEasingFunction(easing: EasingFunction) {\n    return EasingFunctions.CreateReversibleEasingFunction(easing);\n  }\n\n  public static CreateVectorEasingFunction(easing: EasingFunction) {\n    return (time: number, start: Vector, end: Vector, duration: number) => {\n      return new Vector(easing(time, start.x, end.x, duration), easing(time, start.y, end.y, duration));\n    };\n  }\n\n  public static Linear: EasingFunction = EasingFunctions.CreateReversibleEasingFunction(\n    (currentTime: number, startValue: number, endValue: number, duration: number) => {\n      endValue = endValue - startValue;\n      return (endValue * currentTime) / duration + startValue;\n    }\n  );\n\n  public static EaseInQuad = EasingFunctions.CreateReversibleEasingFunction(\n    (currentTime: number, startValue: number, endValue: number, duration: number) => {\n      endValue = endValue - startValue;\n      currentTime /= duration;\n\n      return endValue * currentTime * currentTime + startValue;\n    }\n  );\n\n  public static EaseOutQuad: EasingFunction = EasingFunctions.CreateReversibleEasingFunction(\n    (currentTime: number, startValue: number, endValue: number, duration: number) => {\n      endValue = endValue - startValue;\n      currentTime /= duration;\n      return -endValue * currentTime * (currentTime - 2) + startValue;\n    }\n  );\n\n  public static EaseInOutQuad: EasingFunction = EasingFunctions.CreateReversibleEasingFunction(\n    (currentTime: number, startValue: number, endValue: number, duration: number) => {\n      endValue = endValue - startValue;\n      currentTime /= duration / 2;\n\n      if (currentTime < 1) {\n        return (endValue / 2) * currentTime * currentTime + startValue;\n      }\n      currentTime--;\n\n      return (-endValue / 2) * (currentTime * (currentTime - 2) - 1) + startValue;\n    }\n  );\n\n  public static EaseInCubic: EasingFunction = EasingFunctions.CreateReversibleEasingFunction(\n    (currentTime: number, startValue: number, endValue: number, duration: number) => {\n      endValue = endValue - startValue;\n      currentTime /= duration;\n      return endValue * currentTime * currentTime * currentTime + startValue;\n    }\n  );\n\n  public static EaseOutCubic: EasingFunction = EasingFunctions.CreateReversibleEasingFunction(\n    (currentTime: number, startValue: number, endValue: number, duration: number) => {\n      endValue = endValue - startValue;\n      currentTime /= duration;\n      currentTime--;\n      return endValue * (currentTime * currentTime * currentTime + 1) + startValue;\n    }\n  );\n\n  public static EaseInOutCubic: EasingFunction = EasingFunctions.CreateReversibleEasingFunction(\n    (currentTime: number, startValue: number, endValue: number, duration: number) => {\n      endValue = endValue - startValue;\n      currentTime /= duration / 2;\n      if (currentTime < 1) {\n        return (endValue / 2) * currentTime * currentTime * currentTime + startValue;\n      }\n      currentTime -= 2;\n      return (endValue / 2) * (currentTime * currentTime * currentTime + 2) + startValue;\n    }\n  );\n}\n", "import * as Actions from './Action';\nimport { RotationType } from './RotationType';\n\nimport { Actor } from '../Actor';\nimport { Promise } from '../Promises';\nimport { EasingFunction, EasingFunctions } from '../Util/EasingFunctions';\n\n/**\n * The fluent Action API allows you to perform \"actions\" on\n * [[Actor|Actors]] such as following, moving, rotating, and\n * more. You can implement your own actions by implementing\n * the [[Action]] interface.\n *\n * [[include:Actions.md]]\n */\nexport class ActionContext {\n  private _actors: Actor[] = [];\n  private _queues: Actions.ActionQueue[] = [];\n\n  constructor();\n  constructor(actor: Actor);\n  constructor(actors: Actor[]);\n  constructor() {\n    if (arguments !== null) {\n      this._actors = Array.prototype.slice.call(arguments, 0);\n      this._queues = this._actors.map((a) => {\n        return a.actionQueue;\n      });\n    }\n  }\n\n  /**\n   * Clears all queued actions from the Actor\n   */\n  public clearActions(): void {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].clearActions();\n    }\n  }\n\n  public addActorToContext(actor: Actor) {\n    this._actors.push(actor);\n    // if we run into problems replace the line below with:\n    this._queues.push(actor.actionQueue);\n  }\n\n  public removeActorFromContext(actor: Actor) {\n    const index = this._actors.indexOf(actor);\n    if (index > -1) {\n      this._actors.splice(index, 1);\n      this._queues.splice(index, 1);\n    }\n  }\n\n  /**\n   * This method will move an actor to the specified `x` and `y` position over the\n   * specified duration using a given [[EasingFunctions]] and return back the actor. This\n   * method is part of the actor 'Action' fluent API allowing action chaining.\n   * @param x         The x location to move the actor to\n   * @param y         The y location to move the actor to\n   * @param duration  The time it should take the actor to move to the new location in milliseconds\n   * @param easingFcn Use [[EasingFunctions]] or a custom function to use to calculate position\n   */\n  public easeTo(x: number, y: number, duration: number, easingFcn: EasingFunction = EasingFunctions.Linear) {\n    const len = this._queues.length;\n\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.EaseTo(this._actors[i], x, y, duration, easingFcn));\n    }\n\n    return this;\n  }\n\n  /**\n   * This method will move an actor to the specified x and y position at the\n   * speed specified (in pixels per second) and return back the actor. This\n   * method is part of the actor 'Action' fluent API allowing action chaining.\n   * @param x      The x location to move the actor to\n   * @param y      The y location to move the actor to\n   * @param speed  The speed in pixels per second to move\n   */\n  public moveTo(x: number, y: number, speed: number): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.MoveTo(this._actors[i], x, y, speed));\n    }\n\n    return this;\n  }\n\n  /**\n   * This method will move an actor by the specified x offset and y offset from its current position, at a certain speed.\n   * This method is part of the actor 'Action' fluent API allowing action chaining.\n   * @param xOffset     The x offset to apply to this actor\n   * @param yOffset     The y location to move the actor to\n   * @param speed  The speed in pixels per second the actor should move\n   */\n  public moveBy(xOffset: number, yOffset: number, speed: number): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.MoveBy(this._actors[i], xOffset, yOffset, speed));\n    }\n    return this;\n  }\n\n  /**\n   * This method will rotate an actor to the specified angle at the speed\n   * specified (in radians per second) and return back the actor. This\n   * method is part of the actor 'Action' fluent API allowing action chaining.\n   * @param angleRadians  The angle to rotate to in radians\n   * @param speed         The angular velocity of the rotation specified in radians per second\n   * @param rotationType  The [[RotationType]] to use for this rotation\n   */\n  public rotateTo(angleRadians: number, speed: number, rotationType?: RotationType): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.RotateTo(this._actors[i], angleRadians, speed, rotationType));\n    }\n    return this;\n  }\n\n  /**\n   * This method will rotate an actor by the specified angle offset, from it's current rotation given a certain speed\n   * in radians/sec and return back the actor. This method is part\n   * of the actor 'Action' fluent API allowing action chaining.\n   * @param angleRadiansOffset  The angle to rotate to in radians relative to the current rotation\n   * @param speed          The speed in radians/sec the actor should rotate at\n   * @param rotationType  The [[RotationType]] to use for this rotation, default is shortest path\n   */\n  public rotateBy(angleRadiansOffset: number, speed: number, rotationType?: RotationType): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.RotateBy(this._actors[i], angleRadiansOffset, speed, rotationType));\n    }\n    return this;\n  }\n\n  /**\n   * This method will scale an actor to the specified size at the speed\n   * specified (in magnitude increase per second) and return back the\n   * actor. This method is part of the actor 'Action' fluent API allowing\n   * action chaining.\n   * @param sizeX   The scaling factor to apply on X axis\n   * @param sizeY   The scaling factor to apply on Y axis\n   * @param speedX  The speed of scaling specified in magnitude increase per second on X axis\n   * @param speedY  The speed of scaling specified in magnitude increase per second on Y axis\n   */\n  public scaleTo(sizeX: number, sizeY: number, speedX: number, speedY: number): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.ScaleTo(this._actors[i], sizeX, sizeY, speedX, speedY));\n    }\n    return this;\n  }\n\n  /**\n   * This method will scale an actor by an amount relative to the current scale at a certain speed in scale units/sec\n   * and return back the actor. This method is part of the\n   * actor 'Action' fluent API allowing action chaining.\n   * @param sizeOffsetX   The scaling factor to apply on X axis\n   * @param sizeOffsetY   The scaling factor to apply on Y axis\n   * @param speed    The speed to scale at in scale units/sec\n   */\n  public scaleBy(sizeOffsetX: number, sizeOffsetY: number, speed: number): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.ScaleBy(this._actors[i], sizeOffsetX, sizeOffsetY, speed));\n    }\n    return this;\n  }\n\n  /**\n   * This method will cause an actor to blink (become visible and not\n   * visible). Optionally, you may specify the number of blinks. Specify the amount of time\n   * the actor should be visible per blink, and the amount of time not visible.\n   * This method is part of the actor 'Action' fluent API allowing action chaining.\n   * @param timeVisible     The amount of time to stay visible per blink in milliseconds\n   * @param timeNotVisible  The amount of time to stay not visible per blink in milliseconds\n   * @param numBlinks       The number of times to blink\n   */\n  public blink(timeVisible: number, timeNotVisible: number, numBlinks: number = 1): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.Blink(this._actors[i], timeVisible, timeNotVisible, numBlinks));\n    }\n    return this;\n  }\n\n  /**\n   * This method will cause an actor's opacity to change from its current value\n   * to the provided value by a specified time (in milliseconds). This method is\n   * part of the actor 'Action' fluent API allowing action chaining.\n   * @param opacity  The ending opacity\n   * @param time     The time it should take to fade the actor (in milliseconds)\n   */\n  public fade(opacity: number, time: number): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.Fade(this._actors[i], opacity, time));\n    }\n    return this;\n  }\n\n  /**\n   * This method will delay the next action from executing for a certain\n   * amount of time (in milliseconds). This method is part of the actor\n   * 'Action' fluent API allowing action chaining.\n   * @param time  The amount of time to delay the next action in the queue from executing in milliseconds\n   */\n  public delay(time: number): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.Delay(this._actors[i], time));\n    }\n    return this;\n  }\n\n  /**\n   * This method will add an action to the queue that will remove the actor from the\n   * scene once it has completed its previous actions. Any actions on the\n   * action queue after this action will not be executed.\n   */\n  public die(): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.Die(this._actors[i]));\n    }\n    return this;\n  }\n\n  /**\n   * This method allows you to call an arbitrary method as the next action in the\n   * action queue. This is useful if you want to execute code in after a specific\n   * action, i.e An actor arrives at a destination after traversing a path\n   */\n  public callMethod(method: () => any): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.CallMethod(this._actors[i], method));\n    }\n    return this;\n  }\n\n  /**\n   * This method will cause the actor to repeat all of the previously\n   * called actions a certain number of times. If the number of repeats\n   * is not specified it will repeat forever. This method is part of\n   * the actor 'Action' fluent API allowing action chaining\n   * @param times  The number of times to repeat all the previous actions in the action queue. If nothing is specified the actions\n   * will repeat forever\n   */\n  public repeat(times?: number): ActionContext {\n    if (!times) {\n      this.repeatForever();\n      return this;\n    }\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.Repeat(this._actors[i], times, this._actors[i].actionQueue.getActions()));\n    }\n\n    return this;\n  }\n\n  /**\n   * This method will cause the actor to repeat all of the previously\n   * called actions forever. This method is part of the actor 'Action'\n   * fluent API allowing action chaining.\n   */\n  public repeatForever(): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.RepeatForever(this._actors[i], this._actors[i].actionQueue.getActions()));\n    }\n    return this;\n  }\n\n  /**\n   * This method will cause the actor to follow another at a specified distance\n   * @param actor           The actor to follow\n   * @param followDistance  The distance to maintain when following, if not specified the actor will follow at the current distance.\n   */\n  public follow(actor: Actor, followDistance?: number): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      if (followDistance === undefined) {\n        this._queues[i].add(new Actions.Follow(this._actors[i], actor));\n      } else {\n        this._queues[i].add(new Actions.Follow(this._actors[i], actor, followDistance));\n      }\n    }\n    return this;\n  }\n\n  /**\n   * This method will cause the actor to move towards another until they\n   * collide \"meet\" at a specified speed.\n   * @param actor  The actor to meet\n   * @param speed  The speed in pixels per second to move, if not specified it will match the speed of the other actor\n   */\n  public meet(actor: Actor, speed?: number): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      if (speed === undefined) {\n        this._queues[i].add(new Actions.Meet(this._actors[i], actor));\n      } else {\n        this._queues[i].add(new Actions.Meet(this._actors[i], actor, speed));\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Returns a promise that resolves when the current action queue up to now\n   * is finished.\n   */\n  public asPromise<T>(): Promise<T> {\n    const promises = this._queues.map((q, i) => {\n      const temp = new Promise<T>();\n      q.add(\n        new Actions.CallMethod(this._actors[i], () => {\n          temp.resolve();\n        })\n      );\n      return temp;\n    });\n    return Promise.join.apply(this, promises);\n  }\n}\n", "import { ConvexPolygon } from './ConvexPolygon';\nimport { Circle } from './Circle';\nimport { Edge } from './Edge';\nimport { BoundingBox } from './BoundingBox';\nimport { Vector } from '../Algebra';\n\n/**\n * Excalibur shape helper for defining collision shapes quickly\n */\nexport class Shape {\n  /**\n   * Creates a box collision shape, under the hood defines a [[ConvexPolygon]] collision shape\n   * @param width Width of the box\n   * @param height Height of the box\n   * @param anchor Anchor of the box (default (.5, .5)) which positions the box relative to the center of the collider's position\n   * @param offset Optional offset relative to the collider in local coordinates\n   */\n  static Box(width: number, height: number, anchor: Vector = Vector.Half, offset: Vector = Vector.Zero): ConvexPolygon {\n    return new ConvexPolygon({\n      points: new BoundingBox(-width * anchor.x, -height * anchor.y, width - width * anchor.x, height - height * anchor.y).getPoints(),\n      offset: offset\n    });\n  }\n\n  /**\n   * Creates a new [[ConvexPolygon|arbitrary polygon]] collision shape\n   * @param points Points specified in counter clockwise\n   * @param clockwiseWinding Optionally changed the winding of points, by default false meaning counter-clockwise winding.\n   * @param offset Optional offset relative to the collider in local coordinates\n   */\n  static Polygon(points: Vector[], clockwiseWinding: boolean = false, offset: Vector = Vector.Zero): ConvexPolygon {\n    return new ConvexPolygon({\n      points: points,\n      offset: offset,\n      clockwiseWinding: clockwiseWinding\n    });\n  }\n\n  /**\n   * Creates a new [[circle|Circle]] collision shape\n   * @param radius Radius of the circle shape\n   * @param offset Optional offset relative to the collider in local coordinates\n   */\n  static Circle(radius: number, offset: Vector = Vector.Zero): Circle {\n    return new Circle({\n      radius: radius,\n      offset: offset\n    });\n  }\n\n  /**\n   * Creates a new [[Edge|edge]] collision shape\n   * @param begin Beginning of the edge in local coordinates to the collider\n   * @param end Ending of the edge in local coordinates to the collider\n   */\n  static Edge(begin: Vector, end: Vector): Edge {\n    return new Edge({\n      begin: begin,\n      end: end\n    });\n  }\n}\n", "import { Vector } from '../Algebra';\nimport { Actor } from '../Actor';\nimport { Collider } from './Collider';\nimport { CollisionType } from './CollisionType';\nimport { Physics } from '../Physics';\nimport { PreCollisionEvent, PostCollisionEvent, CollisionStartEvent, CollisionEndEvent } from '../Events';\nimport { Clonable } from '../Interfaces/Clonable';\nimport { Shape } from './Shape';\n\nexport interface BodyOptions {\n  /**\n   * Optionally the actor associated with this body\n   */\n  actor?: Actor;\n  /**\n   * An optional collider to use in this body, if none is specified a default Box collider will be created.\n   */\n  collider?: Collider;\n}\n\n/**\n * Body describes all the physical properties pos, vel, acc, rotation, angular velocity\n */\nexport class Body implements Clonable<Body> {\n  private _collider: Collider;\n  public actor: Actor;\n  /**\n   * Constructs a new physics body associated with an actor\n   */\n  constructor({ actor, collider }: BodyOptions) {\n    if (!actor && !collider) {\n      throw new Error('An actor or collider are required to create a body');\n    }\n\n    this.actor = actor;\n    if (!collider && actor) {\n      this.collider = this.useBoxCollider(actor.width, actor.height, actor.anchor);\n    } else {\n      this.collider = collider;\n    }\n  }\n\n  public get id() {\n    return this.actor ? this.actor.id : -1;\n  }\n\n  /**\n   * Returns a clone of this body, not associated with any actor\n   */\n  public clone() {\n    return new Body({\n      actor: null,\n      collider: this.collider.clone()\n    });\n  }\n\n  public get active() {\n    return this.actor ? !this.actor.isKilled() : false;\n  }\n\n  public get center() {\n    return this.pos;\n  }\n\n  // TODO allow multiple colliders for a single body\n  public set collider(collider: Collider) {\n    if (collider) {\n      this._collider = collider;\n      this._collider.body = this;\n      this._wireColliderEventsToActor();\n    }\n  }\n\n  public get collider(): Collider {\n    return this._collider;\n  }\n\n  /**\n   * The (x, y) position of the actor this will be in the middle of the actor if the\n   * [[Actor.anchor]] is set to (0.5, 0.5) which is default.\n   * If you want the (x, y) position to be the top left of the actor specify an anchor of (0, 0).\n   */\n  public pos: Vector = new Vector(0, 0);\n\n  /**\n   * The position of the actor last frame (x, y) in pixels\n   */\n  public oldPos: Vector = new Vector(0, 0);\n\n  /**\n   * The current velocity vector (vx, vy) of the actor in pixels/second\n   */\n  public vel: Vector = new Vector(0, 0);\n\n  /**\n   * The velocity of the actor last frame (vx, vy) in pixels/second\n   */\n  public oldVel: Vector = new Vector(0, 0);\n\n  /**\n   * The current acceleration vector (ax, ay) of the actor in pixels/second/second. An acceleration pointing down such as (0, 100) may\n   * be useful to simulate a gravitational effect.\n   */\n  public acc: Vector = new Vector(0, 0);\n\n  /**\n   * Gets/sets the acceleration of the actor from the last frame. This does not include the global acc [[Physics.acc]].\n   */\n  public oldAcc: Vector = Vector.Zero;\n\n  /**\n   * The current torque applied to the actor\n   */\n  public torque: number = 0;\n\n  /**\n   * The current \"motion\" of the actor, used to calculated sleep in the physics simulation\n   */\n  public motion: number = 10;\n\n  /**\n   * Gets/sets the rotation of the body from the last frame.\n   */\n  public oldRotation: number = 0; // radians\n\n  /**\n   * The rotation of the actor in radians\n   */\n  public rotation: number = 0; // radians\n\n  /**\n   * The scale vector of the actor\n   * @obsolete ex.Body.scale will be removed in v0.25.0\n   */\n  public scale: Vector = Vector.One;\n\n  /**\n   * The scale of the actor last frame\n   * @obsolete ex.Body.scale will be removed in v0.25.0\n   */\n  public oldScale: Vector = Vector.One;\n\n  /**\n   * The x scalar velocity of the actor in scale/second\n   * @obsolete ex.Body.scale will be removed in v0.25.0\n   */\n  public sx: number = 0; //scale/sec\n  /**\n   * The y scalar velocity of the actor in scale/second\n   * @obsolete ex.Body.scale will be removed in v0.25.0\n   */\n  public sy: number = 0; //scale/sec\n\n  /**\n   * The rotational velocity of the actor in radians/second\n   */\n  public rx: number = 0; //radians/sec\n\n  private _geometryDirty = false;\n\n  private _totalMtv: Vector = Vector.Zero;\n\n  /**\n   * Add minimum translation vectors accumulated during the current frame to resolve collisions.\n   */\n  public addMtv(mtv: Vector) {\n    this._totalMtv.addEqual(mtv);\n  }\n\n  /**\n   * Applies the accumulated translation vectors to the actors position\n   */\n  public applyMtv(): void {\n    this.pos.addEqual(this._totalMtv);\n    this._totalMtv.setTo(0, 0);\n  }\n\n  /**\n   * Flags the shape dirty and must be recalculated in world space\n   */\n  public markCollisionShapeDirty() {\n    this._geometryDirty = true;\n  }\n\n  public get isColliderShapeDirty(): boolean {\n    return this._geometryDirty;\n  }\n\n  /**\n   * Sets the old versions of pos, vel, acc, and scale.\n   */\n  public captureOldTransform() {\n    // Capture old values before integration step updates them\n    this.oldVel.setTo(this.vel.x, this.vel.y);\n    this.oldPos.setTo(this.pos.x, this.pos.y);\n    this.oldAcc.setTo(this.acc.x, this.acc.y);\n    this.oldScale.setTo(this.scale.x, this.scale.y);\n    this.oldRotation = this.rotation;\n  }\n\n  /**\n   * Perform euler integration at the specified time step\n   */\n  public integrate(delta: number) {\n    // Update placements based on linear algebra\n    const seconds = delta / 1000;\n\n    const totalAcc = this.acc.clone();\n    // Only active vanilla actors are affected by global acceleration\n    if (this.collider.type === CollisionType.Active) {\n      totalAcc.addEqual(Physics.acc);\n    }\n\n    this.vel.addEqual(totalAcc.scale(seconds));\n    this.pos.addEqual(this.vel.scale(seconds)).addEqual(totalAcc.scale(0.5 * seconds * seconds));\n\n    this.rx += this.torque * (1.0 / this.collider.inertia) * seconds;\n    this.rotation += this.rx * seconds;\n\n    this.scale.x += (this.sx * delta) / 1000;\n    this.scale.y += (this.sy * delta) / 1000;\n\n    if (!this.scale.equals(this.oldScale)) {\n      // change in scale effects the geometry\n      this._geometryDirty = true;\n    }\n\n    // Update colliders\n    this.collider.update();\n    this._geometryDirty = false;\n  }\n\n  /**\n   * Sets up a box geometry based on the current bounds of the associated actor of this physics body.\n   *\n   * If no width/height are specified the body will attempt to use the associated actor's width/height.\n   *\n   * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\n   */\n  public useBoxCollider(width?: number, height?: number, anchor: Vector = Vector.Half, center: Vector = Vector.Zero): Collider {\n    if (width === null || width === undefined) {\n      width = this.actor ? this.actor.width : 0;\n    }\n    if (height === null || height === undefined) {\n      height = this.actor ? this.actor.height : 0;\n    }\n\n    this.collider.shape = Shape.Box(width, height, anchor, center);\n    return this.collider;\n  }\n\n  /**\n   * Sets up a [[ConvexPolygon|convex polygon]] collision geometry based on a list of of points relative\n   *  to the anchor of the associated actor\n   * of this physics body.\n   *\n   * Only [convex polygon](https://en.wikipedia.org/wiki/Convex_polygon) definitions are supported.\n   *\n   * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\n   */\n  public usePolygonCollider(points: Vector[], center: Vector = Vector.Zero): Collider {\n    this.collider.shape = Shape.Polygon(points, false, center);\n    return this.collider;\n  }\n\n  /**\n   * Sets up a [[Circle|circle collision geometry]] with a specified radius in pixels.\n   *\n   * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\n   */\n  public useCircleCollider(radius: number, center: Vector = Vector.Zero): Collider {\n    this.collider.shape = Shape.Circle(radius, center);\n    return this.collider;\n  }\n\n  /**\n   * Sets up an [[Edge|edge collision geometry]] with a start point and an end point relative to the anchor of the associated actor\n   * of this physics body.\n   *\n   * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\n   */\n  public useEdgeCollider(begin: Vector, end: Vector): Collider {\n    this.collider.shape = Shape.Edge(begin, end);\n    return this.collider;\n  }\n\n  // TODO remove this, eventually events will stay local to the thing they are around\n  private _wireColliderEventsToActor() {\n    this.collider.clear();\n    this.collider.on('precollision', (evt: PreCollisionEvent<Collider>) => {\n      if (this.actor) {\n        this.actor.emit('precollision', new PreCollisionEvent(evt.target.body.actor, evt.other.body.actor, evt.side, evt.intersection));\n      }\n    });\n    this.collider.on('postcollision', (evt: PostCollisionEvent<Collider>) => {\n      if (this.actor) {\n        this.actor.emit('postcollision', new PostCollisionEvent(evt.target.body.actor, evt.other.body.actor, evt.side, evt.intersection));\n      }\n    });\n    this.collider.on('collisionstart', (evt: CollisionStartEvent<Collider>) => {\n      if (this.actor) {\n        this.actor.emit('collisionstart', new CollisionStartEvent(evt.target.body.actor, evt.other.body.actor, evt.pair));\n      }\n    });\n    this.collider.on('collisionend', (evt: CollisionEndEvent<Collider>) => {\n      if (this.actor) {\n        this.actor.emit('collisionend', new CollisionEndEvent(evt.target.body.actor, evt.other.body.actor));\n      }\n    });\n  }\n}\n", "import { Trait } from '../Interfaces/Trait';\nimport { Actor } from '../Actor';\nimport { Engine } from '../Engine';\nimport { Vector } from '../Algebra';\nimport { Side } from '../Collision/Side';\nimport { PreCollisionEvent, PostCollisionEvent } from '../Events';\nimport { CollisionType } from '../Collision/CollisionType';\nimport { BoundingBox } from '../Collision/Index';\n\nexport class TileMapCollisionDetection implements Trait {\n  public update(actor: Actor, engine: Engine) {\n    const eventDispatcher = actor.eventDispatcher;\n    if (actor.body.collider.type !== CollisionType.PreventCollision && engine.currentScene && engine.currentScene.tileMaps) {\n      for (let j = 0; j < engine.currentScene.tileMaps.length; j++) {\n        const map = engine.currentScene.tileMaps[j];\n        let intersectMap: Vector;\n        let side = Side.None;\n        let max = 2;\n        while ((intersectMap = map.collides(actor))) {\n          if (max-- < 0) {\n            break;\n          }\n          side = BoundingBox.getSideFromIntersection(intersectMap);\n          eventDispatcher.emit('precollision', new PreCollisionEvent(actor, null, side, intersectMap));\n          if (actor.body.collider.type === CollisionType.Active) {\n            actor.pos.y += intersectMap.y;\n            actor.pos.x += intersectMap.x;\n            eventDispatcher.emit('postcollision', new PostCollisionEvent(actor, null, side, intersectMap));\n          }\n        }\n      }\n    }\n  }\n}\n", "import { Vector } from '../Algebra';\nimport { Actor } from '../Actor';\nimport { Engine } from '../Engine';\nimport { Color } from '../Drawing/Color';\n\nexport class CullingBox {\n  private _topLeft: Vector = new Vector(0, 0);\n  private _topRight: Vector = new Vector(0, 0);\n  private _bottomLeft: Vector = new Vector(0, 0);\n  private _bottomRight: Vector = new Vector(0, 0);\n\n  private _xCoords: Array<number>;\n  private _yCoords: Array<number>;\n  private _xMin: number;\n  private _yMin: number;\n  private _xMax: number;\n  private _yMax: number;\n\n  private _xMinWorld: number;\n  private _yMinWorld: number;\n  private _xMaxWorld: number;\n  private _yMaxWorld: number;\n\n  public isSpriteOffScreen(actor: Actor, engine: Engine): boolean {\n    const drawingWidth = actor.currentDrawing.drawWidth;\n    const drawingHeight = actor.currentDrawing.drawHeight;\n    const rotation = actor.rotation;\n    const anchor = actor.center;\n    const worldPos = actor.getWorldPos();\n\n    this._topLeft.x = worldPos.x - drawingWidth / 2;\n    this._topLeft.y = worldPos.y - drawingHeight / 2;\n    this._topLeft = this._topLeft.rotate(rotation, anchor);\n\n    this._topRight.x = worldPos.x + drawingWidth / 2;\n    this._topRight.y = worldPos.y - drawingHeight / 2;\n    this._topRight = this._topRight.rotate(rotation, anchor);\n\n    this._bottomLeft.x = worldPos.x - drawingWidth / 2;\n    this._bottomLeft.y = worldPos.y + drawingHeight / 2;\n    this._bottomLeft = this._bottomLeft.rotate(rotation, anchor);\n\n    this._bottomRight.x = worldPos.x + drawingWidth / 2;\n    this._bottomRight.y = worldPos.y + drawingHeight / 2;\n    this._bottomRight = this._bottomRight.rotate(rotation, anchor);\n\n    ///\n\n    const topLeftScreen = engine.worldToScreenCoordinates(this._topLeft);\n    const topRightScreen = engine.worldToScreenCoordinates(this._topRight);\n    const bottomLeftScreen = engine.worldToScreenCoordinates(this._bottomLeft);\n    const bottomRightScreen = engine.worldToScreenCoordinates(this._bottomRight);\n    this._xCoords = [];\n    this._yCoords = [];\n\n    this._xCoords.push(topLeftScreen.x, topRightScreen.x, bottomLeftScreen.x, bottomRightScreen.x);\n    this._yCoords.push(topLeftScreen.y, topRightScreen.y, bottomLeftScreen.y, bottomRightScreen.y);\n\n    this._xMin = Math.min.apply(null, this._xCoords);\n    this._yMin = Math.min.apply(null, this._yCoords);\n    this._xMax = Math.max.apply(null, this._xCoords);\n    this._yMax = Math.max.apply(null, this._yCoords);\n\n    const minWorld = engine.screenToWorldCoordinates(new Vector(this._xMin, this._yMin));\n    const maxWorld = engine.screenToWorldCoordinates(new Vector(this._xMax, this._yMax));\n    this._xMinWorld = minWorld.x;\n    this._yMinWorld = minWorld.y;\n    this._xMaxWorld = maxWorld.x;\n    this._yMaxWorld = maxWorld.y;\n\n    const boundingPoints = [\n      new Vector(this._xMin, this._yMin), // top left\n      new Vector(this._xMax, this._yMin), // top right\n      new Vector(this._xMin, this._yMax), // bottom left\n      new Vector(this._xMax, this._yMax) // bottom right\n    ];\n\n    // sprite can be wider than canvas screen (and still visible within canvas)\n    // top or bottom of sprite must be within canvas\n    if (\n      boundingPoints[0].x < 0 &&\n      boundingPoints[1].x > engine.canvas.clientWidth &&\n      (boundingPoints[0].y > 0 || boundingPoints[2].y < engine.canvas.clientHeight)\n    ) {\n      return false;\n    }\n\n    // sprite can be taller than canvas screen (and still visible within canvas)\n    // left or right of sprite must be within canvas\n    if (\n      boundingPoints[0].y < 0 &&\n      boundingPoints[2].y > engine.canvas.clientHeight &&\n      (boundingPoints[1].x > 0 || boundingPoints[0].x < engine.canvas.clientWidth)\n    ) {\n      return false;\n    }\n\n    // otherwise if any corner is visible, we're not offscreen\n    for (let i = 0; i < boundingPoints.length; i++) {\n      if (\n        boundingPoints[i].x > 0 &&\n        boundingPoints[i].y > 0 &&\n        boundingPoints[i].x < engine.canvas.clientWidth &&\n        boundingPoints[i].y < engine.canvas.clientHeight\n      ) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    // bounding rectangle\n    ctx.beginPath();\n    ctx.strokeStyle = Color.White.toString();\n    ctx.rect(this._xMinWorld, this._yMinWorld, this._xMaxWorld - this._xMinWorld, this._yMaxWorld - this._yMinWorld);\n    ctx.stroke();\n\n    ctx.fillStyle = Color.Red.toString();\n    ctx.beginPath();\n    ctx.arc(this._topLeft.x, this._topLeft.y, 5, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.fill();\n\n    ctx.fillStyle = Color.Green.toString();\n    ctx.beginPath();\n    ctx.arc(this._topRight.x, this._topRight.y, 5, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.fill();\n\n    ctx.fillStyle = Color.Blue.toString();\n    ctx.beginPath();\n    ctx.arc(this._bottomLeft.x, this._bottomLeft.y, 5, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.fill();\n\n    ctx.fillStyle = Color.Magenta.toString();\n    ctx.beginPath();\n    ctx.arc(this._bottomRight.x, this._bottomRight.y, 5, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.fill();\n  }\n}\n", "import { CullingBox } from './../Util/CullingBox';\nimport { Trait } from '../Interfaces/Trait';\nimport { Actor } from '../Actor';\nimport { Engine } from '../Engine';\nimport { ExitViewPortEvent, EnterViewPortEvent } from '../Events';\n\nexport class OffscreenCulling implements Trait {\n  public cullingBox: CullingBox = new CullingBox();\n\n  public update(actor: Actor, engine: Engine) {\n    const events = actor.eventDispatcher;\n\n    let isSpriteOffScreen = true;\n    if (actor.currentDrawing != null) {\n      isSpriteOffScreen = this.cullingBox.isSpriteOffScreen(actor, engine);\n    }\n\n    let actorBoundsOffscreen = false;\n    if (engine && engine.currentScene && engine.currentScene.camera && engine.currentScene.camera.viewport) {\n      actorBoundsOffscreen = !engine.currentScene.camera.viewport.intersect(actor.body.collider.bounds);\n    }\n\n    if (!actor.isOffScreen) {\n      if (actorBoundsOffscreen && isSpriteOffScreen) {\n        events.emit('exitviewport', new ExitViewPortEvent(actor));\n        actor.isOffScreen = true;\n      }\n    } else {\n      if (!actorBoundsOffscreen || !isSpriteOffScreen) {\n        events.emit('enterviewport', new EnterViewPortEvent(actor));\n        actor.isOffScreen = false;\n      }\n    }\n  }\n}\n", "import { Trait } from '../Interfaces/Trait';\nimport { Actor } from '../Actor';\nimport { Engine } from '../Engine';\n\nexport interface CapturePointerConfig {\n  /**\n   * Capture PointerMove events (may be expensive!)\n   */\n  captureMoveEvents: boolean;\n\n  /**\n   * Capture PointerDrag events (may be expensive!)\n   */\n  captureDragEvents: boolean;\n}\n\n/**\n * Revises pointer events path accordingly to the actor\n */\nexport class CapturePointer implements Trait {\n  public update(actor: Actor, engine: Engine) {\n    if (!actor.enableCapturePointer) {\n      return;\n    }\n    if (actor.isKilled()) {\n      return;\n    }\n\n    engine.input.pointers.checkAndUpdateActorUnderPointer(actor);\n  }\n}\n", "import { Color } from '../Drawing/Color';\nimport { Vector } from '../Algebra';\n\n/**\n * A canvas linecap style. \"butt\" is the default flush style, \"round\" is a semi-circle cap with a radius half the width of\n * the line, and \"square\" is a rectangle that is an equal width and half height cap.\n */\nexport type LineCapStyle = 'butt' | 'round' | 'square';\n\n/**\n * Draw a line on canvas context\n *\n * @param ctx The canvas context\n * @param color The color of the line\n * @param x1 The start x coordinate\n * @param y1 The start y coordinate\n * @param x2 The ending x coordinate\n * @param y2 The ending y coordinate\n * @param thickness The line thickness\n * @param cap The [[LineCapStyle]] (butt, round, or square)\n */\n/* istanbul ignore next */\nexport function line(\n  ctx: CanvasRenderingContext2D,\n  color: Color = Color.Red,\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  thickness: number = 1,\n  cap: LineCapStyle = 'butt'\n) {\n  ctx.beginPath();\n  ctx.lineWidth = thickness;\n  ctx.lineCap = cap;\n  ctx.strokeStyle = color.toString();\n  ctx.moveTo(x1, y1);\n  ctx.lineTo(x2, y2);\n  ctx.closePath();\n  ctx.stroke();\n}\n\n/**\n * Draw the vector as a point onto the canvas.\n */\n/* istanbul ignore next */\nexport function point(ctx: CanvasRenderingContext2D, color: Color = Color.Red, point: Vector): void {\n  ctx.beginPath();\n  ctx.strokeStyle = color.toString();\n  ctx.arc(point.x, point.y, 5, 0, Math.PI * 2);\n  ctx.closePath();\n  ctx.stroke();\n}\n\n/**\n * Draw the vector as a line onto the canvas starting a origin point.\n */\n/* istanbul ignore next */\nexport function vector(ctx: CanvasRenderingContext2D, color: Color, origin: Vector, vector: Vector, scale: number = 1.0): void {\n  const c = color ? color.toString() : 'blue';\n  const v = vector.scale(scale);\n  ctx.beginPath();\n  ctx.strokeStyle = c;\n  ctx.moveTo(origin.x, origin.y);\n  ctx.lineTo(origin.x + v.x, origin.y + v.y);\n  ctx.closePath();\n  ctx.stroke();\n}\n\n/**\n * Represents border radius values\n */\nexport interface BorderRadius {\n  /**\n   * Top-left\n   */\n  tl: number;\n  /**\n   * Top-right\n   */\n  tr: number;\n  /**\n   * Bottom-right\n   */\n  br: number;\n  /**\n   * Bottom-left\n   */\n  bl: number;\n}\n\n/**\n * Draw a round rectangle on a canvas context\n *\n * @param ctx The canvas context\n * @param x The top-left x coordinate\n * @param y The top-left y coordinate\n * @param width The width of the rectangle\n * @param height The height of the rectangle\n * @param radius The border radius of the rectangle\n * @param fill The [[Color]] to fill rectangle with\n * @param stroke The [[Color]] to stroke rectangle with\n */\nexport function roundRect(\n  ctx: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  radius: number | BorderRadius = 5,\n  stroke: Color = Color.White,\n  fill: Color = null\n) {\n  let br: BorderRadius;\n\n  if (typeof radius === 'number') {\n    br = { tl: radius, tr: radius, br: radius, bl: radius };\n  } else {\n    const defaultRadius: BorderRadius = { tl: 0, tr: 0, br: 0, bl: 0 };\n\n    for (const prop in defaultRadius) {\n      if (defaultRadius.hasOwnProperty(prop)) {\n        const side = <keyof BorderRadius>prop;\n        br[side] = radius[side] || defaultRadius[side];\n      }\n    }\n  }\n\n  ctx.beginPath();\n  ctx.moveTo(x + br.tl, y);\n  ctx.lineTo(x + width - br.tr, y);\n  ctx.quadraticCurveTo(x + width, y, x + width, y + br.tr);\n  ctx.lineTo(x + width, y + height - br.br);\n  ctx.quadraticCurveTo(x + width, y + height, x + width - br.br, y + height);\n  ctx.lineTo(x + br.bl, y + height);\n  ctx.quadraticCurveTo(x, y + height, x, y + height - br.bl);\n  ctx.lineTo(x, y + br.tl);\n  ctx.quadraticCurveTo(x, y, x + br.tl, y);\n  ctx.closePath();\n\n  if (fill) {\n    ctx.fillStyle = fill.toString();\n    ctx.fill();\n  }\n\n  if (stroke) {\n    ctx.strokeStyle = stroke.toString();\n    ctx.stroke();\n  }\n}\n\nexport function circle(\n  ctx: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  radius: number,\n  stroke: Color = Color.White,\n  fill: Color = null\n) {\n  ctx.beginPath();\n  ctx.arc(x, y, radius, 0, Math.PI * 2);\n  ctx.closePath();\n\n  if (fill) {\n    ctx.fillStyle = fill.toString();\n    ctx.fill();\n  }\n\n  if (stroke) {\n    ctx.strokeStyle = stroke.toString();\n    ctx.stroke();\n  }\n}\n", "/**\n * CollisionGroups indicate like members that do not collide with each other. Use [[CollisionGroupManager]] to create [[CollisionGroup]]s\n *\n * For example:\n *\n * Players have collision group \"player\"\n *\n * ![Player Collision Group](/assets/images/docs/CollisionGroupsPlayer.png)\n *\n * Enemies have collision group \"enemy\"\n *\n * ![Enemy Collision Group](/assets/images/docs/CollisionGroupsEnemy.png)\n *\n * Blocks have collision group \"ground\"\n *\n * ![Ground collision group](/assets/images/docs/CollisionGroupsGround.png)\n *\n * Players don't collide with each other, but enemies and blocks. Likewise, enemies don't collide with each other but collide\n * with players and blocks.\n *\n * This is done with bitmasking, see the following pseudo-code\n *\n * PlayerGroup = `0b001`\n * PlayerGroupMask = `0b110`\n *\n * EnemyGroup = `0b010`\n * EnemyGroupMask = `0b101`\n *\n * BlockGroup = `0b100`\n * BlockGroupMask = `0b011`\n *\n * Should Players collide? No because the bitwise mask evaluates to 0\n * `(player1.group & player2.mask) === 0`\n * `(0b001 & 0b110) === 0`\n *\n * Should Players and Enemies collide? Yes because the bitwise mask is non-zero\n * `(player1.group & enemy1.mask) === 1`\n * `(0b001 & 0b101) === 1`\n *\n * Should Players and Blocks collide? Yes because the bitwise mask is non-zero\n * `(player1.group & blocks1.mask) === 1`\n * `(0b001 & 0b011) === 1`\n */\nexport class CollisionGroup {\n  /**\n   * The `All` [[CollisionGroup]] is a special group that collides with all other groups including itself,\n   * it is the default collision group on colliders.\n   */\n  public static All = new CollisionGroup('Collide with all groups', -1, -1);\n\n  private _name: string;\n  private _category: number;\n  private _mask: number;\n\n  /**\n   * **STOP!!** It is preferred that [[CollisionGroupManager.create]] is used to create collision groups\n   *  unless you know how to construct the proper bitmasks. See https://github.com/excaliburjs/Excalibur/issues/1091 for more info.\n   * @param name Name of the collision group\n   * @param category 32 bit category for the group, should be a unique power of 2. For example `0b001` or `0b010`\n   * @param mask 32 bit mask of category, or `~category` generally. For a category of `0b001`, the mask would be `0b110`\n   */\n  constructor(name: string, category: number, mask: number) {\n    this._name = name;\n    this._category = category;\n    this._mask = mask;\n  }\n\n  /**\n   * Get the name of the collision group\n   */\n  public get name() {\n    return this._name;\n  }\n\n  /**\n   * Get the category of the collision group, a 32 bit number which should be a unique power of 2\n   */\n  public get category() {\n    return this._category;\n  }\n\n  /**\n   * Get the mask for this collision group\n   */\n  public get mask() {\n    return this._mask;\n  }\n\n  /**\n   * Evaluates whether 2 collision groups can collide\n   * @param other  CollisionGroup\n   */\n  public canCollide(other: CollisionGroup): boolean {\n    return (this.category & other.mask) !== 0 && (other.category & this.mask) !== 0;\n  }\n}\n", "import { Physics } from './../Physics';\nimport { Color } from './../Drawing/Color';\nimport { CollisionContact } from './CollisionContact';\nimport { CollisionResolutionStrategy } from '../Physics';\nimport * as DrawUtil from '../Util/DrawUtil';\nimport { CollisionType } from './CollisionType';\nimport { Collider } from './Collider';\n\n/**\n * Models a potential collision between 2 bodies\n */\nexport class Pair {\n  public id: string = null;\n  public collision: CollisionContact = null;\n\n  constructor(public colliderA: Collider, public colliderB: Collider) {\n    this.id = Pair.calculatePairHash(colliderA, colliderB);\n  }\n\n  public static canCollide(colliderA: Collider, colliderB: Collider) {\n    // If both are in the same collision group short circuit\n    if (!colliderA.group.canCollide(colliderB.group)) {\n      return false;\n    }\n\n    // if both are fixed short circuit\n    if (colliderA.type === CollisionType.Fixed && colliderB.type === CollisionType.Fixed) {\n      return false;\n    }\n\n    // if the either is prevent collision short circuit\n    if (colliderB.type === CollisionType.PreventCollision || colliderA.type === CollisionType.PreventCollision) {\n      return false;\n    }\n\n    // if either is dead short circuit\n    if (!colliderA.active || !colliderB.active) {\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Returns whether or not it is possible for the pairs to collide\n   */\n  public get canCollide(): boolean {\n    const actorA = this.colliderA;\n    const actorB = this.colliderB;\n    return Pair.canCollide(actorA, actorB);\n  }\n\n  /**\n   * Runs the collision intersection logic on the members of this pair\n   */\n  public collide() {\n    this.collision = this.colliderA.collide(this.colliderB);\n  }\n\n  /**\n   * Resolves the collision body position and velocity if a collision occurred\n   */\n  public resolve(strategy: CollisionResolutionStrategy) {\n    if (this.collision) {\n      this.collision.resolve(strategy);\n    }\n  }\n\n  /**\n   * Calculates the unique pair hash id for this collision pair\n   */\n  public static calculatePairHash(colliderA: Collider, colliderB: Collider): string {\n    if (colliderA.id < colliderB.id) {\n      return `#${colliderA.id}+${colliderB.id}`;\n    } else {\n      return `#${colliderB.id}+${colliderA.id}`;\n    }\n  }\n\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    if (this.collision) {\n      if (Physics.showContacts) {\n        DrawUtil.point(ctx, Color.Red, this.collision.point);\n      }\n      if (Physics.showCollisionNormals) {\n        DrawUtil.vector(ctx, Color.Cyan, this.collision.point, this.collision.normal, 30);\n      }\n    }\n  }\n}\n", "import { Color } from '../Drawing/Color';\nimport * as DrawUtil from '../Util/DrawUtil';\nimport { Eventable } from '../Interfaces/Index';\nimport { GameEvent } from '../Events';\nimport { Actor } from '../Actor';\nimport { Body } from './Body';\nimport { CollisionShape } from './CollisionShape';\nimport { Vector, Line } from '../Algebra';\nimport { Physics } from '../Physics';\nimport { BoundingBox } from './BoundingBox';\nimport { CollisionType } from './CollisionType';\nimport { CollisionGroup } from './CollisionGroup';\nimport { CollisionContact } from './CollisionContact';\nimport { EventDispatcher } from '../EventDispatcher';\nimport { Pair } from './Pair';\nimport { Clonable } from '../Interfaces/Clonable';\n\n/**\n * Type guard function to determine whether something is a Collider\n */\nexport function isCollider(x: Actor | Collider): x is Collider {\n  return x instanceof Collider;\n}\n\nexport interface ColliderOptions {\n  /**\n   * Optional [[CollisionShape|Shape]] to use with this collider, the shape defines the collidable\n   * region along with the [[BoundingBox|bounding box]]\n   */\n  shape?: CollisionShape;\n  /**\n   * Optional body to associate with this collider\n   */\n  body?: Body;\n  /**\n   * Optional pixel offset from the position of the body\n   */\n  offset?: Vector;\n  /**\n   * Optional collision group on this collider\n   */\n  group?: CollisionGroup;\n  /**\n   * Optional [[CollisionType|collision type]], if not specified the default is [[CollisionType.PreventCollision]]\n   */\n  type?: CollisionType;\n  /**\n   * Optional local bounds if other bounds are required instead of the bounding box from the shape. This overrides shape bounds.\n   */\n  localBounds?: BoundingBox;\n  /**\n   * Optional flag to indicate moment of inertia from the shape should be used, by default it is true.\n   */\n  useShapeInertia?: boolean;\n}\n\n/**\n * Collider describes material properties like shape,\n * bounds, friction of the physics object. Only **one** collider can be associated with a body at a time\n */\n\nexport class Collider implements Eventable, Clonable<Collider> {\n  private _shape: CollisionShape;\n  public useShapeInertia: boolean;\n  private _events: EventDispatcher<Collider> = new EventDispatcher<Collider>(this);\n\n  constructor({ body, type, group, shape, offset, useShapeInertia = true }: ColliderOptions) {\n    // If shape is not supplied see if the body has an existing collider with a shape\n    if (body && body.collider && !shape) {\n      this._shape = body.collider.shape;\n    } else {\n      this._shape = shape;\n      this.body = body;\n    }\n    this.useShapeInertia = useShapeInertia;\n    this._shape.collider = this;\n    this.type = type || this.type;\n    this.group = group || this.group;\n    this.offset = offset || Vector.Zero;\n  }\n\n  /**\n   * Returns a clone of the current collider, not associated with any body\n   */\n  public clone() {\n    return new Collider({\n      body: null,\n      type: this.type,\n      shape: this._shape.clone(),\n      group: this.group,\n      offset: this.offset\n    });\n  }\n\n  /**\n   * Get the unique id of the collider\n   */\n  public get id(): number {\n    return this.body ? this.body.id : -1;\n  }\n\n  /**\n   * Gets or sets the current collision type of this collider. By\n   * default it is ([[CollisionType.PreventCollision]]).\n   */\n  public type: CollisionType = CollisionType.PreventCollision;\n\n  /**\n   * Gets or sets the current [[CollisionGroup|collision group]] for the collider, colliders with like collision groups do not collide.\n   * By default, the collider will collide with [[CollisionGroup|all groups]].\n   */\n  public group: CollisionGroup = CollisionGroup.All;\n\n  /*\n   * Get the shape of the collider as a [[CollisionShape]]\n   */\n  public get shape(): CollisionShape {\n    return this._shape;\n  }\n\n  /**\n   * Set the shape of the collider as a [[CollisionShape]], if useShapeInertia is set the collider will use inertia from the shape.\n   */\n  public set shape(shape: CollisionShape) {\n    this._shape = shape;\n    this._shape.collider = this;\n    if (this.useShapeInertia) {\n      this.inertia = isNaN(this._shape.inertia) ? this.inertia : this._shape.inertia;\n    }\n  }\n\n  /**\n   * Return a reference to the body associated with this collider\n   */\n  public body: Body;\n\n  /**\n   * The center of the collider in world space\n   */\n  public get center(): Vector {\n    return this.bounds.center;\n  }\n\n  /**\n   * Is this collider active, if false it wont collide\n   */\n  public get active(): boolean {\n    return this.body.active;\n  }\n\n  /**\n   * Collide 2 colliders and product a collision contact if there is a collision, null if none\n   *\n   * Collision vector is in the direction of the other collider. Away from this collider, this -> other.\n   * @param other\n   */\n  public collide(other: Collider): CollisionContact | null {\n    return this.shape.collide(other.shape);\n  }\n\n  /**\n   * Find the closest line between 2 colliders\n   *\n   * Line is in the direction of the other collider. Away from this collider, this -> other.\n   * @param other Other collider\n   */\n  public getClosestLineBetween(other: Collider): Line {\n    return this.shape.getClosestLineBetween(other.shape);\n  }\n\n  /**\n   * Gets the current pixel offset of the collider\n   */\n  public get offset() {\n    return this.shape.offset.clone();\n  }\n\n  /**\n   * Sets the pixel offset of the collider\n   */\n  public set offset(offset: Vector) {\n    this.shape.offset = offset.clone();\n  }\n\n  /**\n   * The current mass of the actor, mass can be thought of as the resistance to acceleration.\n   */\n  public mass: number = 1.0;\n\n  /**\n   * The current moment of inertia, moment of inertia can be thought of as the resistance to rotation.\n   */\n  public inertia: number = 1000;\n\n  /**\n   * The coefficient of friction on this actor\n   */\n  public friction: number = 0.99;\n\n  /**\n   * The also known as coefficient of restitution of this actor, represents the amount of energy preserved after collision or the\n   * bounciness. If 1, it is 100% bouncy, 0 it completely absorbs.\n   */\n  public bounciness: number = 0.2;\n\n  /**\n   * Returns a boolean indicating whether this body collided with\n   * or was in stationary contact with\n   * the body of the other [[Collider]]\n   */\n  public touching(other: Collider): boolean {\n    const pair = new Pair(this, other);\n    pair.collide();\n\n    if (pair.collision) {\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Returns the collider's [[BoundingBox]] calculated for this instant in world space.\n   * If there is no shape, a point bounding box is returned\n   */\n  public get bounds(): BoundingBox {\n    if (this.shape) {\n      return this.shape.bounds;\n    }\n\n    if (this.body) {\n      return new BoundingBox().translate(this.body.pos);\n    }\n    return new BoundingBox();\n  }\n\n  /**\n   * Returns the collider's [[BoundingBox]] relative to the body's position.\n   * If there is no shape, a point bounding box is returned\n   */\n  public get localBounds(): BoundingBox {\n    if (this.shape) {\n      return this.shape.localBounds;\n    }\n    return new BoundingBox();\n  }\n\n  /**\n   * Updates the collision shapes geometry and internal caches if needed\n   */\n  public update() {\n    if (this.shape) {\n      this.shape.recalc();\n    }\n  }\n\n  emit(eventName: string, event: GameEvent<Collider>): void {\n    this._events.emit(eventName, event);\n  }\n  on(eventName: string, handler: (event: GameEvent<Collider>) => void): void {\n    this._events.on(eventName, handler);\n  }\n  off(eventName: string, handler?: (event: GameEvent<Collider>) => void): void {\n    this._events.off(eventName, handler);\n  }\n  once(eventName: string, handler: (event: GameEvent<Collider>) => void): void {\n    this._events.once(eventName, handler);\n  }\n\n  clear() {\n    this._events.clear();\n  }\n\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    // Draw motion vectors\n    if (Physics.showMotionVectors) {\n      DrawUtil.vector(ctx, Color.Yellow, this.body.pos, this.body.acc.add(Physics.acc));\n      DrawUtil.vector(ctx, Color.Red, this.body.pos, this.body.vel);\n      DrawUtil.point(ctx, Color.Red, this.body.pos);\n    }\n\n    if (Physics.showBounds) {\n      this.bounds.debugDraw(ctx, Color.Yellow);\n    }\n\n    if (Physics.showArea) {\n      this.shape.debugDraw(ctx, Color.Green);\n    }\n  }\n}\n", "import { Entity } from './Entity';\n\nexport interface ComponentCtor {\n  new (): Component;\n}\n\nfunction hasClone(x: any): x is { clone(): any } {\n  return !!x?.clone;\n}\n\n/**\n * Components are containers for state in Excalibur, the are meant to convey capabilities that an Entity posesses\n *\n * Implementations of Component must have a zero-arg constructor\n */\nexport abstract class Component<TypeName extends string = string> {\n  /**\n   * Optionally list any component types this component depends on\n   * If the owner entity does not have these components, new components will be added to the entity\n   *\n   * Only components with zero-arg constructors are supported as automatic component dependencies\n   */\n  readonly dependencies?: ComponentCtor[];\n\n  /**\n   * Type of this component, must be a unique type among component types in you game.\n   * See [[BuiltinComponentTypes]] for a list of built in excalibur types\n   */\n  abstract readonly type: TypeName;\n\n  /**\n   * Current owning [[Entity]], if any, of this component. Null if not added to any [[Entity]]\n   */\n  owner?: Entity;\n  clone(): this {\n    const newComponent = new (this.constructor as any)();\n    for (const prop in this) {\n      if (this.hasOwnProperty(prop)) {\n        const val = this[prop];\n        if (hasClone(val) && prop !== 'owner' && prop !== 'clone') {\n          newComponent[prop] = val.clone();\n        } else {\n          newComponent[prop] = val;\n        }\n      }\n    }\n    return newComponent;\n  }\n\n  /**\n   * Optional callback called when a component is added to an entity\n   */\n  onAdd?: (owner: Entity) => void;\n\n  /**\n   * Opitonal callback called when acomponent is added to an entity\n   */\n  onRemove?: (previousOwner: Entity) => void;\n}\n\n/**\n * Tag components are a way of tagging a component with label and a simple value\n */\nexport class TagComponent<TypeName extends string, MaybeValueType extends string | symbol | number | boolean = never> extends Component<\nTypeName\n> {\n  constructor(public readonly type: TypeName, public readonly value?: MaybeValueType) {\n    super();\n  }\n}\n", "export interface Message<T> {\n  type: string;\n  data: T;\n}\n\nexport interface Observer<T> {\n  notify(message: T): void;\n}\n\nexport type MaybeObserver<T> = Partial<Observer<T>>;\n\nexport class Observable<T> {\n  public observers: Observer<T>[] = [];\n\n  register(observer: Observer<T>) {\n    this.observers.push(observer);\n  }\n\n  unregister(observer: Observer<T>) {\n    const i = this.observers.indexOf(observer);\n    if (i !== -1) {\n      this.observers.splice(i, 1);\n    }\n  }\n\n  notifyAll(message: T) {\n    this.observers.forEach((o) => o.notify(message));\n  }\n}\n", "import { Component } from './Component';\n\nimport { Observable, Message } from '../Util/Observable';\nimport { Class } from '../Class';\nimport { OnInitialize, OnPreUpdate, OnPostUpdate } from '../Interfaces/LifecycleEvents';\nimport { Engine } from '../Engine';\nimport { InitializeEvent, PreUpdateEvent, PostUpdateEvent } from '../Events';\n\nexport interface EntityComponent {\n  component: Component;\n  entity: Entity;\n}\nexport class AddedComponent implements Message<EntityComponent> {\n  readonly type: 'Component Added' = 'Component Added';\n  constructor(public data: EntityComponent) {}\n}\n\nexport function isAddedComponent(x: Message<EntityComponent>): x is AddedComponent {\n  return !!x && x.type === 'Component Added';\n}\n\nexport class RemovedComponent implements Message<EntityComponent> {\n  readonly type: 'Component Removed' = 'Component Removed';\n  constructor(public data: EntityComponent) {}\n}\n\nexport function isRemovedComponent(x: Message<EntityComponent>): x is RemovedComponent {\n  return !!x && x.type === 'Component Removed';\n}\n\nexport type ComponentMap = { [type: string]: Component };\n\n// Given a TypeName string (Component.type), find the ComponentType that goes with that type name\nexport type MapTypeNameToComponent<TypeName extends string, ComponentType extends Component> =\n  // If the ComponentType is a Component with type = TypeName then that's the type we are looking for\n  ComponentType extends Component<TypeName> ? ComponentType : never;\n\n// Given a type union of PossibleComponentTypes, create a dictionary that maps that type name string to those individual types\nexport type ComponentMapper<PossibleComponentTypes extends Component> = {\n  [TypeName in PossibleComponentTypes['type']]: MapTypeNameToComponent<TypeName, PossibleComponentTypes>;\n} &\nComponentMap;\n\nexport type ExcludeType<TypeUnion, TypeNameOrType> = TypeNameOrType extends string\n  ? Exclude<TypeUnion, Component<TypeNameOrType>>\n  : Exclude<TypeUnion, TypeNameOrType>;\n\nexport class Entity<KnownComponents extends Component = never> extends Class implements OnInitialize, OnPreUpdate, OnPostUpdate {\n  private static _ID = 0;\n\n  /**\n   * The unique identifier for the entity\n   */\n  public id: number = Entity._ID++;\n\n  /**\n   * Whether this entity is active, if set to false it will be reclaimed\n   */\n  public active: boolean = true;\n\n  public kill() {\n    this.active = false;\n  }\n\n  public isKilled() {\n    return !this.active;\n  }\n\n  private _componentsToRemove: (Component | string)[] = [];\n\n  /**\n   * The types of the components on the Entity\n   */\n  public get types(): string[] {\n    return this._dirty ? (this._typesMemo = Object.keys(this.components)) : this._typesMemo;\n  }\n  private _typesMemo: string[] = [];\n  private _dirty = true;\n\n  private _handleChanges = {\n    defineProperty: (obj: any, prop: any, descriptor: PropertyDescriptor) => {\n      obj[prop] = descriptor.value;\n      this.changes.notifyAll(\n        new AddedComponent({\n          component: descriptor.value as Component,\n          entity: this\n        })\n      );\n      return true;\n    },\n    deleteProperty: (obj: any, prop: any) => {\n      if (prop in obj) {\n        this.changes.notifyAll(\n          new RemovedComponent({\n            component: obj[prop] as Component,\n            entity: this\n          })\n        );\n        delete obj[prop];\n        return true;\n      }\n      return false;\n    }\n  };\n\n  public components = new Proxy<ComponentMapper<KnownComponents>>({} as any, this._handleChanges);\n\n  public changes = new Observable<AddedComponent | RemovedComponent>();\n\n  /**\n   * Creates a deep copy of the entity and a copy of all its components\n   */\n  public clone(): Entity {\n    const newEntity = new Entity();\n    for (const c of this.types) {\n      newEntity.addComponent(this.components[c].clone());\n    }\n    return newEntity;\n  }\n\n  public addComponent<T extends Component>(componentOrEntity: T | Entity<T>, force: boolean = false): Entity<KnownComponents | T> {\n    // If you use an entity as a \"prefab\" or template\n    if (componentOrEntity instanceof Entity) {\n      for (const c in componentOrEntity.components) {\n        this.addComponent(componentOrEntity.components[c].clone());\n      }\n      // Normal component case\n    } else {\n      // if component already exists, skip if not forced\n      if (this.components[componentOrEntity.type] && !force) {\n        return this as Entity<KnownComponents | T>;\n      }\n\n      // Remove existing component type if exists when forced\n      if (this.components[componentOrEntity.type] && force) {\n        this.removeComponent(componentOrEntity);\n      }\n\n      // todo circular dependencies will be a problem\n      if (componentOrEntity.dependencies && componentOrEntity.dependencies.length) {\n        for (const ctor of componentOrEntity.dependencies) {\n          this.addComponent(new ctor());\n          this._dirty = true;\n        }\n      }\n\n      componentOrEntity.owner = this;\n      (this.components as ComponentMap)[componentOrEntity.type] = componentOrEntity;\n      if (componentOrEntity.onAdd) {\n        this._dirty = true;\n        componentOrEntity.onAdd(this);\n      }\n    }\n    return this as Entity<KnownComponents | T>;\n  }\n\n  /**\n   * Removes a component from the entity, by default removals are deferred to the end of entity processing to avoid consistency issues\n   *\n   * Components can be force removed with the `force` flag, the removal is not deferred and happens immediately\n   * @param componentOrType\n   * @param force\n   */\n  public removeComponent<ComponentOrType extends string | Component>(\n    componentOrType: ComponentOrType,\n    force = false\n  ): Entity<ExcludeType<KnownComponents, ComponentOrType>> {\n    if (force) {\n      if (typeof componentOrType === 'string') {\n        this._removeComponentByType(componentOrType);\n      } else if (componentOrType instanceof Component) {\n        this._removeComponentByType(componentOrType.type);\n      }\n    } else {\n      this._componentsToRemove.push(componentOrType);\n    }\n\n    return this as any;\n  }\n\n  private _removeComponentByType(type: string) {\n    if (this.components[type]) {\n      this.components[type].owner = null;\n      if (this.components[type].onRemove) {\n        this.components[type].onRemove(this);\n      }\n      delete this.components[type];\n      this._dirty = true;\n    }\n  }\n\n  /**\n   * @hidden\n   * @internal\n   */\n  public processRemoval() {\n    for (const componentOrType of this._componentsToRemove) {\n      const type = typeof componentOrType === 'string' ? componentOrType : componentOrType.type;\n      this._removeComponentByType(type);\n    }\n    this._componentsToRemove.length = 0;\n  }\n\n  public has(type: string): boolean {\n    return !!this.components[type];\n  }\n\n  private _isInitialized = false;\n\n  /**\n   * Gets whether the actor is Initialized\n   */\n  public get isInitialized(): boolean {\n    return this._isInitialized;\n  }\n\n  /**\n   * Initializes this entity, meant to be called by the Scene before first update not by users of Excalibur.\n   *\n   * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\n   *\n   * @internal\n   */\n  public _initialize(engine: Engine) {\n    if (!this.isInitialized) {\n      this.onInitialize(engine);\n      super.emit('initialize', new InitializeEvent(engine, this));\n      this._isInitialized = true;\n    }\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\n   *\n   * Internal _preupdate handler for [[onPreUpdate]] lifecycle event\n   * @internal\n   */\n  public _preupdate(engine: Engine, delta: number): void {\n    this.emit('preupdate', new PreUpdateEvent(engine, delta, this));\n    this.onPreUpdate(engine, delta);\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\n   *\n   * Internal _preupdate handler for [[onPostUpdate]] lifecycle event\n   * @internal\n   */\n  public _postupdate(engine: Engine, delta: number): void {\n    this.emit('postupdate', new PostUpdateEvent(engine, delta, this));\n    this.onPostUpdate(engine, delta);\n  }\n\n  /**\n   * `onInitialize` is called before the first update of the entity. This method is meant to be\n   * overridden.\n   *\n   * Synonymous with the event handler `.on('initialize', (evt) => {...})`\n   */\n  public onInitialize(_engine: Engine): void {\n    // Override me\n  }\n\n  /**\n   * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n   *\n   * `onPreUpdate` is called directly before an entity is updated.\n   */\n  public onPreUpdate(_engine: Engine, _delta: number): void {\n    // Override me\n  }\n\n  /**\n   * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('postupdate', (evt) =>{...})`\n   *\n   * `onPostUpdate` is called directly after an entity is updated.\n   */\n  public onPostUpdate(_engine: Engine, _delta: number): void {\n    // Override me\n  }\n}\n", "import { Texture } from './Resources/Texture';\nimport {\n  InitializeEvent,\n  KillEvent,\n  PreUpdateEvent,\n  PostUpdateEvent,\n  PreDrawEvent,\n  PostDrawEvent,\n  PreDebugDrawEvent,\n  PostDebugDrawEvent,\n  PostCollisionEvent,\n  PreCollisionEvent,\n  CollisionStartEvent,\n  CollisionEndEvent,\n  PostKillEvent,\n  PreKillEvent,\n  GameEvent,\n  ExitTriggerEvent,\n  EnterTriggerEvent,\n  EnterViewPortEvent,\n  ExitViewPortEvent\n} from './Events';\nimport { PointerEvent, WheelEvent, PointerDragEvent, PointerEventName } from './Input/PointerEvents';\nimport { Engine } from './Engine';\nimport { Color } from './Drawing/Color';\nimport { Sprite } from './Drawing/Sprite';\nimport { Animation } from './Drawing/Animation';\nimport { Trait } from './Interfaces/Trait';\nimport { Drawable } from './Interfaces/Drawable';\nimport { CanInitialize, CanUpdate, CanDraw, CanBeKilled } from './Interfaces/LifecycleEvents';\nimport { Scene } from './Scene';\nimport { Logger } from './Util/Log';\nimport { ActionContext } from './Actions/ActionContext';\nimport { ActionQueue } from './Actions/Action';\nimport { Vector } from './Algebra';\nimport { Body } from './Collision/Body';\nimport { Eventable } from './Interfaces/Evented';\nimport { Actionable } from './Actions/Actionable';\nimport { Configurable } from './Configurable';\nimport * as Traits from './Traits/Index';\nimport * as Util from './Util/Util';\nimport * as Events from './Events';\nimport { PointerEvents } from './Interfaces/PointerEventHandlers';\nimport { CollisionType } from './Collision/CollisionType';\nimport { obsolete } from './Util/Decorators';\nimport { Collider } from './Collision/Collider';\nimport { Shape } from './Collision/Shape';\n\nimport { Entity } from './EntityComponentSystem/Entity';\n\nexport function isActor(x: any): x is Actor {\n  return x instanceof Actor;\n}\n\n/**\n * [[include:Constructors.md]]\n */\nexport interface ActorArgs extends Partial<ActorImpl> {\n  x?: number;\n  y?: number;\n  width?: number;\n  height?: number;\n  pos?: Vector;\n  vel?: Vector;\n  acc?: Vector;\n  rotation?: number;\n  rx?: number;\n  z?: number;\n  color?: Color;\n  visible?: boolean;\n  body?: Body;\n  collisionType?: CollisionType;\n}\n\nexport interface ActorDefaults {\n  anchor: Vector;\n}\n\n/**\n * @hidden\n */\n\nexport class ActorImpl extends Entity implements Actionable, Eventable, PointerEvents, CanInitialize, CanUpdate, CanDraw, CanBeKilled {\n  // #region Properties\n\n  /**\n   * Indicates the next id to be set\n   */\n  public static defaults: ActorDefaults = {\n    anchor: Vector.Half\n  };\n  /**\n   * Indicates the next id to be set\n   */\n  public static maxId = 0;\n  /**\n   * The unique identifier for the actor\n   */\n  public id: number = ActorImpl.maxId++;\n\n  /**\n   * The physics body the is associated with this actor. The body is the container for all physical properties, like position, velocity,\n   * acceleration, mass, inertia, etc.\n   */\n  public get body(): Body {\n    return this._body;\n  }\n\n  public set body(body: Body) {\n    this._body = body;\n    this._body.actor = this;\n  }\n\n  private _body: Body;\n\n  /**\n   * Gets the position vector of the actor in pixels\n   */\n  public get pos(): Vector {\n    return this.body.pos;\n  }\n\n  /**\n   * Sets the position vector of the actor in pixels\n   */\n  public set pos(thePos: Vector) {\n    this.body.pos.setTo(thePos.x, thePos.y);\n  }\n\n  /**\n   * Gets the position vector of the actor from the last frame\n   */\n  public get oldPos(): Vector {\n    return this.body.oldPos;\n  }\n\n  /**\n   * Sets the position vector of the actor in the last frame\n   */\n  public set oldPos(thePos: Vector) {\n    this.body.oldPos.setTo(thePos.x, thePos.y);\n  }\n\n  /**\n   * Gets the velocity vector of the actor in pixels/sec\n   */\n  public get vel(): Vector {\n    return this.body.vel;\n  }\n\n  /**\n   * Sets the velocity vector of the actor in pixels/sec\n   */\n  public set vel(theVel: Vector) {\n    this.body.vel.setTo(theVel.x, theVel.y);\n  }\n\n  /**\n   * Gets the velocity vector of the actor from the last frame\n   */\n  public get oldVel(): Vector {\n    return this.body.oldVel;\n  }\n\n  /**\n   * Sets the velocity vector of the actor from the last frame\n   */\n  public set oldVel(theVel: Vector) {\n    this.body.oldVel.setTo(theVel.x, theVel.y);\n  }\n\n  /**\n   * Gets the acceleration vector of the actor in pixels/second/second. An acceleration pointing down such as (0, 100) may be\n   * useful to simulate a gravitational effect.\n   */\n  public get acc(): Vector {\n    return this.body.acc;\n  }\n\n  /**\n   * Sets the acceleration vector of teh actor in pixels/second/second\n   */\n  public set acc(theAcc: Vector) {\n    this.body.acc.setTo(theAcc.x, theAcc.y);\n  }\n\n  /**\n   * Sets the acceleration of the actor from the last frame. This does not include the global acc [[Physics.acc]].\n   */\n  public set oldAcc(theAcc: Vector) {\n    this.body.oldAcc.setTo(theAcc.x, theAcc.y);\n  }\n\n  /**\n   * Gets the acceleration of the actor from the last frame. This does not include the global acc [[Physics.acc]].\n   */\n  public get oldAcc(): Vector {\n    return this.body.oldAcc;\n  }\n\n  /**\n   * Gets the rotation of the actor in radians. 1 radian = 180/PI Degrees.\n   */\n  public get rotation(): number {\n    return this.body.rotation;\n  }\n\n  /**\n   * Sets the rotation of the actor in radians. 1 radian = 180/PI Degrees.\n   */\n  public set rotation(theAngle: number) {\n    this.body.rotation = theAngle;\n  }\n\n  /**\n   * Gets the rotational velocity of the actor in radians/second\n   */\n  public get rx(): number {\n    return this.body.rx;\n  }\n\n  /**\n   * Sets the rotational velocity of the actor in radians/sec\n   */\n  public set rx(angularVelocity: number) {\n    this.body.rx = angularVelocity;\n  }\n\n  /**\n   * The anchor to apply all actor related transformations like rotation,\n   * translation, and scaling. By default the anchor is in the center of\n   * the actor. By default it is set to the center of the actor (.5, .5)\n   *\n   * An anchor of (.5, .5) will ensure that drawings are centered.\n   *\n   * Use `anchor.setTo` to set the anchor to a different point using\n   * values between 0 and 1. For example, anchoring to the top-left would be\n   * `Actor.anchor.setTo(0, 0)` and top-right would be `Actor.anchor.setTo(0, 1)`.\n   */\n  public anchor: Vector;\n\n  private _height: number = 0;\n  private _width: number = 0;\n\n  /**\n   * Gets the scale vector of the actor\n   * @obsolete ex.Actor.scale will be removed in v0.25.0, set width and height directly in constructor\n   */\n  public get scale(): Vector {\n    return this.body.scale;\n  }\n\n  /**\n   * Sets the scale vector of the actor for\n   * @obsolete ex.Actor.scale will be removed in v0.25.0, set width and height directly in constructor\n   */\n  public set scale(scale: Vector) {\n    this.body.scale = scale;\n  }\n\n  /**\n   * Gets the old scale of the actor last frame\n   * @obsolete ex.Actor.scale will be removed in v0.25.0, set width and height directly in constructor\n   */\n  public get oldScale(): Vector {\n    return this.body.oldScale;\n  }\n\n  /**\n   * Sets the the old scale of the actor last frame\n   * @obsolete ex.Actor.scale will be removed in v0.25.0, set width and height directly in constructor\n   */\n  public set oldScale(scale: Vector) {\n    this.body.oldScale = scale;\n  }\n\n  /**\n   * Gets the x scalar velocity of the actor in scale/second\n   * @obsolete ex.Actor.sx will be removed in v0.25.0, set width and height directly in constructor\n   */\n  public get sx(): number {\n    return this.body.sx;\n  }\n\n  /**\n   * Sets the x scalar velocity of the actor in scale/second\n   * @obsolete ex.Actor.sx will be removed in v0.25.0, set width and height directly in constructor\n   */\n  @obsolete({ message: 'ex.Actor.sx will be removed in v0.25.0', alternateMethod: 'Set width and height directly in constructor' })\n  public set sx(scalePerSecondX: number) {\n    this.body.sx = scalePerSecondX;\n  }\n\n  /**\n   * Gets the y scalar velocity of the actor in scale/second\n   * @obsolete ex.Actor.sy will be removed in v0.25.0, set width and height directly in constructor\n   */\n  public get sy(): number {\n    return this.body.sy;\n  }\n\n  /**\n   * Sets the y scale velocity of the actor in scale/second\n   * @obsolete ex.Actor.sy will be removed in v0.25.0, set width and height directly in constructor\n   */\n  @obsolete({ message: 'ex.Actor.sy will be removed in v0.25.0', alternateMethod: 'Set width and height directly in constructor' })\n  public set sy(scalePerSecondY: number) {\n    this.body.sy = scalePerSecondY;\n  }\n\n  /**\n   * Indicates whether the actor is physically in the viewport\n   */\n  public isOffScreen: boolean = false;\n  /**\n   * The visibility of an actor\n   */\n  public visible: boolean = true;\n  /**\n   * The opacity of an actor. Passing in a color in the [[constructor]] will use the\n   * color's opacity.\n   */\n  public opacity: number = 1;\n  public previousOpacity: number = 1;\n\n  /**\n   * Direct access to the actor's [[ActionQueue]]. Useful if you are building custom actions.\n   */\n  public actionQueue: ActionQueue;\n\n  /**\n   * [[ActionContext|Action context]] of the actor. Useful for scripting actor behavior.\n   */\n  public actions: ActionContext;\n\n  /**\n   * Convenience reference to the global logger\n   */\n  public logger: Logger = Logger.getInstance();\n\n  /**\n   * The scene that the actor is in\n   */\n  public scene: Scene = null;\n\n  /**\n   * The parent of this actor\n   */\n  public parent: Actor = null;\n\n  /**\n   * The children of this actor\n   */\n  public children: Actor[] = [];\n\n  public frames: { [key: string]: Drawable } = {};\n\n  /**\n   * Access to the current drawing for the actor, this can be\n   * an [[Animation]], [[Sprite]], or [[Polygon]].\n   * Set drawings with [[setDrawing]].\n   */\n  public currentDrawing: Drawable = null;\n\n  /**\n   * Draggable helper\n   */\n\n  private _draggable: boolean = false;\n  private _dragging: boolean = false;\n\n  private _pointerDragStartHandler = () => {\n    this._dragging = true;\n  };\n\n  private _pointerDragEndHandler = () => {\n    this._dragging = false;\n  };\n\n  private _pointerDragMoveHandler = (pe: PointerEvent) => {\n    if (this._dragging) {\n      this.pos = pe.pointer.lastWorldPos;\n    }\n  };\n\n  private _pointerDragLeaveHandler = (pe: PointerEvent) => {\n    if (this._dragging) {\n      this.pos = pe.pointer.lastWorldPos;\n    }\n  };\n\n  public get draggable(): boolean {\n    return this._draggable;\n  }\n\n  public set draggable(isDraggable: boolean) {\n    if (isDraggable) {\n      if (isDraggable && !this._draggable) {\n        this.on('pointerdragstart', this._pointerDragStartHandler);\n        this.on('pointerdragend', this._pointerDragEndHandler);\n        this.on('pointerdragmove', this._pointerDragMoveHandler);\n        this.on('pointerdragleave', this._pointerDragLeaveHandler);\n      } else if (!isDraggable && this._draggable) {\n        this.off('pointerdragstart', this._pointerDragStartHandler);\n        this.off('pointerdragend', this._pointerDragEndHandler);\n        this.off('pointerdragmove', this._pointerDragMoveHandler);\n        this.off('pointerdragleave', this._pointerDragLeaveHandler);\n      }\n\n      this._draggable = isDraggable;\n    }\n  }\n\n  /**\n   * Modify the current actor update pipeline.\n   */\n  public traits: Trait[] = [];\n\n  /**\n   * Sets the color of the actor. A rectangle of this color will be\n   * drawn if no [[Drawable]] is specified as the actors drawing.\n   *\n   * The default is `null` which prevents a rectangle from being drawn.\n   */\n  public get color(): Color {\n    return this._color;\n  }\n  public set color(v: Color) {\n    this._color = v.clone();\n  }\n  private _color: Color;\n\n  /**\n   * Whether or not to enable the [[CapturePointer]] trait that propagates\n   * pointer events to this actor\n   */\n  public enableCapturePointer: boolean = false;\n\n  /**\n   * Configuration for [[CapturePointer]] trait\n   */\n  public capturePointer: Traits.CapturePointerConfig = {\n    captureMoveEvents: false,\n    captureDragEvents: false\n  };\n\n  private _zIndex: number = 0;\n  private _isKilled: boolean = false;\n\n  // #endregion\n\n  /**\n   * @param x       The starting x coordinate of the actor\n   * @param y       The starting y coordinate of the actor\n   * @param width   The starting width of the actor\n   * @param height  The starting height of the actor\n   * @param color   The starting color of the actor. Leave null to draw a transparent actor. The opacity of the color will be used as the\n   * initial [[opacity]].\n   */\n  constructor(xOrConfig?: number | ActorArgs, y?: number, width?: number, height?: number, color?: Color) {\n    super();\n\n    // initialize default options\n    this._initDefaults();\n\n    let shouldInitializeBody = true;\n    let collisionType = CollisionType.Passive;\n    if (xOrConfig && typeof xOrConfig === 'object') {\n      const config = xOrConfig;\n      if (config.pos) {\n        xOrConfig = config.pos ? config.pos.x : 0;\n        y = config.pos ? config.pos.y : 0;\n      } else {\n        xOrConfig = config.x || 0;\n        y = config.y || 0;\n      }\n      width = config.width;\n      height = config.height;\n\n      if (config.body) {\n        shouldInitializeBody = false;\n        this.body = config.body;\n      }\n\n      if (config.anchor) {\n        this.anchor = config.anchor;\n      }\n\n      if (config.collisionType) {\n        collisionType = config.collisionType;\n      }\n    }\n\n    // Body and collider bounds are still determined by actor width/height\n    this._width = width || 0;\n    this._height = height || 0;\n\n    // Initialize default collider to be a box\n    if (shouldInitializeBody) {\n      this.body = new Body({\n        collider: new Collider({\n          type: collisionType,\n          shape: Shape.Box(this._width, this._height, this.anchor)\n        })\n      });\n    }\n\n    // Position uses body to store values must be initialized after body\n    this.pos.x = <number>xOrConfig || 0;\n    this.pos.y = y || 0;\n\n    if (color) {\n      this.color = color;\n      // set default opacity of an actor to the color\n      this.opacity = color.a;\n    }\n\n    // Build default pipeline\n    this.traits.push(new Traits.TileMapCollisionDetection());\n    this.traits.push(new Traits.OffscreenCulling());\n    this.traits.push(new Traits.CapturePointer());\n\n    // Build the action queue\n    this.actionQueue = new ActionQueue(this);\n    this.actions = new ActionContext(this);\n  }\n\n  /**\n   * `onInitialize` is called before the first update of the actor. This method is meant to be\n   * overridden. This is where initialization of child actors should take place.\n   *\n   * Synonymous with the event handler `.on('initialize', (evt) => {...})`\n   */\n  public onInitialize(_engine: Engine): void {\n    // Override me\n  }\n\n  /**\n   * Initializes this actor and all it's child actors, meant to be called by the Scene before first update not by users of Excalibur.\n   *\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * @internal\n   */\n  public _initialize(engine: Engine) {\n    super._initialize(engine);\n    for (const child of this.children) {\n      child._initialize(engine);\n    }\n  }\n\n  private _initDefaults() {\n    this.anchor = Actor.defaults.anchor.clone();\n  }\n\n  // #region Events\n\n  private _capturePointerEvents: PointerEventName[] = [\n    'pointerup',\n    'pointerdown',\n    'pointermove',\n    'pointerenter',\n    'pointerleave',\n    'pointerdragstart',\n    'pointerdragend',\n    'pointerdragmove',\n    'pointerdragenter',\n    'pointerdragleave'\n  ];\n\n  private _captureMoveEvents: PointerEventName[] = [\n    'pointermove',\n    'pointerenter',\n    'pointerleave',\n    'pointerdragmove',\n    'pointerdragenter',\n    'pointerdragleave'\n  ];\n\n  private _captureDragEvents: PointerEventName[] = [\n    'pointerdragstart',\n    'pointerdragend',\n    'pointerdragmove',\n    'pointerdragenter',\n    'pointerdragleave'\n  ];\n\n  private _checkForPointerOptIn(eventName: string) {\n    if (eventName) {\n      const normalized = <PointerEventName>eventName.toLowerCase();\n\n      if (this._capturePointerEvents.indexOf(normalized) !== -1) {\n        this.enableCapturePointer = true;\n\n        if (this._captureMoveEvents.indexOf(normalized) !== -1) {\n          this.capturePointer.captureMoveEvents = true;\n        }\n\n        if (this._captureDragEvents.indexOf(normalized) !== -1) {\n          this.capturePointer.captureDragEvents = true;\n        }\n      }\n    }\n  }\n\n  public on(eventName: Events.exittrigger, handler: (event: ExitTriggerEvent) => void): void;\n  public on(eventName: Events.entertrigger, handler: (event: EnterTriggerEvent) => void): void;\n  /**\n   * The **collisionstart** event is fired when a [[Body|physics body]], usually attached to an actor,\n   *  first starts colliding with another [[Body|body]], and will not fire again while in contact until\n   *  the the pair separates and collides again.\n   * Use cases for the **collisionstart** event may be detecting when an actor has touched a surface\n   * (like landing) or if a item has been touched and needs to be picked up.\n   */\n  public on(eventName: Events.collisionstart, handler: (event: CollisionStartEvent) => void): void;\n  /**\n   * The **collisionend** event is fired when two [[Body|physics bodies]] are no longer in contact.\n   * This event will not fire again until another collision and separation.\n   *\n   * Use cases for the **collisionend** event might be to detect when an actor has left a surface\n   * (like jumping) or has left an area.\n   */\n  public on(eventName: Events.collisionend, handler: (event: CollisionEndEvent) => void): void;\n  /**\n   * The **precollision** event is fired **every frame** where a collision pair is found and two\n   * bodies are intersecting.\n   *\n   * This event is useful for building in custom collision resolution logic in Passive-Passive or\n   * Active-Passive scenarios. For example in a breakout game you may want to tweak the angle of\n   * ricochet of the ball depending on which side of the paddle you hit.\n   */\n  public on(eventName: Events.precollision, handler: (event: PreCollisionEvent) => void): void;\n  /**\n   * The **postcollision** event is fired for **every frame** where collision resolution was performed.\n   * Collision resolution is when two bodies influence each other and cause a response like bouncing\n   * off one another. It is only possible to have *postcollision* event in Active-Active and Active-Fixed\n   * type collision pairs.\n   *\n   * Post collision would be useful if you need to know that collision resolution is happening or need to\n   * tweak the default resolution.\n   */\n  public on(eventName: Events.postcollision, handler: (event: PostCollisionEvent) => void): void;\n  public on(eventName: Events.kill, handler: (event: KillEvent) => void): void;\n  public on(eventName: Events.prekill, handler: (event: PreKillEvent) => void): void;\n  public on(eventName: Events.postkill, handler: (event: PostKillEvent) => void): void;\n  public on(eventName: Events.initialize, handler: (event: InitializeEvent<Actor>) => void): void;\n  public on(eventName: Events.preupdate, handler: (event: PreUpdateEvent<Actor>) => void): void;\n  public on(eventName: Events.postupdate, handler: (event: PostUpdateEvent<Actor>) => void): void;\n  public on(eventName: Events.predraw, handler: (event: PreDrawEvent) => void): void;\n  public on(eventName: Events.postdraw, handler: (event: PostDrawEvent) => void): void;\n  public on(eventName: Events.predebugdraw, handler: (event: PreDebugDrawEvent) => void): void;\n  public on(eventName: Events.postdebugdraw, handler: (event: PostDebugDrawEvent) => void): void;\n  public on(eventName: Events.pointerup, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.pointerdown, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.pointerenter, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.pointerleave, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.pointermove, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.pointercancel, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.pointerwheel, handler: (event: WheelEvent) => void): void;\n  public on(eventName: Events.pointerdragstart, handler: (event: PointerDragEvent) => void): void;\n  public on(eventName: Events.pointerdragend, handler: (event: PointerDragEvent) => void): void;\n  public on(eventName: Events.pointerdragenter, handler: (event: PointerDragEvent) => void): void;\n  public on(eventName: Events.pointerdragleave, handler: (event: PointerDragEvent) => void): void;\n  public on(eventName: Events.pointerdragmove, handler: (event: PointerDragEvent) => void): void;\n  public on(eventName: Events.enterviewport, handler: (event: EnterViewPortEvent) => void): void;\n  public on(eventName: Events.exitviewport, handler: (event: ExitViewPortEvent) => void): void;\n  public on(eventName: string, handler: (event: GameEvent<Actor>) => void): void;\n  public on(eventName: string, handler: (event: any) => void): void {\n    this._checkForPointerOptIn(eventName);\n    super.on(eventName, handler);\n  }\n\n  public once(eventName: Events.exittrigger, handler: (event: ExitTriggerEvent) => void): void;\n  public once(eventName: Events.entertrigger, handler: (event: EnterTriggerEvent) => void): void;\n  /**\n   * The **collisionstart** event is fired when a [[Body|physics body]], usually attached to an actor,\n   *  first starts colliding with another [[Body|body]], and will not fire again while in contact until\n   *  the the pair separates and collides again.\n   * Use cases for the **collisionstart** event may be detecting when an actor has touch a surface\n   * (like landing) or if a item has been touched and needs to be picked up.\n   */\n  public once(eventName: Events.collisionstart, handler: (event: CollisionStartEvent) => void): void;\n  /**\n   * The **collisionend** event is fired when two [[Body|physics bodies]] are no longer in contact.\n   * This event will not fire again until another collision and separation.\n   *\n   * Use cases for the **collisionend** event might be to detect when an actor has left a surface\n   * (like jumping) or has left an area.\n   */\n  public once(eventName: Events.collisionend, handler: (event: CollisionEndEvent) => void): void;\n  /**\n   * The **precollision** event is fired **every frame** where a collision pair is found and two\n   * bodies are intersecting.\n   *\n   * This event is useful for building in custom collision resolution logic in Passive-Passive or\n   * Active-Passive scenarios. For example in a breakout game you may want to tweak the angle of\n   * ricochet of the ball depending on which side of the paddle you hit.\n   */\n  public once(eventName: Events.precollision, handler: (event: PreCollisionEvent) => void): void;\n  /**\n   * The **postcollision** event is fired for **every frame** where collision resolution was performed.\n   * Collision resolution is when two bodies influence each other and cause a response like bouncing\n   * off one another. It is only possible to have *postcollision* event in Active-Active and Active-Fixed\n   * type collision pairs.\n   *\n   * Post collision would be useful if you need to know that collision resolution is happening or need to\n   * tweak the default resolution.\n   */\n  public once(eventName: Events.postcollision, handler: (event: PostCollisionEvent) => void): void;\n  public once(eventName: Events.kill, handler: (event: KillEvent) => void): void;\n  public once(eventName: Events.postkill, handler: (event: PostKillEvent) => void): void;\n  public once(eventName: Events.prekill, handler: (event: PreKillEvent) => void): void;\n  public once(eventName: Events.initialize, handler: (event: InitializeEvent<Actor>) => void): void;\n  public once(eventName: Events.preupdate, handler: (event: PreUpdateEvent<Actor>) => void): void;\n  public once(eventName: Events.postupdate, handler: (event: PostUpdateEvent<Actor>) => void): void;\n  public once(eventName: Events.predraw, handler: (event: PreDrawEvent) => void): void;\n  public once(eventName: Events.postdraw, handler: (event: PostDrawEvent) => void): void;\n  public once(eventName: Events.predebugdraw, handler: (event: PreDebugDrawEvent) => void): void;\n  public once(eventName: Events.postdebugdraw, handler: (event: PostDebugDrawEvent) => void): void;\n  public once(eventName: Events.pointerup, handler: (event: PointerEvent) => void): void;\n  public once(eventName: Events.pointerdown, handler: (event: PointerEvent) => void): void;\n  public once(eventName: Events.pointerenter, handler: (event: PointerEvent) => void): void;\n  public once(eventName: Events.pointerleave, handler: (event: PointerEvent) => void): void;\n  public once(eventName: Events.pointermove, handler: (event: PointerEvent) => void): void;\n  public once(eventName: Events.pointercancel, handler: (event: PointerEvent) => void): void;\n  public once(eventName: Events.pointerwheel, handler: (event: WheelEvent) => void): void;\n  public once(eventName: Events.pointerdragstart, handler: (event: PointerDragEvent) => void): void;\n  public once(eventName: Events.pointerdragend, handler: (event: PointerDragEvent) => void): void;\n  public once(eventName: Events.pointerdragenter, handler: (event: PointerDragEvent) => void): void;\n  public once(eventName: Events.pointerdragleave, handler: (event: PointerDragEvent) => void): void;\n  public once(eventName: Events.pointerdragmove, handler: (event: PointerDragEvent) => void): void;\n  public once(eventName: Events.enterviewport, handler: (event: EnterViewPortEvent) => void): void;\n  public once(eventName: Events.exitviewport, handler: (event: ExitViewPortEvent) => void): void;\n  public once(eventName: string, handler: (event: GameEvent<Actor>) => void): void;\n  public once(eventName: string, handler: (event: any) => void): void {\n    this._checkForPointerOptIn(eventName);\n    super.once(eventName, handler);\n  }\n\n  public off(eventName: Events.exittrigger, handler?: (event: ExitTriggerEvent) => void): void;\n  public off(eventName: Events.entertrigger, handler?: (event: EnterTriggerEvent) => void): void;\n  /**\n   * The **collisionstart** event is fired when a [[Body|physics body]], usually attached to an actor,\n   *  first starts colliding with another [[Body|body]], and will not fire again while in contact until\n   *  the the pair separates and collides again.\n   * Use cases for the **collisionstart** event may be detecting when an actor has touch a surface\n   * (like landing) or if a item has been touched and needs to be picked up.\n   */\n  public off(eventName: Events.collisionstart, handler?: (event: CollisionStartEvent) => void): void;\n  /**\n   * The **collisionend** event is fired when two [[Body|physics bodies]] are no longer in contact.\n   * This event will not fire again until another collision and separation.\n   *\n   * Use cases for the **collisionend** event might be to detect when an actor has left a surface\n   * (like jumping) or has left an area.\n   */\n  public off(eventName: Events.collisionend, handler?: (event: CollisionEndEvent) => void): void;\n  /**\n   * The **precollision** event is fired **every frame** where a collision pair is found and two\n   * bodies are intersecting.\n   *\n   * This event is useful for building in custom collision resolution logic in Passive-Passive or\n   * Active-Passive scenarios. For example in a breakout game you may want to tweak the angle of\n   * ricochet of the ball depending on which side of the paddle you hit.\n   */\n  public off(eventName: Events.precollision, handler?: (event: PreCollisionEvent) => void): void;\n  /**\n   * The **postcollision** event is fired for **every frame** where collision resolution was performed.\n   * Collision resolution is when two bodies influence each other and cause a response like bouncing\n   * off one another. It is only possible to have *postcollision* event in Active-Active and Active-Fixed\n   * type collision pairs.\n   *\n   * Post collision would be useful if you need to know that collision resolution is happening or need to\n   * tweak the default resolution.\n   */\n  public off(eventName: Events.postcollision, handler: (event: PostCollisionEvent) => void): void;\n  public off(eventName: Events.pointerup, handler?: (event: PointerEvent) => void): void;\n  public off(eventName: Events.pointerdown, handler?: (event: PointerEvent) => void): void;\n  public off(eventName: Events.pointerenter, handler?: (event: PointerEvent) => void): void;\n  public off(eventName: Events.pointerleave, handler?: (event: PointerEvent) => void): void;\n  public off(eventName: Events.pointermove, handler?: (event: PointerEvent) => void): void;\n  public off(eventName: Events.pointercancel, handler?: (event: PointerEvent) => void): void;\n  public off(eventName: Events.pointerwheel, handler?: (event: WheelEvent) => void): void;\n  public off(eventName: Events.pointerdragstart, handler?: (event: PointerDragEvent) => void): void;\n  public off(eventName: Events.pointerdragend, handler?: (event: PointerDragEvent) => void): void;\n  public off(eventName: Events.pointerdragenter, handler?: (event: PointerDragEvent) => void): void;\n  public off(eventName: Events.pointerdragleave, handler?: (event: PointerDragEvent) => void): void;\n  public off(eventName: Events.pointerdragmove, handler?: (event: PointerDragEvent) => void): void;\n  public off(eventName: Events.prekill, handler?: (event: PreKillEvent) => void): void;\n  public off(eventName: Events.postkill, handler?: (event: PostKillEvent) => void): void;\n  public off(eventName: Events.initialize, handler?: (event: Events.InitializeEvent<Actor>) => void): void;\n  public off(eventName: Events.postupdate, handler?: (event: Events.PostUpdateEvent<Actor>) => void): void;\n  public off(eventName: Events.preupdate, handler?: (event: Events.PreUpdateEvent<Actor>) => void): void;\n  public off(eventName: Events.postdraw, handler?: (event: Events.PostDrawEvent) => void): void;\n  public off(eventName: Events.predraw, handler?: (event: Events.PreDrawEvent) => void): void;\n  public off(eventName: Events.enterviewport, handler?: (event: EnterViewPortEvent) => void): void;\n  public off(eventName: Events.exitviewport, handler?: (event: ExitViewPortEvent) => void): void;\n  public off(eventName: string, handler?: (event: GameEvent<Actor>) => void): void;\n  public off(eventName: string, handler?: (event: any) => void): void {\n    super.off(eventName, handler);\n  }\n\n  // #endregion\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _prekill handler for [[onPreKill]] lifecycle event\n   * @internal\n   */\n  public _prekill(_scene: Scene) {\n    super.emit('prekill', new PreKillEvent(this));\n    this.onPreKill(_scene);\n  }\n\n  /**\n   * Safe to override onPreKill lifecycle event handler. Synonymous with `.on('prekill', (evt) =>{...})`\n   *\n   * `onPreKill` is called directly before an actor is killed and removed from its current [[Scene]].\n   */\n  public onPreKill(_scene: Scene) {\n    // Override me\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _prekill handler for [[onPostKill]] lifecycle event\n   * @internal\n   */\n  public _postkill(_scene: Scene) {\n    super.emit('postkill', new PostKillEvent(this));\n    this.onPostKill(_scene);\n  }\n\n  /**\n   * Safe to override onPostKill lifecycle event handler. Synonymous with `.on('postkill', (evt) => {...})`\n   *\n   * `onPostKill` is called directly after an actor is killed and remove from its current [[Scene]].\n   */\n  public onPostKill(_scene: Scene) {\n    // Override me\n  }\n\n  /**\n   * If the current actor is a member of the scene, this will remove\n   * it from the scene graph. It will no longer be drawn or updated.\n   */\n  public kill() {\n    if (this.scene) {\n      this._prekill(this.scene);\n      this.emit('kill', new KillEvent(this));\n      this._isKilled = true;\n      this.scene.remove(this);\n      this._postkill(this.scene);\n    } else {\n      this.logger.warn('Cannot kill actor, it was never added to the Scene');\n    }\n  }\n\n  /**\n   * If the current actor is killed, it will now not be killed.\n   */\n  public unkill() {\n    this._isKilled = false;\n  }\n\n  /**\n   * Indicates wether the actor has been killed.\n   */\n  public isKilled(): boolean {\n    return this._isKilled;\n  }\n\n  /**\n   * Adds a child actor to this actor. All movement of the child actor will be\n   * relative to the parent actor. Meaning if the parent moves the child will\n   * move with it.\n   * @param actor The child actor to add\n   */\n  public add(actor: Actor) {\n    actor.body.collider.type = CollisionType.PreventCollision;\n    if (Util.addItemToArray(actor, this.children)) {\n      actor.parent = this;\n    }\n  }\n  /**\n   * Removes a child actor from this actor.\n   * @param actor The child actor to remove\n   */\n  public remove(actor: Actor) {\n    if (Util.removeItemFromArray(actor, this.children)) {\n      actor.parent = null;\n    }\n  }\n  /**\n   * Sets the current drawing of the actor to the drawing corresponding to\n   * the key.\n   * @param key The key of the drawing\n   */\n  public setDrawing(key: string): void;\n  /**\n   * Sets the current drawing of the actor to the drawing corresponding to\n   * an `enum` key (e.g. `Animations.Left`)\n   * @param key The `enum` key of the drawing\n   */\n  public setDrawing(key: number): void;\n  public setDrawing(key: any): void {\n    key = key.toString();\n    if (this.currentDrawing !== this.frames[<string>key]) {\n      if (this.frames[key] != null) {\n        this.frames[key].reset();\n        this.currentDrawing = this.frames[key];\n      } else {\n        Logger.getInstance().error(`the specified drawing key ${key} does not exist`);\n      }\n    }\n  }\n\n  /**\n   * Adds a whole texture as the \"default\" drawing. Set a drawing using [[setDrawing]].\n   */\n  public addDrawing(texture: Texture): void;\n  /**\n   * Adds a whole sprite as the \"default\" drawing. Set a drawing using [[setDrawing]].\n   */\n  public addDrawing(sprite: Sprite): void;\n  /**\n   * Adds a drawing to the list of available drawings for an actor. Set a drawing using [[setDrawing]].\n   * @param key     The key to associate with a drawing for this actor\n   * @param drawing This can be an [[Animation]], [[Sprite]], or [[Polygon]].\n   */\n  public addDrawing(key: any, drawing: Drawable): void;\n  public addDrawing(): void {\n    if (arguments.length === 2) {\n      this.frames[<string>arguments[0]] = arguments[1];\n      if (!this.currentDrawing) {\n        this.currentDrawing = arguments[1];\n      }\n    } else {\n      if (arguments[0] instanceof Sprite) {\n        this.addDrawing('default', arguments[0]);\n      }\n      if (arguments[0] instanceof Texture) {\n        this.addDrawing('default', arguments[0].asSprite());\n      }\n    }\n  }\n\n  public get z(): number {\n    return this.getZIndex();\n  }\n\n  public set z(newZ: number) {\n    this.setZIndex(newZ);\n  }\n\n  /**\n   * Gets the z-index of an actor. The z-index determines the relative order an actor is drawn in.\n   * Actors with a higher z-index are drawn on top of actors with a lower z-index\n   */\n  public getZIndex(): number {\n    return this._zIndex;\n  }\n\n  /**\n   * Sets the z-index of an actor and updates it in the drawing list for the scene.\n   * The z-index determines the relative order an actor is drawn in.\n   * Actors with a higher z-index are drawn on top of actors with a lower z-index\n   * @param newIndex new z-index to assign\n   */\n  public setZIndex(newIndex: number) {\n    this.scene.cleanupDrawTree(this);\n    this._zIndex = newIndex;\n    this.scene.updateDrawTree(this);\n  }\n\n  /**\n   * Get the center point of an actor\n   */\n  public get center(): Vector {\n    return new Vector(this.pos.x + this.width / 2 - this.anchor.x * this.width, this.pos.y + this.height / 2 - this.anchor.y * this.height);\n  }\n\n  public get width() {\n    return this._width * this.getGlobalScale().x;\n  }\n\n  public set width(width: number) {\n    this._width = width / this.scale.x;\n    this.body.collider.shape = Shape.Box(this._width, this._height, this.anchor);\n    this.body.markCollisionShapeDirty();\n  }\n\n  public get height() {\n    return this._height * this.getGlobalScale().y;\n  }\n\n  public set height(height: number) {\n    this._height = height / this.scale.y;\n    this.body.collider.shape = Shape.Box(this._width, this._height, this.anchor);\n    this.body.markCollisionShapeDirty();\n  }\n\n  /**\n   * Gets this actor's rotation taking into account any parent relationships\n   *\n   * @returns Rotation angle in radians\n   */\n  public getWorldRotation(): number {\n    if (!this.parent) {\n      return this.rotation;\n    }\n\n    return this.rotation + this.parent.getWorldRotation();\n  }\n\n  /**\n   * Gets an actor's world position taking into account parent relationships, scaling, rotation, and translation\n   *\n   * @returns Position in world coordinates\n   */\n  public getWorldPos(): Vector {\n    if (!this.parent) {\n      return this.pos.clone();\n    }\n\n    // collect parents\n    const parents: Actor[] = [];\n    let root: Actor = this;\n\n    parents.push(this);\n\n    // find parents\n    while (root.parent) {\n      root = root.parent;\n      parents.push(root);\n    }\n\n    // calculate position\n    const x = parents.reduceRight((px, p) => {\n      if (p.parent) {\n        return px + p.pos.x * p.getGlobalScale().x;\n      }\n      return px + p.pos.x;\n    }, 0);\n\n    const y = parents.reduceRight((py, p) => {\n      if (p.parent) {\n        return py + p.pos.y * p.getGlobalScale().y;\n      }\n      return py + p.pos.y;\n    }, 0);\n\n    // rotate around root anchor\n    const ra = root.getWorldPos(); // 10, 10\n    const r = this.getWorldRotation();\n\n    return new Vector(x, y).rotate(r, ra);\n  }\n\n  /**\n   * Gets the global scale of the Actor\n   */\n  public getGlobalScale(): Vector {\n    if (!this.parent) {\n      return new Vector(this.scale.x, this.scale.y);\n    }\n\n    const parentScale = this.parent.getGlobalScale();\n    return new Vector(this.scale.x * parentScale.x, this.scale.y * parentScale.y);\n  }\n\n  // #region Collision\n\n  /**\n   * Tests whether the x/y specified are contained in the actor\n   * @param x  X coordinate to test (in world coordinates)\n   * @param y  Y coordinate to test (in world coordinates)\n   * @param recurse checks whether the x/y are contained in any child actors (if they exist).\n   */\n  public contains(x: number, y: number, recurse: boolean = false): boolean {\n    // These shenanigans are to handle child actor containment,\n    // the only time getWorldPos and pos are different is a child actor\n    const childShift = this.getWorldPos().sub(this.pos);\n    const containment = this.body.collider.bounds.translate(childShift).contains(new Vector(x, y));\n\n    if (recurse) {\n      return (\n        containment ||\n        this.children.some((child: Actor) => {\n          return child.contains(x, y, true);\n        })\n      );\n    }\n\n    return containment;\n  }\n\n  /**\n   * Returns true if the two actor.body.collider.shape's surfaces are less than or equal to the distance specified from each other\n   * @param actor     Actor to test\n   * @param distance  Distance in pixels to test\n   */\n  public within(actor: Actor, distance: number): boolean {\n    return this.body.collider.shape.getClosestLineBetween(actor.body.collider.shape).getLength() <= distance;\n  }\n\n  // #endregion\n\n  // #region Update\n\n  /**\n   * Called by the Engine, updates the state of the actor\n   * @param engine The reference to the current game engine\n   * @param delta  The time elapsed since the last update in milliseconds\n   */\n  public update(engine: Engine, delta: number) {\n    this._initialize(engine);\n    this._preupdate(engine, delta);\n\n    // Tick animations\n    const drawing = this.currentDrawing;\n    if (drawing && drawing instanceof Animation) {\n      drawing.tick(delta, engine.stats.currFrame.id);\n    }\n\n    // Update action queue\n    this.actionQueue.update(delta);\n\n    // Update color only opacity\n    if (this.color) {\n      this.color.a = this.opacity;\n    }\n\n    if (this.opacity === 0) {\n      this.visible = false;\n    }\n\n    // capture old transform\n    this.body.captureOldTransform();\n\n    // Run Euler integration\n    this.body.integrate(delta);\n\n    // Update actor pipeline (movement, collision detection, event propagation, offscreen culling)\n    for (const trait of this.traits) {\n      trait.update(this, engine, delta);\n    }\n\n    // Update child actors\n    for (let i = 0; i < this.children.length; i++) {\n      this.children[i].update(engine, delta);\n    }\n\n    this._postupdate(engine, delta);\n  }\n\n  /**\n   * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n   *\n   * `onPreUpdate` is called directly before an actor is updated.\n   */\n  public onPreUpdate(_engine: Engine, _delta: number): void {\n    // Override me\n  }\n\n  /**\n   * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('postupdate', (evt) =>{...})`\n   *\n   * `onPostUpdate` is called directly after an actor is updated.\n   */\n  public onPostUpdate(_engine: Engine, _delta: number): void {\n    // Override me\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _preupdate handler for [[onPreUpdate]] lifecycle event\n   * @internal\n   */\n  public _preupdate(engine: Engine, delta: number): void {\n    this.emit('preupdate', new PreUpdateEvent(engine, delta, this));\n    this.onPreUpdate(engine, delta);\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _preupdate handler for [[onPostUpdate]] lifecycle event\n   * @internal\n   */\n  public _postupdate(engine: Engine, delta: number): void {\n    this.emit('postupdate', new PreUpdateEvent(engine, delta, this));\n    this.onPostUpdate(engine, delta);\n  }\n\n  // endregion\n\n  // #region Drawing\n  /**\n   * Called by the Engine, draws the actor to the screen\n   * @param ctx   The rendering context\n   * @param delta The time since the last draw in milliseconds\n   */\n  public draw(ctx: CanvasRenderingContext2D, delta: number) {\n    ctx.save();\n    ctx.translate(this.pos.x, this.pos.y);\n    ctx.rotate(this.rotation);\n    ctx.scale(this.scale.x, this.scale.y);\n\n    // translate canvas by anchor offset\n    ctx.save();\n    ctx.translate(-(this._width * this.anchor.x), -(this._height * this.anchor.y));\n\n    this._predraw(ctx, delta);\n\n    if (this.currentDrawing) {\n      const drawing = this.currentDrawing;\n      // See https://github.com/excaliburjs/Excalibur/pull/619 for discussion on this formula\n      const offsetX = (this._width - drawing.width * drawing.scale.x) * this.anchor.x;\n      const offsetY = (this._height - drawing.height * drawing.scale.y) * this.anchor.y;\n\n      this.currentDrawing.draw({ ctx, x: offsetX, y: offsetY, opacity: this.opacity });\n    } else {\n      if (this.color && this.body && this.body.collider && this.body.collider.shape) {\n        this.body.collider.shape.draw(ctx, this.color, new Vector(this.width * this.anchor.x, this.height * this.anchor.y));\n      }\n    }\n    ctx.restore();\n\n    // Draw child actors\n    for (let i = 0; i < this.children.length; i++) {\n      if (this.children[i].visible) {\n        this.children[i].draw(ctx, delta);\n      }\n    }\n\n    this._postdraw(ctx, delta);\n    ctx.restore();\n  }\n\n  /**\n   * Safe to override onPreDraw lifecycle event handler. Synonymous with `.on('predraw', (evt) =>{...})`\n   *\n   * `onPreDraw` is called directly before an actor is drawn, but after local transforms are made.\n   */\n  public onPreDraw(_ctx: CanvasRenderingContext2D, _delta: number): void {\n    // Override me\n  }\n\n  /**\n   * Safe to override onPostDraw lifecycle event handler. Synonymous with `.on('postdraw', (evt) =>{...})`\n   *\n   * `onPostDraw` is called directly after an actor is drawn, and before local transforms are removed.\n   */\n  public onPostDraw(_ctx: CanvasRenderingContext2D, _delta: number): void {\n    // Override me\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _predraw handler for [[onPreDraw]] lifecycle event\n   * @internal\n   */\n  public _predraw(ctx: CanvasRenderingContext2D, delta: number): void {\n    this.emit('predraw', new PreDrawEvent(ctx, delta, this));\n    this.onPreDraw(ctx, delta);\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _postdraw handler for [[onPostDraw]] lifecycle event\n   * @internal\n   */\n  public _postdraw(ctx: CanvasRenderingContext2D, delta: number): void {\n    this.emit('postdraw', new PreDrawEvent(ctx, delta, this));\n    this.onPostDraw(ctx, delta);\n  }\n\n  /**\n   * Called by the Engine, draws the actors debugging to the screen\n   * @param ctx The rendering context\n   */\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    this.emit('predebugdraw', new PreDebugDrawEvent(ctx, this));\n\n    this.body.collider.debugDraw(ctx);\n\n    // Draw actor bounding box\n    const bb = this.body.collider.localBounds.translate(this.getWorldPos());\n    bb.debugDraw(ctx);\n\n    // Draw actor Id\n    ctx.fillText('id: ' + this.id, bb.left + 3, bb.top + 10);\n\n    // Draw actor anchor Vector\n    ctx.fillStyle = Color.Yellow.toString();\n    ctx.beginPath();\n    ctx.arc(this.getWorldPos().x, this.getWorldPos().y, 3, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.fill();\n\n    // Culling Box debug draw\n    for (let j = 0; j < this.traits.length; j++) {\n      if (this.traits[j] instanceof Traits.OffscreenCulling) {\n        (<Traits.OffscreenCulling>this.traits[j]).cullingBox.debugDraw(ctx); // eslint-disable-line\n      }\n    }\n\n    // Unit Circle debug draw\n    ctx.strokeStyle = Color.Yellow.toString();\n    ctx.beginPath();\n    const radius = Math.min(this.width, this.height);\n    ctx.arc(this.getWorldPos().x, this.getWorldPos().y, radius, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.stroke();\n    const ticks: { [key: string]: number } = {\n      '0 Pi': 0,\n      'Pi/2': Math.PI / 2,\n      Pi: Math.PI,\n      '3/2 Pi': (3 * Math.PI) / 2\n    };\n\n    const oldFont = ctx.font;\n    for (const tick in ticks) {\n      ctx.fillStyle = Color.Yellow.toString();\n      ctx.font = '14px';\n      ctx.textAlign = 'center';\n      ctx.fillText(\n        tick,\n        this.getWorldPos().x + Math.cos(ticks[tick]) * (radius + 10),\n        this.getWorldPos().y + Math.sin(ticks[tick]) * (radius + 10)\n      );\n    }\n\n    ctx.font = oldFont;\n\n    // Draw child actors\n    for (let i = 0; i < this.children.length; i++) {\n      this.children[i].debugDraw(ctx);\n    }\n\n    this.emit('postdebugdraw', new PostDebugDrawEvent(ctx, this));\n  }\n\n  /**\n   * Returns the full array of ancestors\n   */\n  public getAncestors(): Actor[] {\n    const path: Actor[] = [this];\n    let currentActor: Actor = this;\n    let parent: Actor;\n\n    while ((parent = currentActor.parent)) {\n      currentActor = parent;\n      path.push(currentActor);\n    }\n\n    return path.reverse();\n  }\n  // #endregion\n}\n\n/**\n * The most important primitive in Excalibur is an `Actor`. Anything that\n * can move on the screen, collide with another `Actor`, respond to events,\n * or interact with the current scene, must be an actor. An `Actor` **must**\n * be part of a [[Scene]] for it to be drawn to the screen.\n *\n * [[include:Actors.md]]\n *\n *\n * [[include:Constructors.md]]\n *\n */\nexport class Actor extends Configurable(ActorImpl) {\n  constructor();\n  constructor(config?: ActorArgs);\n  constructor(x?: number, y?: number, width?: number, height?: number, color?: Color);\n  constructor(xOrConfig?: number | ActorArgs, y?: number, width?: number, height?: number, color?: Color) {\n    super(xOrConfig, y, width, height, color);\n  }\n}\n", "import { Vector } from './Algebra';\nimport { Engine } from './Engine';\nimport { Actor, ActorArgs } from './Actor';\nimport * as Traits from './Traits/Index';\nimport { CollisionType } from './Collision/CollisionType';\nimport { Shape } from './Collision/Shape';\nimport { obsolete } from './Util/Decorators';\n\n/**\n * Helper [[Actor]] primitive for drawing UI's, optimized for UI drawing. Does\n * not participate in collisions. Drawn on top of all other actors.\n */\nexport class ScreenElement extends Actor {\n  protected _engine: Engine;\n\n  constructor();\n  constructor(xOrConfig?: number, y?: number, width?: number, height?: number);\n  constructor(config?: ActorArgs);\n  /**\n   * @param x       The starting x coordinate of the actor\n   * @param y       The starting y coordinate of the actor\n   * @param width   The starting width of the actor\n   * @param height  The starting height of the actor\n   */\n  constructor(xOrConfig?: number | ActorArgs, y?: number, width?: number, height?: number) {\n    if (typeof xOrConfig !== 'object') {\n      super(<number>xOrConfig, y, width, height);\n    } else {\n      super(<ActorArgs>xOrConfig);\n    }\n    this.traits = [];\n    this.traits.push(new Traits.CapturePointer());\n    this.anchor.setTo(0, 0);\n    this.body.collider.type = CollisionType.PreventCollision;\n    this.body.collider.shape = Shape.Box(this.width, this.height, this.anchor);\n    this.enableCapturePointer = true;\n  }\n\n  public _initialize(engine: Engine) {\n    this._engine = engine;\n    super._initialize(engine);\n  }\n\n  public contains(x: number, y: number, useWorld: boolean = true) {\n    if (useWorld) {\n      return super.contains(x, y);\n    }\n\n    const coords = this._engine.worldToScreenCoordinates(new Vector(x, y));\n    return super.contains(coords.x, coords.y);\n  }\n}\n\n/**\n * Legacy UIActor constructor\n * @obsolete UIActor constructor will be removed in v0.25.0 use [[ScreenElement]] instead\n */\n@obsolete({ message: 'Will be removed in v0.25.0', alternateMethod: 'ScreenElement' })\nexport class UIActor extends ScreenElement {}\n", "import { Scene } from './Scene';\n\nexport interface TimerOptions {\n  repeats?: boolean;\n  numberOfRepeats?: number;\n  fcn?: () => void;\n  interval: number;\n}\n\n/**\n * The Excalibur timer hooks into the internal timer and fires callbacks,\n * after a certain interval, optionally repeating.\n */\nexport class Timer {\n  public static id: number = 0;\n  public id: number = 0;\n  public interval: number = 10;\n  public repeats: boolean = false;\n  public maxNumberOfRepeats: number = -1;\n  private _elapsedTime: number = 0;\n  private _totalTimeAlive: number = 0;\n  private _paused: boolean = false;\n  private _numberOfTicks: number = 0;\n  private _callbacks: Array<() => void>;\n  public complete: boolean = false;\n  public scene: Scene = null;\n\n  /**\n   * @param options    Options - repeats, numberOfRepeats, fcn, interval\n   * @param repeats    Indicates whether this call back should be fired only once, or repeat after every interval as completed.\n   * @param numberOfRepeats Specifies a maximum number of times that this timer will execute.\n   * @param fcn        The callback to be fired after the interval is complete.\n   */\n  constructor(options: TimerOptions);\n  constructor(fcn: TimerOptions | (() => void), interval?: number, repeats?: boolean, numberOfRepeats?: number) {\n    if (typeof fcn !== 'function') {\n      const options = fcn;\n      fcn = options.fcn;\n      interval = options.interval;\n      repeats = options.repeats;\n      numberOfRepeats = options.numberOfRepeats;\n    }\n\n    if (!!numberOfRepeats && numberOfRepeats >= 0) {\n      this.maxNumberOfRepeats = numberOfRepeats;\n      if (!repeats) {\n        throw new Error('repeats must be set to true if numberOfRepeats is set');\n      }\n    }\n\n    this.id = Timer.id++;\n    this.interval = interval || this.interval;\n    this.repeats = repeats || this.repeats;\n\n    this._callbacks = [];\n\n    if (fcn) {\n      this.on(fcn);\n    }\n  }\n\n  /**\n   * Adds a new callback to be fired after the interval is complete\n   * @param fcn The callback to be added to the callback list, to be fired after the interval is complete.\n   */\n  public on(fcn: () => void) {\n    this._callbacks.push(fcn);\n  }\n\n  /**\n   * Removes a callback from the callback list to be fired after the interval is complete.\n   * @param fcn The callback to be removed from the callback list, to be fired after the interval is complete.\n   */\n  public off(fcn: () => void) {\n    const index = this._callbacks.indexOf(fcn);\n    this._callbacks.splice(index, 1);\n  }\n\n  /**\n   * Updates the timer after a certain number of milliseconds have elapsed. This is used internally by the engine.\n   * @param delta  Number of elapsed milliseconds since the last update.\n   */\n  public update(delta: number) {\n    if (!this._paused) {\n      this._totalTimeAlive += delta;\n      this._elapsedTime += delta;\n\n      if (this.maxNumberOfRepeats > -1 && this._numberOfTicks >= this.maxNumberOfRepeats) {\n        this.complete = true;\n      }\n\n      if (!this.complete && this._elapsedTime >= this.interval) {\n        this._callbacks.forEach((c) => {\n          c.call(this);\n        });\n\n        this._numberOfTicks++;\n        if (this.repeats) {\n          this._elapsedTime = 0;\n        } else {\n          this.complete = true;\n        }\n      }\n    }\n  }\n\n  /**\n   * Resets the timer so that it can be reused, and optionally reconfigure the timers interval.\n   * @param newInterval If specified, sets a new non-negative interval in milliseconds to refire the callback\n   * @param newNumberOfRepeats If specified, sets a new non-negative upper limit to the number of time this timer executes\n   */\n  public reset(newInterval?: number, newNumberOfRepeats?: number) {\n    if (!!newInterval && newInterval >= 0) {\n      this.interval = newInterval;\n    }\n\n    if (!!this.maxNumberOfRepeats && this.maxNumberOfRepeats >= 0) {\n      this.maxNumberOfRepeats = newNumberOfRepeats;\n      if (!this.repeats) {\n        throw new Error('repeats must be set to true if numberOfRepeats is set');\n      }\n    }\n\n    this.complete = false;\n    this._elapsedTime = 0;\n    this._numberOfTicks = 0;\n  }\n\n  public get timesRepeated(): number {\n    return this._numberOfTicks;\n  }\n\n  public getTimeRunning(): number {\n    return this._totalTimeAlive;\n  }\n\n  /**\n   * Pauses the timer so that no more time will be incremented towards the next call\n   */\n  public pause() {\n    this._paused = true;\n  }\n\n  /**\n   * Unpauses the timer. Time will now increment towards the next call\n   */\n  public unpause() {\n    this._paused = false;\n  }\n\n  /**\n   * Cancels the timer, preventing any further executions.\n   */\n  public cancel() {\n    if (this.scene) {\n      this.scene.cancelTimer(this);\n    }\n  }\n}\n", "import { BoundingBox } from './Collision/BoundingBox';\nimport { Color } from './Drawing/Color';\nimport { Class } from './Class';\nimport { Engine } from './Engine';\nimport { Vector } from './Algebra';\nimport { Actor } from './Actor';\nimport { Logger } from './Util/Log';\nimport { SpriteSheet } from './Drawing/SpriteSheet';\nimport * as Events from './Events';\nimport { Configurable } from './Configurable';\n\n/**\n * @hidden\n */\nexport class TileMapImpl extends Class {\n  private _collidingX: number = -1;\n  private _collidingY: number = -1;\n  private _onScreenXStart: number = 0;\n  private _onScreenXEnd: number = 9999;\n  private _onScreenYStart: number = 0;\n  private _onScreenYEnd: number = 9999;\n  private _spriteSheets: { [key: string]: SpriteSheet } = {};\n  public logger: Logger = Logger.getInstance();\n  public data: Cell[] = [];\n  public x: number;\n  public y: number;\n  public cellWidth: number;\n  public cellHeight: number;\n  public rows: number;\n  public cols: number;\n\n  public on(eventName: Events.preupdate, handler: (event: Events.PreUpdateEvent<TileMap>) => void): void;\n  public on(eventName: Events.postupdate, handler: (event: Events.PostUpdateEvent<TileMap>) => void): void;\n  public on(eventName: Events.predraw, handler: (event: Events.PreDrawEvent) => void): void;\n  public on(eventName: Events.postdraw, handler: (event: Events.PostDrawEvent) => void): void;\n  public on(eventName: string, handler: (event: Events.GameEvent<any>) => void): void;\n  public on(eventName: string, handler: (event: any) => void): void {\n    super.on(eventName, handler);\n  }\n\n  /**\n   * @param x             The x coordinate to anchor the TileMap's upper left corner (should not be changed once set)\n   * @param y             The y coordinate to anchor the TileMap's upper left corner (should not be changed once set)\n   * @param cellWidth     The individual width of each cell (in pixels) (should not be changed once set)\n   * @param cellHeight    The individual height of each cell (in pixels) (should not be changed once set)\n   * @param rows          The number of rows in the TileMap (should not be changed once set)\n   * @param cols          The number of cols in the TileMap (should not be changed once set)\n   */\n  constructor(xOrConfig: number | TileMapArgs, y: number, cellWidth: number, cellHeight: number, rows: number, cols: number) {\n    super();\n    if (xOrConfig && typeof xOrConfig === 'object') {\n      const config = xOrConfig;\n      xOrConfig = config.x;\n      y = config.y;\n      cellWidth = config.cellWidth;\n      cellHeight = config.cellHeight;\n      rows = config.rows;\n      cols = config.cols;\n    }\n    this.x = <number>xOrConfig;\n    this.y = y;\n    this.cellWidth = cellWidth;\n    this.cellHeight = cellHeight;\n    this.rows = rows;\n    this.cols = cols;\n    this.data = new Array<Cell>(rows * cols);\n    for (let i = 0; i < cols; i++) {\n      for (let j = 0; j < rows; j++) {\n        (() => {\n          const cd = new Cell(i * cellWidth + <number>xOrConfig, j * cellHeight + y, cellWidth, cellHeight, i + j * cols);\n          this.data[i + j * cols] = cd;\n        })();\n      }\n    }\n  }\n\n  public registerSpriteSheet(key: string, spriteSheet: SpriteSheet) {\n    this._spriteSheets[key] = spriteSheet;\n  }\n  /**\n   * Returns the intersection vector that can be used to resolve collisions with actors. If there\n   * is no collision null is returned.\n   */\n  public collides(actor: Actor): Vector {\n    const width = actor.pos.x + actor.width;\n    const height = actor.pos.y + actor.height;\n    const actorBounds = actor.body.collider.bounds;\n    const overlaps: Vector[] = [];\n    if (actor.width <= 0 || actor.height <= 0) {\n      return null;\n    }\n    // trace points for overlap\n    for (let x = actorBounds.left; x <= width; x += Math.min(actor.width / 2, this.cellWidth / 2)) {\n      for (let y = actorBounds.top; y <= height; y += Math.min(actor.height / 2, this.cellHeight / 2)) {\n        const cell = this.getCellByPoint(x, y);\n        if (cell && cell.solid) {\n          const overlap = actorBounds.intersect(cell.bounds);\n          const dir = actor.center.sub(cell.center);\n          if (overlap && overlap.dot(dir) > 0) {\n            overlaps.push(overlap);\n          }\n        }\n      }\n    }\n    if (overlaps.length === 0) {\n      return null;\n    }\n    // Return the smallest change other than zero\n    const result = overlaps.reduce((accum, next) => {\n      let x = accum.x;\n      let y = accum.y;\n      if (Math.abs(accum.x) < Math.abs(next.x)) {\n        x = next.x;\n      }\n      if (Math.abs(accum.y) < Math.abs(next.y)) {\n        y = next.y;\n      }\n      return new Vector(x, y);\n    });\n    return result;\n  }\n\n  /**\n   * Returns the [[Cell]] by index (row major order)\n   */\n  public getCellByIndex(index: number): Cell {\n    return this.data[index];\n  }\n  /**\n   * Returns the [[Cell]] by its x and y coordinates\n   */\n  public getCell(x: number, y: number): Cell {\n    if (x < 0 || y < 0 || x >= this.cols || y >= this.rows) {\n      return null;\n    }\n    return this.data[x + y * this.cols];\n  }\n  /**\n   * Returns the [[Cell]] by testing a point in global coordinates,\n   * returns `null` if no cell was found.\n   */\n  public getCellByPoint(x: number, y: number): Cell {\n    x = Math.floor((x - this.x) / this.cellWidth);\n    y = Math.floor((y - this.y) / this.cellHeight);\n    const cell = this.getCell(x, y);\n    if (x >= 0 && y >= 0 && x < this.cols && y < this.rows && cell) {\n      return cell;\n    }\n    return null;\n  }\n\n  public onPreUpdate(_engine: Engine, _delta: number) {\n    // Override me\n  }\n\n  public onPostUpdate(_engine: Engine, _delta: number) {\n    // Override me\n  }\n\n  public update(engine: Engine, delta: number) {\n    this.onPreUpdate(engine, delta);\n    this.emit('preupdate', new Events.PreUpdateEvent(engine, delta, this));\n\n    const worldCoordsUpperLeft = engine.screenToWorldCoordinates(new Vector(0, 0));\n    const worldCoordsLowerRight = engine.screenToWorldCoordinates(new Vector(engine.canvas.clientWidth, engine.canvas.clientHeight));\n\n    this._onScreenXStart = Math.max(Math.floor((worldCoordsUpperLeft.x - this.x) / this.cellWidth) - 2, 0);\n    this._onScreenYStart = Math.max(Math.floor((worldCoordsUpperLeft.y - this.y) / this.cellHeight) - 2, 0);\n    this._onScreenXEnd = Math.max(Math.floor((worldCoordsLowerRight.x - this.x) / this.cellWidth) + 2, 0);\n    this._onScreenYEnd = Math.max(Math.floor((worldCoordsLowerRight.y - this.y) / this.cellHeight) + 2, 0);\n\n    this.onPostUpdate(engine, delta);\n    this.emit('postupdate', new Events.PostUpdateEvent(engine, delta, this));\n  }\n\n  /**\n   * Draws the tile map to the screen. Called by the [[Scene]].\n   * @param ctx    The current rendering context\n   * @param delta  The number of milliseconds since the last draw\n   */\n  public draw(ctx: CanvasRenderingContext2D, delta: number) {\n    this.emit('predraw', new Events.PreDrawEvent(ctx, delta, this));\n\n    ctx.save();\n    ctx.translate(this.x, this.y);\n\n    let x = this._onScreenXStart;\n    const xEnd = Math.min(this._onScreenXEnd, this.cols);\n    let y = this._onScreenYStart;\n    const yEnd = Math.min(this._onScreenYEnd, this.rows);\n\n    let cs: TileSprite[], csi: number, cslen: number;\n\n    for (x; x < xEnd; x++) {\n      for (y; y < yEnd; y++) {\n        // get non-negative tile sprites\n        cs = this.getCell(x, y).sprites.filter((s) => {\n          return s.spriteId > -1;\n        });\n\n        for (csi = 0, cslen = cs.length; csi < cslen; csi++) {\n          const ss = this._spriteSheets[cs[csi].spriteSheetKey];\n\n          // draw sprite, warning if sprite doesn't exist\n          if (ss) {\n            const sprite = ss.getSprite(cs[csi].spriteId);\n            if (sprite) {\n              sprite.draw(ctx, x * this.cellWidth, y * this.cellHeight);\n            } else {\n              this.logger.warn('Sprite does not exist for id', cs[csi].spriteId, 'in sprite sheet', cs[csi].spriteSheetKey, sprite, ss);\n            }\n          } else {\n            this.logger.warn('Sprite sheet', cs[csi].spriteSheetKey, 'does not exist', ss);\n          }\n        }\n      }\n      y = this._onScreenYStart;\n    }\n    ctx.restore();\n\n    this.emit('postdraw', new Events.PostDrawEvent(ctx, delta, this));\n  }\n\n  /**\n   * Draws all the tile map's debug info. Called by the [[Scene]].\n   * @param ctx  The current rendering context\n   */\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    const width = this.cols * this.cellWidth;\n    const height = this.rows * this.cellHeight;\n    ctx.save();\n    ctx.strokeStyle = Color.Red.toString();\n    for (let x = 0; x < this.cols + 1; x++) {\n      ctx.beginPath();\n      ctx.moveTo(this.x + x * this.cellWidth, this.y);\n      ctx.lineTo(this.x + x * this.cellWidth, this.y + height);\n      ctx.stroke();\n    }\n    for (let y = 0; y < this.rows + 1; y++) {\n      ctx.beginPath();\n      ctx.moveTo(this.x, this.y + y * this.cellHeight);\n      ctx.lineTo(this.x + width, this.y + y * this.cellHeight);\n      ctx.stroke();\n    }\n    const solid = Color.Red;\n    solid.a = 0.3;\n    this.data\n      .filter(function (cell) {\n        return cell.solid;\n      })\n      .forEach(function (cell) {\n        ctx.fillStyle = solid.toString();\n        ctx.fillRect(cell.x, cell.y, cell.width, cell.height);\n      });\n    if (this._collidingY > -1 && this._collidingX > -1) {\n      ctx.fillStyle = Color.Cyan.toString();\n      ctx.fillRect(\n        this.x + this._collidingX * this.cellWidth,\n        this.y + this._collidingY * this.cellHeight,\n        this.cellWidth,\n        this.cellHeight\n      );\n    }\n    ctx.restore();\n  }\n}\n\n/**\n * [[include:Constructors.md]]\n */\nexport interface TileMapArgs extends Partial<TileMapImpl> {\n  x: number;\n  y: number;\n  cellWidth: number;\n  cellHeight: number;\n  rows: number;\n  cols: number;\n}\n\n/**\n * The [[TileMap]] class provides a lightweight way to do large complex scenes with collision\n * without the overhead of actors.\n *\n * [[include:TileMaps.md]]\n */\nexport class TileMap extends Configurable(TileMapImpl) {\n  constructor(config: TileMapArgs);\n  constructor(x: number, y: number, cellWidth: number, cellHeight: number, rows: number, cols: number);\n  constructor(xOrConfig: number | TileMapArgs, y?: number, cellWidth?: number, cellHeight?: number, rows?: number, cols?: number) {\n    super(xOrConfig, y, cellWidth, cellHeight, rows, cols);\n  }\n}\n\n/**\n * Tile sprites are used to render a specific sprite from a [[TileMap]]'s spritesheet(s)\n */\nexport class TileSprite {\n  /**\n   * @param spriteSheetKey  The key of the spritesheet to use\n   * @param spriteId        The index of the sprite in the [[SpriteSheet]]\n   */\n  constructor(public spriteSheetKey: string, public spriteId: number) {}\n}\n\n/**\n * @hidden\n */\nexport class CellImpl {\n  private _bounds: BoundingBox;\n  public x: number;\n  public y: number;\n  public width: number;\n  public height: number;\n  public index: number;\n  public solid: boolean = false;\n  public sprites: TileSprite[] = [];\n\n  /**\n   * @param x       Gets or sets x coordinate of the cell in world coordinates\n   * @param y       Gets or sets y coordinate of the cell in world coordinates\n   * @param width   Gets or sets the width of the cell\n   * @param height  Gets or sets the height of the cell\n   * @param index   The index of the cell in row major order\n   * @param solid   Gets or sets whether this cell is solid\n   * @param sprites The list of tile sprites to use to draw in this cell (in order)\n   */\n  constructor(\n    xOrConfig: number | CellArgs,\n    y: number,\n    width: number,\n    height: number,\n    index: number,\n    solid: boolean = false,\n    sprites: TileSprite[] = []\n  ) {\n    if (xOrConfig && typeof xOrConfig === 'object') {\n      const config = xOrConfig;\n      xOrConfig = config.x;\n      y = config.y;\n      width = config.width;\n      height = config.height;\n      index = config.index;\n      solid = config.solid;\n      sprites = config.sprites;\n    }\n    this.x = <number>xOrConfig;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.index = index;\n    this.solid = solid;\n    this.sprites = sprites;\n    this._bounds = new BoundingBox(this.x, this.y, this.x + this.width, this.y + this.height);\n  }\n\n  public get bounds() {\n    return this._bounds;\n  }\n\n  public get center(): Vector {\n    return new Vector(this.x + this.width / 2, this.y + this.height / 2);\n  }\n\n  /**\n   * Add another [[TileSprite]] to this cell\n   */\n  public pushSprite(tileSprite: TileSprite) {\n    this.sprites.push(tileSprite);\n  }\n  /**\n   * Remove an instance of [[TileSprite]] from this cell\n   */\n  public removeSprite(tileSprite: TileSprite) {\n    let index = -1;\n    if ((index = this.sprites.indexOf(tileSprite)) > -1) {\n      this.sprites.splice(index, 1);\n    }\n  }\n  /**\n   * Clear all sprites from this cell\n   */\n  public clearSprites() {\n    this.sprites.length = 0;\n  }\n}\n\n/**\n * [[include:Constructors.md]]\n */\nexport interface CellArgs extends Partial<CellImpl> {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  index: number;\n  solid?: boolean;\n  sprites?: TileSprite[];\n}\n\n/**\n * TileMap Cell\n *\n * A light-weight object that occupies a space in a collision map. Generally\n * created by a [[TileMap]].\n *\n * Cells can draw multiple sprites. Note that the order of drawing is the order\n * of the sprites in the array so the last one will be drawn on top. You can\n * use transparency to create layers this way.\n */\nexport class Cell extends Configurable(CellImpl) {\n  constructor(config: CellArgs);\n  constructor(x: number, y: number, width: number, height: number, index: number, solid?: boolean, sprites?: TileSprite[]);\n  constructor(\n    xOrConfig: number | CellArgs,\n    y?: number,\n    width?: number,\n    height?: number,\n    index?: number,\n    solid?: boolean,\n    sprites?: TileSprite[]\n  ) {\n    super(xOrConfig, y, width, height, index, solid, sprites);\n  }\n}\n", "/**\n * Internal class used to build instances of AudioContext\n */\n/* istanbul ignore next */\nexport class AudioContextFactory {\n  private static _INSTANCE: AudioContext = null;\n\n  public static create(): AudioContext {\n    if (!this._INSTANCE) {\n      if ((<any>window).AudioContext || (<any>window).webkitAudioContext) {\n        this._INSTANCE = new (<any>window).AudioContext();\n      }\n    }\n\n    return this._INSTANCE;\n  }\n}\n", "import { AudioContextFactory } from '../Resources/Sound/AudioContext';\nimport { Promise, PromiseState } from '../Promises';\nimport { Logger } from './Log';\n\nexport interface LegacyWebAudioSource {\n  playbackState: string;\n  PLAYING_STATE: 'playing';\n  FINISHED_STATE: 'finished';\n}\n\nfunction isLegacyWebAudioSource(source: any): source is LegacyWebAudioSource {\n  return !!source.playbackState;\n}\n\nexport class WebAudio {\n  private static _unlocked: boolean = false;\n\n  /**\n   * Play an empty sound to unlock Safari WebAudio context. Call this function\n   * right after a user interaction event.\n   * @source https://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n   */\n  static unlock(): Promise<boolean> {\n    const promise = new Promise<boolean>();\n    if (WebAudio._unlocked || !AudioContextFactory.create()) {\n      return promise.resolve(true);\n    }\n    const unlockTimeoutTimer = setTimeout(() => {\n      Logger.getInstance().warn('Excalibur was unable to unlock the audio context, audio probably will not play in this browser.');\n      promise.resolve();\n    }, 200);\n    const audioContext = AudioContextFactory.create();\n    audioContext.resume().then(\n      () => {\n        // create empty buffer and play it\n        const buffer = audioContext.createBuffer(1, 1, 22050);\n        const source = audioContext.createBufferSource();\n        let ended = false;\n\n        source.buffer = buffer;\n        source.connect(audioContext.destination);\n        source.onended = () => (ended = true);\n\n        if ((<any>source).noteOn) {\n          // deprecated\n          (<any>source).noteOn(0);\n        } else {\n          source.start(0);\n        }\n\n        // by checking the play state after some time, we know if we're really unlocked\n        setTimeout(() => {\n          if (isLegacyWebAudioSource(source)) {\n            if (source.playbackState === source.PLAYING_STATE || source.playbackState === source.FINISHED_STATE) {\n              WebAudio._unlocked = true;\n            }\n          } else {\n            if (audioContext.currentTime > 0 || ended) {\n              WebAudio._unlocked = true;\n            }\n          }\n        }, 0);\n\n        clearTimeout(unlockTimeoutTimer);\n        if (promise.state() === PromiseState.Pending) {\n          promise.resolve();\n        }\n      },\n      () => {\n        if (promise.state() === PromiseState.Pending) {\n          promise.reject(false);\n        }\n      }\n    );\n\n    return promise;\n  }\n\n  static isUnlocked() {\n    return this._unlocked;\n  }\n}\n", "import { Engine } from './Engine';\nimport { EasingFunction, EasingFunctions } from './Util/EasingFunctions';\nimport { PromiseLike, Promise, PromiseState } from './Promises';\nimport { Vector } from './Algebra';\nimport { Actor } from './Actor';\nimport { removeItemFromArray } from './Util/Util';\nimport { CanUpdate, CanInitialize } from './Interfaces/LifecycleEvents';\nimport { PreUpdateEvent, PostUpdateEvent, GameEvent, InitializeEvent } from './Events';\nimport { Class } from './Class';\nimport { BoundingBox } from './Collision/BoundingBox';\nimport { Logger } from './Util/Log';\n\n/**\n * Interface that describes a custom camera strategy for tracking targets\n */\nexport interface CameraStrategy<T> {\n  /**\n   * Target of the camera strategy that will be passed to the action\n   */\n  target: T;\n\n  /**\n   * Camera strategies perform an action to calculate a new focus returned out of the strategy\n   * @param target The target object to apply this camera strategy (if any)\n   * @param camera The current camera implementation in excalibur running the game\n   * @param engine The current engine running the game\n   * @param delta The elapsed time in milliseconds since the last frame\n   */\n  action: (target: T, camera: Camera, engine: Engine, delta: number) => Vector;\n}\n\n/**\n * Container to house convenience strategy methods\n * @internal\n */\nexport class StrategyContainer {\n  constructor(public camera: Camera) {}\n\n  /**\n   * Creates and adds the [[LockCameraToActorStrategy]] on the current camera.\n   * @param actor The actor to lock the camera to\n   */\n  public lockToActor(actor: Actor) {\n    this.camera.addStrategy(new LockCameraToActorStrategy(actor));\n  }\n\n  /**\n   * Creates and adds the [[LockCameraToActorAxisStrategy]] on the current camera\n   * @param actor The actor to lock the camera to\n   * @param axis The axis to follow the actor on\n   */\n  public lockToActorAxis(actor: Actor, axis: Axis) {\n    this.camera.addStrategy(new LockCameraToActorAxisStrategy(actor, axis));\n  }\n\n  /**\n   * Creates and adds the [[ElasticToActorStrategy]] on the current camera\n   * If cameraElasticity < cameraFriction < 1.0, the behavior will be a dampened spring that will slowly end at the target without bouncing\n   * If cameraFriction < cameraElasticity < 1.0, the behavior will be an oscillating spring that will over\n   * correct and bounce around the target\n   *\n   * @param target Target actor to elastically follow\n   * @param cameraElasticity [0 - 1.0] The higher the elasticity the more force that will drive the camera towards the target\n   * @param cameraFriction [0 - 1.0] The higher the friction the more that the camera will resist motion towards the target\n   */\n  public elasticToActor(actor: Actor, cameraElasticity: number, cameraFriction: number) {\n    this.camera.addStrategy(new ElasticToActorStrategy(actor, cameraElasticity, cameraFriction));\n  }\n\n  /**\n   * Creates and adds the [[RadiusAroundActorStrategy]] on the current camera\n   * @param target Target actor to follow when it is \"radius\" pixels away\n   * @param radius Number of pixels away before the camera will follow\n   */\n  public radiusAroundActor(actor: Actor, radius: number) {\n    this.camera.addStrategy(new RadiusAroundActorStrategy(actor, radius));\n  }\n\n  /**\n   * Creates and adds the [[LimitCameraBoundsStrategy]] on the current camera\n   * @param box The bounding box to limit the camera to.\n   */\n  public limitCameraBounds(box: BoundingBox) {\n    this.camera.addStrategy(new LimitCameraBoundsStrategy(box));\n  }\n}\n\n/**\n * Camera axis enum\n */\nexport enum Axis {\n  X,\n  Y\n}\n\n/**\n * Lock a camera to the exact x/y position of an actor.\n */\nexport class LockCameraToActorStrategy implements CameraStrategy<Actor> {\n  constructor(public target: Actor) {}\n  public action = (target: Actor, _cam: Camera, _eng: Engine, _delta: number) => {\n    const center = target.center;\n    return center;\n  };\n}\n\n/**\n * Lock a camera to a specific axis around an actor.\n */\nexport class LockCameraToActorAxisStrategy implements CameraStrategy<Actor> {\n  constructor(public target: Actor, public axis: Axis) {}\n  public action = (target: Actor, cam: Camera, _eng: Engine, _delta: number) => {\n    const center = target.center;\n    const currentFocus = cam.getFocus();\n    if (this.axis === Axis.X) {\n      return new Vector(center.x, currentFocus.y);\n    } else {\n      return new Vector(currentFocus.x, center.y);\n    }\n  };\n}\n\n/**\n * Using [Hook's law](https://en.wikipedia.org/wiki/Hooke's_law), elastically move the camera towards the target actor.\n */\nexport class ElasticToActorStrategy implements CameraStrategy<Actor> {\n  /**\n   * If cameraElasticity < cameraFriction < 1.0, the behavior will be a dampened spring that will slowly end at the target without bouncing\n   * If cameraFriction < cameraElasticity < 1.0, the behavior will be an oscillating spring that will over\n   * correct and bounce around the target\n   *\n   * @param target Target actor to elastically follow\n   * @param cameraElasticity [0 - 1.0] The higher the elasticity the more force that will drive the camera towards the target\n   * @param cameraFriction [0 - 1.0] The higher the friction the more that the camera will resist motion towards the target\n   */\n  constructor(public target: Actor, public cameraElasticity: number, public cameraFriction: number) {}\n  public action = (target: Actor, cam: Camera, _eng: Engine, _delta: number) => {\n    const position = target.center;\n    let focus = cam.getFocus();\n    let cameraVel = cam.vel.clone();\n\n    // Calculate the stretch vector, using the spring equation\n    // F = kX\n    // https://en.wikipedia.org/wiki/Hooke's_law\n    // Apply to the current camera velocity\n    const stretch = position.sub(focus).scale(this.cameraElasticity); // stretch is X\n    cameraVel = cameraVel.add(stretch);\n\n    // Calculate the friction (-1 to apply a force in the opposition of motion)\n    // Apply to the current camera velocity\n    const friction = cameraVel.scale(-1).scale(this.cameraFriction);\n    cameraVel = cameraVel.add(friction);\n\n    // Update position by velocity deltas\n    focus = focus.add(cameraVel);\n\n    return focus;\n  };\n}\n\nexport class RadiusAroundActorStrategy implements CameraStrategy<Actor> {\n  /**\n   *\n   * @param target Target actor to follow when it is \"radius\" pixels away\n   * @param radius Number of pixels away before the camera will follow\n   */\n  constructor(public target: Actor, public radius: number) {}\n  public action = (target: Actor, cam: Camera, _eng: Engine, _delta: number) => {\n    const position = target.center;\n    const focus = cam.getFocus();\n\n    const direction = position.sub(focus);\n    const distance = direction.size;\n    if (distance >= this.radius) {\n      const offset = distance - this.radius;\n      return focus.add(direction.normalize().scale(offset));\n    }\n    return focus;\n  };\n}\n\n/**\n * Prevent a camera from going beyond the given camera dimensions.\n */\nexport class LimitCameraBoundsStrategy implements CameraStrategy<BoundingBox> {\n  /**\n   * Useful for limiting the camera to a [[TileMap]]'s dimensions, or a specific area inside the map.\n   *\n   * Note that this strategy does not perform any movement by itself.\n   * It only sets the camera position to within the given bounds when the camera has gone beyond them.\n   * Thus, it is a good idea to combine it with other camera strategies and set this strategy as the last one.\n   *\n   * Make sure that the camera bounds are at least as large as the viewport size.\n   *\n   * @param target The bounding box to limit the camera to\n   */\n\n  boundSizeChecked: boolean = false; // Check and warn only once\n\n  constructor(public target: BoundingBox) {}\n\n  public action = (target: BoundingBox, cam: Camera, _eng: Engine, _delta: number) => {\n    const focus = cam.getFocus();\n\n    if (!this.boundSizeChecked) {\n      if (target.bottom - target.top < _eng.drawHeight || target.right - target.left < _eng.drawWidth) {\n        Logger.getInstance().warn('Camera bounds should not be smaller than the engine viewport');\n      }\n      this.boundSizeChecked = true;\n    }\n\n    if (focus.x < target.left + _eng.halfDrawWidth) {\n      focus.x = target.left + _eng.halfDrawWidth;\n    } else if (focus.x > target.right - _eng.halfDrawWidth) {\n      focus.x = target.right - _eng.halfDrawWidth;\n    }\n\n    if (focus.y < target.top + _eng.halfDrawHeight) {\n      focus.y = target.top + _eng.halfDrawHeight;\n    } else if (focus.y > target.bottom - _eng.halfDrawHeight) {\n      focus.y = target.bottom - _eng.halfDrawHeight;\n    }\n\n    return focus;\n  };\n}\n\n/**\n * Cameras\n *\n * [[Camera]] is the base class for all Excalibur cameras. Cameras are used\n * to move around your game and set focus. They are used to determine\n * what is \"off screen\" and can be used to scale the game.\n *\n * [[include:Cameras.md]]\n */\nexport class Camera extends Class implements CanUpdate, CanInitialize {\n  protected _follow: Actor;\n\n  private _cameraStrategies: CameraStrategy<any>[] = [];\n\n  public strategy: StrategyContainer = new StrategyContainer(this);\n\n  /**\n   * Get or set current zoom of the camera, defaults to 1\n   */\n  public z: number = 1;\n  /**\n   * Get or set rate of change in zoom, defaults to 0\n   */\n  public dz: number = 0;\n  /**\n   * Get or set zoom acceleration\n   */\n  public az: number = 0;\n\n  /**\n   * Current rotation of the camera\n   */\n  public rotation: number = 0;\n\n  /**\n   * Current angular velocity\n   */\n  public rx: number = 0;\n\n  /**\n   * Get or set the camera's angular velocity\n   */\n  public get angularVelocity(): number {\n    return this.rx;\n  }\n\n  public set angularVelocity(value: number) {\n    this.rx = value;\n  }\n\n  /**\n   * Get or set the camera's position\n   */\n  public pos: Vector = Vector.Zero;\n\n  /**\n   * Get or set the camera's velocity\n   */\n  public vel: Vector = Vector.Zero;\n\n  /**\n   * GEt or set the camera's acceleration\n   */\n  public acc: Vector = Vector.Zero;\n\n  private _cameraMoving: boolean = false;\n  private _currentLerpTime: number = 0;\n  private _lerpDuration: number = 1000; // 1 second\n  private _lerpStart: Vector = null;\n  private _lerpEnd: Vector = null;\n  private _lerpPromise: PromiseLike<Vector>;\n\n  //camera effects\n  protected _isShaking: boolean = false;\n  private _shakeMagnitudeX: number = 0;\n  private _shakeMagnitudeY: number = 0;\n  private _shakeDuration: number = 0;\n  private _elapsedShakeTime: number = 0;\n  private _xShake: number = 0;\n  private _yShake: number = 0;\n\n  protected _isZooming: boolean = false;\n  private _zoomStart: number = 1;\n  private _zoomEnd: number = 1;\n  private _currentZoomTime: number = 0;\n  private _zoomDuration: number = 0;\n\n  private _zoomPromise: Promise<boolean>;\n  private _zoomEasing: EasingFunction = EasingFunctions.EaseInOutCubic;\n  private _easing: EasingFunction = EasingFunctions.EaseInOutCubic;\n\n  /**\n   * Get the camera's x position\n   */\n  public get x() {\n    return this.pos.x;\n  }\n\n  /**\n   * Set the camera's x position (cannot be set when following an [[Actor]] or when moving)\n   */\n  public set x(value: number) {\n    if (!this._follow && !this._cameraMoving) {\n      this.pos.x = value;\n    }\n  }\n\n  /**\n   * Get the camera's y position\n   */\n  public get y() {\n    return this.pos.y;\n  }\n\n  /**\n   * Set the camera's y position (cannot be set when following an [[Actor]] or when moving)\n   */\n  public set y(value: number) {\n    if (!this._follow && !this._cameraMoving) {\n      this.pos.y = value;\n    }\n  }\n\n  /**\n   * Get or set the camera's x velocity\n   */\n  public get dx() {\n    return this.vel.x;\n  }\n\n  public set dx(value: number) {\n    this.vel.x = value;\n  }\n\n  /**\n   * Get or set the camera's y velocity\n   */\n  public get dy() {\n    return this.vel.y;\n  }\n\n  public set dy(value: number) {\n    this.vel.y = value;\n  }\n\n  /**\n   * Get or set the camera's x acceleration\n   */\n  public get ax() {\n    return this.acc.x;\n  }\n\n  public set ax(value: number) {\n    this.acc.x = value;\n  }\n\n  /**\n   * Get or set the camera's y acceleration\n   */\n  public get ay() {\n    return this.acc.y;\n  }\n\n  public set ay(value: number) {\n    this.acc.y = value;\n  }\n\n  /**\n   * Returns the focal point of the camera, a new point giving the x and y position of the camera\n   */\n  public getFocus() {\n    return this.pos;\n  }\n\n  /**\n   * This moves the camera focal point to the specified position using specified easing function. Cannot move when following an Actor.\n   *\n   * @param pos The target position to move to\n   * @param duration The duration in milliseconds the move should last\n   * @param [easingFn] An optional easing function ([[ex.EasingFunctions.EaseInOutCubic]] by default)\n   * @returns A [[Promise]] that resolves when movement is finished, including if it's interrupted.\n   *          The [[Promise]] value is the [[Vector]] of the target position. It will be rejected if a move cannot be made.\n   */\n  public move(pos: Vector, duration: number, easingFn: EasingFunction = EasingFunctions.EaseInOutCubic): PromiseLike<Vector> {\n    if (typeof easingFn !== 'function') {\n      throw 'Please specify an EasingFunction';\n    }\n\n    // cannot move when following an actor\n    if (this._follow) {\n      return new Promise<Vector>().reject(pos);\n    }\n\n    // resolve existing promise, if any\n    if (this._lerpPromise && this._lerpPromise.state() === PromiseState.Pending) {\n      this._lerpPromise.resolve(pos);\n    }\n\n    this._lerpPromise = new Promise<Vector>();\n    this._lerpStart = this.getFocus().clone();\n    this._lerpDuration = duration;\n    this._lerpEnd = pos;\n    this._currentLerpTime = 0;\n    this._cameraMoving = true;\n    this._easing = easingFn;\n\n    return this._lerpPromise;\n  }\n\n  /**\n   * Sets the camera to shake at the specified magnitudes for the specified duration\n   * @param magnitudeX  The x magnitude of the shake\n   * @param magnitudeY  The y magnitude of the shake\n   * @param duration    The duration of the shake in milliseconds\n   */\n  public shake(magnitudeX: number, magnitudeY: number, duration: number) {\n    this._isShaking = true;\n    this._shakeMagnitudeX = magnitudeX;\n    this._shakeMagnitudeY = magnitudeY;\n    this._shakeDuration = duration;\n  }\n\n  /**\n   * Zooms the camera in or out by the specified scale over the specified duration.\n   * If no duration is specified, it take effect immediately.\n   * @param scale    The scale of the zoom\n   * @param duration The duration of the zoom in milliseconds\n   */\n  public zoom(scale: number, duration: number = 0, easingFn: EasingFunction = EasingFunctions.EaseInOutCubic): Promise<boolean> {\n    this._zoomPromise = new Promise<boolean>();\n\n    if (duration) {\n      this._isZooming = true;\n      this._zoomEasing = easingFn;\n      this._currentZoomTime = 0;\n      this._zoomDuration = duration;\n      this._zoomStart = this.z;\n      this._zoomEnd = scale;\n    } else {\n      this._isZooming = false;\n      this.z = scale;\n      this._zoomPromise.resolve(true);\n    }\n\n    return this._zoomPromise;\n  }\n\n  /**\n   * Gets the current zoom scale\n   */\n  public getZoom() {\n    return this.z;\n  }\n\n  /**\n   * Gets the bounding box of the viewport of this camera in world coordinates\n   */\n  public get viewport(): BoundingBox {\n    if (this._engine) {\n      const halfWidth = this._engine.halfDrawWidth;\n      const halfHeight = this._engine.halfDrawHeight;\n\n      return new BoundingBox(this.x - halfWidth, this.y - halfHeight, this.x + halfWidth, this.y + halfHeight);\n    }\n    return new BoundingBox(0, 0, 0, 0);\n  }\n\n  /**\n   * Adds a new camera strategy to this camera\n   * @param cameraStrategy Instance of an [[CameraStrategy]]\n   */\n  public addStrategy<T>(cameraStrategy: CameraStrategy<T>) {\n    this._cameraStrategies.push(cameraStrategy);\n  }\n\n  /**\n   * Removes a camera strategy by reference\n   * @param cameraStrategy Instance of an [[CameraStrategy]]\n   */\n  public removeStrategy<T>(cameraStrategy: CameraStrategy<T>) {\n    removeItemFromArray(cameraStrategy, this._cameraStrategies);\n  }\n\n  /**\n   * Clears all camera strategies from the camera\n   */\n  public clearAllStrategies() {\n    this._cameraStrategies.length = 0;\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _preupdate handler for [[onPreUpdate]] lifecycle event\n   * @internal\n   */\n  public _preupdate(engine: Engine, delta: number): void {\n    this.emit('preupdate', new PreUpdateEvent(engine, delta, this));\n    this.onPreUpdate(engine, delta);\n  }\n\n  /**\n   * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n   *\n   * `onPreUpdate` is called directly before a scene is updated.\n   */\n  public onPreUpdate(_engine: Engine, _delta: number): void {\n    // Overridable\n  }\n\n  /**\n   *  It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _preupdate handler for [[onPostUpdate]] lifecycle event\n   * @internal\n   */\n  public _postupdate(engine: Engine, delta: number): void {\n    this.emit('postupdate', new PostUpdateEvent(engine, delta, this));\n    this.onPostUpdate(engine, delta);\n  }\n\n  /**\n   * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n   *\n   * `onPostUpdate` is called directly after a scene is updated.\n   */\n  public onPostUpdate(_engine: Engine, _delta: number): void {\n    // Overridable\n  }\n\n  private _engine: Engine;\n  private _isInitialized = false;\n  public get isInitialized() {\n    return this._isInitialized;\n  }\n\n  public _initialize(_engine: Engine) {\n    if (!this.isInitialized) {\n      this.onInitialize(_engine);\n      super.emit('initialize', new InitializeEvent(_engine, this));\n      this._isInitialized = true;\n      this._engine = _engine;\n    }\n  }\n\n  /**\n   * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n   *\n   * `onPostUpdate` is called directly after a scene is updated.\n   */\n  public onInitialize(_engine: Engine) {\n    // Overridable\n  }\n\n  public on(eventName: 'initialize', handler: (event: InitializeEvent) => void): void;\n  public on(eventName: 'preupdate', handler: (event: PreUpdateEvent) => void): void;\n  public on(eventName: 'postupdate', handler: (event: PostUpdateEvent) => void): void;\n  public on(eventName: any, handler: any) {\n    super.on(eventName, handler);\n  }\n\n  public off(eventName: 'initialize', handler?: (event: InitializeEvent) => void): void;\n  public off(eventName: 'preupdate', handler?: (event: PreUpdateEvent) => void): void;\n  public off(eventName: 'postupdate', handler?: (event: PostUpdateEvent) => void): void;\n  public off(eventName: string, handler: (event: GameEvent<Camera>) => void): void;\n  public off(eventName: string, handler: (event: any) => void): void {\n    super.off(eventName, handler);\n  }\n\n  public once(eventName: 'initialize', handler: (event: InitializeEvent) => void): void;\n  public once(eventName: 'preupdate', handler: (event: PreUpdateEvent) => void): void;\n  public once(eventName: 'postupdate', handler: (event: PostUpdateEvent) => void): void;\n  public once(eventName: string, handler: (event: GameEvent<Camera>) => void): void;\n  public once(eventName: string, handler: (event: any) => void): void {\n    super.once(eventName, handler);\n  }\n\n  public update(_engine: Engine, delta: number) {\n    this._initialize(_engine);\n    this._preupdate(_engine, delta);\n\n    // Update placements based on linear algebra\n    this.pos = this.pos.add(this.vel.scale(delta / 1000));\n    this.z += (this.dz * delta) / 1000;\n\n    this.vel = this.vel.add(this.acc.scale(delta / 1000));\n    this.dz += (this.az * delta) / 1000;\n\n    this.rotation += (this.angularVelocity * delta) / 1000;\n\n    if (this._isZooming) {\n      if (this._currentZoomTime < this._zoomDuration) {\n        const zoomEasing = this._zoomEasing;\n        const newZoom = zoomEasing(this._currentZoomTime, this._zoomStart, this._zoomEnd, this._zoomDuration);\n\n        this.z = newZoom;\n        this._currentZoomTime += delta;\n      } else {\n        this._isZooming = false;\n        this.z = this._zoomEnd;\n        this._currentZoomTime = 0;\n        this._zoomPromise.resolve(true);\n      }\n    }\n\n    if (this._cameraMoving) {\n      if (this._currentLerpTime < this._lerpDuration) {\n        const moveEasing = EasingFunctions.CreateVectorEasingFunction(this._easing);\n\n        const lerpPoint = moveEasing(this._currentLerpTime, this._lerpStart, this._lerpEnd, this._lerpDuration);\n\n        this.pos = lerpPoint;\n\n        this._currentLerpTime += delta;\n      } else {\n        this.pos = this._lerpEnd;\n        const end = this._lerpEnd.clone();\n\n        this._lerpStart = null;\n        this._lerpEnd = null;\n        this._currentLerpTime = 0;\n        this._cameraMoving = false;\n        // Order matters here, resolve should be last so any chain promises have a clean slate\n        this._lerpPromise.resolve(end);\n      }\n    }\n\n    if (this._isDoneShaking()) {\n      this._isShaking = false;\n      this._elapsedShakeTime = 0;\n      this._shakeMagnitudeX = 0;\n      this._shakeMagnitudeY = 0;\n      this._shakeDuration = 0;\n      this._xShake = 0;\n      this._yShake = 0;\n    } else {\n      this._elapsedShakeTime += delta;\n      this._xShake = ((Math.random() * this._shakeMagnitudeX) | 0) + 1;\n      this._yShake = ((Math.random() * this._shakeMagnitudeY) | 0) + 1;\n    }\n\n    for (const s of this._cameraStrategies) {\n      this.pos = s.action.call(s, s.target, this, _engine, delta);\n    }\n\n    this._postupdate(_engine, delta);\n  }\n\n  /**\n   * Applies the relevant transformations to the game canvas to \"move\" or apply effects to the Camera\n   * @param ctx    Canvas context to apply transformations\n   * @param delta  The number of milliseconds since the last update\n   */\n  public draw(ctx: CanvasRenderingContext2D) {\n    const focus = this.getFocus();\n    const canvasWidth = ctx.canvas.width;\n    const canvasHeight = ctx.canvas.height;\n    const pixelRatio = this._engine ? this._engine.pixelRatio : window.devicePixelRatio;\n    const zoom = this.getZoom();\n\n    const newCanvasWidth = canvasWidth / zoom / pixelRatio;\n    const newCanvasHeight = canvasHeight / zoom / pixelRatio;\n\n    ctx.scale(zoom, zoom);\n    ctx.translate(-focus.x + newCanvasWidth / 2 + this._xShake, -focus.y + newCanvasHeight / 2 + this._yShake);\n  }\n\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    const focus = this.getFocus();\n    ctx.fillStyle = 'red';\n    ctx.strokeStyle = 'white';\n    ctx.lineWidth = 3;\n    ctx.beginPath();\n    ctx.arc(focus.x, focus.y, 15, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.stroke();\n\n    ctx.beginPath();\n    ctx.arc(focus.x, focus.y, 5, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.stroke();\n\n    ctx.beginPath();\n    ctx.setLineDash([5, 15]);\n    ctx.lineWidth = 5;\n    ctx.strokeStyle = 'white';\n    ctx.strokeRect(this.viewport.left, this.viewport.top, this.viewport.width, this.viewport.height);\n    ctx.closePath();\n  }\n\n  private _isDoneShaking(): boolean {\n    return !this._isShaking || this._elapsedShakeTime >= this._shakeDuration;\n  }\n}\n", "import { Color } from './Drawing/Color';\nimport { WebAudio } from './Util/WebAudio';\nimport { Logger } from './Util/Log';\nimport { Promise, PromiseState } from './Promises';\nimport { Engine } from './Engine';\nimport { Loadable } from './Interfaces/Loadable';\nimport { CanLoad } from './Interfaces/Loader';\nimport { Class } from './Class';\nimport * as DrawUtil from './Util/DrawUtil';\n\nimport logoImg from './Loader.logo.png';\nimport loaderCss from './Loader.css';\nimport { Vector } from './Algebra';\n\n/**\n * Pre-loading assets\n *\n * The loader provides a mechanism to preload multiple resources at\n * one time. The loader must be passed to the engine in order to\n * trigger the loading progress bar.\n *\n * The [[Loader]] itself implements [[Loadable]] so you can load loaders.\n *\n * ## Example: Pre-loading resources for a game\n *\n * ```js\n * // create a loader\n * var loader = new ex.Loader();\n *\n * // create a resource dictionary (best practice is to keep a separate file)\n * var resources = {\n *   TextureGround: new ex.Texture(\"/images/textures/ground.png\"),\n *   SoundDeath: new ex.Sound(\"/sound/death.wav\", \"/sound/death.mp3\")\n * };\n *\n * // loop through dictionary and add to loader\n * for (var loadable in resources) {\n *   if (resources.hasOwnProperty(loadable)) {\n *     loader.addResource(resources[loadable]);\n *   }\n * }\n *\n * // start game\n * game.start(loader).then(function () {\n *   console.log(\"Game started!\");\n * });\n * ```\n *\n * ## Customize the Loader\n *\n * The loader can be customized to show different, text, logo, background color, and button.\n *\n * ```typescript\n * const loader = new ex.Loader([playerTexture]);\n *\n * // The loaders button text can simply modified using this\n * loader.playButtonText = 'Start the best game ever';\n *\n * // The logo can be changed by inserting a base64 image string here\n *\n * loader.logo = 'data:image/png;base64,iVBORw...';\n * loader.logoWidth = 15;\n * loader.logoHeight = 14;\n *\n * // The background color can be changed like so by supplying a valid CSS color string\n *\n * loader.backgroundColor = 'red'\n * loader.backgroundColor = '#176BAA'\n *\n * // To build a completely new button\n * loader.startButtonFactory = () => {\n *     let myButton = document.createElement('button');\n *     myButton.textContent = 'The best button';\n *     return myButton;\n * };\n *\n * engine.start(loader).then(() => {});\n * ```\n */\nexport class Loader extends Class implements CanLoad {\n  private _resourceList: Loadable[] = [];\n  private _index = 0;\n\n  private _playButtonShown: boolean = false;\n  private _resourceCount: number = 0;\n  private _numLoaded: number = 0;\n  private _progressCounts: { [key: string]: number } = {};\n  private _totalCounts: { [key: string]: number } = {};\n  private _engine: Engine;\n\n  // logo drawing stuff\n\n  // base64 string encoding of the excalibur logo (logo-white.png)\n  public logo = logoImg;\n  public logoWidth = 468;\n  public logoHeight = 118;\n  /**\n   * Positions the top left corner of the logo image\n   * If not set, the loader automatically positions the logo\n   */\n  public logoPosition: Vector | null;\n  /**\n   * Positions the top left corner of the play button.\n   * If not set, the loader automatically positions the play button\n   */\n  public playButtonPosition: Vector | null;\n  /**\n   * Positions the top left corner of the loading bar\n   * If not set, the loader automatically positions the loading bar\n   */\n  public loadingBarPosition: Vector | null;\n\n  /**\n   * Gets or sets the color of the loading bar, default is [[Color.White]]\n   */\n  public loadingBarColor: Color = Color.White;\n\n  /**\n   * Gets or sets the background color of the loader as a hex string\n   */\n  public backgroundColor: string = '#176BAA';\n\n  protected _imageElement: HTMLImageElement;\n  protected get _image() {\n    if (!this._imageElement) {\n      this._imageElement = new Image();\n      this._imageElement.src = this.logo;\n    }\n\n    return this._imageElement;\n  }\n\n  public suppressPlayButton: boolean = false;\n  public get playButtonRootElement(): HTMLElement | null {\n    return this._playButtonRootElement;\n  }\n  public get playButtonElement(): HTMLButtonElement | null {\n    return this._playButtonElement;\n  }\n  protected _playButtonRootElement: HTMLElement;\n  protected _playButtonElement: HTMLButtonElement;\n  protected _styleBlock: HTMLStyleElement;\n  /** Loads the css from Loader.css */\n  protected _playButtonStyles: string = loaderCss.toString();\n  protected get _playButton() {\n    if (!this._playButtonRootElement) {\n      this._playButtonRootElement = document.createElement('div');\n      this._playButtonRootElement.id = 'excalibur-play-root';\n      this._playButtonRootElement.style.position = 'absolute';\n      document.body.appendChild(this._playButtonRootElement);\n    }\n    if (!this._styleBlock) {\n      this._styleBlock = document.createElement('style');\n      this._styleBlock.textContent = this._playButtonStyles;\n      document.head.appendChild(this._styleBlock);\n    }\n    if (!this._playButtonElement) {\n      this._playButtonElement = this.startButtonFactory();\n      this._playButtonRootElement.appendChild(this._playButtonElement);\n    }\n    return this._playButtonElement;\n  }\n\n  /**\n   * Get/set play button text\n   */\n  public playButtonText: string = 'Play game';\n\n  /**\n   * Return a html button element for excalibur to use as a play button\n   */\n  public startButtonFactory = () => {\n    const buttonElement = document.createElement('button');\n    buttonElement.id = 'excalibur-play';\n    buttonElement.textContent = this.playButtonText;\n    buttonElement.style.display = 'none';\n    return buttonElement;\n  };\n\n  /**\n   * @param loadables  Optionally provide the list of resources you want to load at constructor time\n   */\n  constructor(loadables?: Loadable[]) {\n    super();\n\n    if (loadables) {\n      this.addResources(loadables);\n    }\n  }\n\n  public wireEngine(engine: Engine) {\n    this._engine = engine;\n  }\n\n  /**\n   * Add a resource to the loader to load\n   * @param loadable  Resource to add\n   */\n  public addResource(loadable: Loadable) {\n    const key = this._index++;\n    this._resourceList.push(loadable);\n    this._progressCounts[key] = 0;\n    this._totalCounts[key] = 1;\n    this._resourceCount++;\n  }\n\n  /**\n   * Add a list of resources to the loader to load\n   * @param loadables  The list of resources to load\n   */\n  public addResources(loadables: Loadable[]) {\n    let i = 0;\n    const len = loadables.length;\n\n    for (i; i < len; i++) {\n      this.addResource(loadables[i]);\n    }\n  }\n\n  /**\n   * Returns true if the loader has completely loaded all resources\n   */\n  public isLoaded() {\n    return this._numLoaded === this._resourceCount;\n  }\n\n  /**\n   * Shows the play button and returns a promise that resolves when clicked\n   */\n  public showPlayButton(): Promise<any> {\n    if (this.suppressPlayButton) {\n      return Promise.resolve();\n    } else {\n      this._playButtonShown = true;\n      this._playButton.style.display = 'block';\n      const promise = new Promise();\n\n      this._playButton.addEventListener('click', () => (promise.state() === PromiseState.Pending ? promise.resolve() : promise));\n      this._playButton.addEventListener('touchend', () => (promise.state() === PromiseState.Pending ? promise.resolve() : promise));\n      this._playButton.addEventListener('pointerup', () => (promise.state() === PromiseState.Pending ? promise.resolve() : promise));\n\n      return promise;\n    }\n  }\n\n  public hidePlayButton() {\n    this._playButtonShown = false;\n    this._playButton.style.display = 'none';\n  }\n\n  /**\n   * Clean up generated elements for the loader\n   */\n  public dispose() {\n    if (this._playButtonRootElement.parentElement) {\n      this._playButtonRootElement.removeChild(this._playButtonElement);\n      document.body.removeChild(this._playButtonRootElement);\n      document.head.removeChild(this._styleBlock);\n      this._playButtonRootElement = null;\n      this._playButtonElement = null;\n      this._styleBlock = null;\n    }\n  }\n\n  /**\n   * Begin loading all of the supplied resources, returning a promise\n   * that resolves when loading of all is complete\n   */\n  public load(): Promise<any> {\n    const complete = new Promise<any>();\n    if (this._resourceList.length === 0) {\n      this.showPlayButton().then(() => {\n        // Unlock audio context in chrome after user gesture\n        // https://github.com/excaliburjs/Excalibur/issues/262\n        // https://github.com/excaliburjs/Excalibur/issues/1031\n        WebAudio.unlock().then(() => {\n          this.hidePlayButton();\n          this.oncomplete.call(this);\n          complete.resolve();\n          this.dispose();\n        });\n      });\n      return complete;\n    }\n\n    this._resourceList.forEach((resource) => {\n      if (this._engine) {\n        resource.wireEngine(this._engine);\n      }\n      resource.onprogress = (e: ProgressEvent) => {\n        this.updateResourceProgress(e.loaded, e.total);\n      };\n      resource.oncomplete = resource.onerror = () => {\n        this.markResourceComplete();\n        if (this.isLoaded()) {\n          setTimeout(() => {\n            this.showPlayButton().then(() => {\n              // Unlock audio context in chrome after user gesture\n              // https://github.com/excaliburjs/Excalibur/issues/262\n              // https://github.com/excaliburjs/Excalibur/issues/1031\n              WebAudio.unlock().then(() => {\n                this.hidePlayButton();\n                this.oncomplete.call(this);\n                complete.resolve();\n                this.dispose();\n              });\n            });\n          }, 200); // short delay in showing the button for aesthetics\n        }\n      };\n    });\n\n    function loadNext(list: Loadable[], index: number) {\n      if (!list[index]) {\n        return;\n      }\n      list[index].load().then(function () {\n        loadNext(list, index + 1);\n      });\n    }\n    loadNext(this._resourceList, 0);\n\n    return complete;\n  }\n\n  public updateResourceProgress(loadedBytes: number, totalBytes: number) {\n    const chunkSize = 100 / this._resourceCount;\n    const resourceProgress = loadedBytes / totalBytes;\n    // This only works if we load 1 resource at a time\n    const totalProgress = resourceProgress * chunkSize + this.progress * 100;\n    this.onprogress({ loaded: totalProgress, total: 100 });\n  }\n\n  public markResourceComplete() {\n    this._numLoaded++;\n  }\n\n  /**\n   * Returns the progess of the loader as a number between [0, 1] inclusive.\n   */\n  public get progress(): number {\n    return this._resourceCount > 0 ? this._numLoaded / this._resourceCount : 1;\n  }\n\n  /**\n   * Loader draw function. Draws the default Excalibur loading screen.\n   * Override `logo`, `logoWidth`, `logoHeight` and `backgroundColor` properties\n   * to customize the drawing, or just override entire method.\n   */\n  public draw(ctx: CanvasRenderingContext2D) {\n    const canvasHeight = this._engine.canvasHeight / this._engine.pixelRatio;\n    const canvasWidth = this._engine.canvasWidth / this._engine.pixelRatio;\n\n    if (this._playButtonRootElement) {\n      const left = ctx.canvas.offsetLeft;\n      const top = ctx.canvas.offsetTop;\n      const buttonWidth = this._playButton.clientWidth;\n      const buttonHeight = this._playButton.clientHeight;\n      if (this.playButtonPosition) {\n        this._playButtonRootElement.style.left = `${this.playButtonPosition.x}px`;\n        this._playButtonRootElement.style.top = `${this.playButtonPosition.y}px`;\n      } else {\n        this._playButtonRootElement.style.left = `${left + canvasWidth / 2 - buttonWidth / 2}px`;\n        this._playButtonRootElement.style.top = `${top + canvasHeight / 2 - buttonHeight / 2 + 100}px`;\n      }\n    }\n\n    ctx.fillStyle = this.backgroundColor;\n    ctx.fillRect(0, 0, canvasWidth, canvasHeight);\n\n    let logoY = canvasHeight / 2;\n    const width = Math.min(this.logoWidth, canvasWidth * 0.75);\n    let logoX = canvasWidth / 2 - width / 2;\n\n    if (this.logoPosition) {\n      logoX = this.logoPosition.x;\n      logoY = this.logoPosition.y;\n    }\n\n    const imageHeight = Math.floor(width * (this.logoHeight / this.logoWidth)); // OG height/width factor\n    const oldAntialias = this._engine.getAntialiasing();\n    this._engine.setAntialiasing(true);\n    if (!this.logoPosition) {\n      ctx.drawImage(this._image, 0, 0, this.logoWidth, this.logoHeight, logoX, logoY - imageHeight - 20, width, imageHeight);\n    } else {\n      ctx.drawImage(this._image, 0, 0, this.logoWidth, this.logoHeight, logoX, logoY, width, imageHeight);\n    }\n\n    // loading box\n    if (!this.suppressPlayButton && this._playButtonShown) {\n      this._engine.setAntialiasing(oldAntialias);\n      return;\n    }\n\n    let loadingX = logoX;\n    let loadingY = logoY;\n    if (this.loadingBarPosition) {\n      loadingX = this.loadingBarPosition.x;\n      loadingY = this.loadingBarPosition.y;\n    }\n\n    ctx.lineWidth = 2;\n    DrawUtil.roundRect(ctx, loadingX, loadingY, width, 20, 10, this.loadingBarColor);\n    const progress = width * this.progress;\n    const margin = 5;\n    const progressWidth = progress - margin * 2;\n    const height = 20 - margin * 2;\n    DrawUtil.roundRect(\n      ctx,\n      loadingX + margin,\n      loadingY + margin,\n      progressWidth > 10 ? progressWidth : 10,\n      height,\n      5,\n      null,\n      this.loadingBarColor\n    );\n    this._engine.setAntialiasing(oldAntialias);\n  }\n\n  /**\n   * Perform any calculations or logic in the `update` method. The default `Loader` does not\n   * do anything in this method so it is safe to override.\n   */\n  public update(_engine: Engine, _delta: number) {\n    // overridable update\n  }\n\n  public getData: () => any = () => {\n    return;\n  };\n\n  public setData: (data: any) => any = () => {\n    return;\n  };\n\n  public processData: (data: any) => any = () => {\n    return;\n  };\n\n  public onprogress: (e: any) => void = (e: any) => {\n    Logger.getInstance().debug('[ex.Loader] Loading ' + ((100 * e.loaded) / e.total).toFixed(0));\n\n    return;\n  };\n\n  public oncomplete: () => void = () => {\n    return;\n  };\n\n  public onerror: () => void = () => {\n    return;\n  };\n}\n", "export default \"data:image/png;base64,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\"", "import { Logger } from './Log';\n/**\n * This is the list of features that will be used to log the supported\n * features to the console when Detector.logBrowserFeatures() is called.\n */\n\nconst REPORTED_FEATURES: { [key: string]: string } = {\n  webgl: 'WebGL',\n  webaudio: 'WebAudio',\n  gamepadapi: 'Gamepad API'\n};\n\n/**\n * Interface for detected browser features matrix\n */\nexport interface DetectedFeatures {\n  readonly canvas: boolean;\n  readonly arraybuffer: boolean;\n  readonly dataurl: boolean;\n  readonly objecturl: boolean;\n  readonly rgba: boolean;\n  readonly webaudio: boolean;\n  readonly webgl: boolean;\n  readonly gamepadapi: boolean;\n}\n\ninterface CriticalTests {\n  canvasSupport(): boolean;\n  arrayBufferSupport(): boolean;\n  dataUrlSupport(): boolean;\n  objectUrlSupport(): boolean;\n  rgbaSupport(): boolean;\n}\n\ninterface WarningTests {\n  webAudioSupport(): boolean;\n  webglSupport(): boolean;\n}\n\n/**\n * Excalibur internal feature detection helper class\n */\nexport class Detector {\n  private _features: DetectedFeatures = null;\n\n  public failedTests: string[] = [];\n\n  public constructor() {\n    this._features = this._loadBrowserFeatures();\n  }\n\n  /**\n   * Returns a map of currently supported browser features. This method\n   * treats the features as a singleton and will only calculate feature\n   * support if it has not previously been done.\n   */\n  public getBrowserFeatures(): DetectedFeatures {\n    if (this._features === null) {\n      this._features = this._loadBrowserFeatures();\n    }\n    return this._features;\n  }\n\n  /**\n   * Report on non-critical browser support for debugging purposes.\n   * Use native browser console colors for visibility.\n   */\n  public logBrowserFeatures(): void {\n    let msg = '%cSUPPORTED BROWSER FEATURES\\n==========================%c\\n';\n    const args = ['font-weight: bold; color: navy', 'font-weight: normal; color: inherit'];\n\n    const supported: any = this.getBrowserFeatures();\n    for (const feature of Object.keys(REPORTED_FEATURES)) {\n      if (supported[feature]) {\n        msg += '(%c\\u2713%c)'; // (✓)\n        args.push('font-weight: bold; color: green');\n        args.push('font-weight: normal; color: inherit');\n      } else {\n        msg += '(%c\\u2717%c)'; // (✗)\n        args.push('font-weight: bold; color: red');\n        args.push('font-weight: normal; color: inherit');\n      }\n\n      msg += ' ' + REPORTED_FEATURES[feature] + '\\n';\n    }\n\n    args.unshift(msg);\n    // eslint-disable-next-line no-console\n    console.log.apply(console, args);\n  }\n\n  /**\n   * Executes several IIFE's to get a constant reference to supported\n   * features within the current execution context.\n   */\n  private _loadBrowserFeatures(): DetectedFeatures {\n    return {\n      // IIFE to check canvas support\n      canvas: (() => {\n        return this._criticalTests.canvasSupport();\n      })(),\n\n      // IIFE to check arraybuffer support\n      arraybuffer: (() => {\n        return this._criticalTests.arrayBufferSupport();\n      })(),\n\n      // IIFE to check dataurl support\n      dataurl: (() => {\n        return this._criticalTests.dataUrlSupport();\n      })(),\n\n      // IIFE to check objecturl support\n      objecturl: (() => {\n        return this._criticalTests.objectUrlSupport();\n      })(),\n\n      // IIFE to check rgba support\n      rgba: (() => {\n        return this._criticalTests.rgbaSupport();\n      })(),\n\n      // IIFE to check webaudio support\n      webaudio: (() => {\n        return this._warningTest.webAudioSupport();\n      })(),\n\n      // IIFE to check webgl support\n      webgl: (() => {\n        return this._warningTest.webglSupport();\n      })(),\n\n      // IIFE to check gamepadapi support\n      gamepadapi: (() => {\n        return !!(<any>navigator).getGamepads;\n      })()\n    };\n  }\n\n  // critical browser features required for ex to run\n  private _criticalTests: CriticalTests = {\n    // Test canvas/2d context support\n    canvasSupport: function() {\n      const elem = document.createElement('canvas');\n      return !!(elem.getContext && elem.getContext('2d'));\n    },\n\n    // Test array buffer support ex uses for downloading binary data\n    arrayBufferSupport: function() {\n      const xhr = new XMLHttpRequest();\n      xhr.open('GET', '/');\n      try {\n        xhr.responseType = 'arraybuffer';\n      } catch (e) {\n        return false;\n      }\n      return xhr.responseType === 'arraybuffer';\n    },\n\n    // Test data urls ex uses for sprites\n    dataUrlSupport: function() {\n      const canvas = document.createElement('canvas');\n      return canvas.toDataURL('image/png').indexOf('data:image/png') === 0;\n    },\n\n    // Test object url support for loading\n    objectUrlSupport: function() {\n      return 'URL' in window && 'revokeObjectURL' in URL && 'createObjectURL' in URL;\n    },\n\n    // RGBA support for colors\n    rgbaSupport: function() {\n      const style = document.createElement('a').style;\n      style.cssText = 'background-color:rgba(150,255,150,.5)';\n      return ('' + style.backgroundColor).indexOf('rgba') > -1;\n    }\n  };\n\n  // warnings excalibur performance will be degraded\n  private _warningTest: WarningTests = {\n    webAudioSupport: function() {\n      return !!(\n        (<any>window).AudioContext ||\n        (<any>window).webkitAudioContext ||\n        (<any>window).mozAudioContext ||\n        (<any>window).msAudioContext ||\n        (<any>window).oAudioContext\n      );\n    },\n    webglSupport: function() {\n      const elem = document.createElement('canvas');\n      return !!(elem.getContext && elem.getContext('webgl'));\n    }\n  };\n\n  public test(): boolean {\n    // Critical test will for ex not to run\n    let failedCritical = false;\n    for (const test in this._criticalTests) {\n      if (!this._criticalTests[<keyof CriticalTests>test].call(this)) {\n        this.failedTests.push(test);\n        Logger.getInstance().error('Critical browser feature missing, Excalibur requires:', test);\n        failedCritical = true;\n      }\n    }\n    if (failedCritical) {\n      return false;\n    }\n\n    // Warning tests do not for ex to return false to compatibility\n    for (const warning in this._warningTest) {\n      if (!this._warningTest[<keyof WarningTests>warning]()) {\n        Logger.getInstance().warn('Warning browser feature missing, Excalibur will have reduced performance:', warning);\n      }\n    }\n\n    return true;\n  }\n}\n", "import { Physics } from './../Physics';\nimport { BoundingBox } from './BoundingBox';\nimport { Body } from './Body';\n\nimport { Ray } from '../Algebra';\nimport { Logger } from '../Util/Log';\n\n/**\n * Dynamic Tree Node used for tracking bounds within the tree\n */\nexport class TreeNode {\n  public left: TreeNode;\n  public right: TreeNode;\n  public bounds: BoundingBox;\n  public height: number;\n  public body: Body;\n  constructor(public parent?: TreeNode) {\n    this.parent = parent || null;\n    this.body = null;\n    this.bounds = new BoundingBox();\n    this.left = null;\n    this.right = null;\n    this.height = 0;\n  }\n\n  public isLeaf(): boolean {\n    return !this.left && !this.right;\n  }\n}\n\n/**\n * The DynamicTrees provides a spatial partitioning data structure for quickly querying for overlapping bounding boxes for\n * all tracked bodies. The worst case performance of this is O(n*log(n)) where n is the number of bodies in the tree.\n *\n * Internally the bounding boxes are organized as a balanced binary tree of bounding boxes, where the leaf nodes are tracked bodies.\n * Every non-leaf node is a bounding box that contains child bounding boxes.\n */\nexport class DynamicTree {\n  public root: TreeNode;\n  public nodes: { [key: number]: TreeNode };\n  constructor(public worldBounds: BoundingBox = new BoundingBox(-Number.MAX_VALUE, -Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE)) {\n    this.root = null;\n    this.nodes = {};\n  }\n\n  /**\n   * Inserts a node into the dynamic tree\n   */\n  private _insert(leaf: TreeNode): void {\n    // If there are no nodes in the tree, make this the root leaf\n    if (this.root === null) {\n      this.root = leaf;\n      this.root.parent = null;\n      return;\n    }\n\n    // Search the tree for a node that is not a leaf and find the best place to insert\n    const leafAABB = leaf.bounds;\n    let currentRoot = this.root;\n    while (!currentRoot.isLeaf()) {\n      const left = currentRoot.left;\n      const right = currentRoot.right;\n\n      const area = currentRoot.bounds.getPerimeter();\n      const combinedAABB = currentRoot.bounds.combine(leafAABB);\n      const combinedArea = combinedAABB.getPerimeter();\n\n      // Calculate cost heuristic for creating a new parent and leaf\n      const cost = 2 * combinedArea;\n\n      // Minimum cost of pushing the leaf down the tree\n      const inheritanceCost = 2 * (combinedArea - area);\n\n      // Cost of descending\n      let leftCost = 0;\n      const leftCombined = leafAABB.combine(left.bounds);\n      let newArea;\n      let oldArea;\n      if (left.isLeaf()) {\n        leftCost = leftCombined.getPerimeter() + inheritanceCost;\n      } else {\n        oldArea = left.bounds.getPerimeter();\n        newArea = leftCombined.getPerimeter();\n        leftCost = newArea - oldArea + inheritanceCost;\n      }\n\n      let rightCost = 0;\n      const rightCombined = leafAABB.combine(right.bounds);\n      if (right.isLeaf()) {\n        rightCost = rightCombined.getPerimeter() + inheritanceCost;\n      } else {\n        oldArea = right.bounds.getPerimeter();\n        newArea = rightCombined.getPerimeter();\n        rightCost = newArea - oldArea + inheritanceCost;\n      }\n\n      // cost is acceptable\n      if (cost < leftCost && cost < rightCost) {\n        break;\n      }\n\n      // Descend to the depths\n      if (leftCost < rightCost) {\n        currentRoot = left;\n      } else {\n        currentRoot = right;\n      }\n    }\n\n    // Create the new parent node and insert into the tree\n    const oldParent = currentRoot.parent;\n    const newParent = new TreeNode(oldParent);\n    newParent.bounds = leafAABB.combine(currentRoot.bounds);\n    newParent.height = currentRoot.height + 1;\n\n    if (oldParent !== null) {\n      // The sibling node was not the root\n      if (oldParent.left === currentRoot) {\n        oldParent.left = newParent;\n      } else {\n        oldParent.right = newParent;\n      }\n\n      newParent.left = currentRoot;\n      newParent.right = leaf;\n\n      currentRoot.parent = newParent;\n      leaf.parent = newParent;\n    } else {\n      // The sibling node was the root\n      newParent.left = currentRoot;\n      newParent.right = leaf;\n\n      currentRoot.parent = newParent;\n      leaf.parent = newParent;\n      this.root = newParent;\n    }\n\n    // Walk up the tree fixing heights and AABBs\n    let currentNode = leaf.parent;\n    while (currentNode) {\n      currentNode = this._balance(currentNode);\n\n      if (!currentNode.left) {\n        throw new Error('Parent of current leaf cannot have a null left child' + currentNode);\n      }\n      if (!currentNode.right) {\n        throw new Error('Parent of current leaf cannot have a null right child' + currentNode);\n      }\n\n      currentNode.height = 1 + Math.max(currentNode.left.height, currentNode.right.height);\n      currentNode.bounds = currentNode.left.bounds.combine(currentNode.right.bounds);\n\n      currentNode = currentNode.parent;\n    }\n  }\n\n  /**\n   * Removes a node from the dynamic tree\n   */\n  private _remove(leaf: TreeNode) {\n    if (leaf === this.root) {\n      this.root = null;\n      return;\n    }\n\n    const parent = leaf.parent;\n    const grandParent = parent.parent;\n    let sibling: TreeNode;\n    if (parent.left === leaf) {\n      sibling = parent.right;\n    } else {\n      sibling = parent.left;\n    }\n\n    if (grandParent) {\n      if (grandParent.left === parent) {\n        grandParent.left = sibling;\n      } else {\n        grandParent.right = sibling;\n      }\n      sibling.parent = grandParent;\n\n      let currentNode = grandParent;\n      while (currentNode) {\n        currentNode = this._balance(currentNode);\n        currentNode.bounds = currentNode.left.bounds.combine(currentNode.right.bounds);\n        currentNode.height = 1 + Math.max(currentNode.left.height, currentNode.right.height);\n\n        currentNode = currentNode.parent;\n      }\n    } else {\n      this.root = sibling;\n      sibling.parent = null;\n    }\n  }\n\n  /**\n   * Tracks a body in the dynamic tree\n   */\n  public trackBody(body: Body) {\n    const node = new TreeNode();\n    node.body = body;\n    node.bounds = body.collider.bounds;\n    node.bounds.left -= 2;\n    node.bounds.top -= 2;\n    node.bounds.right += 2;\n    node.bounds.bottom += 2;\n    this.nodes[body.id] = node;\n    this._insert(node);\n  }\n\n  /**\n   * Updates the dynamic tree given the current bounds of each body being tracked\n   */\n  public updateBody(body: Body) {\n    const node = this.nodes[body.id];\n    if (!node) {\n      return false;\n    }\n    const b = body.collider.bounds;\n\n    // if the body is outside the world no longer update it\n    if (!this.worldBounds.contains(b)) {\n      Logger.getInstance().warn('Collider with id ' + body.id + ' is outside the world bounds and will no longer be tracked for physics');\n      this.untrackBody(body);\n      return false;\n    }\n\n    if (node.bounds.contains(b)) {\n      return false;\n    }\n\n    this._remove(node);\n    b.left -= Physics.boundsPadding;\n    b.top -= Physics.boundsPadding;\n    b.right += Physics.boundsPadding;\n    b.bottom += Physics.boundsPadding;\n\n    const multdx = body.vel.x * Physics.dynamicTreeVelocityMultiplier;\n    const multdy = body.vel.y * Physics.dynamicTreeVelocityMultiplier;\n\n    if (multdx < 0) {\n      b.left += multdx;\n    } else {\n      b.right += multdx;\n    }\n\n    if (multdy < 0) {\n      b.top += multdy;\n    } else {\n      b.bottom += multdy;\n    }\n\n    node.bounds = b;\n    this._insert(node);\n    return true;\n  }\n\n  /**\n   * Untracks a body from the dynamic tree\n   */\n  public untrackBody(body: Body) {\n    const node = this.nodes[body.collider.id];\n    if (!node) {\n      return;\n    }\n    this._remove(node);\n    this.nodes[body.collider.id] = null;\n    delete this.nodes[body.collider.id];\n  }\n\n  /**\n   * Balances the tree about a node\n   */\n  private _balance(node: TreeNode) {\n    if (node === null) {\n      throw new Error('Cannot balance at null node');\n    }\n\n    if (node.isLeaf() || node.height < 2) {\n      return node;\n    }\n\n    const left = node.left;\n    const right = node.right;\n\n    const a = node;\n    const b = left;\n    const c = right;\n    const d = left.left;\n    const e = left.right;\n    const f = right.left;\n    const g = right.right;\n\n    const balance = c.height - b.height;\n    // Rotate c node up\n    if (balance > 1) {\n      // Swap the right node with it's parent\n      c.left = a;\n      c.parent = a.parent;\n      a.parent = c;\n\n      // The original node's old parent should point to the right node\n      // this is mega confusing\n      if (c.parent) {\n        if (c.parent.left === a) {\n          c.parent.left = c;\n        } else {\n          c.parent.right = c;\n        }\n      } else {\n        this.root = c;\n      }\n\n      // Rotate\n      if (f.height > g.height) {\n        c.right = f;\n        a.right = g;\n        g.parent = a;\n\n        a.bounds = b.bounds.combine(g.bounds);\n        c.bounds = a.bounds.combine(f.bounds);\n\n        a.height = 1 + Math.max(b.height, g.height);\n        c.height = 1 + Math.max(a.height, f.height);\n      } else {\n        c.right = g;\n        a.right = f;\n        f.parent = a;\n\n        a.bounds = b.bounds.combine(f.bounds);\n        c.bounds = a.bounds.combine(g.bounds);\n\n        a.height = 1 + Math.max(b.height, f.height);\n        c.height = 1 + Math.max(a.height, g.height);\n      }\n\n      return c;\n    }\n    // Rotate left node up\n    if (balance < -1) {\n      // swap\n      b.left = a;\n      b.parent = a.parent;\n      a.parent = b;\n\n      // node's old parent should point to b\n      if (b.parent) {\n        if (b.parent.left === a) {\n          b.parent.left = b;\n        } else {\n          if (b.parent.right !== a) {\n            throw 'Error rotating Dynamic Tree';\n          }\n          b.parent.right = b;\n        }\n      } else {\n        this.root = b;\n      }\n\n      // rotate\n      if (d.height > e.height) {\n        b.right = d;\n        a.left = e;\n        e.parent = a;\n\n        a.bounds = c.bounds.combine(e.bounds);\n        b.bounds = a.bounds.combine(d.bounds);\n\n        a.height = 1 + Math.max(c.height, e.height);\n        b.height = 1 + Math.max(a.height, d.height);\n      } else {\n        b.right = e;\n        a.left = d;\n        d.parent = a;\n\n        a.bounds = c.bounds.combine(d.bounds);\n        b.bounds = a.bounds.combine(e.bounds);\n\n        a.height = 1 + Math.max(c.height, d.height);\n        b.height = 1 + Math.max(a.height, e.height);\n      }\n      return b;\n    }\n\n    return node;\n  }\n\n  /**\n   * Returns the internal height of the tree, shorter trees are better. Performance drops as the tree grows\n   */\n  public getHeight(): number {\n    if (this.root === null) {\n      return 0;\n    }\n    return this.root.height;\n  }\n\n  /**\n   * Queries the Dynamic Axis Aligned Tree for bodies that could be colliding with the provided body.\n   *\n   * In the query callback, it will be passed a potential collider. Returning true from this callback indicates\n   * that you are complete with your query and you do not want to continue. Returning false will continue searching\n   * the tree until all possible colliders have been returned.\n   */\n  public query(body: Body, callback: (other: Body) => boolean): void {\n    const bounds = body.collider.bounds;\n    const helper = (currentNode: TreeNode): boolean => {\n      if (currentNode && currentNode.bounds.intersect(bounds)) {\n        if (currentNode.isLeaf() && currentNode.body !== body) {\n          if (callback.call(body, currentNode.body)) {\n            return true;\n          }\n        } else {\n          return helper(currentNode.left) || helper(currentNode.right);\n        }\n      }\n      return false;\n    };\n    helper(this.root);\n  }\n\n  /**\n   * Queries the Dynamic Axis Aligned Tree for bodies that could be intersecting. By default the raycast query uses an infinitely\n   * long ray to test the tree specified by `max`.\n   *\n   * In the query callback, it will be passed a potential body that intersects with the raycast. Returning true from this\n   * callback indicates that your are complete with your query and do not want to continue. Return false will continue searching\n   * the tree until all possible bodies that would intersect with the ray have been returned.\n   */\n  public rayCastQuery(ray: Ray, max: number = Infinity, callback: (other: Body) => boolean): void {\n    const helper = (currentNode: TreeNode): boolean => {\n      if (currentNode && currentNode.bounds.rayCast(ray, max)) {\n        if (currentNode.isLeaf()) {\n          if (callback.call(ray, currentNode.body)) {\n            // ray hit a leaf! return the body\n            return true;\n          }\n        } else {\n          // ray hit but not at a leaf, recurse deeper\n          return helper(currentNode.left) || helper(currentNode.right);\n        }\n      }\n      return false; // ray missed\n    };\n    helper(this.root);\n  }\n\n  public getNodes(): TreeNode[] {\n    const helper = (currentNode: TreeNode): TreeNode[] => {\n      if (currentNode) {\n        return [currentNode].concat(helper(currentNode.left), helper(currentNode.right));\n      } else {\n        return [];\n      }\n    };\n    return helper(this.root);\n  }\n\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    // draw all the nodes in the Dynamic Tree\n    const helper = (currentNode: TreeNode) => {\n      if (currentNode) {\n        if (currentNode.isLeaf()) {\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = 'green';\n        } else {\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = 'white';\n        }\n        currentNode.bounds.debugDraw(ctx);\n\n        if (currentNode.left) {\n          helper(currentNode.left);\n        }\n        if (currentNode.right) {\n          helper(currentNode.right);\n        }\n      }\n    };\n\n    helper(this.root);\n  }\n}\n", "import { Physics } from './../Physics';\nimport { CollisionBroadphase } from './CollisionResolver';\nimport { DynamicTree } from './DynamicTree';\nimport { Pair } from './Pair';\nimport { Body } from './Body';\n\nimport { Vector, Ray } from '../Algebra';\nimport { FrameStats } from '../Debug';\nimport { CollisionResolutionStrategy } from '../Physics';\nimport { Logger } from '../Util/Log';\nimport { CollisionStartEvent, CollisionEndEvent } from '../Events';\nimport { CollisionType } from './CollisionType';\nimport { Collider } from './Collider';\n\nexport class DynamicTreeCollisionBroadphase implements CollisionBroadphase {\n  private _dynamicCollisionTree = new DynamicTree();\n  private _collisionHash: { [key: string]: boolean } = {};\n  private _collisionPairCache: Pair[] = [];\n  private _lastFramePairs: Pair[] = [];\n  private _lastFramePairsHash: { [pairId: string]: Pair } = {};\n\n  /**\n   * Tracks a physics body for collisions\n   */\n  public track(target: Body): void {\n    if (!target) {\n      Logger.getInstance().warn('Cannot track null physics body');\n      return;\n    }\n    this._dynamicCollisionTree.trackBody(target);\n  }\n\n  /**\n   * Untracks a physics body\n   */\n  public untrack(target: Body): void {\n    if (!target) {\n      Logger.getInstance().warn('Cannot untrack a null physics body');\n      return;\n    }\n    this._dynamicCollisionTree.untrackBody(target);\n  }\n\n  private _shouldGenerateCollisionPair(colliderA: Collider, colliderB: Collider) {\n    // if the collision pair has been calculated already short circuit\n    const hash = Pair.calculatePairHash(colliderA, colliderB);\n    if (this._collisionHash[hash]) {\n      return false; // pair exists easy exit return false\n    }\n\n    return Pair.canCollide(colliderA, colliderB);\n  }\n\n  /**\n   * Detects potential collision pairs in a broadphase approach with the dynamic aabb tree strategy\n   */\n  public broadphase(targets: Body[], delta: number, stats?: FrameStats): Pair[] {\n    const seconds = delta / 1000;\n\n    // Retrieve the list of potential colliders, exclude killed, prevented, and self\n    const potentialColliders = targets\n      .map((t) => t.collider)\n      .filter((other) => {\n        return other.active && other.type !== CollisionType.PreventCollision;\n      });\n\n    // clear old list of collision pairs\n    this._collisionPairCache = [];\n    this._collisionHash = {};\n\n    // check for normal collision pairs\n    let collider: Collider;\n    for (let j = 0, l = potentialColliders.length; j < l; j++) {\n      collider = potentialColliders[j];\n\n      // Query the collision tree for potential colliders\n      this._dynamicCollisionTree.query(collider.body, (other: Body) => {\n        if (this._shouldGenerateCollisionPair(collider, other.collider)) {\n          const pair = new Pair(collider, other.collider);\n          this._collisionHash[pair.id] = true;\n          this._collisionPairCache.push(pair);\n        }\n        // Always return false, to query whole tree. Returning true in the query method stops searching\n        return false;\n      });\n    }\n    if (stats) {\n      stats.physics.pairs = this._collisionPairCache.length;\n    }\n\n    // Check dynamic tree for fast moving objects\n    // Fast moving objects are those moving at least there smallest bound per frame\n    if (Physics.checkForFastBodies) {\n      for (const collider of potentialColliders) {\n        // Skip non-active objects. Does not make sense on other collision types\n        if (collider.type !== CollisionType.Active) {\n          continue;\n        }\n\n        // Maximum travel distance next frame\n        const updateDistance =\n          collider.body.vel.size * seconds + // velocity term\n          collider.body.acc.size * 0.5 * seconds * seconds; // acc term\n\n        // Find the minimum dimension\n        const minDimension = Math.min(collider.bounds.height, collider.bounds.width);\n        if (Physics.disableMinimumSpeedForFastBody || updateDistance > minDimension / 2) {\n          if (stats) {\n            stats.physics.fastBodies++;\n          }\n\n          // start with the oldPos because the integration for actors has already happened\n          // objects resting on a surface may be slightly penetrating in the current position\n          const updateVec = collider.body.pos.sub(collider.body.oldPos);\n          const centerPoint = collider.shape.center;\n          const furthestPoint = collider.shape.getFurthestPoint(collider.body.vel);\n          const origin: Vector = furthestPoint.sub(updateVec);\n\n          const ray: Ray = new Ray(origin, collider.body.vel);\n\n          // back the ray up by -2x surfaceEpsilon to account for fast moving objects starting on the surface\n          ray.pos = ray.pos.add(ray.dir.scale(-2 * Physics.surfaceEpsilon));\n          let minBody: Body;\n          let minTranslate: Vector = new Vector(Infinity, Infinity);\n          this._dynamicCollisionTree.rayCastQuery(ray, updateDistance + Physics.surfaceEpsilon * 2, (other: Body) => {\n            if (collider.body !== other && other.collider.shape && Pair.canCollide(collider, other.collider)) {\n              const hitPoint = other.collider.shape.rayCast(ray, updateDistance + Physics.surfaceEpsilon * 10);\n              if (hitPoint) {\n                const translate = hitPoint.sub(origin);\n                if (translate.size < minTranslate.size) {\n                  minTranslate = translate;\n                  minBody = other;\n                }\n              }\n            }\n            return false;\n          });\n\n          if (minBody && Vector.isValid(minTranslate)) {\n            const pair = new Pair(collider, minBody.collider);\n            if (!this._collisionHash[pair.id]) {\n              this._collisionHash[pair.id] = true;\n              this._collisionPairCache.push(pair);\n            }\n            // move the fast moving object to the other body\n            // need to push into the surface by ex.Physics.surfaceEpsilon\n            const shift = centerPoint.sub(furthestPoint);\n            collider.body.pos = origin\n              .add(shift)\n              .add(minTranslate)\n              .add(ray.dir.scale(2 * Physics.surfaceEpsilon));\n            collider.shape.recalc();\n\n            if (stats) {\n              stats.physics.fastBodyCollisions++;\n            }\n          }\n        }\n      }\n    }\n    // return cache\n    return this._collisionPairCache;\n  }\n\n  /**\n   * Applies narrow phase on collision pairs to find actual area intersections\n   * Adds actual colliding pairs to stats' Frame data\n   */\n  public narrowphase(pairs: Pair[], stats?: FrameStats): Pair[] {\n    for (let i = 0; i < pairs.length; i++) {\n      pairs[i].collide();\n      if (stats && pairs[i].collision) {\n        stats.physics.collisions++;\n        stats.physics.collidersHash[pairs[i].id] = pairs[i];\n      }\n    }\n    return pairs.filter((p) => p.collision);\n  }\n\n  /**\n   * Perform collision resolution given a strategy (rigid body or box) and move objects out of intersect.\n   */\n  public resolve(pairs: Pair[], delta: number, strategy: CollisionResolutionStrategy): Pair[] {\n    for (const pair of pairs) {\n      pair.resolve(strategy);\n\n      if (pair.collision) {\n        pair.colliderA.body.applyMtv();\n        pair.colliderB.body.applyMtv();\n        // todo still don't like this, this is a small integration step to resolve narrowphase collisions\n        pair.colliderA.body.integrate(delta * Physics.collisionShift);\n        pair.colliderB.body.integrate(delta * Physics.collisionShift);\n      }\n    }\n\n    return pairs.filter((p) => p.canCollide);\n  }\n\n  public runCollisionStartEnd(pairs: Pair[]) {\n    const currentFrameHash: { [pairId: string]: Pair } = {};\n\n    for (const p of pairs) {\n      // load currentFrameHash\n      currentFrameHash[p.id] = p;\n\n      // find all new collisions\n      if (!this._lastFramePairsHash[p.id]) {\n        const actor1 = p.colliderA;\n        const actor2 = p.colliderB;\n        actor1.emit('collisionstart', new CollisionStartEvent(actor1, actor2, p));\n        actor2.emit('collisionstart', new CollisionStartEvent(actor2, actor1, p));\n      }\n    }\n\n    // find all old collisions\n    for (const p of this._lastFramePairs) {\n      if (!currentFrameHash[p.id]) {\n        const actor1 = p.colliderA;\n        const actor2 = p.colliderB;\n        actor1.emit('collisionend', new CollisionEndEvent(actor1, actor2));\n        actor2.emit('collisionend', new CollisionEndEvent(actor2, actor1));\n      }\n    }\n\n    // reset the last frame cache\n    this._lastFramePairs = pairs;\n    this._lastFramePairsHash = currentFrameHash;\n  }\n\n  /**\n   * Update the dynamic tree positions\n   */\n  public update(targets: Body[]): number {\n    let updated = 0;\n    const len = targets.length;\n\n    for (let i = 0; i < len; i++) {\n      if (this._dynamicCollisionTree.updateBody(targets[i])) {\n        updated++;\n      }\n    }\n    return updated;\n  }\n\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    if (Physics.broadphaseDebug) {\n      this._dynamicCollisionTree.debugDraw(ctx);\n    }\n\n    if (Physics.showContacts || Physics.showCollisionNormals) {\n      for (const pair of this._collisionPairCache) {\n        pair.debugDraw(ctx);\n      }\n    }\n  }\n}\n", "/**\n * A sorted list implementation. NOTE: this implementation is not self-balancing\n */\nexport class SortedList<T> {\n  private _getComparable: (item: T) => number;\n  private _root: BinaryTreeNode<T>;\n\n  constructor(getComparable: (item: T) => number) {\n    this._getComparable = getComparable;\n  }\n\n  public find(element: T): boolean {\n    return this._find(this._root, element);\n  }\n\n  private _find(node: BinaryTreeNode<T>, element: any): boolean {\n    if (node == null) {\n      return false;\n    } else if (this._getComparable(element) === node.getKey()) {\n      if (node.getData().indexOf(element) > -1) {\n        return true;\n      } else {\n        return false;\n      }\n    } else if (this._getComparable(element) < node.getKey()) {\n      return this._find(node.getLeft(), element);\n    } else {\n      return this._find(node.getRight(), element);\n    }\n  }\n\n  // returns the array of elements at a specific key value\n  public get(key: number): any[] {\n    return this._get(this._root, key);\n  }\n\n  private _get(node: BinaryTreeNode<T>, key: number): any[] {\n    if (node == null) {\n      return [];\n    } else if (key === node.getKey()) {\n      return node.getData();\n    } else if (key < node.getKey()) {\n      return this._get(node.getLeft(), key);\n    } else {\n      return this._get(node.getRight(), key);\n    }\n  }\n\n  public add(element: T): boolean {\n    if (this._root == null) {\n      this._root = new BinaryTreeNode(this._getComparable(element), [element], null, null);\n      return true;\n    } else {\n      return this._insert(this._root, element);\n    }\n  }\n\n  private _insert(node: BinaryTreeNode<T>, element: T): boolean {\n    if (node != null) {\n      if (this._getComparable(element) === node.getKey()) {\n        if (node.getData().indexOf(element) > -1) {\n          return false; // the element we're trying to insert already exists\n        } else {\n          node.getData().push(element);\n          return true;\n        }\n      } else if (this._getComparable(element) < node.getKey()) {\n        if (node.getLeft() == null) {\n          node.setLeft(new BinaryTreeNode(this._getComparable.call(element, element), [element], null, null));\n          return true;\n        } else {\n          return this._insert(node.getLeft(), element);\n        }\n      } else {\n        if (node.getRight() == null) {\n          node.setRight(new BinaryTreeNode(this._getComparable.call(element, element), [element], null, null));\n          return true;\n        } else {\n          return this._insert(node.getRight(), element);\n        }\n      }\n    }\n    return false;\n  }\n\n  public removeByComparable(element: T): void {\n    this._root = this._remove(this._root, element);\n  }\n\n  private _remove(node: BinaryTreeNode<T>, element: T): BinaryTreeNode<T> {\n    if (node == null) {\n      return null;\n    } else if (this._getComparable(element) === node.getKey()) {\n      const elementIndex = node.getData().indexOf(element);\n      // if the node contains the element, remove the element\n      if (elementIndex > -1) {\n        node.getData().splice(elementIndex, 1);\n        // if we have removed the last element at this node, remove the node\n        if (node.getData().length === 0) {\n          // if the node is a leaf\n          if (node.getLeft() == null && node.getRight() == null) {\n            return null;\n          } else if (node.getLeft() == null) {\n            return node.getRight();\n          } else if (node.getRight() == null) {\n            return node.getLeft();\n          }\n          // if node has 2 children\n          const temp = this._findMinNode(node.getRight());\n          node.setKey(temp.getKey());\n          node.setData(temp.getData());\n          node.setRight(this._cleanup(node.getRight(), temp)); //\"cleanup nodes\" (move them up recursively)\n          return node;\n        } else {\n          // this prevents the node from being removed since it still contains elements\n          return node;\n        }\n      }\n    } else if (this._getComparable(element) < node.getKey()) {\n      node.setLeft(this._remove(node.getLeft(), element));\n      return node;\n    } else {\n      node.setRight(this._remove(node.getRight(), element));\n      return node;\n    }\n    return null;\n  }\n\n  // called once we have successfully removed the element we wanted, recursively corrects the part of the tree below the removed node\n  private _cleanup(node: BinaryTreeNode<T>, element: BinaryTreeNode<T>): BinaryTreeNode<T> {\n    const comparable = element.getKey();\n    if (node == null) {\n      return null;\n    } else if (comparable === node.getKey()) {\n      // if the node is a leaf\n      if (node.getLeft() == null && node.getRight() == null) {\n        return null;\n      } else if (node.getLeft() == null) {\n        return node.getRight();\n      } else if (node.getRight() == null) {\n        return node.getLeft();\n      }\n      // if node has 2 children\n      const temp = this._findMinNode(node.getRight());\n      node.setKey(temp.getKey());\n      node.setData(temp.getData());\n\n      node.setRight(this._cleanup(node.getRight(), temp));\n      return node;\n    } else if (element.getKey() < node.getKey()) {\n      node.setLeft(this._cleanup(node.getLeft(), element));\n      return node;\n    } else {\n      node.setRight(this._cleanup(node.getRight(), element));\n      return node;\n    }\n  }\n\n  private _findMinNode(node: BinaryTreeNode<T>): BinaryTreeNode<T> {\n    let current = node;\n    while (current.getLeft() != null) {\n      current = current.getLeft();\n    }\n    return current;\n  }\n\n  public list(): Array<T> {\n    const results = new Array<T>();\n    this._list(this._root, results);\n    return results;\n  }\n\n  private _list(treeNode: BinaryTreeNode<T>, results: Array<T>): void {\n    if (treeNode != null) {\n      this._list(treeNode.getLeft(), results);\n      treeNode.getData().forEach((element) => {\n        results.push(element);\n      });\n      this._list(treeNode.getRight(), results);\n    }\n  }\n}\n\n/**\n * A tree node part of [[SortedList]]\n */\nexport class BinaryTreeNode<T> {\n  private _key: number;\n  private _data: Array<T>;\n  private _left: BinaryTreeNode<T>;\n  private _right: BinaryTreeNode<T>;\n\n  constructor(key: number, data: Array<T>, left: BinaryTreeNode<T>, right: BinaryTreeNode<T>) {\n    this._key = key;\n    this._data = data;\n    this._left = left;\n    this._right = right;\n  }\n\n  public getKey(): number {\n    return this._key;\n  }\n\n  public setKey(key: number) {\n    this._key = key;\n  }\n\n  public getData(): T[] {\n    return this._data;\n  }\n\n  public setData(data: T[]) {\n    this._data = data;\n  }\n\n  public getLeft(): BinaryTreeNode<T> {\n    return this._left;\n  }\n\n  public setLeft(left: BinaryTreeNode<T>) {\n    this._left = left;\n  }\n\n  public getRight(): BinaryTreeNode<T> {\n    return this._right;\n  }\n\n  public setRight(right: BinaryTreeNode<T>) {\n    this._right = right;\n  }\n}\n\n/**\n * Mock element for testing\n *\n * @internal\n */\nexport class MockedElement {\n  private _key: number = 0;\n\n  constructor(key: number) {\n    this._key = key;\n  }\n\n  public getTheKey() {\n    return this._key;\n  }\n\n  public setKey(key: number) {\n    this._key = key;\n  }\n}\n", "import { Engine } from './Engine';\nimport { Color } from './Drawing/Color';\nimport { SpriteFont } from './Drawing/SpriteSheet';\nimport { Actor } from './Actor';\nimport { Configurable } from './Configurable';\nimport { Vector } from './Algebra';\nimport { CollisionType } from './Collision/CollisionType';\n/**\n * Enum representing the different font size units\n * https://developer.mozilla.org/en-US/docs/Web/CSS/font-size\n */\nexport enum FontUnit {\n  /**\n   * Em is a scalable unit, 1 em is equal to the current font size of the current element, parent elements can effect em values\n   */\n  Em,\n  /**\n   * Rem is similar to the Em, it is a scalable unit. 1 rem is equal to the font size of the root element\n   */\n  Rem,\n  /**\n   * Pixel is a unit of length in screen pixels\n   */\n  Px,\n  /**\n   * Point is a physical unit length (1/72 of an inch)\n   */\n  Pt,\n  /**\n   * Percent is a scalable unit similar to Em, the only difference is the Em units scale faster when Text-Size stuff\n   */\n  Percent\n}\n\n/**\n * Enum representing the different horizontal text alignments\n */\nexport enum TextAlign {\n  /**\n   * The text is left-aligned.\n   */\n  Left,\n  /**\n   * The text is right-aligned.\n   */\n  Right,\n  /**\n   * The text is centered.\n   */\n  Center,\n  /**\n   * The text is aligned at the normal start of the line (left-aligned for left-to-right locales,\n   * right-aligned for right-to-left locales).\n   */\n  Start,\n  /**\n   * The text is aligned at the normal end of the line (right-aligned for left-to-right locales,\n   * left-aligned for right-to-left locales).\n   */\n  End\n}\n\n/**\n * Enum representing the different baseline text alignments\n */\nexport enum BaseAlign {\n  /**\n   * The text baseline is the top of the em square.\n   */\n  Top,\n  /**\n   * The text baseline is the hanging baseline.  Currently unsupported; this will act like\n   * alphabetic.\n   */\n  Hanging,\n  /**\n   * The text baseline is the middle of the em square.\n   */\n  Middle,\n  /**\n   * The text baseline is the normal alphabetic baseline.\n   */\n  Alphabetic,\n  /**\n   * The text baseline is the ideographic baseline; this is the bottom of\n   * the body of the characters, if the main body of characters protrudes\n   * beneath the alphabetic baseline.  Currently unsupported; this will\n   * act like alphabetic.\n   */\n  Ideographic,\n  /**\n   * The text baseline is the bottom of the bounding box.  This differs\n   * from the ideographic baseline in that the ideographic baseline\n   * doesn't consider descenders.\n   */\n  Bottom\n}\n\n/**\n * Enum representing the different possible font styles\n */\nexport enum FontStyle {\n  Normal,\n  Italic,\n  Oblique\n}\n\n/**\n * [[include:Constructors.md]]\n */\nexport interface LabelArgs extends Partial<LabelImpl> {\n  x?: number;\n  y?: number;\n  text?: string;\n  bold?: boolean;\n  pos?: Vector;\n  spriteFont?: SpriteFont;\n  fontFamily?: string;\n  fontSize?: number;\n  fontStyle?: FontStyle;\n  fontUnit?: FontUnit;\n  textAlign?: TextAlign;\n  maxWidth?: number;\n}\n\n/**\n * @hidden\n */\nexport class LabelImpl extends Actor {\n  /**\n   * The text to draw.\n   */\n  public text: string;\n\n  /**\n   * Sets or gets the bold property of the label's text, by default it's false\n   */\n  public bold: boolean = false;\n\n  /**\n   * The [[SpriteFont]] to use, if any. Overrides [[fontFamily]] if present.\n   */\n  public spriteFont: SpriteFont;\n\n  /**\n   * The CSS font family string (e.g. `sans-serif`, `Droid Sans Pro`). Web fonts\n   * are supported, same as in CSS.\n   */\n  public fontFamily: string;\n\n  /**\n   * The font size in the selected units, default is 10 (default units is pixel)\n   */\n  public fontSize: number = 10;\n\n  /**\n   * The font style for this label, the default is [[FontStyle.Normal]]\n   */\n  public fontStyle: FontStyle = FontStyle.Normal;\n\n  /**\n   * The css units for a font size such as px, pt, em (SpriteFont only support px), by default is 'px';\n   */\n  public fontUnit: FontUnit = FontUnit.Px;\n\n  /**\n   * Gets or sets the horizontal text alignment property for the label.\n   */\n  public textAlign: TextAlign = TextAlign.Left;\n\n  /**\n   * Gets or sets the baseline alignment property for the label.\n   */\n  public baseAlign: BaseAlign = BaseAlign.Bottom;\n\n  /**\n   * Gets or sets the maximum width (in pixels) that the label should occupy\n   */\n  public maxWidth: number;\n\n  /**\n   * Gets or sets the letter spacing on a Label. Only supported with Sprite Fonts.\n   */\n  public letterSpacing: number = 0; //px\n\n  /**\n   * Whether or not the [[SpriteFont]] will be case-sensitive when matching characters.\n   */\n  public caseInsensitive: boolean = true;\n\n  private _textShadowOn: boolean;\n  private _shadowOffsetX: number;\n  private _shadowOffsetY: number;\n\n  /**\n   * @param text        The text of the label\n   * @param x           The x position of the label\n   * @param y           The y position of the label\n   * @param fontFamily  Use any valid CSS font string for the label's font. Web fonts are supported. Default is `10px sans-serif`.\n   * @param spriteFont  Use an Excalibur sprite font for the label's font, if a SpriteFont is provided it will take precedence\n   * over a css font.\n   */\n  constructor(textOrConfig?: string | Partial<LabelImpl>, x?: number, y?: number, fontFamily?: string, spriteFont?: SpriteFont) {\n    super(textOrConfig && typeof textOrConfig === 'object' ? textOrConfig : { pos: new Vector(x, y) });\n\n    let text = '';\n    if (textOrConfig && typeof textOrConfig === 'object') {\n      fontFamily = textOrConfig.fontFamily;\n      spriteFont = textOrConfig.spriteFont;\n      text = textOrConfig.text;\n    } else {\n      text = <string>textOrConfig;\n    }\n\n    this.text = text || '';\n    this.color = Color.Black;\n    this.spriteFont = spriteFont;\n    this.body.collider.type = CollisionType.PreventCollision;\n    this.fontFamily = fontFamily || 'sans-serif'; // coalesce to default canvas font\n\n    this._textShadowOn = false;\n    this._shadowOffsetX = 0;\n    this._shadowOffsetY = 0;\n    if (spriteFont) {\n      //this._textSprites = spriteFont.getTextSprites();\n    }\n  }\n\n  /**\n   * Returns the width of the text in the label (in pixels);\n   * @param ctx  Rendering context to measure the string with\n   */\n  public getTextWidth(ctx: CanvasRenderingContext2D): number {\n    const oldFont = ctx.font;\n    ctx.font = this._fontString;\n    const width = ctx.measureText(this.text).width;\n    ctx.font = oldFont;\n    return width;\n  }\n\n  // TypeScript doesn't support string enums :(\n  private _lookupFontUnit(fontUnit: FontUnit): string {\n    switch (fontUnit) {\n      case FontUnit.Em:\n        return 'em';\n      case FontUnit.Rem:\n        return 'rem';\n      case FontUnit.Pt:\n        return 'pt';\n      case FontUnit.Px:\n        return 'px';\n      case FontUnit.Percent:\n        return '%';\n      default:\n        return 'px';\n    }\n  }\n\n  private _lookupTextAlign(textAlign: TextAlign): CanvasTextAlign {\n    switch (textAlign) {\n      case TextAlign.Left:\n        return 'left';\n      case TextAlign.Right:\n        return 'right';\n      case TextAlign.Center:\n        return 'center';\n      case TextAlign.End:\n        return 'end';\n      case TextAlign.Start:\n        return 'start';\n      default:\n        return 'start';\n    }\n  }\n\n  private _lookupBaseAlign(baseAlign: BaseAlign): CanvasTextBaseline {\n    switch (baseAlign) {\n      case BaseAlign.Alphabetic:\n        return 'alphabetic';\n      case BaseAlign.Bottom:\n        return 'bottom';\n      case BaseAlign.Hanging:\n        return 'hanging';\n      case BaseAlign.Ideographic:\n        return 'ideographic';\n      case BaseAlign.Middle:\n        return 'middle';\n      case BaseAlign.Top:\n        return 'top';\n      default:\n        return 'alphabetic';\n    }\n  }\n\n  private _lookupFontStyle(fontStyle: FontStyle): string {\n    const boldstring = this.bold ? ' bold' : '';\n    switch (fontStyle) {\n      case FontStyle.Italic:\n        return 'italic' + boldstring;\n      case FontStyle.Normal:\n        return 'normal' + boldstring;\n      case FontStyle.Oblique:\n        return 'oblique' + boldstring;\n      default:\n        return 'normal' + boldstring;\n    }\n  }\n\n  /**\n   * Sets the text shadow for sprite fonts\n   * @param offsetX      The x offset in pixels to place the shadow\n   * @param offsetY      The y offset in pixels to place the shadow\n   * @param shadowColor  The color of the text shadow\n   */\n  public setTextShadow(offsetX: number, offsetY: number, shadowColor: Color) {\n    this.spriteFont.setTextShadow(offsetX, offsetY, shadowColor);\n  }\n\n  /**\n   * Toggles text shadows on or off, only applies when using sprite fonts\n   */\n  public useTextShadow(on: boolean) {\n    this.spriteFont.useTextShadow(on);\n  }\n\n  /**\n   * Clears the current text shadow\n   */\n  public clearTextShadow() {\n    this._textShadowOn = false;\n    this._shadowOffsetX = 0;\n    this._shadowOffsetY = 0;\n  }\n\n  public update(engine: Engine, delta: number) {\n    super.update(engine, delta);\n  }\n\n  public draw(ctx: CanvasRenderingContext2D, delta: number) {\n    ctx.save();\n    ctx.translate(this.pos.x, this.pos.y);\n    ctx.scale(this.scale.x, this.scale.y);\n    ctx.rotate(this.rotation);\n\n    if (this._textShadowOn) {\n      ctx.save();\n      ctx.translate(this._shadowOffsetX, this._shadowOffsetY);\n      this._fontDraw(ctx);\n      ctx.restore();\n    }\n    this._fontDraw(ctx);\n\n    super.draw(ctx, delta);\n    ctx.restore();\n  }\n\n  private _fontDraw(ctx: CanvasRenderingContext2D) {\n    if (this.spriteFont) {\n      this.spriteFont.draw(ctx, this.text, 0, 0, {\n        color: this.color.clone(),\n        baseAlign: this.baseAlign,\n        textAlign: this.textAlign,\n        fontSize: this.fontSize,\n        letterSpacing: this.letterSpacing,\n        opacity: this.opacity\n      });\n    } else {\n      const oldAlign = ctx.textAlign;\n      const oldTextBaseline = ctx.textBaseline;\n\n      ctx.textAlign = this._lookupTextAlign(this.textAlign);\n      ctx.textBaseline = this._lookupBaseAlign(this.baseAlign);\n      if (this.color) {\n        this.color.a = this.opacity;\n      }\n      ctx.fillStyle = this.color.toString();\n      ctx.font = this._fontString;\n      if (this.maxWidth) {\n        ctx.fillText(this.text, 0, 0, this.maxWidth);\n      } else {\n        ctx.fillText(this.text, 0, 0);\n      }\n\n      ctx.textAlign = oldAlign;\n      ctx.textBaseline = oldTextBaseline;\n    }\n  }\n\n  protected get _fontString() {\n    return `${this._lookupFontStyle(this.fontStyle)} ${this.fontSize}${this._lookupFontUnit(this.fontUnit)} ${this.fontFamily}`;\n  }\n\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    super.debugDraw(ctx);\n  }\n}\n\n/**\n * Labels are the way to draw small amounts of text to the screen. They are\n * actors and inherit all of the benefits and capabilities.\n *\n * [[include:Labels.md]]\n */\nexport class Label extends Configurable(LabelImpl) {\n  constructor();\n  constructor(config?: LabelArgs);\n  constructor(text?: string, x?: number, y?: number, fontFamily?: string, spriteFont?: SpriteFont);\n  constructor(textOrConfig?: string | LabelArgs, x?: number, y?: number, fontFamily?: string, spriteFont?: SpriteFont) {\n    super(textOrConfig, x, y, fontFamily, spriteFont);\n  }\n}\n", "import { Color } from './Drawing/Color';\nimport { Engine } from './Engine';\nimport { ActionQueue } from './Actions/Action';\nimport { EventDispatcher } from './EventDispatcher';\nimport { Actor, isActor } from './Actor';\nimport { Vector } from './Algebra';\nimport { ExitTriggerEvent, EnterTriggerEvent, CollisionEndEvent, CollisionStartEvent } from './Events';\nimport * as Util from './Util/Util';\nimport { CollisionType } from './Collision/CollisionType';\n\n/**\n * ITriggerOptions\n */\nexport interface TriggerOptions {\n  // position of the trigger\n  pos: Vector;\n  // width of the trigger\n  width: number;\n  // height of the trigger\n  height: number;\n  // whether the trigger is visible or not\n  visible: boolean;\n  // action to take when triggered\n  action: () => void;\n  // if specified the trigger will only fire on a specific actor and overrides any filter\n  target: Actor;\n  // Returns true if the triggers should fire on the collided actor\n  filter: (actor: Actor) => boolean;\n  // -1 if it should repeat forever\n  repeat: number;\n}\n\nconst triggerDefaults: Partial<TriggerOptions> = {\n  pos: Vector.Zero,\n  width: 10,\n  height: 10,\n  visible: false,\n  action: () => {\n    return;\n  },\n  filter: () => true,\n  repeat: -1\n};\n\n/**\n * Triggers are a method of firing arbitrary code on collision. These are useful\n * as 'buttons', 'switches', or to trigger effects in a game. By default triggers\n * are invisible, and can only be seen when [[Trigger.visible]] is set to `true`.\n *\n * [[include:Triggers.md]]\n */\nexport class Trigger extends Actor {\n  private _target: Actor;\n  /**\n   * Action to fire when triggered by collision\n   */\n  public action: () => void = () => {\n    return;\n  };\n  /**\n   * Filter to add additional granularity to action dispatch, if a filter is specified the action will only fire when\n   * filter return true for the collided actor.\n   */\n  public filter: (actor: Actor) => boolean = () => true;\n  /**\n   * Number of times to repeat before killing the trigger,\n   */\n  public repeat: number = -1;\n\n  /**\n   *\n   * @param opts Trigger options\n   */\n  constructor(opts: Partial<TriggerOptions>) {\n    super(opts.pos.x, opts.pos.y, opts.width, opts.height);\n    opts = Util.extend({}, triggerDefaults, opts);\n\n    this.filter = opts.filter || this.filter;\n    this.repeat = opts.repeat || this.repeat;\n    this.action = opts.action || this.action;\n    if (opts.target) {\n      this.target = opts.target;\n    }\n\n    this.visible = opts.visible;\n    this.body.collider.type = CollisionType.Passive;\n    this.eventDispatcher = new EventDispatcher(this);\n    this.actionQueue = new ActionQueue(this);\n\n    this.on('collisionstart', (evt: CollisionStartEvent<Actor>) => {\n      if (isActor(evt.other) && this.filter(evt.other)) {\n        this.emit('enter', new EnterTriggerEvent(this, evt.other));\n        this._dispatchAction();\n        // remove trigger if its done, -1 repeat forever\n        if (this.repeat === 0) {\n          this.kill();\n        }\n      }\n    });\n\n    this.on('collisionend', (evt: CollisionEndEvent<Actor>) => {\n      if (isActor(evt.other) && this.filter(evt.other)) {\n        this.emit('exit', new ExitTriggerEvent(this, evt.other));\n      }\n    });\n  }\n\n  public set target(target: Actor) {\n    this._target = target;\n    this.filter = (actor: Actor) => actor === target;\n  }\n\n  public get target() {\n    return this._target;\n  }\n\n  public _initialize(engine: Engine) {\n    super._initialize(engine);\n  }\n\n  private _dispatchAction() {\n    this.action.call(this);\n    this.repeat--;\n  }\n\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    super.debugDraw(ctx);\n    // Meant to draw debug information about actors\n    ctx.save();\n    ctx.translate(this.pos.x, this.pos.y);\n\n    const bb = this.body.collider.bounds;\n    const wp = this.getWorldPos();\n    bb.left = bb.left - wp.x;\n    bb.right = bb.right - wp.x;\n    bb.top = bb.top - wp.y;\n    bb.bottom = bb.bottom - wp.y;\n\n    // Currently collision primitives cannot rotate\n    // ctx.rotate(this.rotation);\n    ctx.fillStyle = Color.Violet.toString();\n    ctx.strokeStyle = Color.Violet.toString();\n    ctx.fillText('Trigger', 10, 10);\n    bb.debugDraw(ctx);\n\n    ctx.restore();\n  }\n}\n", "import { Actor } from '../Actor';\nimport { ScreenElement } from '../ScreenElement';\nimport { Label } from '../Label';\nimport { Trigger } from '../Trigger';\n\nexport function isVanillaActor(actor: Actor) {\n  return !(actor instanceof ScreenElement) && !(actor instanceof Trigger) && !(actor instanceof Label);\n}\n\nexport function isScreenElement(actor: Actor) {\n  return actor instanceof ScreenElement;\n}\n", "export const buildTypeKey = (types: string[]) => {\n  const key = types.sort((a, b) => a.localeCompare(b)).join('+');\n  return key;\n};\n", "import { Entity } from './Entity';\nimport { Engine } from '../Engine';\nimport { Message, Observer } from '../Util/Observable';\nimport { Component } from './Component';\n\nexport enum SystemType {\n  Update = 'update',\n  Draw = 'draw'\n}\n\n/**\n * An Excalibur [[System]] that updates entities of certain types.\n * Systems are scene specific\n */\nexport abstract class System<T extends Component = Component> implements Observer<AddedEntity | RemovedEntity> {\n  /**\n   * The types of entities that this system operates on\n   */\n  abstract readonly types: string[];\n\n  abstract readonly systemType: SystemType;\n\n  /**\n   * System can execute in priority order, by default all systems are priority 0. Lower values indicated higher priority.\n   * For a system to execute before all other a lower priority value (-1 for example) must be set.\n   * For a system to exectue after all other a higher priority value (10 for example) must be set.\n   */\n  public priority: number = 0;\n\n  /**\n   * Update all entities that match this system's types\n   * @param entities Entities to update that match this system's typse\n   * @param delta Time in milliseconds\n   */\n  abstract update(entities: Entity<T>[], delta: number): void;\n\n  /**\n   * Optionally run a preupdate before the system processes matching entities\n   * @param engine\n   * @param delta Time in milliseconds since the last frame\n   */\n  preupdate?: (engine: Engine, delta: number) => void;\n\n  /**\n   * Optionally run a postupdate after the system processes matching entities\n   * @param engine\n   * @param delta Time in milliseconds since the last frame\n   */\n  postupdate?: (engine: Engine, delta: number) => void;\n\n  /**\n   * Optionally run a debug draw step to visualize the internals of the system\n   */\n  debugDraw?: (ctx: CanvasRenderingContext2D, delta: number) => void;\n\n  /**\n   * Systems observe when entities match their types or no longer match their types, override\n   * @param _entityAddedOrRemoved\n   */\n  public notify(_entityAddedOrRemoved: AddedEntity | RemovedEntity) {\n    // Override me\n  }\n}\n\n/**\n * An [[Entity]] with [[Component]] types that matches a [[System]] types exists in the current scene.\n */\nexport class AddedEntity implements Message<Entity> {\n  readonly type: 'Entity Added' = 'Entity Added';\n  constructor(public data: Entity) {}\n}\n\nexport function isAddedSystemEntity(x: Message<Entity>): x is AddedEntity {\n  return !!x && x.type === 'Entity Added';\n}\n\n/**\n * An [[Entity]] with [[Component]] types that no longer matches a [[System]] types exists in the current scene.\n */\nexport class RemovedEntity implements Message<Entity> {\n  readonly type: 'Entity Removed' = 'Entity Removed';\n  constructor(public data: Entity) {}\n}\n\nexport function isRemoveSystemEntity(x: Message<Entity>): x is RemovedEntity {\n  return !!x && x.type === 'Entity Removed';\n}\n", "import { Logger } from './../Util/Log';\nimport { PostProcessor } from './PostProcessor';\nimport { Engine } from '../Engine';\n\nexport enum ColorBlindness {\n  Protanope,\n  Deuteranope,\n  Tritanope\n}\n\n/**\n * This post processor can correct colors and simulate color blindness.\n * It is possible to use this on every game, but the game's performance\n * will suffer measurably. It's better to use it as a helpful tool while developing your game.\n * Remember, the best practice is to design with color blindness in mind.\n *\n * [[include:ColorBlind.md]]\n */\nexport class ColorBlindCorrector implements PostProcessor {\n  /*eslint-disable */\n  private _vertexShader =\n    '' +\n    'attribute vec2 a_position;' +\n    'attribute vec2 a_texCoord;' +\n    'uniform vec2 u_resolution;' +\n    'varying vec2 v_texCoord;' +\n    'void main() {' +\n    // convert the rectangle from pixels to 0.0 to 1.0\n    'vec2 zeroToOne = a_position / u_resolution;' +\n    // convert from 0->1 to 0->2\n    'vec2 zeroToTwo = zeroToOne * 2.0;' +\n    // convert from 0->2 to -1->+1 (clipspace)\n    'vec2 clipSpace = zeroToTwo - 1.0;' +\n    'gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);' +\n    // pass the texCoord to the fragment shader\n    // The GPU will interpolate this value between points.\n    'v_texCoord = a_texCoord;' +\n    '}';\n\n  private _fragmentShader =\n    'precision mediump float;' +\n    // our texture\n    'uniform sampler2D u_image;' +\n    // the texCoords passed in from the vertex shader.\n    'varying vec2 v_texCoord;' +\n    // Color blind conversions\n    /*'mat3 m[9] =' +\n   '{' +\n      'mat3(1.0, 0.0, 0.0,  0.0, 1.0, 0.0,  0.0, 0.0, 1.0  ),' + // normal\n      'mat3(0.567, 0.433, 0.0,  0.558, 0.442, 0.0,  0.0, 0.242, 0.758),' + // protanopia\n      'mat3(0.817, 0.183, 0.0,  0.333, 0.667, 0.0,  0.0, 0.125,0.875),' + // protanomaly\n      'mat3(0.625, 0.375, 0.0,  0.7, 0.3, 0.0,  0.0, 0.3,0.7  ),' + // deuteranopia\n      'mat3(0.8, 0.2, 0.0,  0.258, 0.742, 0.0,  0.0, 0.142,0.858),' + // deuteranomaly\n      'mat3(0.95, 0.05, 0.0,  0.0, 0.433, 0.567,  0.0, 0.475,0.525),' + // tritanopia\n      'mat3(0.967, 0.033, 0.0,  0.0, 0.733, 0.267,  0.0, 0.183,0.817),' + // tritanomaly\n      'mat3(0.299, 0.587, 0.114,  0.299, 0.587, 0.114,  0.299, 0.587,0.114),' + // achromatopsia\n      'mat3(0.618, 0.320, 0.062,  0.163, 0.775, 0.062,  0.163, 0.320,0.516)' +  // achromatomaly\n   '};' +*/\n\n    'void main() {' +\n    'vec4 o =  texture2D(u_image, v_texCoord);' +\n    // RGB to LMS matrix conversion\n    'float L = (17.8824 * o.r) + (43.5161 * o.g) + (4.11935 * o.b);' +\n    'float M = (3.45565 * o.r) + (27.1554 * o.g) + (3.86714 * o.b);' +\n    'float S = (0.0299566 * o.r) + (0.184309 * o.g) + (1.46709 * o.b);' +\n    // Simulate color blindness\n\n    '//MODE CODE//' +\n    /* Deuteranope for testing\n      'float l = 1.0 * L + 0.0 * M + 0.0 * S;' +\n            'float m = 0.494207 * L + 0.0 * M + 1.24827 * S;' +\n            'float s = 0.0 * L + 0.0 * M + 1.0 * S;' +*/\n\n    // LMS to RGB matrix conversion\n    'vec4 error;' +\n    'error.r = (0.0809444479 * l) + (-0.130504409 * m) + (0.116721066 * s);' +\n    'error.g = (-0.0102485335 * l) + (0.0540193266 * m) + (-0.113614708 * s);' +\n    'error.b = (-0.000365296938 * l) + (-0.00412161469 * m) + (0.693511405 * s);' +\n    'error.a = 1.0;' +\n    'vec4 diff = o - error;' +\n    'vec4 correction;' +\n    'correction.r = 0.0;' +\n    'correction.g =  (diff.r * 0.7) + (diff.g * 1.0);' +\n    'correction.b =  (diff.r * 0.7) + (diff.b * 1.0);' +\n    'correction = o + correction;' +\n    'correction.a = o.a;' +\n    '//SIMULATE//' +\n    '}';\n\n  /*eslint-enable */\n  private _internalCanvas: HTMLCanvasElement;\n  private _gl: WebGLRenderingContext;\n  private _program: WebGLProgram;\n\n  constructor(public engine: Engine, public simulate: boolean = false, public colorMode: ColorBlindness = ColorBlindness.Protanope) {\n    this._internalCanvas = document.createElement('canvas');\n    this._internalCanvas.width = engine.drawWidth;\n    this._internalCanvas.height = engine.drawHeight;\n\n    // eslint-disable-next-line\n    this._gl = <WebGLRenderingContext>this._internalCanvas.getContext('webgl', { preserveDrawingBuffer: true });\n\n    this._program = this._gl.createProgram();\n    const fragmentShader = this._getShader('Fragment', this._getFragmentShaderByMode(colorMode));\n    const vertextShader = this._getShader('Vertex', this._vertexShader);\n\n    this._gl.attachShader(this._program, vertextShader);\n    this._gl.attachShader(this._program, fragmentShader);\n    this._gl.linkProgram(this._program);\n\n    if (!this._gl.getProgramParameter(this._program, this._gl.LINK_STATUS)) {\n      Logger.getInstance().error('Unable to link shader program!');\n    }\n\n    this._gl.useProgram(this._program);\n  }\n\n  private _getFragmentShaderByMode(colorMode: ColorBlindness) {\n    let code = '';\n    if (colorMode === ColorBlindness.Protanope) {\n      code =\n        'float l = 0.0 * L + 2.02344 * M + -2.52581 * S;' +\n        'float m = 0.0 * L + 1.0 * M + 0.0 * S;' +\n        'float s = 0.0 * L + 0.0 * M + 1.0 * S;';\n    } else if (colorMode === ColorBlindness.Deuteranope) {\n      code =\n        'float l = 1.0 * L + 0.0 * M + 0.0 * S;' +\n        'float m = 0.494207 * L + 0.0 * M + 1.24827 * S;' +\n        'float s = 0.0 * L + 0.0 * M + 1.0 * S;';\n    } else if (colorMode === ColorBlindness.Tritanope) {\n      code =\n        'float l = 1.0 * L + 0.0 * M + 0.0 * S;' +\n        'float m = 0.0 * L + 1.0 * M + 0.0 * S;' +\n        'float s = -0.395913 * L + 0.801109 * M + 0.0 * S;';\n    }\n\n    if (this.simulate) {\n      this._fragmentShader = this._fragmentShader.replace('//SIMULATE//', 'gl_FragColor = error.rgba;');\n    } else {\n      this._fragmentShader = this._fragmentShader.replace('//SIMULATE//', 'gl_FragColor = correction.rgba;');\n    }\n\n    return this._fragmentShader.replace('//MODE CODE//', code);\n  }\n\n  private _setRectangle(x: number, y: number, width: number, height: number) {\n    const x1 = x;\n    const x2 = x + width;\n    const y1 = y;\n    const y2 = y + height;\n    this._gl.bufferData(this._gl.ARRAY_BUFFER, new Float32Array([x1, y1, x2, y1, x1, y2, x1, y2, x2, y1, x2, y2]), this._gl.STATIC_DRAW);\n  }\n\n  private _getShader(type: string, program: string): WebGLShader {\n    let shader: WebGLShader;\n    if (type === 'Fragment') {\n      shader = this._gl.createShader(this._gl.FRAGMENT_SHADER);\n    } else if (type === 'Vertex') {\n      shader = this._gl.createShader(this._gl.VERTEX_SHADER);\n    } else {\n      Logger.getInstance().error('Error unknown shader type', type);\n    }\n\n    this._gl.shaderSource(shader, program);\n    this._gl.compileShader(shader);\n\n    if (!this._gl.getShaderParameter(shader, this._gl.COMPILE_STATUS)) {\n      Logger.getInstance().error('Unable to compile shader!', this._gl.getShaderInfoLog(shader));\n      return null;\n    }\n\n    return shader;\n  }\n\n  public process(image: ImageData, out: CanvasRenderingContext2D) {\n    // look up where the vertex data needs to go.\n    const positionLocation = this._gl.getAttribLocation(this._program, 'a_position');\n    const texCoordLocation = this._gl.getAttribLocation(this._program, 'a_texCoord');\n\n    const texCoordBuffer = this._gl.createBuffer();\n    this._gl.bindBuffer(this._gl.ARRAY_BUFFER, texCoordBuffer);\n    this._gl.bufferData(\n      this._gl.ARRAY_BUFFER,\n      new Float32Array([0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 1.0]),\n      this._gl.STATIC_DRAW\n    );\n    this._gl.enableVertexAttribArray(texCoordLocation);\n    this._gl.vertexAttribPointer(texCoordLocation, 2, this._gl.FLOAT, false, 0, 0);\n\n    // Create a texture.\n    const texture = this._gl.createTexture();\n    this._gl.bindTexture(this._gl.TEXTURE_2D, texture);\n\n    // Set the parameters so we can render any size image.\n    this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_WRAP_S, this._gl.CLAMP_TO_EDGE);\n    this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_WRAP_T, this._gl.CLAMP_TO_EDGE);\n    this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_MIN_FILTER, this._gl.NEAREST);\n    this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_MAG_FILTER, this._gl.NEAREST);\n    // Flip the texture when unpacking into the gl context, gl reads textures in the opposite order as everything else :/\n    this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL, 1);\n    // Upload the image into the texture.\n    this._gl.texImage2D(this._gl.TEXTURE_2D, 0, this._gl.RGBA, this._gl.RGBA, this._gl.UNSIGNED_BYTE, image);\n\n    // lookup uniforms\n    const resolutionLocation = this._gl.getUniformLocation(this._program, 'u_resolution');\n\n    // set the resolution\n    this._gl.uniform2f(resolutionLocation, this._internalCanvas.width, this._internalCanvas.height);\n\n    // Create a buffer for the position of the rectangle corners.\n    const positionBuffer = this._gl.createBuffer();\n    this._gl.bindBuffer(this._gl.ARRAY_BUFFER, positionBuffer);\n    this._gl.enableVertexAttribArray(positionLocation);\n    this._gl.vertexAttribPointer(positionLocation, 2, this._gl.FLOAT, false, 0, 0);\n\n    // Set a rectangle the same size as the image.\n    this._setRectangle(0, 0, image.width, image.height);\n\n    // Draw the rectangle.\n    this._gl.drawArrays(this._gl.TRIANGLES, 0, 6);\n\n    // Grab transformed image from internal canvas\n    const pixelData = new Uint8Array(image.width * image.height * 4);\n    this._gl.readPixels(0, 0, image.width, image.height, this._gl.RGBA, this._gl.UNSIGNED_BYTE, pixelData);\n\n    (<any>image.data).set(pixelData);\n\n    out.putImageData(image, 0, 0);\n  }\n}\n", "import { Entity } from './Entity';\nimport { buildTypeKey } from './Util';\nimport { Observable } from '../Util/Observable';\nimport { Util, Component } from '..';\nimport { AddedEntity, RemovedEntity } from './System';\n\n/**\n * Represents query for entities that match a list of types that is cached and observable\n *\n * Queries can be strongly typed by supplying a type union in the optional type parameter\n * ```typescript\n * const queryAB = new ex.Query<ComponentTypeA, ComponentTypeB>(['A', 'B']);\n * ```\n */\nexport class Query<T extends Component = Component> extends Observable<AddedEntity | RemovedEntity> {\n  public entities: Entity<T>[] = [];\n  public get key(): string {\n    return buildTypeKey(this.types);\n  }\n\n  public constructor(public types: string[]) {\n    super();\n  }\n\n  /**\n   * Add an entity to the query, will only be added if the entity matches the query types\n   * @param entity\n   */\n  public addEntity(entity: Entity<T>): void {\n    if (!Util.contains(this.entities, entity) && this.matches(entity)) {\n      this.entities.push(entity);\n      this.notifyAll(new AddedEntity(entity));\n    }\n  }\n\n  /**\n   * If the entity is part of the query it will be removed regardless of types\n   * @param entity\n   */\n  public removeEntity(entity: Entity<T>): void {\n    if (Util.removeItemFromArray(entity, this.entities)) {\n      this.notifyAll(new RemovedEntity(entity));\n    }\n  }\n\n  /**\n   * Removes all entities and observers from the query\n   */\n  public clear(): void {\n    this.entities.length = 0;\n    for (const observer of this.observers) {\n      this.unregister(observer);\n    }\n  }\n\n  /**\n   * Returns whether the entity's types match query\n   * @param entity\n   */\n  public matches(entity: Entity): boolean;\n  /**\n   * Returns whether the list of ComponentTypes match the query\n   * @param types\n   */\n  public matches(types: string[]): boolean;\n  public matches(typesOrEntity: string[] | Entity): boolean {\n    let types: string[] = [];\n    if (typesOrEntity instanceof Entity) {\n      types = typesOrEntity.types;\n    } else {\n      types = typesOrEntity;\n    }\n\n    let matches = true;\n    for (const type of this.types) {\n      matches = matches && types.indexOf(type) > -1;\n      if (!matches) {\n        return false;\n      }\n    }\n    return matches;\n  }\n}\n", "import { Entity } from './Entity';\nimport { buildTypeKey } from './Util';\nimport { Query } from './Query';\nimport { Component } from './Component';\nimport { Scene } from '../Scene';\n\n/**\n * The query manager is responsible for updating all queries when entities/components change\n */\nexport class QueryManager {\n  private _queries: { [entityComponentKey: string]: Query<any> } = {};\n\n  constructor(public scene: Scene) {}\n\n  /**\n   * Adds a query to the manager and populates with any entities that match\n   * @param query\n   */\n  private _addQuery(query: Query<any>) {\n    this._queries[buildTypeKey(query.types)] = query;\n    for (const entity of this.scene.entityManager.entities) {\n      query.addEntity(entity);\n    }\n  }\n\n  /**\n   * Removes the query if there are no observers left\n   * @param query\n   */\n  public maybeRemoveQuery(query: Query): void {\n    if (query.observers.length === 0) {\n      query.clear();\n      delete this._queries[buildTypeKey(query.types)];\n    }\n  }\n\n  /**\n   * Adds the entity to any matching query in the query manage\n   * @param entity\n   */\n  public addEntity(entity: Entity) {\n    for (const queryType in this._queries) {\n      if (this._queries[queryType]) {\n        this._queries[queryType].addEntity(entity);\n      }\n    }\n  }\n\n  /**\n   * Removes an entity from queries if the removed component disqualifies it\n   * @param entity\n   * @param component\n   */\n  public removeComponent(entity: Entity, component: Component) {\n    for (const queryType in this._queries) {\n      if (this._queries[queryType].matches(entity.types.concat([component.type]))) {\n        this._queries[queryType].removeEntity(entity);\n      }\n    }\n  }\n\n  /**\n   * Removes an entity from all queries it is currently a part of\n   * @param entity\n   */\n  public removeEntity(entity: Entity) {\n    for (const queryType in this._queries) {\n      if (this._queries[queryType].entities.indexOf(entity) > -1) {\n        this._queries[queryType].removeEntity(entity);\n      }\n    }\n  }\n\n  /**\n   * Creates a populated query and returns, if the query already exists that will be returned instead of a new instance\n   * @param types\n   */\n  public createQuery<T extends Component = Component>(types: string[]): Query<T> {\n    const maybeExistingQuery = this.getQuery<T>(types);\n    if (maybeExistingQuery) {\n      return maybeExistingQuery;\n    }\n    const query = new Query<T>(types);\n    this._addQuery(query);\n    return query;\n  }\n\n  /**\n   * Retrieves an existing query by types if it exists otherwise returns null\n   * @param types\n   */\n  public getQuery<T extends Component = Component>(types: string[]): Query<T> {\n    const key = buildTypeKey(types);\n    if (this._queries[key]) {\n      return this._queries[key] as Query<T>;\n    }\n    return null;\n  }\n}\n", "import { Entity, RemovedComponent, AddedComponent, isAddedComponent, isRemovedComponent } from './Entity';\nimport { Observer } from '../Util/Observable';\nimport { Util } from '..';\nimport { Scene } from '../Scene';\n\n// Add/Remove entitys and components\n\nexport class EntityManager implements Observer<RemovedComponent | AddedComponent> {\n  public entities: Entity[] = [];\n  public _entityIndex: { [entityId: string]: Entity } = {};\n\n  constructor(private _scene: Scene) {}\n\n  /**\n   * EntityManager observes changes on entities\n   * @param message\n   */\n  public notify(message: RemovedComponent | AddedComponent): void {\n    if (isAddedComponent(message)) {\n      // we don't need the component, it's already on the entity\n      this._scene.queryManager.addEntity(message.data.entity);\n    }\n\n    if (isRemovedComponent(message)) {\n      this._scene.queryManager.removeComponent(message.data.entity, message.data.component);\n    }\n  }\n\n  /**\n   * Adds an entity to be tracked by the EntityManager\n   * @param entity\n   */\n  public addEntity(entity: Entity): void {\n    if (entity) {\n      this._entityIndex[entity.id] = entity;\n      this.entities.push(entity);\n      this._scene.queryManager.addEntity(entity);\n      entity.changes.register(this);\n    }\n  }\n\n  public removeEntity(entity: Entity): void;\n  public removeEntity(id: number): void;\n  public removeEntity(idOrEntity: number | Entity): void {\n    let id = 0;\n    if (idOrEntity instanceof Entity) {\n      id = idOrEntity.id;\n    } else {\n      id = idOrEntity;\n    }\n    const entity = this._entityIndex[id];\n    delete this._entityIndex[id];\n    if (entity) {\n      Util.removeItemFromArray(entity, this.entities);\n      this._scene.queryManager.removeEntity(entity);\n      entity.changes.unregister(this);\n    }\n  }\n\n  public processRemovals(): void {\n    for (const entity of this.entities) {\n      entity.processRemoval();\n    }\n  }\n\n  public getById(id: number): Entity {\n    return this._entityIndex[id];\n  }\n}\n", "import { System, SystemType } from './System';\nimport { Engine } from '../Engine';\nimport { Util, Component } from '..';\nimport { Scene } from '../Scene';\n\n/**\n * The SystemManager is responsible for keeping track of all systems in a scene.\n * Systems are scene specific\n */\nexport class SystemManager {\n  public systems: System<any>[] = [];\n  public _keyToSystem: { [key: string]: System };\n  constructor(private _scene: Scene) {}\n\n  /**\n   * Adds a system to the manager, it will now be updated every frame\n   * @param system\n   */\n  public addSystem<T extends Component = Component>(system: System<T>): void {\n    // validate system has types\n    if (!system.types || system.types.length === 0) {\n      throw new Error(`Attempted to add a System without any types`);\n    }\n\n    const query = this._scene.queryManager.createQuery<T>(system.types);\n    this.systems.push(system);\n    // TODO polyfil stable .sort(), this mechanism relies on a stable sort\n    this.systems.sort((a, b) => a.priority - b.priority);\n    query.register(system);\n  }\n\n  /**\n   * Removes a system from the manager, it will no longer be updated\n   * @param system\n   */\n  public removeSystem(system: System) {\n    Util.removeItemFromArray(system, this.systems);\n    const query = this._scene.queryManager.getQuery(system.types);\n    if (query) {\n      query.unregister(system);\n      this._scene.queryManager.maybeRemoveQuery(query);\n    }\n  }\n\n  /**\n   * Updates all systems\n   * @param engine\n   * @param delta\n   */\n  public updateSystems(type: SystemType, engine: Engine, delta: number) {\n    const systems = this.systems.filter((s) => s.systemType === type);\n    for (const s of systems) {\n      if (s.preupdate) {\n        s.preupdate(engine, delta);\n      }\n    }\n\n    for (const s of systems) {\n      const entities = this._scene.queryManager.getQuery(s.types).entities;\n      s.update(entities, delta);\n    }\n\n    for (const s of systems) {\n      if (s.postupdate) {\n        s.postupdate(engine, delta);\n      }\n    }\n  }\n}\n", "import { ScreenElement } from './ScreenElement';\nimport { Physics } from './Physics';\nimport {\n  InitializeEvent,\n  ActivateEvent,\n  DeactivateEvent,\n  PreUpdateEvent,\n  PostUpdateEvent,\n  PreDrawEvent,\n  PostDrawEvent,\n  PreDebugDrawEvent,\n  PostDebugDrawEvent,\n  GameEvent\n} from './Events';\nimport { Logger } from './Util/Log';\nimport { Timer } from './Timer';\nimport { DynamicTreeCollisionBroadphase } from './Collision/DynamicTreeCollisionBroadphase';\nimport { CollisionBroadphase } from './Collision/CollisionResolver';\nimport { SortedList } from './Util/SortedList';\nimport { Engine } from './Engine';\nimport { TileMap } from './TileMap';\nimport { Camera } from './Camera';\nimport { Actor } from './Actor';\nimport { Class } from './Class';\nimport { CanInitialize, CanActivate, CanDeactivate, CanUpdate, CanDraw } from './Interfaces/LifecycleEvents';\nimport * as Util from './Util/Util';\nimport * as Events from './Events';\nimport * as ActorUtils from './Util/Actors';\nimport { Trigger } from './Trigger';\nimport { Body } from './Collision/Body';\nimport { QueryManager } from './EntityComponentSystem/QueryManager';\nimport { EntityManager } from './EntityComponentSystem/EntityManager';\nimport { SystemManager } from './EntityComponentSystem/SystemManager';\nimport { SystemType } from './EntityComponentSystem/System';\n/**\n * [[Actor|Actors]] are composed together into groupings called Scenes in\n * Excalibur. The metaphor models the same idea behind real world\n * actors in a scene. Only actors in scenes will be updated and drawn.\n *\n * Typical usages of a scene include: levels, menus, loading screens, etc.\n *\n * [[include:Scenes.md]]\n */\nexport class Scene extends Class implements CanInitialize, CanActivate, CanDeactivate, CanUpdate, CanDraw {\n  /**\n   * Gets or sets the current camera for the scene\n   */\n  public camera: Camera;\n\n  /**\n   * The actors in the current scene\n   */\n  public actors: Actor[] = [];\n\n  public queryManager: QueryManager = new QueryManager(this);\n  public entityManager: EntityManager = new EntityManager(this);\n  public systemManager: SystemManager = new SystemManager(this);\n\n  /**\n   * Physics bodies in the current scene\n   */\n  private _bodies: Body[] = [];\n\n  /**\n   * The triggers in the current scene\n   */\n  public triggers: Trigger[] = [];\n\n  /**\n   * The [[TileMap]]s in the scene, if any\n   */\n  public tileMaps: TileMap[] = [];\n\n  /**\n   * Access to the Excalibur engine\n   */\n  private _engine: Engine;\n\n  /**\n   * The [[ScreenElement]]s in a scene, if any; these are drawn last\n   */\n  public screenElements: Actor[] = [];\n\n  private _isInitialized: boolean = false;\n\n  private _sortedDrawingTree: SortedList<Actor> = new SortedList<Actor>(Actor.prototype.getZIndex);\n\n  private _broadphase: CollisionBroadphase = new DynamicTreeCollisionBroadphase();\n\n  private _killQueue: Actor[] = [];\n  private _triggerKillQueue: Trigger[] = [];\n  private _timers: Timer[] = [];\n  private _cancelQueue: Timer[] = [];\n  private _logger: Logger = Logger.getInstance();\n\n  constructor(_engine: Engine) {\n    super();\n    this.camera = new Camera();\n    this._engine = _engine;\n    if (_engine) {\n      this.camera.x = _engine.halfDrawWidth;\n      this.camera.y = _engine.halfDrawHeight;\n    }\n  }\n\n  public on(eventName: Events.initialize, handler: (event: InitializeEvent<Scene>) => void): void;\n  public on(eventName: Events.activate, handler: (event: ActivateEvent) => void): void;\n  public on(eventName: Events.deactivate, handler: (event: DeactivateEvent) => void): void;\n  public on(eventName: Events.preupdate, handler: (event: PreUpdateEvent<Scene>) => void): void;\n  public on(eventName: Events.postupdate, handler: (event: PostUpdateEvent<Scene>) => void): void;\n  public on(eventName: Events.predraw, handler: (event: PreDrawEvent) => void): void;\n  public on(eventName: Events.postdraw, handler: (event: PostDrawEvent) => void): void;\n  public on(eventName: Events.predebugdraw, handler: (event: PreDebugDrawEvent) => void): void;\n  public on(eventName: Events.postdebugdraw, handler: (event: PostDebugDrawEvent) => void): void;\n  public on(eventName: string, handler: (event: GameEvent<any>) => void): void;\n  public on(eventName: string, handler: (event: any) => void): void {\n    super.on(eventName, handler);\n  }\n\n  public once(eventName: Events.initialize, handler: (event: InitializeEvent<Scene>) => void): void;\n  public once(eventName: Events.activate, handler: (event: ActivateEvent) => void): void;\n  public once(eventName: Events.deactivate, handler: (event: DeactivateEvent) => void): void;\n  public once(eventName: Events.preupdate, handler: (event: PreUpdateEvent<Scene>) => void): void;\n  public once(eventName: Events.postupdate, handler: (event: PostUpdateEvent<Scene>) => void): void;\n  public once(eventName: Events.predraw, handler: (event: PreDrawEvent) => void): void;\n  public once(eventName: Events.postdraw, handler: (event: PostDrawEvent) => void): void;\n  public once(eventName: Events.predebugdraw, handler: (event: PreDebugDrawEvent) => void): void;\n  public once(eventName: Events.postdebugdraw, handler: (event: PostDebugDrawEvent) => void): void;\n  public once(eventName: string, handler: (event: GameEvent<any>) => void): void;\n  public once(eventName: string, handler: (event: any) => void): void {\n    super.once(eventName, handler);\n  }\n\n  public off(eventName: Events.initialize, handler?: (event: InitializeEvent<Scene>) => void): void;\n  public off(eventName: Events.activate, handler?: (event: ActivateEvent) => void): void;\n  public off(eventName: Events.deactivate, handler?: (event: DeactivateEvent) => void): void;\n  public off(eventName: Events.preupdate, handler?: (event: PreUpdateEvent<Scene>) => void): void;\n  public off(eventName: Events.postupdate, handler?: (event: PostUpdateEvent<Scene>) => void): void;\n  public off(eventName: Events.predraw, handler?: (event: PreDrawEvent) => void): void;\n  public off(eventName: Events.postdraw, handler?: (event: PostDrawEvent) => void): void;\n  public off(eventName: Events.predebugdraw, handler?: (event: PreDebugDrawEvent) => void): void;\n  public off(eventName: Events.postdebugdraw, handler?: (event: PostDebugDrawEvent) => void): void;\n  public off(eventName: string, handler?: (event: GameEvent<any>) => void): void;\n  public off(eventName: string, handler?: (event: any) => void): void {\n    super.off(eventName, handler);\n  }\n\n  /**\n   * This is called before the first update of the [[Scene]]. Initializes scene members like the camera. This method is meant to be\n   * overridden. This is where initialization of child actors should take place.\n   */\n  public onInitialize(_engine: Engine): void {\n    // will be overridden\n  }\n\n  /**\n   * This is called when the scene is made active and started. It is meant to be overridden,\n   * this is where you should setup any DOM UI or event handlers needed for the scene.\n   */\n  public onActivate(_oldScene: Scene, _newScene: Scene): void {\n    // will be overridden\n  }\n\n  /**\n   * This is called when the scene is made transitioned away from and stopped. It is meant to be overridden,\n   * this is where you should cleanup any DOM UI or event handlers needed for the scene.\n   */\n  public onDeactivate(_oldScene: Scene, _newScene: Scene): void {\n    // will be overridden\n  }\n\n  /**\n   * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n   *\n   * `onPreUpdate` is called directly before a scene is updated.\n   */\n  public onPreUpdate(_engine: Engine, _delta: number): void {\n    // will be overridden\n  }\n\n  /**\n   * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n   *\n   * `onPostUpdate` is called directly after a scene is updated.\n   */\n  public onPostUpdate(_engine: Engine, _delta: number): void {\n    // will be overridden\n  }\n\n  /**\n   * Safe to override onPreDraw lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n   *\n   * `onPreDraw` is called directly before a scene is drawn.\n   */\n  public onPreDraw(_ctx: CanvasRenderingContext2D, _delta: number): void {\n    // will be overridden\n  }\n\n  /**\n   * Safe to override onPostDraw lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n   *\n   * `onPostDraw` is called directly after a scene is drawn.\n   */\n  public onPostDraw(_ctx: CanvasRenderingContext2D, _delta: number): void {\n    // will be overridden\n  }\n\n  /**\n   * Initializes actors in the scene\n   */\n  private _initializeChildren(): void {\n    for (const child of this.actors) {\n      child._initialize(this._engine);\n    }\n  }\n\n  /**\n   * Gets whether or not the [[Scene]] has been initialized\n   */\n  public get isInitialized(): boolean {\n    return this._isInitialized;\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Initializes the scene before the first update, meant to be called by engine not by users of\n   * Excalibur\n   * @internal\n   */\n  public _initialize(engine: Engine) {\n    if (!this.isInitialized) {\n      this._engine = engine;\n      if (this.camera) {\n        this.camera.x = engine.halfDrawWidth;\n        this.camera.y = engine.halfDrawHeight;\n      }\n\n      // This order is important! we want to be sure any custom init that add actors\n      // fire before the actor init\n      this.onInitialize.call(this, engine);\n      this._initializeChildren();\n\n      this._logger.debug('Scene.onInitialize', this, engine);\n      this.eventDispatcher.emit('initialize', new InitializeEvent(engine, this));\n      this._isInitialized = true;\n    }\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Activates the scene with the base behavior, then calls the overridable `onActivate` implementation.\n   * @internal\n   */\n  public _activate(oldScene: Scene, newScene: Scene): void {\n    this._logger.debug('Scene.onActivate', this);\n    this.onActivate(oldScene, newScene);\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Deactivates the scene with the base behavior, then calls the overridable `onDeactivate` implementation.\n   * @internal\n   */\n  public _deactivate(oldScene: Scene, newScene: Scene): void {\n    this._logger.debug('Scene.onDeactivate', this);\n    this.onDeactivate(oldScene, newScene);\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _preupdate handler for [[onPreUpdate]] lifecycle event\n   * @internal\n   */\n  public _preupdate(_engine: Engine, delta: number): void {\n    this.emit('preupdate', new PreUpdateEvent(_engine, delta, this));\n    this.onPreUpdate(_engine, delta);\n  }\n\n  /**\n   *  It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _preupdate handler for [[onPostUpdate]] lifecycle event\n   * @internal\n   */\n  public _postupdate(_engine: Engine, delta: number): void {\n    this.emit('postupdate', new PostUpdateEvent(_engine, delta, this));\n    this.onPostUpdate(_engine, delta);\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _predraw handler for [[onPreDraw]] lifecycle event\n   *\n   * @internal\n   */\n  public _predraw(_ctx: CanvasRenderingContext2D, _delta: number): void {\n    this.emit('predraw', new PreDrawEvent(_ctx, _delta, this));\n    this.onPreDraw(_ctx, _delta);\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _postdraw handler for [[onPostDraw]] lifecycle event\n   *\n   * @internal\n   */\n  public _postdraw(_ctx: CanvasRenderingContext2D, _delta: number): void {\n    this.emit('postdraw', new PostDrawEvent(_ctx, _delta, this));\n    this.onPostDraw(_ctx, _delta);\n  }\n\n  /**\n   * Updates all the actors and timers in the scene. Called by the [[Engine]].\n   * @param engine  Reference to the current Engine\n   * @param delta   The number of milliseconds since the last update\n   */\n  public update(engine: Engine, delta: number) {\n    this._preupdate(engine, delta);\n    this.systemManager.updateSystems(SystemType.Update, engine, delta);\n    this.entityManager.processRemovals();\n\n    if (this.camera) {\n      this.camera.update(engine, delta);\n    }\n\n    let i: number, len: number;\n    // Remove timers in the cancel queue before updating them\n    for (i = 0, len = this._cancelQueue.length; i < len; i++) {\n      this.removeTimer(this._cancelQueue[i]);\n    }\n    this._cancelQueue.length = 0;\n\n    // Cycle through timers updating timers\n    for (const timer of this._timers) {\n      timer.update(delta);\n    }\n\n    // Cycle through actors updating UI actors\n    for (i = 0, len = this.screenElements.length; i < len; i++) {\n      this.screenElements[i].update(engine, delta);\n    }\n\n    // Cycle through actors updating tile maps\n    for (i = 0, len = this.tileMaps.length; i < len; i++) {\n      this.tileMaps[i].update(engine, delta);\n    }\n\n    // Cycle through actors updating actors\n    for (i = 0, len = this.actors.length; i < len; i++) {\n      this.actors[i].update(engine, delta);\n      this._bodies[i] = this.actors[i].body;\n    }\n\n    // Cycle through triggers updating\n    for (i = 0, len = this.triggers.length; i < len; i++) {\n      this.triggers[i].update(engine, delta);\n    }\n\n    this._collectActorStats(engine);\n\n    engine.input.pointers.dispatchPointerEvents();\n\n    // Run the broadphase and narrowphase\n    if (this._broadphase && Physics.enabled) {\n      const beforeBroadphase = Date.now();\n      this._broadphase.update(this._bodies, delta);\n      let pairs = this._broadphase.broadphase(this._bodies, delta, engine.stats.currFrame);\n      const afterBroadphase = Date.now();\n\n      const beforeNarrowphase = Date.now();\n      let iter: number = Physics.collisionPasses;\n      const collisionDelta = delta / iter;\n      while (iter > 0) {\n        // Run the narrowphase\n        pairs = this._broadphase.narrowphase(pairs, engine.stats.currFrame);\n        // Run collision resolution strategy\n        pairs = this._broadphase.resolve(pairs, collisionDelta, Physics.collisionResolutionStrategy);\n\n        this._broadphase.runCollisionStartEnd(pairs);\n\n        iter--;\n      }\n\n      const afterNarrowphase = Date.now();\n      engine.stats.currFrame.physics.broadphase = afterBroadphase - beforeBroadphase;\n      engine.stats.currFrame.physics.narrowphase = afterNarrowphase - beforeNarrowphase;\n    }\n\n    engine.stats.currFrame.actors.killed = this._killQueue.length + this._triggerKillQueue.length;\n\n    this._processKillQueue(this._killQueue, this.actors);\n    this._processKillQueue(this._triggerKillQueue, this.triggers);\n\n    this._postupdate(engine, delta);\n  }\n\n  private _processKillQueue(killQueue: Actor[], collection: Actor[]) {\n    // Remove actors from scene graph after being killed\n    let actorIndex: number;\n    for (const killed of killQueue) {\n      //don't remove actors that were readded during the same frame they were killed\n      if (killed.isKilled()) {\n        actorIndex = collection.indexOf(killed);\n        if (actorIndex > -1) {\n          this._sortedDrawingTree.removeByComparable(killed);\n          collection.splice(actorIndex, 1);\n        }\n      }\n    }\n    killQueue.length = 0;\n  }\n\n  /**\n   * Draws all the actors in the Scene. Called by the [[Engine]].\n   * @param ctx    The current rendering context\n   * @param delta  The number of milliseconds since the last draw\n   */\n  public draw(ctx: CanvasRenderingContext2D, delta: number) {\n    this._predraw(ctx, delta);\n    ctx.save();\n    if (this.camera) {\n      this.camera.draw(ctx);\n    }\n    this.systemManager.updateSystems(SystemType.Draw, this._engine, delta);\n    this.entityManager.processRemovals();\n\n    let i: number, len: number;\n\n    for (i = 0, len = this.tileMaps.length; i < len; i++) {\n      this.tileMaps[i].draw(ctx, delta);\n    }\n\n    const sortedChildren = this._sortedDrawingTree.list();\n    for (i = 0, len = sortedChildren.length; i < len; i++) {\n      // only draw actors that are visible and on screen\n      if (sortedChildren[i].visible && !sortedChildren[i].isOffScreen) {\n        sortedChildren[i].draw(ctx, delta);\n      }\n    }\n\n    if (this._engine && this._engine.isDebug) {\n      ctx.strokeStyle = 'yellow';\n      this.debugDraw(ctx);\n    }\n\n    ctx.restore();\n\n    for (i = 0, len = this.screenElements.length; i < len; i++) {\n      // only draw ui actors that are visible and on screen\n      if (this.screenElements[i].visible) {\n        this.screenElements[i].draw(ctx, delta);\n      }\n    }\n\n    if (this._engine && this._engine.isDebug) {\n      for (i = 0, len = this.screenElements.length; i < len; i++) {\n        this.screenElements[i].debugDraw(ctx);\n      }\n    }\n    this._postdraw(ctx, delta);\n  }\n\n  /**\n   * Draws all the actors' debug information in the Scene. Called by the [[Engine]].\n   * @param ctx  The current rendering context\n   */\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    this.emit('predebugdraw', new PreDebugDrawEvent(ctx, this));\n\n    let i: number, len: number;\n\n    for (i = 0, len = this.tileMaps.length; i < len; i++) {\n      this.tileMaps[i].debugDraw(ctx);\n    }\n\n    for (i = 0, len = this.actors.length; i < len; i++) {\n      this.actors[i].debugDraw(ctx);\n    }\n\n    for (i = 0, len = this.triggers.length; i < len; i++) {\n      this.triggers[i].debugDraw(ctx);\n    }\n\n    this._broadphase.debugDraw(ctx, 20);\n\n    this.camera.debugDraw(ctx);\n    this.emit('postdebugdraw', new PostDebugDrawEvent(ctx, this));\n  }\n\n  /**\n   * Checks whether an actor is contained in this scene or not\n   */\n  public contains(actor: Actor): boolean {\n    return this.actors.indexOf(actor) > -1;\n  }\n\n  /**\n   * Adds a [[Timer]] to the current [[Scene]].\n   * @param timer  The timer to add to the current [[Scene]].\n   */\n  public add(timer: Timer): void;\n\n  /**\n   * Adds a [[TileMap]] to the [[Scene]], once this is done the [[TileMap]] will be drawn and updated.\n   */\n  public add(tileMap: TileMap): void;\n\n  /**\n   * Adds a [[Trigger]] to the [[Scene]], once this is done the [[Trigger]] will listen for interactions with other actors.\n   * @param trigger\n   */\n  public add(trigger: Trigger): void;\n\n  /**\n   * Adds an actor to the scene, once this is done the [[Actor]] will be drawn and updated.\n   * @param actor  The actor to add to the current scene\n   */\n  public add(actor: Actor): void;\n\n  /**\n   * Adds a [[ScreenElement]] to the scene.\n   * @param screenElement  The ScreenElement to add to the current scene\n   */\n  public add(screenElement: ScreenElement): void;\n  public add(entity: any): void {\n    if (entity instanceof Actor) {\n      (<Actor>entity).unkill();\n    }\n    if (entity instanceof ScreenElement) {\n      if (!Util.contains(this.screenElements, entity)) {\n        this.addScreenElement(entity);\n      }\n      return;\n    }\n\n    if (entity instanceof Actor) {\n      if (!Util.contains(this.actors, entity)) {\n        this._addChild(entity);\n      }\n      return;\n    }\n    if (entity instanceof Timer) {\n      if (!Util.contains(this._timers, entity)) {\n        this.addTimer(entity);\n      }\n      return;\n    }\n    if (entity instanceof TileMap) {\n      if (!Util.contains(this.tileMaps, entity)) {\n        this.addTileMap(entity);\n      }\n    }\n  }\n\n  /**\n   * Removes a [[Timer]] from the current scene, it will no longer be updated.\n   * @param timer  The timer to remove to the current scene.\n   */\n  public remove(timer: Timer): void;\n\n  /**\n   * Removes a [[TileMap]] from the scene, it will no longer be drawn or updated.\n   * @param tileMap {TileMap}\n   */\n  public remove(tileMap: TileMap): void;\n\n  /**\n   * Removes an actor from the scene, it will no longer be drawn or updated.\n   * @param actor  The actor to remove from the current scene.\n   */\n  public remove(actor: Actor): void;\n\n  /**\n   * Removes a [[ScreenElement]] to the scene, it will no longer be drawn or updated\n   * @param screenElement  The ScreenElement to remove from the current scene\n   */\n  public remove(screenElement: ScreenElement): void;\n  public remove(entity: any): void {\n    if (entity instanceof ScreenElement) {\n      this.removeScreenElement(entity);\n      return;\n    }\n\n    if (entity instanceof Actor) {\n      this._removeChild(entity);\n    }\n    if (entity instanceof Timer) {\n      this.removeTimer(entity);\n    }\n\n    if (entity instanceof TileMap) {\n      this.removeTileMap(entity);\n    }\n  }\n\n  /**\n   * Adds (any) actor to act as a piece of UI, meaning it is always positioned\n   * in screen coordinates. UI actors do not participate in collisions.\n   * @todo Should this be `ScreenElement` only?\n   */\n  public addScreenElement(actor: Actor) {\n    this.screenElements.push(actor);\n    actor.scene = this;\n  }\n\n  /**\n   * Removes an actor as a piece of UI\n   */\n  public removeScreenElement(actor: Actor) {\n    const index = this.screenElements.indexOf(actor);\n    if (index > -1) {\n      this.screenElements.splice(index, 1);\n    }\n  }\n\n  /**\n   * Adds an actor to the scene, once this is done the actor will be drawn and updated.\n   */\n  protected _addChild(actor: Actor) {\n    this._broadphase.track(actor.body);\n    actor.scene = this;\n    if (actor instanceof Trigger) {\n      this.triggers.push(actor);\n    } else {\n      this.actors.push(actor);\n    }\n\n    this._sortedDrawingTree.add(actor);\n  }\n\n  /**\n   * Adds a [[TileMap]] to the scene, once this is done the TileMap will be drawn and updated.\n   */\n  public addTileMap(tileMap: TileMap) {\n    this.tileMaps.push(tileMap);\n  }\n\n  /**\n   * Removes a [[TileMap]] from the scene, it will no longer be drawn or updated.\n   */\n  public removeTileMap(tileMap: TileMap) {\n    const index = this.tileMaps.indexOf(tileMap);\n    if (index > -1) {\n      this.tileMaps.splice(index, 1);\n    }\n  }\n\n  /**\n   * Removes an actor from the scene, it will no longer be drawn or updated.\n   */\n  protected _removeChild(actor: Actor) {\n    if (!Util.contains(this.actors, actor)) {\n      return;\n    }\n    this._broadphase.untrack(actor.body);\n    if (actor instanceof Trigger) {\n      this._triggerKillQueue.push(actor);\n    } else {\n      if (!actor.isKilled()) {\n        actor.kill();\n      }\n      this._killQueue.push(actor);\n    }\n\n    actor.parent = null;\n  }\n\n  /**\n   * Adds a [[Timer]] to the scene\n   * @param timer  The timer to add\n   */\n  public addTimer(timer: Timer): Timer {\n    this._timers.push(timer);\n    timer.scene = this;\n    return timer;\n  }\n\n  /**\n   * Removes a [[Timer]] from the scene.\n   * @warning Can be dangerous, use [[cancelTimer]] instead\n   * @param timer  The timer to remove\n   */\n  public removeTimer(timer: Timer): Timer {\n    const i = this._timers.indexOf(timer);\n    if (i !== -1) {\n      this._timers.splice(i, 1);\n    }\n    return timer;\n  }\n\n  /**\n   * Cancels a [[Timer]], removing it from the scene nicely\n   * @param timer  The timer to cancel\n   */\n  public cancelTimer(timer: Timer): Timer {\n    this._cancelQueue.push(timer);\n    return timer;\n  }\n\n  /**\n   * Tests whether a [[Timer]] is active in the scene\n   */\n  public isTimerActive(timer: Timer): boolean {\n    return this._timers.indexOf(timer) > -1 && !timer.complete;\n  }\n\n  /**\n   * Removes the given actor from the sorted drawing tree\n   */\n  public cleanupDrawTree(actor: Actor) {\n    this._sortedDrawingTree.removeByComparable(actor);\n  }\n\n  /**\n   * Updates the given actor's position in the sorted drawing tree\n   */\n  public updateDrawTree(actor: Actor) {\n    this._sortedDrawingTree.add(actor);\n  }\n\n  /**\n   * Checks if an actor is in this scene's sorted draw tree\n   */\n  public isActorInDrawTree(actor: Actor): boolean {\n    return this._sortedDrawingTree.find(actor);\n  }\n\n  public isCurrentScene(): boolean {\n    if (this._engine) {\n      return this._engine.currentScene === this;\n    }\n    return false;\n  }\n\n  private _collectActorStats(engine: Engine) {\n    for (const _ui of this.screenElements) {\n      engine.stats.currFrame.actors.ui++;\n    }\n\n    for (const actor of this.actors) {\n      engine.stats.currFrame.actors.alive++;\n      for (const child of actor.children) {\n        if (ActorUtils.isScreenElement(child)) {\n          engine.stats.currFrame.actors.ui++;\n        } else {\n          engine.stats.currFrame.actors.alive++;\n        }\n      }\n    }\n  }\n}\n", "import { Logger } from '../Util/Log';\nimport { Class } from '../Class';\nimport * as Events from '../Events';\n\n/**\n * Enum representing input key codes\n */\nexport enum Keys {\n  Num1 = 97,\n  Num2 = 98,\n  Num3 = 99,\n  Num4 = 100,\n  Num5 = 101,\n  Num6 = 102,\n  Num7 = 103,\n  Num8 = 104,\n  Num9 = 105,\n  Num0 = 96,\n\n  Numlock = 144,\n\n  Semicolon = 186, // 59 in some browsers\n\n  A = 65,\n  B = 66,\n  C = 67,\n  D = 68,\n  E = 69,\n  F = 70,\n  G = 71,\n  H = 72,\n  I = 73,\n  J = 74,\n  K = 75,\n  L = 76,\n  M = 77,\n  N = 78,\n  O = 79,\n  P = 80,\n  Q = 81,\n  R = 82,\n  S = 83,\n  T = 84,\n  U = 85,\n  V = 86,\n  W = 87,\n  X = 88,\n  Y = 89,\n  Z = 90,\n\n  Shift = 16,\n  Alt = 18,\n  Up = 38,\n  Down = 40,\n  Left = 37,\n  Right = 39,\n  Space = 32,\n  Esc = 27\n}\n\n/**\n * Event thrown on a game object for a key event\n */\nexport class KeyEvent extends Events.GameEvent<any> {\n  /**\n   * @param key  The key responsible for throwing the event\n   */\n  constructor(public key: Keys) {\n    super();\n  }\n}\n\n/**\n * Provides keyboard support for Excalibur.\n *\n * [[include:Keyboard.md]]\n */\nexport class Keyboard extends Class {\n  private _keys: number[] = [];\n  private _keysUp: number[] = [];\n  private _keysDown: number[] = [];\n\n  constructor() {\n    super();\n  }\n\n  public on(eventName: Events.press, handler: (event: KeyEvent) => void): void;\n  public on(eventName: Events.release, handler: (event: KeyEvent) => void): void;\n  public on(eventName: Events.hold, handler: (event: KeyEvent) => void): void;\n  public on(eventName: string, handler: (event: Events.GameEvent<any>) => void): void;\n  public on(eventName: string, handler: (event: any) => void): void {\n    super.on(eventName, handler);\n  }\n\n  /**\n   * Initialize Keyboard event listeners\n   */\n  init(global?: GlobalEventHandlers): void {\n    if (!global) {\n      try {\n        // Try and listen to events on top window frame if within an iframe.\n        //\n        // See https://github.com/excaliburjs/Excalibur/issues/1294\n        //\n        // Attempt to add an event listener, which triggers a DOMException on\n        // cross-origin iframes\n        const noop = () => {\n          return;\n        };\n        window.top.addEventListener('blur', noop);\n        window.top.removeEventListener('blur', noop);\n\n        // this will be the same as window if not embedded within an iframe\n        global = window.top;\n      } catch {\n        // fallback to current frame\n        global = window;\n\n        Logger.getInstance().warn(\n          'Failed to bind to keyboard events to top frame. ' +\n            'If you are trying to embed Excalibur in a cross-origin iframe, keyboard events will not fire.'\n        );\n      }\n    }\n\n    global.addEventListener('blur', () => {\n      this._keys.length = 0; // empties array efficiently\n    });\n\n    // key up is on window because canvas cannot have focus\n    global.addEventListener('keyup', (ev: KeyboardEvent) => {\n      const code = this._normalizeKeyCode(ev.keyCode);\n      const key = this._keys.indexOf(code);\n      this._keys.splice(key, 1);\n      this._keysUp.push(code);\n      const keyEvent = new KeyEvent(code);\n\n      // alias the old api, we may want to deprecate this in the future\n      this.eventDispatcher.emit('up', keyEvent);\n      this.eventDispatcher.emit('release', keyEvent);\n    });\n\n    // key down is on window because canvas cannot have focus\n    global.addEventListener('keydown', (ev: KeyboardEvent) => {\n      const code = this._normalizeKeyCode(ev.keyCode);\n      if (this._keys.indexOf(code) === -1) {\n        this._keys.push(code);\n        this._keysDown.push(code);\n        const keyEvent = new KeyEvent(code);\n        this.eventDispatcher.emit('down', keyEvent);\n        this.eventDispatcher.emit('press', keyEvent);\n      }\n    });\n  }\n\n  public update() {\n    // Reset keysDown and keysUp after update is complete\n    this._keysDown.length = 0;\n    this._keysUp.length = 0;\n\n    // Emit synthetic \"hold\" event\n    for (let i = 0; i < this._keys.length; i++) {\n      this.eventDispatcher.emit('hold', new KeyEvent(this._keys[i]));\n    }\n  }\n\n  /**\n   * Gets list of keys being pressed down\n   */\n  public getKeys(): Keys[] {\n    return this._keys;\n  }\n\n  /**\n   * Tests if a certain key was just pressed this frame. This is cleared at the end of the update frame.\n   * @param key Test whether a key was just pressed\n   */\n  public wasPressed(key: Keys): boolean {\n    return this._keysDown.indexOf(key) > -1;\n  }\n\n  /**\n   * Tests if a certain key is held down. This is persisted between frames.\n   * @param key  Test whether a key is held down\n   */\n  public isHeld(key: Keys): boolean {\n    return this._keys.indexOf(key) > -1;\n  }\n\n  /**\n   * Tests if a certain key was just released this frame. This is cleared at the end of the update frame.\n   * @param key  Test whether a key was just released\n   */\n  public wasReleased(key: Keys): boolean {\n    return this._keysUp.indexOf(key) > -1;\n  }\n\n  /**\n   * Normalizes some browser event key codes to map to standard Excalibur key codes\n   * @param code Event keyCode\n   * @see http://unixpapa.com/js/key.html\n   */\n  private _normalizeKeyCode(code: number) {\n    switch (code) {\n      case 59: // : ; in Firefox, Opera\n        return Keys.Semicolon;\n      default:\n        return code;\n    }\n  }\n}\n", "import { Engine } from './Engine';\nimport { ColorBlindCorrector, ColorBlindness } from './PostProcessing/Index';\n\nexport interface DebugFlags {\n  colorBlindMode: ColorBlindFlags;\n}\n\nexport class ColorBlindFlags {\n  private _engine: Engine;\n\n  constructor(engine: Engine) {\n    this._engine = engine;\n  }\n\n  public correct(colorBlindness: ColorBlindness) {\n    this._engine.postProcessors.push(new ColorBlindCorrector(this._engine, false, colorBlindness));\n  }\n\n  public simulate(colorBlindness: ColorBlindness) {\n    this._engine.postProcessors.push(new ColorBlindCorrector(this._engine, true, colorBlindness));\n  }\n}\n", "import { DebugFlags, ColorBlindFlags } from './DebugFlags';\nimport { Pair } from './Collision/Pair';\nimport { Engine } from './Engine';\n\n/**\n * Debug stats containing current and previous frame statistics\n */\nexport interface DebugStats {\n  currFrame: FrameStats;\n  prevFrame: FrameStats;\n}\n\n/**\n * Hash containing the [[Pair.id]]s of pairs that collided in a frame\n */\nexport interface CollidersHash {\n  [pairId: string]: Pair;\n}\n\n/**\n * Represents a frame's individual statistics\n */\nexport interface FrameStatistics {\n  /**\n   * The number of the frame\n   */\n  id: number;\n\n  /**\n   * Gets the frame's delta (time since last frame scaled by [[Engine.timescale]]) (in ms)\n   */\n  delta: number;\n\n  /**\n   * Gets the frame's frames-per-second (FPS)\n   */\n  fps: number;\n\n  /**\n   * Duration statistics (in ms)\n   */\n  duration: FrameDurationStats;\n\n  /**\n   * Actor statistics\n   */\n  actors: FrameActorStats;\n\n  /**\n   * Physics statistics\n   */\n  physics: PhysicsStatistics;\n}\n\n/**\n * Represents actor stats for a frame\n */\nexport interface FrameActorStats {\n  /**\n   * Gets the frame's number of actors (alive)\n   */\n  alive: number;\n\n  /**\n   * Gets the frame's number of actors (killed)\n   */\n  killed: number;\n\n  /**\n   * Gets the frame's number of remaining actors (alive - killed)\n   */\n  remaining: number;\n\n  /**\n   * Gets the frame's number of UI actors\n   */\n  ui: number;\n\n  /**\n   * Gets the frame's number of total actors (remaining + UI)\n   */\n  total: number;\n}\n\n/**\n * Represents duration stats for a frame\n */\nexport interface FrameDurationStats {\n  /**\n   * Gets the frame's total time to run the update function (in ms)\n   */\n  update: number;\n\n  /**\n   * Gets the frame's total time to run the draw function (in ms)\n   */\n  draw: number;\n\n  /**\n   * Gets the frame's total render duration (update + draw duration) (in ms)\n   */\n  total: number;\n}\n\n/**\n * Represents physics stats for the current frame\n */\nexport interface PhysicsStatistics {\n  /**\n   * Gets the number of broadphase collision pairs which\n   */\n  pairs: number;\n\n  /**\n   * Gets the number of actual collisions\n   */\n  collisions: number;\n\n  /**\n   * A Hash storing the [[Pair.id]]s of [[Pair]]s that collided in the frame\n   */\n  collidersHash: CollidersHash;\n\n  /**\n   * Gets the number of fast moving bodies using raycast continuous collisions in the scene\n   */\n  fastBodies: number;\n\n  /**\n   * Gets the number of bodies that had a fast body collision resolution\n   */\n  fastBodyCollisions: number;\n\n  /**\n   * Gets the time it took to calculate the broadphase pairs\n   */\n  broadphase: number;\n\n  /**\n   * Gets the time it took to calculate the narrowphase\n   */\n  narrowphase: number;\n}\n\n/**\n * Debug statistics and flags for Excalibur. If polling these values, it would be\n * best to do so on the `postupdate` event for [[Engine]], after all values have been\n * updated during a frame.\n */\nexport class Debug implements DebugFlags {\n  private _engine: Engine;\n\n  constructor(engine: Engine) {\n    this._engine = engine;\n\n    this.colorBlindMode = new ColorBlindFlags(this._engine);\n  }\n\n  /**\n   * Performance statistics\n   */\n  public stats: DebugStats = {\n    /**\n     * Current frame statistics. Engine reuses this instance, use [[FrameStats.clone]] to copy frame stats.\n     * Best accessed on [[postframe]] event. See [[FrameStats]]\n     */\n    currFrame: new FrameStats(),\n\n    /**\n     * Previous frame statistics. Engine reuses this instance, use [[FrameStats.clone]] to copy frame stats.\n     * Best accessed on [[preframe]] event. Best inspected on engine event `preframe`. See [[FrameStats]]\n     */\n    prevFrame: new FrameStats()\n  };\n\n  /**\n   * Correct or simulate color blindness using [[ColorBlindness]] post processor.\n   * @warning Will reduce FPS.\n   */\n  public colorBlindMode: ColorBlindFlags;\n}\n\n/**\n * Implementation of a frame's stats. Meant to have values copied via [[FrameStats.reset]], avoid\n * creating instances of this every frame.\n */\nexport class FrameStats implements FrameStatistics {\n  private _id: number = 0;\n  private _delta: number = 0;\n  private _fps: number = 0;\n  private _actorStats: FrameActorStats = {\n    alive: 0,\n    killed: 0,\n    ui: 0,\n    get remaining() {\n      return this.alive - this.killed;\n    },\n    get total() {\n      return this.remaining + this.ui;\n    }\n  };\n  private _durationStats: FrameDurationStats = {\n    update: 0,\n    draw: 0,\n    get total() {\n      return this.update + this.draw;\n    }\n  };\n\n  private _physicsStats: PhysicsStats = new PhysicsStats();\n\n  /**\n   * Zero out values or clone other IFrameStat stats. Allows instance reuse.\n   *\n   * @param [otherStats] Optional stats to clone\n   */\n  public reset(otherStats?: FrameStatistics) {\n    if (otherStats) {\n      this.id = otherStats.id;\n      this.delta = otherStats.delta;\n      this.fps = otherStats.fps;\n      this.actors.alive = otherStats.actors.alive;\n      this.actors.killed = otherStats.actors.killed;\n      this.actors.ui = otherStats.actors.ui;\n      this.duration.update = otherStats.duration.update;\n      this.duration.draw = otherStats.duration.draw;\n      this._physicsStats.reset(otherStats.physics);\n    } else {\n      this.id = this.delta = this.fps = 0;\n      this.actors.alive = this.actors.killed = this.actors.ui = 0;\n      this.duration.update = this.duration.draw = 0;\n      this._physicsStats.reset();\n    }\n  }\n\n  /**\n   * Provides a clone of this instance.\n   */\n  public clone(): FrameStats {\n    const fs = new FrameStats();\n\n    fs.reset(this);\n\n    return fs;\n  }\n\n  /**\n   * Gets the frame's id\n   */\n  public get id() {\n    return this._id;\n  }\n\n  /**\n   * Sets the frame's id\n   */\n  public set id(value: number) {\n    this._id = value;\n  }\n\n  /**\n   * Gets the frame's delta (time since last frame)\n   */\n  public get delta() {\n    return this._delta;\n  }\n\n  /**\n   * Sets the frame's delta (time since last frame). Internal use only.\n   * @internal\n   */\n  public set delta(value: number) {\n    this._delta = value;\n  }\n\n  /**\n   * Gets the frame's frames-per-second (FPS)\n   */\n  public get fps() {\n    return this._fps;\n  }\n\n  /**\n   * Sets the frame's frames-per-second (FPS). Internal use only.\n   * @internal\n   */\n  public set fps(value: number) {\n    this._fps = value;\n  }\n\n  /**\n   * Gets the frame's actor statistics\n   */\n  public get actors() {\n    return this._actorStats;\n  }\n\n  /**\n   * Gets the frame's duration statistics\n   */\n  public get duration() {\n    return this._durationStats;\n  }\n\n  /**\n   * Gets the frame's physics statistics\n   */\n  public get physics() {\n    return this._physicsStats;\n  }\n}\n\nexport class PhysicsStats implements PhysicsStatistics {\n  private _pairs: number = 0;\n  private _collisions: number = 0;\n  private _collidersHash: CollidersHash = {};\n  private _fastBodies: number = 0;\n  private _fastBodyCollisions: number = 0;\n  private _broadphase: number = 0;\n  private _narrowphase: number = 0;\n\n  /**\n   * Zero out values or clone other IPhysicsStats stats. Allows instance reuse.\n   *\n   * @param [otherStats] Optional stats to clone\n   */\n  public reset(otherStats?: PhysicsStatistics) {\n    if (otherStats) {\n      this.pairs = otherStats.pairs;\n      this.collisions = otherStats.collisions;\n      this.collidersHash = otherStats.collidersHash;\n      this.fastBodies = otherStats.fastBodies;\n      this.fastBodyCollisions = otherStats.fastBodyCollisions;\n      this.broadphase = otherStats.broadphase;\n      this.narrowphase = otherStats.narrowphase;\n    } else {\n      this.pairs = this.collisions = this.fastBodies = 0;\n      this.fastBodyCollisions = this.broadphase = this.narrowphase = 0;\n      this.collidersHash = {};\n    }\n  }\n\n  /**\n   * Provides a clone of this instance.\n   */\n  public clone(): PhysicsStatistics {\n    const ps = new PhysicsStats();\n\n    ps.reset(this);\n\n    return ps;\n  }\n\n  public get pairs(): number {\n    return this._pairs;\n  }\n\n  public set pairs(value: number) {\n    this._pairs = value;\n  }\n\n  public get collisions(): number {\n    return this._collisions;\n  }\n\n  public set collisions(value: number) {\n    this._collisions = value;\n  }\n\n  public get collidersHash(): CollidersHash {\n    return this._collidersHash;\n  }\n\n  public set collidersHash(colliders: CollidersHash) {\n    this._collidersHash = colliders;\n  }\n\n  public get fastBodies(): number {\n    return this._fastBodies;\n  }\n\n  public set fastBodies(value: number) {\n    this._fastBodies = value;\n  }\n\n  public get fastBodyCollisions(): number {\n    return this._fastBodyCollisions;\n  }\n\n  public set fastBodyCollisions(value: number) {\n    this._fastBodyCollisions = value;\n  }\n\n  public get broadphase(): number {\n    return this._broadphase;\n  }\n\n  public set broadphase(value: number) {\n    this._broadphase = value;\n  }\n\n  public get narrowphase(): number {\n    return this._narrowphase;\n  }\n\n  public set narrowphase(value: number) {\n    this._narrowphase = value;\n  }\n}\n", "import { Actor } from '../Actor';\nimport { Vector } from '../Algebra';\nimport { Class } from '../Class';\nimport * as Actors from '../Util/Actors';\nimport { removeItemFromArray } from '../Util/Util';\nimport { PointerMoveEvent, PointerDownEvent, PointerUpEvent, WheelEvent } from './PointerEvents';\n\nexport interface ActorsUnderPointer {\n  [ActorId: number]: Actor;\n  length: number;\n}\n\n/**\n * The type of pointer for a [[PointerEvent]].\n */\nexport enum PointerType {\n  Touch = 'Touch',\n  Mouse = 'Mouse',\n  Pen = 'Pen',\n  Unknown = 'Unknown'\n}\n\n/**\n * Determines the scope of handling mouse/touch events. See [[Pointers]] for more information.\n */\nexport enum PointerScope {\n  /**\n   * Handle events on the `canvas` element only. Events originating outside the\n   * `canvas` will not be handled.\n   */\n  Canvas = 'Canvas',\n\n  /**\n   * Handles events on the entire document. All events will be handled by Excalibur.\n   */\n  Document = 'Document'\n}\n\n/**\n * Captures and dispatches PointerEvents\n */\nexport class Pointer extends Class {\n  private static _MAX_ID = 0;\n  public readonly id = Pointer._MAX_ID++;\n  private _isDown: boolean = false;\n  private _wasDown: boolean = false;\n\n  private _actorsUnderPointer: ActorsUnderPointer = { length: 0 };\n\n  private _actors: Actor[] = [];\n  private _actorsLastFrame: Actor[] = [];\n  private _actorsNoLongerUnderPointer: Actor[] = [];\n\n  /**\n   * Whether the Pointer is currently dragging.\n   */\n  public get isDragging(): boolean {\n    return this._isDown;\n  }\n\n  /**\n   * Whether the Pointer just started dragging.\n   */\n  public get isDragStart(): boolean {\n    return !this._wasDown && this._isDown;\n  }\n\n  /**\n   * Whether the Pointer just ended dragging.\n   */\n  public get isDragEnd(): boolean {\n    return this._wasDown && !this._isDown;\n  }\n\n  /**\n   * Returns true if pointer has any actors under\n   */\n  public get hasActorsUnderPointer(): boolean {\n    return !!this._actorsUnderPointer.length;\n  }\n\n  /**\n   * The last position on the document this pointer was at. Can be `null` if pointer was never active.\n   */\n  public lastPagePos: Vector = null;\n\n  /**\n   * The last position on the screen this pointer was at. Can be `null` if pointer was never active.\n   */\n  public lastScreenPos: Vector = null;\n\n  /**\n   * The last position in the game world coordinates this pointer was at. Can be `null` if pointer was never active.\n   */\n  public lastWorldPos: Vector = null;\n\n  /**\n   * Returns the currently dragging target or null if it isn't exist\n   */\n  public dragTarget: Actor = null;\n\n  constructor() {\n    super();\n\n    this.on('move', this._onPointerMove);\n    this.on('down', this._onPointerDown);\n    this.on('up', this._onPointerUp);\n  }\n\n  on(event: 'move', handler: (event: PointerMoveEvent) => void): void;\n  on(event: 'down', handler: (event: PointerDownEvent) => void): void;\n  on(event: 'up', handler: (event: PointerUpEvent) => void): void;\n  on(event: 'wheel', handler: (event: WheelEvent) => void): void;\n  on(event: string, handler: (event: any) => void): void {\n    super.on(event, handler);\n  }\n\n  once(event: 'move', handler: (event: PointerMoveEvent) => void): void;\n  once(event: 'down', handler: (event: PointerDownEvent) => void): void;\n  once(event: 'up', handler: (event: PointerUpEvent) => void): void;\n  once(event: 'wheel', handler: (event: WheelEvent) => void): void;\n  once(event: string, handler: (event: any) => void): void {\n    super.once(event, handler);\n  }\n\n  off(event: 'move', handler?: (event: PointerMoveEvent) => void): void;\n  off(event: 'down', handler?: (event: PointerDownEvent) => void): void;\n  off(event: 'up', handler?: (event: PointerUpEvent) => void): void;\n  off(event: 'wheel', handler?: (event: WheelEvent) => void): void;\n  off(event: string, handler?: (event: any) => void): void {\n    super.off(event, handler);\n  }\n\n  /**\n   * Update the state of current pointer, meant to be called a the end of frame\n   */\n  public update(): void {\n    if (this._wasDown && !this._isDown) {\n      this._wasDown = false;\n    } else if (!this._wasDown && this._isDown) {\n      this._wasDown = true;\n    }\n    this._actorsLastFrame = [...this._actors];\n    this._actorsNoLongerUnderPointer = [];\n  }\n\n  /**\n   * Adds an Actor to actorsUnderPointer object.\n   * @param actor An Actor to be added;\n   */\n  public addActorUnderPointer(actor: Actor): void {\n    if (!this.isActorAliveUnderPointer(actor)) {\n      this._actorsUnderPointer[actor.id] = actor;\n      this._actorsUnderPointer.length += 1;\n      this._actors.push(actor);\n    }\n\n    // Actors under the pointer are sorted by z, ties are broken by id\n    this._actors.sort((a, b) => {\n      if (a.z === b.z) {\n        return a.id - b.id;\n      }\n      return a.z - b.z;\n    });\n  }\n\n  /**\n   * Removes an Actor from actorsUnderPointer object.\n   * @param actor An Actor to be removed;\n   */\n  public removeActorUnderPointer(actor: Actor): void {\n    if (this.isActorAliveUnderPointer(actor)) {\n      delete this._actorsUnderPointer[actor.id];\n      this._actorsUnderPointer.length -= 1;\n      removeItemFromArray(actor, this._actors);\n      this._actorsNoLongerUnderPointer.push(actor);\n    }\n  }\n\n  /**\n   * Returns all actors under this pointer this frame\n   */\n  public getActorsUnderPointer(): Actor[] {\n    return this._actors;\n  }\n\n  /**\n   * Returns all actors that are no longer under the pointer this frame\n   */\n  public getActorsUnderPointerLastFrame(): Actor[] {\n    return this._actorsLastFrame;\n  }\n\n  /**\n   * Returns all actors relevant for events to pointer this frame\n   */\n  public getActorsForEvents(): Actor[] {\n    return this._actors.concat(this._actorsLastFrame).filter((actor, i, self) => {\n      return self.indexOf(actor) === i;\n    });\n  }\n\n  /**\n   * Checks if Pointer location has a specific Actor bounds contained underneath.\n   * @param actor An Actor for check;\n   */\n  public checkActorUnderPointer(actor: Actor): boolean {\n    if (this.lastWorldPos) {\n      return actor.contains(this.lastWorldPos.x, this.lastWorldPos.y, !Actors.isScreenElement(actor));\n    }\n    return false;\n  }\n\n  /**\n   * Checks if an actor was under the pointer last frame\n   * @param actor\n   */\n  public wasActorUnderPointer(actor: Actor): boolean {\n    return this._actorsLastFrame.indexOf(actor) > -1; // || !!this._actorsUnderPointerLastFrame.hasOwnProperty(actor.id.toString());\n  }\n\n  /**\n   * Checks if Pointer has a specific Actor in ActorsUnderPointer list.\n   * @param actor An Actor for check;\n   */\n  public isActorAliveUnderPointer(actor: Actor): boolean {\n    return !!(!actor.isKilled() && actor.scene && this._actorsUnderPointer.hasOwnProperty(actor.id.toString()));\n  }\n\n  private _onPointerMove(ev: PointerMoveEvent): void {\n    this.lastPagePos = new Vector(ev.pagePos.x, ev.pagePos.y);\n    this.lastScreenPos = new Vector(ev.screenPos.x, ev.screenPos.y);\n    this.lastWorldPos = new Vector(ev.worldPos.x, ev.worldPos.y);\n  }\n\n  private _onPointerDown(ev: PointerDownEvent): void {\n    this.lastPagePos = new Vector(ev.pagePos.x, ev.pagePos.y);\n    this.lastScreenPos = new Vector(ev.screenPos.x, ev.screenPos.y);\n    this.lastWorldPos = new Vector(ev.worldPos.x, ev.worldPos.y);\n    this._isDown = true;\n  }\n\n  private _onPointerUp(_ev: PointerUpEvent): void {\n    this._isDown = false;\n    this.dragTarget = null;\n  }\n}\n", "import { Actor } from '../Actor';\nimport { Vector, GlobalCoordinates } from '../Algebra';\nimport { Pointer, PointerType } from './Pointer';\nimport { GameEvent } from '../Events';\n\n/**\n * Native browser button enumeration\n */\nexport enum NativePointerButton {\n  NoButton = -1,\n  Left = 0,\n  Middle = 1,\n  Right = 2,\n  Unknown = 3\n}\n\n/**\n * The mouse button being pressed.\n */\nexport enum PointerButton {\n  Left = 'Left',\n  Middle = 'Middle',\n  Right = 'Right',\n  Unknown = 'Unknown',\n  NoButton = 'NoButton'\n}\n\nexport enum WheelDeltaMode {\n  Pixel = 'Pixel',\n  Line = 'Line',\n  Page = 'Page'\n}\n\n/**\n * Type that indicates Excalibur's valid synthetic pointer events\n */\nexport type PointerEventName =\n  | 'pointerdragstart'\n  | 'pointerdragend'\n  | 'pointerdragmove'\n  | 'pointerdragenter'\n  | 'pointerdragleave'\n  | 'pointermove'\n  | 'pointerenter'\n  | 'pointerleave'\n  | 'pointerup'\n  | 'pointerdown';\n\n/**\n * Pointer events\n *\n * Represents a mouse, touch, or stylus event. See [[Pointers]] for more information on\n * handling pointer input.\n *\n * For mouse-based events, you can inspect [[PointerEvent.button]] to see what button was pressed.\n */\nexport class PointerEvent extends GameEvent<Actor> {\n  protected _name: string;\n\n  public get name() {\n    return this._name;\n  }\n\n  /** The world coordinates of the event. */\n  public get worldPos(): Vector {\n    return this.coordinates.worldPos.clone();\n  }\n\n  /** The page coordinates of the event. */\n  public get pagePos(): Vector {\n    return this.coordinates.pagePos.clone();\n  }\n\n  /** The screen coordinates of the event. */\n  public get screenPos(): Vector {\n    return this.coordinates.screenPos.clone();\n  }\n\n  /**\n   * @param coordinates         The [[GlobalCoordinates]] of the event\n   * @param pointer             The [[Pointer]] of the event\n   * @param index               The index of the pointer (zero-based)\n   * @param pointerType         The type of pointer\n   * @param button              The button pressed (if [[PointerType.Mouse]])\n   * @param ev                  The raw DOM event being handled\n   * @param pos                 (Will be added to signature in 0.14.0 release) The position of the event (in world coordinates)\n   */\n  constructor(\n    protected coordinates: GlobalCoordinates,\n    public pointer: Pointer,\n    public index: number,\n    public pointerType: PointerType,\n    public button: PointerButton,\n    public ev: any\n  ) {\n    super();\n  }\n\n  public get pos(): Vector {\n    return this.coordinates.worldPos.clone();\n  }\n\n  public propagate(actor: Actor): void {\n    this.doAction(actor);\n\n    if (this.bubbles && actor.parent) {\n      this.propagate(actor.parent);\n    }\n  }\n\n  /**\n   * Action, that calls when event happens\n   */\n  public doAction(actor: Actor): void {\n    if (actor) {\n      this._onActionStart(actor);\n      actor.emit(this._name, this);\n      this._onActionEnd(actor);\n    }\n  }\n\n  protected _onActionStart(_actor?: Actor) {\n    // to be rewritten\n  }\n\n  protected _onActionEnd(_actor?: Actor) {\n    // to be rewritten\n  }\n}\n\nexport class PointerEventFactory<T extends PointerEvent> {\n  constructor(\n    protected _pointerEventType: new (\n      coordinates: GlobalCoordinates,\n      pointer: Pointer,\n      index: number,\n      pointerType: PointerType,\n      button: PointerButton,\n      ev: any\n    ) => T\n  ) {}\n\n  /**\n   * Create specific PointerEvent\n   */\n  public create(\n    coordinates: GlobalCoordinates,\n    pointer: Pointer,\n    index: number,\n    pointerType: PointerType,\n    button: PointerButton,\n    ev: any\n  ): T {\n    return new this._pointerEventType(coordinates, pointer, index, pointerType, button, ev);\n  }\n}\n\nexport class PointerDragEvent extends PointerEvent {}\n\nexport class PointerUpEvent extends PointerEvent {\n  protected _name = 'pointerup';\n\n  protected _onActionEnd(actor: Actor) {\n    const pointer = this.pointer;\n\n    if (pointer.isDragEnd && actor.capturePointer.captureDragEvents) {\n      actor.eventDispatcher.emit('pointerdragend', this);\n    }\n  }\n}\n\nexport class PointerDownEvent extends PointerEvent {\n  protected _name = 'pointerdown';\n\n  protected _onActionEnd(actor: Actor) {\n    if (this.pointer.isDragStart && actor.capturePointer.captureDragEvents) {\n      actor.eventDispatcher.emit('pointerdragstart', this);\n    }\n  }\n}\n\nexport class PointerMoveEvent extends PointerEvent {\n  protected _name = 'pointermove';\n\n  public propagate(actor: Actor): void {\n    // If the actor was under the pointer last frame, but not this one it left\n    // if (this.pointer.wasActorUnderPointer(actor) && !this.pointer.isActorUnderPointer(actor)) {\n    //   this._onActorLeave(actor);\n    //   return;\n    // }\n\n    if (this.pointer.isActorAliveUnderPointer(actor)) {\n      this.doAction(actor);\n\n      if (this.bubbles && actor.parent) {\n        this.propagate(actor.parent);\n      }\n    }\n  }\n\n  protected _onActionStart(actor: Actor) {\n    if (!actor.capturePointer.captureMoveEvents) {\n      return;\n    }\n\n    // In the case this is new\n    // if (this.pointer.checkActorUnderPointer(actor) && !this.pointer.wasActorUnderPointer(actor)) {\n    //   this._onActorEnter(actor);\n    // }\n\n    if (this.pointer.isDragging && actor.capturePointer.captureDragEvents) {\n      actor.eventDispatcher.emit('pointerdragmove', this);\n    }\n  }\n\n  // private _onActorEnter(actor: Actor) {\n  //   const pe = createPointerEventByName('enter', this.coordinates, this.pointer, this.index, this.pointerType, this.button, this.ev);\n  //   pe.propagate(actor);\n  //   this.pointer.addActorUnderPointer(actor);\n\n  //   if (this.pointer.isDragging) {\n  //     this.pointer.dragTarget = actor;\n  //   }\n  // }\n\n  // private _onActorLeave(actor: Actor) {\n  //   const pe = createPointerEventByName('leave', this.coordinates, this.pointer, this.index, this.pointerType, this.button, this.ev);\n  //   pe.propagate(actor);\n  //   this.pointer.removeActorUnderPointer(actor);\n  // }\n}\n\nexport class PointerEnterEvent extends PointerEvent {\n  protected _name = 'pointerenter';\n\n  protected _onActionStart(actor: Actor) {\n    if (!actor.capturePointer.captureMoveEvents) {\n      return;\n    }\n  }\n\n  protected _onActionEnd(actor: Actor) {\n    const pointer = this.pointer;\n\n    if (pointer.isDragging && actor.capturePointer.captureDragEvents) {\n      actor.eventDispatcher.emit('pointerdragenter', this);\n    }\n  }\n}\n\nexport class PointerLeaveEvent extends PointerEvent {\n  protected _name = 'pointerleave';\n\n  protected _onActionStart(actor: Actor) {\n    if (!actor.capturePointer.captureMoveEvents) {\n      return;\n    }\n  }\n\n  protected _onActionEnd(actor: Actor) {\n    const pointer = this.pointer;\n\n    if (pointer.isDragging && actor.capturePointer.captureDragEvents) {\n      actor.eventDispatcher.emit('pointerdragleave', this);\n    }\n  }\n}\n\nexport class PointerCancelEvent extends PointerEvent {\n  protected _name = 'pointercancel';\n}\n/**\n * Wheel Events\n *\n * Represents a mouse wheel event. See [[Pointers]] for more information on\n * handling point input.\n */\nexport class WheelEvent extends GameEvent<Actor> {\n  /**\n   * @param x            The `x` coordinate of the event (in world coordinates)\n   * @param y            The `y` coordinate of the event (in world coordinates)\n   * @param pageX        The `x` coordinate of the event (in document coordinates)\n   * @param pageY        The `y` coordinate of the event (in document coordinates)\n   * @param screenX      The `x` coordinate of the event (in screen coordinates)\n   * @param screenY      The `y` coordinate of the event (in screen coordinates)\n   * @param index        The index of the pointer (zero-based)\n   * @param deltaX       The type of pointer\n   * @param deltaY       The type of pointer\n   * @param deltaZ       The type of pointer\n   * @param deltaMode    The type of movement [[WheelDeltaMode]]\n   * @param ev           The raw DOM event being handled\n   */\n  constructor(\n    public x: number,\n    public y: number,\n    public pageX: number,\n    public pageY: number,\n    public screenX: number,\n    public screenY: number,\n    public index: number,\n    public deltaX: number,\n    public deltaY: number,\n    public deltaZ: number,\n    public deltaMode: WheelDeltaMode,\n    public ev: any\n  ) {\n    super();\n  }\n}\n\nexport function createPointerEventByName(\n  eventName: string,\n  coordinates: GlobalCoordinates,\n  pointer: Pointer,\n  index: number,\n  pointerType: PointerType,\n  button: PointerButton,\n  ev: any\n) {\n  let factory: PointerEventFactory<PointerEvent>;\n\n  switch (eventName) {\n    case 'up':\n      factory = new PointerEventFactory(<any>PointerUpEvent);\n      break;\n    case 'down':\n      factory = new PointerEventFactory(<any>PointerDownEvent);\n      break;\n    case 'move':\n      factory = new PointerEventFactory(<any>PointerMoveEvent);\n      break;\n    case 'cancel':\n      factory = new PointerEventFactory(<any>PointerCancelEvent);\n      break;\n    case 'enter':\n      factory = new PointerEventFactory(<any>PointerEnterEvent);\n      break;\n    case 'leave':\n      factory = new PointerEventFactory(<any>PointerLeaveEvent);\n      break;\n  }\n\n  return factory.create(coordinates, pointer, index, pointerType, button, ev);\n}\n", "import { Class } from './../Class';\nimport { GameEvent, GamepadConnectEvent, GamepadDisconnectEvent, GamepadButtonEvent, GamepadAxisEvent } from '../Events';\nimport * as Events from '../Events';\n\n/**\n * Excalibur leverages the HTML5 Gamepad API [where it is supported](http://caniuse.com/#feat=gamepad)\n * to provide controller support for your games.\n *\n * [[include:Gamepads.md]]\n */\nexport class Gamepads extends Class {\n  /**\n   * Whether or not to poll for Gamepad input (default: `false`)\n   */\n  public enabled = false;\n\n  /**\n   * Whether or not Gamepad API is supported\n   */\n  public supported = !!(<any>navigator).getGamepads;\n\n  /**\n   * The minimum value an axis has to move before considering it a change\n   */\n  public static MinAxisMoveThreshold = 0.05;\n\n  private _gamePadTimeStamps = [0, 0, 0, 0];\n  private _oldPads: Gamepad[] = [];\n  private _pads: Gamepad[] = [];\n  private _initSuccess: boolean = false;\n  private _navigator: NavigatorGamepads = <any>navigator;\n  private _minimumConfiguration: GamepadConfiguration = null;\n\n  constructor() {\n    super();\n  }\n\n  public init() {\n    if (!this.supported) {\n      return;\n    }\n    if (this._initSuccess) {\n      return;\n    }\n\n    // In Chrome, this will return 4 undefined items until a button is pressed\n    // In FF, this will not return any items until a button is pressed\n    this._oldPads = this._clonePads(this._navigator.getGamepads());\n    if (this._oldPads.length && this._oldPads[0]) {\n      this._initSuccess = true;\n    }\n  }\n\n  /**\n   * Sets the minimum gamepad configuration, for example {axis: 4, buttons: 4} means\n   * this game requires at minimum 4 axis inputs and 4 buttons, this is not restrictive\n   * all other controllers with more axis or buttons are valid as well. If no minimum\n   * configuration is set all pads are valid.\n   */\n  public setMinimumGamepadConfiguration(config: GamepadConfiguration): void {\n    this._enableAndUpdate(); // if config is used, implicitly enable\n    this._minimumConfiguration = config;\n  }\n\n  /**\n   * When implicitly enabled, set the enabled flag and run an update so information is updated\n   */\n  private _enableAndUpdate() {\n    if (!this.enabled) {\n      this.enabled = true;\n      this.update();\n    }\n  }\n\n  /**\n   * Checks a navigator gamepad against the minimum configuration if present.\n   */\n  private _isGamepadValid(pad: NavigatorGamepad): boolean {\n    if (!this._minimumConfiguration) {\n      return true;\n    }\n    if (!pad) {\n      return false;\n    }\n    const axesLength = pad.axes.filter((value) => {\n      return typeof value !== undefined;\n    }).length;\n\n    const buttonLength = pad.buttons.filter((value) => {\n      return typeof value !== undefined;\n    }).length;\n    return axesLength >= this._minimumConfiguration.axis && buttonLength >= this._minimumConfiguration.buttons && pad.connected;\n  }\n\n  public on(eventName: Events.connect, handler: (event: GamepadConnectEvent) => void): void;\n  public on(eventName: Events.disconnect, handler: (event: GamepadDisconnectEvent) => void): void;\n  public on(eventName: Events.button, handler: (event: GamepadButtonEvent) => void): void;\n  public on(eventName: Events.axis, handler: (event: GamepadAxisEvent) => void): void;\n  public on(eventName: string, handler: (event: GameEvent<any>) => void): void;\n  public on(eventName: string, handler: (event: any) => void): void {\n    this._enableAndUpdate(); // implicitly enable\n    super.on(eventName, handler);\n  }\n\n  public off(eventName: string, handler?: (event: GameEvent<any>) => void) {\n    this._enableAndUpdate(); // implicitly enable\n    super.off(eventName, handler);\n  }\n\n  /**\n   * Updates Gamepad state and publishes Gamepad events\n   */\n  public update() {\n    if (!this.enabled || !this.supported) {\n      return;\n    }\n    this.init();\n\n    const gamepads = this._navigator.getGamepads();\n\n    for (let i = 0; i < gamepads.length; i++) {\n      if (!gamepads[i]) {\n        const gamepad = this.at(i);\n        // If was connected, but now isn't emit the disconnect event\n        if (gamepad.connected) {\n          this.eventDispatcher.emit('disconnect', new GamepadDisconnectEvent(i, gamepad));\n        }\n        // Reset connection status\n        gamepad.connected = false;\n        continue;\n      } else {\n        if (!this.at(i).connected && this._isGamepadValid(gamepads[i])) {\n          this.eventDispatcher.emit('connect', new GamepadConnectEvent(i, this.at(i)));\n        }\n        // Set connection status\n        this.at(i).connected = true;\n      }\n\n      // Only supported in Chrome\n      if (gamepads[i].timestamp && gamepads[i].timestamp === this._gamePadTimeStamps[i]) {\n        continue;\n      }\n\n      this._gamePadTimeStamps[i] = gamepads[i].timestamp;\n\n      // Add reference to navigator gamepad\n      this.at(i).navigatorGamepad = gamepads[i];\n\n      // Buttons\n      let b: string, bi: number, a: string, ai: number, value: number;\n\n      for (b in Buttons) {\n        bi = <any>Buttons[b];\n        if (typeof bi === 'number') {\n          if (gamepads[i].buttons[bi]) {\n            value = gamepads[i].buttons[bi].value;\n            if (value !== this._oldPads[i].getButton(bi)) {\n              if (gamepads[i].buttons[bi].pressed) {\n                this.at(i).updateButton(bi, value);\n                this.at(i).eventDispatcher.emit('button', new GamepadButtonEvent(bi, value, this.at(i)));\n              } else {\n                this.at(i).updateButton(bi, 0);\n              }\n            }\n          }\n        }\n      }\n\n      // Axes\n      for (a in Axes) {\n        ai = <any>Axes[a];\n        if (typeof ai === 'number') {\n          value = gamepads[i].axes[ai];\n          if (value !== this._oldPads[i].getAxes(ai)) {\n            this.at(i).updateAxes(ai, value);\n            this.at(i).eventDispatcher.emit('axis', new GamepadAxisEvent(ai, value, this.at(i)));\n          }\n        }\n      }\n\n      this._oldPads[i] = this._clonePad(gamepads[i]);\n    }\n  }\n\n  /**\n   * Safely retrieves a Gamepad at a specific index and creates one if it doesn't yet exist\n   */\n  public at(index: number): Gamepad {\n    this._enableAndUpdate(); // implicitly enable gamepads when at() is called\n    if (index >= this._pads.length) {\n      // Ensure there is a pad to retrieve\n      for (let i = this._pads.length - 1, max = index; i < max; i++) {\n        this._pads.push(new Gamepad());\n        this._oldPads.push(new Gamepad());\n      }\n    }\n\n    return this._pads[index];\n  }\n\n  /**\n   * Returns a list of all valid gamepads that meet the minimum configuration requirement.\n   */\n  public getValidGamepads(): Gamepad[] {\n    this._enableAndUpdate();\n    const result: Gamepad[] = [];\n    for (let i = 0; i < this._pads.length; i++) {\n      if (this._isGamepadValid(this.at(i).navigatorGamepad) && this.at(i).connected) {\n        result.push(this.at(i));\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Gets the number of connected gamepads\n   */\n  public count() {\n    return this._pads.filter((p) => p.connected).length;\n  }\n\n  private _clonePads(pads: NavigatorGamepad[]): Gamepad[] {\n    const arr = [];\n    for (let i = 0, len = pads.length; i < len; i++) {\n      arr.push(this._clonePad(pads[i]));\n    }\n    return arr;\n  }\n\n  /**\n   * Fastest way to clone a known object is to do it yourself\n   */\n  private _clonePad(pad: NavigatorGamepad): Gamepad {\n    let i, len;\n    const clonedPad = new Gamepad();\n\n    if (!pad) {\n      return clonedPad;\n    }\n\n    for (i = 0, len = pad.buttons.length; i < len; i++) {\n      if (pad.buttons[i]) {\n        clonedPad.updateButton(i, pad.buttons[i].value);\n      }\n    }\n    for (i = 0, len = pad.axes.length; i < len; i++) {\n      clonedPad.updateAxes(i, pad.axes[i]);\n    }\n\n    return clonedPad;\n  }\n}\n\n/**\n * Gamepad holds state information for a connected controller. See [[Gamepads]]\n * for more information on handling controller input.\n */\nexport class Gamepad extends Class {\n  public connected = false;\n  public navigatorGamepad: NavigatorGamepad;\n  private _buttons: number[] = new Array(16);\n  private _axes: number[] = new Array(4);\n\n  constructor() {\n    super();\n\n    for (let i = 0; i < this._buttons.length; i++) {\n      this._buttons[i] = 0;\n    }\n    for (let i = 0; i < this._axes.length; i++) {\n      this._axes[i] = 0;\n    }\n  }\n\n  /**\n   * Whether or not the given button is pressed\n   * @param button     The button to query\n   * @param threshold  The threshold over which the button is considered to be pressed\n   */\n  public isButtonPressed(button: Buttons, threshold: number = 1) {\n    return this._buttons[button] >= threshold;\n  }\n\n  /**\n   * Gets the given button value between 0 and 1\n   */\n  public getButton(button: Buttons) {\n    return this._buttons[button];\n  }\n\n  /**\n   * Gets the given axis value between -1 and 1. Values below\n   * [[MinAxisMoveThreshold]] are considered 0.\n   */\n  public getAxes(axes: Axes) {\n    const value = this._axes[axes];\n\n    if (Math.abs(value) < Gamepads.MinAxisMoveThreshold) {\n      return 0;\n    } else {\n      return value;\n    }\n  }\n\n  public updateButton(buttonIndex: number, value: number) {\n    this._buttons[buttonIndex] = value;\n  }\n\n  public updateAxes(axesIndex: number, value: number) {\n    this._axes[axesIndex] = value;\n  }\n}\n\n/**\n * Gamepad Buttons enumeration\n */\nexport enum Buttons {\n  /**\n   * Face 1 button (e.g. A)\n   */\n  Face1 = 0,\n  /**\n   * Face 2 button (e.g. B)\n   */\n  Face2 = 1,\n  /**\n   * Face 3 button (e.g. X)\n   */\n  Face3 = 2,\n  /**\n   * Face 4 button (e.g. Y)\n   */\n  Face4 = 3,\n  /**\n   * Left bumper button\n   */\n  LeftBumper = 4,\n  /**\n   * Right bumper button\n   */\n  RightBumper = 5,\n  /**\n   * Left trigger button\n   */\n  LeftTrigger = 6,\n  /**\n   * Right trigger button\n   */\n  RightTrigger = 7,\n  /**\n   * Select button\n   */\n  Select = 8,\n  /**\n   * Start button\n   */\n  Start = 9,\n  /**\n   * Left analog stick press (e.g. L3)\n   */\n  LeftStick = 10,\n  /**\n   * Right analog stick press (e.g. R3)\n   */\n  RightStick = 11,\n  /**\n   * D-pad up\n   */\n  DpadUp = 12,\n  /**\n   * D-pad down\n   */\n  DpadDown = 13,\n  /**\n   * D-pad left\n   */\n  DpadLeft = 14,\n  /**\n   * D-pad right\n   */\n  DpadRight = 15\n}\n\n/**\n * Gamepad Axes enumeration\n */\nexport enum Axes {\n  /**\n   * Left analogue stick X direction\n   */\n  LeftStickX = 0,\n  /**\n   * Left analogue stick Y direction\n   */\n  LeftStickY = 1,\n  /**\n   * Right analogue stick X direction\n   */\n  RightStickX = 2,\n  /**\n   * Right analogue stick Y direction\n   */\n  RightStickY = 3\n}\n\n/**\n * @internal\n */\nexport interface NavigatorGamepads {\n  getGamepads(): NavigatorGamepad[];\n}\n\n/**\n * @internal\n */\nexport interface NavigatorGamepad {\n  axes: number[];\n  buttons: NavigatorGamepadButton[];\n  connected: boolean;\n  id: string;\n  index: number;\n  mapping: string;\n  timestamp: number;\n}\n\n/**\n * @internal\n */\nexport interface NavigatorGamepadButton {\n  pressed: boolean;\n  value: number;\n}\n\n/**\n * @internal\n */\nexport interface NavigatorGamepadEvent {\n  gamepad: NavigatorGamepad;\n}\n\n/**\n * @internal\n */\nexport interface GamepadConfiguration {\n  axis: number;\n  buttons: number;\n}\n", "import { Class } from '../Class';\nimport { Engine, ScrollPreventionMode } from '../Engine';\nimport { Pointer, PointerType } from './Pointer';\nimport {\n  PointerEvent,\n  WheelEvent,\n  NativePointerButton,\n  PointerButton,\n  WheelDeltaMode,\n  createPointerEventByName,\n  PointerLeaveEvent,\n  PointerEnterEvent\n} from './PointerEvents';\nimport { GameEvent } from '../Events';\n\nimport * as Events from '../Events';\nimport * as Util from '../Util/Util';\nimport { GlobalCoordinates, Vector } from '../Algebra';\nimport { CapturePointer } from '../Traits/CapturePointer';\nimport { Actor } from '../Actor';\n\ninterface TouchEvent extends Event {\n  altKey: boolean;\n  changedTouches: Touch[];\n  ctrlKey: boolean;\n  metaKey: boolean;\n  shiftKey: boolean;\n  targetTouches: Touch[];\n  touches: Touch[];\n  type: string;\n  target: Element;\n}\n\ninterface Touch {\n  identifier: number;\n  screenX: number;\n  screenY: number;\n  clientX: number;\n  clientY: number;\n  pageX: number;\n  pageY: number;\n  radiusX: number;\n  radiusY: number;\n  rotationAngle: number;\n  force: number;\n  target: Element;\n}\n\n/**\n * A constant used to normalize wheel events across different browsers\n *\n * This normalization factor is pulled from https://developer.mozilla.org/en-US/docs/Web/Events/wheel#Listening_to_this_event_across_browser\n */\nconst ScrollWheelNormalizationFactor = -1 / 40;\n\n/**\n * Handles pointer events (mouse, touch, stylus, etc.) and normalizes to\n * [W3C Pointer Events](http://www.w3.org/TR/pointerevents/).\n *\n * [[include:Pointers.md]]\n */\nexport class Pointers extends Class {\n  private _engine: Engine;\n\n  private _pointerDown: PointerEvent[] = [];\n  private _pointerUp: PointerEvent[] = [];\n  private _pointerMove: PointerEvent[] = [];\n  private _pointerCancel: PointerEvent[] = [];\n  private _wheel: WheelEvent[] = [];\n  private _pointers: Pointer[] = [];\n  private _activePointers: number[] = [];\n\n  constructor(engine: Engine) {\n    super();\n\n    this._engine = engine;\n    this._pointers.push(new Pointer());\n    this._activePointers = [-1];\n    this.primary = this._pointers[0];\n  }\n\n  public on(eventName: Events.up, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.down, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.move, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.enter, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.leave, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.cancel, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.wheel, handler: (event: WheelEvent) => void): void;\n  public on(eventName: string, handler: (event: GameEvent<any>) => void): void;\n  public on(eventName: string, handler: (event: any) => void): void {\n    super.on(eventName, handler);\n  }\n\n  /**\n   * Primary pointer (mouse, 1 finger, stylus, etc.)\n   */\n  public primary: Pointer;\n\n  /**\n   * Initializes pointer event listeners\n   */\n  public init(target?: GlobalEventHandlers): void {\n    target = target || this._engine.canvas;\n\n    // Touch Events\n    target.addEventListener('touchstart', this._handleTouchEvent('down', this._pointerDown));\n    target.addEventListener('touchend', this._handleTouchEvent('up', this._pointerUp));\n    target.addEventListener('touchmove', this._handleTouchEvent('move', this._pointerMove));\n    target.addEventListener('touchcancel', this._handleTouchEvent('cancel', this._pointerCancel));\n\n    // W3C Pointer Events\n    // Current: IE11, IE10\n    if ((<any>window).PointerEvent) {\n      // IE11\n      this._engine.canvas.style.touchAction = 'none';\n      target.addEventListener('pointerdown', this._handlePointerEvent('down', this._pointerDown));\n      target.addEventListener('pointerup', this._handlePointerEvent('up', this._pointerUp));\n      target.addEventListener('pointermove', this._handlePointerEvent('move', this._pointerMove));\n      target.addEventListener('pointercancel', this._handlePointerEvent('cancel', this._pointerCancel));\n    } else if ((<any>window).MSPointerEvent) {\n      // IE10\n      (this._engine.canvas.style as any).msTouchAction = 'none';\n      target.addEventListener('MSPointerDown', this._handlePointerEvent('down', this._pointerDown));\n      target.addEventListener('MSPointerUp', this._handlePointerEvent('up', this._pointerUp));\n      target.addEventListener('MSPointerMove', this._handlePointerEvent('move', this._pointerMove));\n      target.addEventListener('MSPointerCancel', this._handlePointerEvent('cancel', this._pointerCancel));\n    } else {\n      // Mouse Events\n      target.addEventListener('mousedown', this._handleMouseEvent('down', this._pointerDown));\n      target.addEventListener('mouseup', this._handleMouseEvent('up', this._pointerUp));\n      target.addEventListener('mousemove', this._handleMouseEvent('move', this._pointerMove));\n    }\n\n    // MDN MouseWheelEvent\n    const wheelOptions = {\n      passive: !(\n        this._engine.pageScrollPreventionMode === ScrollPreventionMode.All ||\n        this._engine.pageScrollPreventionMode === ScrollPreventionMode.Canvas\n      )\n    };\n    if ('onwheel' in document.createElement('div')) {\n      // Modern Browsers\n      target.addEventListener('wheel', this._handleWheelEvent('wheel', this._wheel), wheelOptions);\n    } else if (document.onmousewheel !== undefined) {\n      // Webkit and IE\n      target.addEventListener('mousewheel', this._handleWheelEvent('wheel', this._wheel), wheelOptions);\n    } else {\n      // Remaining browser and older Firefox\n      target.addEventListener('MozMousePixelScroll', this._handleWheelEvent('wheel', this._wheel), wheelOptions);\n    }\n  }\n\n  /**\n   * Synthesize a pointer event that looks like a real browser event to excalibur\n   * @param eventName\n   * @param pos\n   */\n  public triggerEvent(\n    eventName: 'up' | 'down' | 'move' | 'cancel' | 'wheel',\n    pos: Vector | GlobalCoordinates,\n    button: NativePointerButton = NativePointerButton.Left,\n    pointerType: 'mouse' | 'touch' | 'pen' = 'mouse',\n    pointerId: number = 0\n  ): void {\n    let x = 0;\n    let y = 0;\n    let coords: GlobalCoordinates;\n    if (pos instanceof GlobalCoordinates) {\n      x = pos.pagePos.x;\n      y = pos.pagePos.y;\n      coords = pos;\n    } else {\n      x = pos.x;\n      y = pos.y;\n      coords = new GlobalCoordinates(pos.clone(), pos.clone(), pos.clone());\n    }\n\n    const eventish = {\n      pageX: x,\n      pageY: y,\n      pointerId: pointerId,\n      pointerType: pointerType,\n      button: button,\n      preventDefault: () => {\n        /* do nothing */\n      }\n    };\n\n    switch (eventName) {\n      case 'move':\n        this._handlePointerEvent(eventName, this._pointerMove, coords)(eventish as MSPointerEvent);\n        break;\n      case 'down':\n        this._handlePointerEvent(eventName, this._pointerDown, coords)(eventish as MSPointerEvent);\n        break;\n      case 'up':\n        this._handlePointerEvent(eventName, this._pointerUp, coords)(eventish as MSPointerEvent);\n        break;\n      case 'cancel':\n        this._handlePointerEvent(eventName, this._pointerCancel, coords)(eventish as MSPointerEvent);\n        break;\n    }\n    for (const actor of this._engine.currentScene.actors) {\n      const capturePointer = actor.traits.filter((t) => t instanceof CapturePointer)[0];\n      if (capturePointer) {\n        capturePointer.update(actor, this._engine, 1);\n      }\n    }\n    this.dispatchPointerEvents();\n    this.update();\n  }\n\n  /**\n   * Update all pointer events and pointers, meant to be called at the end of frame\n   */\n  public update(): void {\n    this._pointerUp.length = 0;\n    this._pointerDown.length = 0;\n    this._pointerMove.length = 0;\n    this._pointerCancel.length = 0;\n    this._wheel.length = 0;\n\n    for (let i = 0; i < this._pointers.length; i++) {\n      this._pointers[i].update();\n    }\n  }\n\n  /**\n   * Safely gets a Pointer at a specific index and initializes one if it doesn't yet exist\n   * @param index  The pointer index to retrieve\n   */\n  public at(index: number): Pointer {\n    if (index >= this._pointers.length) {\n      // Ensure there is a pointer to retrieve\n      for (let i = this._pointers.length - 1, max = index; i < max; i++) {\n        this._pointers.push(new Pointer());\n        this._activePointers.push(-1);\n      }\n    }\n\n    return this._pointers[index];\n  }\n\n  /**\n   * Get number of pointers being watched\n   */\n  public count(): number {\n    return this._pointers.length;\n  }\n\n  public checkAndUpdateActorUnderPointer(actor: Actor) {\n    for (const pointer of this._pointers) {\n      if (pointer.checkActorUnderPointer(actor)) {\n        pointer.addActorUnderPointer(actor);\n      } else {\n        pointer.removeActorUnderPointer(actor);\n      }\n    }\n  }\n\n  private _dispatchWithBubble(events: PointerEvent[]) {\n    for (const evt of events) {\n      for (const actor of evt.pointer.getActorsForEvents()) {\n        evt.propagate(actor);\n        if (!evt.bubbles) {\n          // if the event stops bubbling part way stop processing\n          break;\n        }\n      }\n    }\n  }\n\n  private _dispatchPointerLeaveEvents() {\n    const lastMoveEventPerPointerPerActor: { [pointerId: string]: PointerEvent } = {};\n    const pointerLeave: PointerLeaveEvent[] = [];\n\n    for (const evt of this._pointerMove) {\n      for (const actor of evt.pointer.getActorsForEvents()) {\n        // If the actor was under the pointer last frame, but not this this frame, pointer left\n        if (\n          !lastMoveEventPerPointerPerActor[evt.pointer.id + '+' + actor.id] &&\n          evt.pointer.wasActorUnderPointer(actor) &&\n          !evt.pointer.isActorAliveUnderPointer(actor)\n        ) {\n          lastMoveEventPerPointerPerActor[evt.pointer.id + '+' + actor.id] = evt;\n          const pe = createPointerEventByName(\n            'leave',\n            new GlobalCoordinates(evt.worldPos, evt.pagePos, evt.screenPos),\n            evt.pointer,\n            evt.index,\n            evt.pointerType,\n            evt.button,\n            evt.ev\n          );\n\n          pe.propagate(actor);\n          pointerLeave.push(<PointerLeaveEvent>pe);\n        }\n      }\n    }\n    return pointerLeave;\n  }\n\n  private _dispatchPointerEnterEvents() {\n    const lastMoveEventPerPointer: { [pointerId: number]: PointerEvent } = {};\n    const pointerEnter: PointerEnterEvent[] = [];\n\n    for (const evt of this._pointerMove) {\n      for (const actor of evt.pointer.getActorsForEvents()) {\n        // If the actor was not under the pointer last frame, but it is this frame, pointer entered\n        if (\n          !lastMoveEventPerPointer[evt.pointer.id] &&\n          !evt.pointer.wasActorUnderPointer(actor) &&\n          evt.pointer.isActorAliveUnderPointer(actor)\n        ) {\n          lastMoveEventPerPointer[evt.pointer.id] = evt;\n          const pe = createPointerEventByName(\n            'enter',\n            new GlobalCoordinates(evt.worldPos, evt.pagePos, evt.screenPos),\n            evt.pointer,\n            evt.index,\n            evt.pointerType,\n            evt.button,\n            evt.ev\n          );\n          pe.propagate(actor);\n          pointerEnter.push(<PointerEnterEvent>pe);\n          // if pointer is dragging set the drag target\n          if (evt.pointer.isDragging) {\n            evt.pointer.dragTarget = actor;\n          }\n        }\n      }\n    }\n    return pointerEnter;\n  }\n\n  public dispatchPointerEvents() {\n    this._dispatchWithBubble(this._pointerDown);\n    this._dispatchWithBubble(this._pointerUp);\n    this._dispatchWithBubble(this._pointerMove);\n    this._dispatchPointerLeaveEvents();\n    this._dispatchPointerEnterEvents();\n    this._dispatchWithBubble(this._pointerCancel);\n\n    // TODO some duplication here\n    for (const evt of this._wheel) {\n      for (const actor of this._pointers[evt.index].getActorsUnderPointer()) {\n        this._propagateWheelPointerEvent(actor, evt);\n        if (!evt.bubbles) {\n          // if the event stops bubbling part way stop processing\n          break;\n        }\n      }\n    }\n  }\n\n  private _propagateWheelPointerEvent(actor: Actor, wheelEvent: WheelEvent) {\n    actor.emit('pointerwheel', wheelEvent);\n\n    // Recurse and propagate\n    if (wheelEvent.bubbles && actor.parent) {\n      this._propagateWheelPointerEvent(actor.parent, wheelEvent);\n    }\n  }\n\n  private _handleMouseEvent(eventName: string, eventArr: PointerEvent[]) {\n    return (e: MouseEvent) => {\n      e.preventDefault();\n\n      const pointer = this.at(0);\n      const coordinates = GlobalCoordinates.fromPagePosition(e.pageX, e.pageY, this._engine);\n      const pe = createPointerEventByName(\n        eventName,\n        coordinates,\n        pointer,\n        0,\n        PointerType.Mouse,\n        this._nativeButtonToPointerButton(e.button),\n        e\n      );\n\n      eventArr.push(pe);\n      pointer.eventDispatcher.emit(eventName, pe);\n    };\n  }\n\n  private _handleTouchEvent(eventName: string, eventArr: PointerEvent[]) {\n    return (e: TouchEvent) => {\n      e.preventDefault();\n      for (let i = 0, len = e.changedTouches.length; i < len; i++) {\n        const index = this._pointers.length > 1 ? this._getPointerIndex(e.changedTouches[i].identifier) : 0;\n        if (index === -1) {\n          continue;\n        }\n\n        const pointer = this.at(index);\n        const coordinates = GlobalCoordinates.fromPagePosition(e.changedTouches[i].pageX, e.changedTouches[i].pageY, this._engine);\n        const pe = createPointerEventByName(eventName, coordinates, pointer, index, PointerType.Touch, PointerButton.Unknown, e);\n\n        eventArr.push(pe);\n        pointer.eventDispatcher.emit(eventName, pe);\n        // only with multi-pointer\n        if (this._pointers.length > 1) {\n          if (eventName === 'up') {\n            // remove pointer ID from pool when pointer is lifted\n            this._activePointers[index] = -1;\n          } else if (eventName === 'down') {\n            // set pointer ID to given index\n            this._activePointers[index] = e.changedTouches[i].identifier;\n          }\n        }\n      }\n    };\n  }\n\n  private _handlePointerEvent(eventName: string, eventArr: PointerEvent[], coords?: GlobalCoordinates) {\n    return (e: MSPointerEvent) => {\n      e.preventDefault();\n\n      // get the index for this pointer ID if multi-pointer is asked for\n      const index = this._pointers.length > 1 ? this._getPointerIndex(e.pointerId) : 0;\n      if (index === -1) {\n        return;\n      }\n\n      const pointer = this.at(index);\n      const coordinates = coords || GlobalCoordinates.fromPagePosition(e.pageX, e.pageY, this._engine);\n      const pe = createPointerEventByName(\n        eventName,\n        coordinates,\n        pointer,\n        index,\n        this._stringToPointerType(e.pointerType),\n        this._nativeButtonToPointerButton(e.button),\n        e\n      );\n\n      eventArr.push(pe);\n      pointer.eventDispatcher.emit(eventName, pe);\n\n      // only with multi-pointer\n      if (this._pointers.length > 1) {\n        if (eventName === 'up') {\n          // remove pointer ID from pool when pointer is lifted\n          this._activePointers[index] = -1;\n        } else if (eventName === 'down') {\n          // set pointer ID to given index\n          this._activePointers[index] = e.pointerId;\n        }\n      }\n    };\n  }\n\n  private _handleWheelEvent(eventName: string, eventArr: WheelEvent[]) {\n    return (e: MouseWheelEvent) => {\n      // Should we prevent page scroll because of this event\n      if (\n        this._engine.pageScrollPreventionMode === ScrollPreventionMode.All ||\n        (this._engine.pageScrollPreventionMode === ScrollPreventionMode.Canvas && e.target === this._engine.canvas)\n      ) {\n        e.preventDefault();\n      }\n\n      const x: number = e.pageX - Util.getPosition(this._engine.canvas).x;\n      const y: number = e.pageY - Util.getPosition(this._engine.canvas).y;\n      const transformedPoint = this._engine.screenToWorldCoordinates(new Vector(x, y));\n\n      // deltaX, deltaY, and deltaZ are the standard modern properties\n      // wheelDeltaX, wheelDeltaY, are legacy properties in webkit browsers and older IE\n      // e.detail is only used in opera\n\n      const deltaX = e.deltaX || e.wheelDeltaX * ScrollWheelNormalizationFactor || 0;\n      const deltaY =\n        e.deltaY || e.wheelDeltaY * ScrollWheelNormalizationFactor || e.wheelDelta * ScrollWheelNormalizationFactor || e.detail || 0;\n      const deltaZ = e.deltaZ || 0;\n      let deltaMode = WheelDeltaMode.Pixel;\n\n      if (e.deltaMode) {\n        if (e.deltaMode === 1) {\n          deltaMode = WheelDeltaMode.Line;\n        } else if (e.deltaMode === 2) {\n          deltaMode = WheelDeltaMode.Page;\n        }\n      }\n\n      const we = new WheelEvent(transformedPoint.x, transformedPoint.y, e.pageX, e.pageY, x, y, 0, deltaX, deltaY, deltaZ, deltaMode, e);\n\n      eventArr.push(we);\n      this.at(0).eventDispatcher.emit(eventName, we);\n    };\n  }\n\n  /**\n   * Gets the index of the pointer specified for the given pointer ID or finds the next empty pointer slot available.\n   * This is required because IE10/11 uses incrementing pointer IDs so we need to store a mapping of ID => idx\n   */\n  private _getPointerIndex(pointerId: number) {\n    let idx;\n    if ((idx = this._activePointers.indexOf(pointerId)) > -1) {\n      return idx;\n    }\n\n    for (let i = 0; i < this._activePointers.length; i++) {\n      if (this._activePointers[i] === -1) {\n        return i;\n      }\n    }\n\n    // ignore pointer because game isn't watching\n    return -1;\n  }\n\n  private _nativeButtonToPointerButton(s: NativePointerButton): PointerButton {\n    switch (s) {\n      case NativePointerButton.NoButton:\n        return PointerButton.NoButton;\n      case NativePointerButton.Left:\n        return PointerButton.Left;\n      case NativePointerButton.Middle:\n        return PointerButton.Middle;\n      case NativePointerButton.Right:\n        return PointerButton.Right;\n      case NativePointerButton.Unknown:\n        return PointerButton.Unknown;\n      default:\n        return Util.fail(s);\n    }\n  }\n\n  private _stringToPointerType(s: string) {\n    switch (s) {\n      case 'touch':\n        return PointerType.Touch;\n      case 'mouse':\n        return PointerType.Mouse;\n      case 'pen':\n        return PointerType.Pen;\n      default:\n        return PointerType.Unknown;\n    }\n  }\n}\n", "export interface NativeEventable {\n  addEventListener(name: string, handler: (...any: any[]) => any): any;\n  removeEventListener(name: string, handler: (...any: any[]) => any): any;\n}\n\nexport class BrowserComponent<T extends NativeEventable> {\n  private _paused = false;\n  private _nativeHandlers: { [key: string]: (handler: any) => void } = {};\n\n  on(eventName: string, handler: (evt: any) => void): void {\n    if (this._nativeHandlers[eventName]) {\n      this.off(eventName, this._nativeHandlers[eventName]);\n    }\n    this._nativeHandlers[eventName] = this._decorate(handler);\n    this.nativeComponent.addEventListener(eventName, this._nativeHandlers[eventName]);\n  }\n  off(eventName: string, handler?: (event: any) => void): void {\n    if (!handler) {\n      handler = this._nativeHandlers[eventName];\n    }\n    this.nativeComponent.removeEventListener(eventName, handler);\n    this._nativeHandlers[eventName] = null;\n  }\n\n  private _decorate(handler: (evt: any) => void): (evt: any) => void {\n    return (evt: any) => {\n      if (!this._paused) {\n        handler(evt);\n      }\n    };\n  }\n\n  public pause() {\n    this._paused = true;\n  }\n\n  public resume() {\n    this._paused = false;\n  }\n\n  public clear() {\n    for (const event in this._nativeHandlers) {\n      this.off(event);\n    }\n  }\n\n  constructor(public nativeComponent: T) {}\n}\n\nexport class BrowserEvents {\n  private _windowComponent: BrowserComponent<Window>;\n  private _documentComponent: BrowserComponent<Document>;\n  constructor(private _windowGlobal: Window, private _documentGlobal: Document) {\n    this._windowComponent = new BrowserComponent(this._windowGlobal);\n    this._documentComponent = new BrowserComponent(this._documentGlobal);\n  }\n\n  public get window(): BrowserComponent<Window> {\n    return this._windowComponent;\n  }\n\n  public get document(): BrowserComponent<Document> {\n    return this._documentComponent;\n  }\n\n  public pause() {\n    this.window.pause();\n    this.document.pause();\n  }\n\n  public resume() {\n    this.window.resume();\n    this.document.resume();\n  }\n\n  public clear() {\n    this.window.clear();\n    this.document.clear();\n  }\n}\n", "import { EX_VERSION } from './';\nimport { polyfill } from './Polyfill';\npolyfill();\nimport { CanUpdate, CanDraw, CanInitialize } from './Interfaces/LifecycleEvents';\nimport { Loadable } from './Interfaces/Loadable';\nimport { Promise } from './Promises';\nimport { Vector } from './Algebra';\nimport { Screen, DisplayMode, AbsolutePosition, ScreenDimension } from './Screen';\nimport { ScreenElement } from './ScreenElement';\nimport { Actor } from './Actor';\nimport { Timer } from './Timer';\nimport { TileMap } from './TileMap';\nimport { Animation } from './Drawing/Animation';\nimport { Loader } from './Loader';\nimport { Detector } from './Util/Detector';\nimport {\n  VisibleEvent,\n  HiddenEvent,\n  GameStartEvent,\n  GameStopEvent,\n  PreUpdateEvent,\n  PostUpdateEvent,\n  PreFrameEvent,\n  PostFrameEvent,\n  GameEvent,\n  DeactivateEvent,\n  ActivateEvent,\n  PreDrawEvent,\n  PostDrawEvent,\n  InitializeEvent\n} from './Events';\nimport { CanLoad } from './Interfaces/Loader';\nimport { Logger, LogLevel } from './Util/Log';\nimport { Color } from './Drawing/Color';\nimport { Scene } from './Scene';\nimport { PostProcessor } from './PostProcessing/PostProcessor';\nimport { Debug, DebugStats } from './Debug';\nimport { Class } from './Class';\nimport * as Input from './Input/Index';\nimport * as Events from './Events';\nimport { BrowserEvents } from './Util/Browser';\n\n/**\n * Enum representing the different mousewheel event bubble prevention\n */\nexport enum ScrollPreventionMode {\n  /**\n   * Do not prevent any page scrolling\n   */\n  None,\n  /**\n   * Prevent page scroll if mouse is over the game canvas\n   */\n  Canvas,\n  /**\n   * Prevent all page scrolling via mouse wheel\n   */\n  All\n}\n\n/**\n * Defines the available options to configure the Excalibur engine at constructor time.\n */\nexport interface EngineOptions {\n  /**\n   * Optionally configure the width of the viewport in css pixels\n   */\n  width?: number;\n\n  /**\n   * Optionally configure the height of the viewport in css pixels\n   */\n  height?: number;\n\n  /**\n   * Optionally configure the width & height of the viewport in css pixels.\n   * Use `viewport` instead of [[EngineOptions.width]] and [[EngineOptions.height]], or vice versa.\n   */\n  viewport?: ScreenDimension;\n\n  /**\n   * Optionally specify the size the logical pixel resolution, if not specified it will be width x height.\n   * See [[Resolution]] for common presets.\n   */\n  resolution?: ScreenDimension;\n\n  /**\n   * Optionally specify antialiasing (smoothing), by default true (smooth pixels)\n   */\n  antialiasing?: boolean;\n\n  /**\n   * Optionally configure the native canvas transparent backdrop\n   */\n  enableCanvasTransparency?: boolean;\n\n  /**\n   * Optionally specify the target canvas DOM element to render the game in\n   */\n  canvasElementId?: string;\n\n  /**\n   * Optionally specify the target canvas DOM element directly\n   */\n  canvasElement?: HTMLCanvasElement;\n\n  /**\n   * The [[DisplayMode]] of the game. Depending on this value, [[width]] and [[height]] may be ignored.\n   */\n  displayMode?: DisplayMode;\n\n  /**\n   * Configures the pointer scope. Pointers scoped to the 'Canvas' can only fire events within the canvas viewport; whereas, 'Document'\n   * (default) scoped will fire anywhere on the page.\n   */\n  pointerScope?: Input.PointerScope;\n\n  /**\n   * Suppress boot up console message, which contains the \"powered by Excalibur message\"\n   */\n  suppressConsoleBootMessage?: boolean;\n\n  /**\n   * Suppress minimum browser feature detection, it is not recommended users of excalibur switch this off. This feature ensures that\n   * the currently running browser meets the minimum requirements for running excalibur. This can be useful if running on non-standard\n   * browsers or if there is a bug in excalibur preventing execution.\n   */\n  suppressMinimumBrowserFeatureDetection?: boolean;\n\n  /**\n   * Suppress HiDPI auto detection and scaling, it is not recommended users of excalibur switch off this feature. This feature detects\n   * and scales the drawing canvas appropriately to accommodate HiDPI screens.\n   */\n  suppressHiDPIScaling?: boolean;\n\n  /**\n   * Suppress play button, it is not recommended users of excalibur switch this feature. Some browsers require a user gesture (like a click)\n   * for certain browser features to work like web audio.\n   */\n  suppressPlayButton?: boolean;\n\n  /**\n   * Specify how the game window is to be positioned when the [[DisplayMode.Position]] is chosen. This option MUST be specified\n   * if the DisplayMode is set as [[DisplayMode.Position]]. The position can be either a string or an [[AbsolutePosition]].\n   * String must be in the format of css style background-position. The vertical position must precede the horizontal position in strings.\n   *\n   * Valid String examples: \"top left\", \"top\", \"bottom\", \"middle\", \"middle center\", \"bottom right\"\n   * Valid [[AbsolutePosition]] examples: `{top: 5, right: 10%}`, `{bottom: 49em, left: 10px}`, `{left: 10, bottom: 40}`\n   */\n  position?: string | AbsolutePosition;\n\n  /**\n   * Scroll prevention method.\n   */\n  scrollPreventionMode?: ScrollPreventionMode;\n\n  /**\n   * Optionally set the background color\n   */\n  backgroundColor?: Color;\n}\n\n/**\n * The Excalibur Engine\n *\n * The [[Engine]] is the main driver for a game. It is responsible for\n * starting/stopping the game, maintaining state, transmitting events,\n * loading resources, and managing the scene.\n *\n * [[include:Engine.md]]\n */\nexport class Engine extends Class implements CanInitialize, CanUpdate, CanDraw {\n  /**\n   *\n   */\n  public browser: BrowserEvents;\n\n  /**\n   * Screen abstraction\n   */\n  public screen: Screen;\n\n  /**\n   * Direct access to the engine's canvas element\n   */\n  public canvas: HTMLCanvasElement;\n\n  /**\n   * Direct access to the engine's 2D rendering context\n   */\n  public ctx: CanvasRenderingContext2D;\n\n  /**\n   * Direct access to the canvas element ID, if an ID exists\n   */\n  public canvasElementId: string;\n\n  /**\n   * The width of the game canvas in pixels (physical width component of the\n   * resolution of the canvas element)\n   */\n  public get canvasWidth(): number {\n    return this.screen.canvasWidth;\n  }\n\n  /**\n   * Returns half width of the game canvas in pixels (half physical width component)\n   */\n  public get halfCanvasWidth(): number {\n    return this.screen.halfCanvasWidth;\n  }\n\n  /**\n   * The height of the game canvas in pixels, (physical height component of\n   * the resolution of the canvas element)\n   */\n  public get canvasHeight(): number {\n    return this.screen.canvasHeight;\n  }\n\n  /**\n   * Returns half height of the game canvas in pixels (half physical height component)\n   */\n  public get halfCanvasHeight(): number {\n    return this.screen.halfCanvasHeight;\n  }\n\n  /**\n   * Returns the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n   */\n  public get drawWidth(): number {\n    return this.screen.drawWidth;\n  }\n\n  /**\n   * Returns half the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n   */\n  public get halfDrawWidth(): number {\n    return this.screen.halfDrawWidth;\n  }\n\n  /**\n   * Returns the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n   */\n  public get drawHeight(): number {\n    return this.screen.drawHeight;\n  }\n\n  /**\n   * Returns half the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n   */\n  public get halfDrawHeight(): number {\n    return this.screen.halfDrawHeight;\n  }\n\n  /**\n   * Returns whether excalibur detects the current screen to be HiDPI\n   */\n  public get isHiDpi(): boolean {\n    return this.screen.isHiDpi;\n  }\n\n  /**\n   * Access engine input like pointer, keyboard, or gamepad\n   */\n  public input: Input.EngineInput;\n\n  private _hasStarted: boolean = false;\n\n  /**\n   * Access Excalibur debugging functionality.\n   */\n  public debug: Debug;\n\n  /**\n   * Access [[stats]] that holds frame statistics.\n   */\n  public get stats(): DebugStats {\n    return this.debug.stats;\n  }\n\n  /**\n   * Gets or sets the list of post processors to apply at the end of drawing a frame (such as [[ColorBlindCorrector]])\n   */\n  public postProcessors: PostProcessor[] = [];\n\n  /**\n   * The current [[Scene]] being drawn and updated on screen\n   */\n  public currentScene: Scene;\n\n  /**\n   * The default [[Scene]] of the game, use [[Engine.goToScene]] to transition to different scenes.\n   */\n  public rootScene: Scene;\n\n  /**\n   * Contains all the scenes currently registered with Excalibur\n   */\n  public scenes: { [key: string]: Scene } = {};\n\n  private _animations: AnimationNode[] = [];\n\n  /**\n   * Indicates whether the engine is set to fullscreen or not\n   */\n  public get isFullscreen(): boolean {\n    return this.screen.isFullScreen;\n  }\n\n  /**\n   * Indicates the current [[DisplayMode]] of the engine.\n   */\n  public get displayMode(): DisplayMode {\n    return this.screen.displayMode;\n  }\n\n  private _suppressPlayButton: boolean = false;\n  /**\n   * Returns the calculated pixel ration for use in rendering\n   */\n  public get pixelRatio(): number {\n    return this.screen.pixelRatio;\n  }\n\n  /**\n   * Indicates the current position of the engine. Valid only when DisplayMode is DisplayMode.Position\n   */\n  public position: string | AbsolutePosition;\n  /**\n   * Indicates whether audio should be paused when the game is no longer visible.\n   */\n  public pauseAudioWhenHidden: boolean = true;\n\n  /**\n   * Indicates whether the engine should draw with debug information\n   */\n  public isDebug: boolean = false;\n  public debugColor: Color = new Color(255, 255, 255);\n  /**\n   * Sets the background color for the engine.\n   */\n  public backgroundColor: Color;\n\n  /**\n   * Sets the Transparency for the engine.\n   */\n  public enableCanvasTransparency: boolean = true;\n\n  /**\n   * The action to take when a fatal exception is thrown\n   */\n  public onFatalException = (e: any) => {\n    Logger.getInstance().fatal(e);\n  };\n\n  /**\n   * The mouse wheel scroll prevention mode\n   */\n  public pageScrollPreventionMode: ScrollPreventionMode;\n\n  private _logger: Logger;\n\n  // this is a reference to the current requestAnimationFrame return value\n  private _requestId: number;\n\n  // this determines whether excalibur is compatible with your browser\n  private _compatible: boolean;\n\n  private _timescale: number = 1.0;\n\n  // loading\n  private _loader: CanLoad;\n  private _isLoading: boolean = false;\n\n  private _isInitialized: boolean = false;\n\n  public on(eventName: Events.initialize, handler: (event: Events.InitializeEvent<Engine>) => void): void;\n  public on(eventName: Events.visible, handler: (event: VisibleEvent) => void): void;\n  public on(eventName: Events.hidden, handler: (event: HiddenEvent) => void): void;\n  public on(eventName: Events.start, handler: (event: GameStartEvent) => void): void;\n  public on(eventName: Events.stop, handler: (event: GameStopEvent) => void): void;\n  public on(eventName: Events.preupdate, handler: (event: PreUpdateEvent<Engine>) => void): void;\n  public on(eventName: Events.postupdate, handler: (event: PostUpdateEvent<Engine>) => void): void;\n  public on(eventName: Events.preframe, handler: (event: PreFrameEvent) => void): void;\n  public on(eventName: Events.postframe, handler: (event: PostFrameEvent) => void): void;\n  public on(eventName: Events.predraw, handler: (event: PreDrawEvent) => void): void;\n  public on(eventName: Events.postdraw, handler: (event: PostDrawEvent) => void): void;\n  public on(eventName: string, handler: (event: GameEvent<any>) => void): void;\n  public on(eventName: string, handler: (event: any) => void): void {\n    super.on(eventName, handler);\n  }\n\n  public once(eventName: Events.initialize, handler: (event: Events.InitializeEvent<Engine>) => void): void;\n  public once(eventName: Events.visible, handler: (event: VisibleEvent) => void): void;\n  public once(eventName: Events.hidden, handler: (event: HiddenEvent) => void): void;\n  public once(eventName: Events.start, handler: (event: GameStartEvent) => void): void;\n  public once(eventName: Events.stop, handler: (event: GameStopEvent) => void): void;\n  public once(eventName: Events.preupdate, handler: (event: PreUpdateEvent<Engine>) => void): void;\n  public once(eventName: Events.postupdate, handler: (event: PostUpdateEvent<Engine>) => void): void;\n  public once(eventName: Events.preframe, handler: (event: PreFrameEvent) => void): void;\n  public once(eventName: Events.postframe, handler: (event: PostFrameEvent) => void): void;\n  public once(eventName: Events.predraw, handler: (event: PreDrawEvent) => void): void;\n  public once(eventName: Events.postdraw, handler: (event: PostDrawEvent) => void): void;\n  public once(eventName: string, handler: (event: GameEvent<any>) => void): void;\n  public once(eventName: string, handler: (event: any) => void): void {\n    super.once(eventName, handler);\n  }\n\n  public off(eventName: Events.initialize, handler?: (event: Events.InitializeEvent<Engine>) => void): void;\n  public off(eventName: Events.visible, handler?: (event: VisibleEvent) => void): void;\n  public off(eventName: Events.hidden, handler?: (event: HiddenEvent) => void): void;\n  public off(eventName: Events.start, handler?: (event: GameStartEvent) => void): void;\n  public off(eventName: Events.stop, handler?: (event: GameStopEvent) => void): void;\n  public off(eventName: Events.preupdate, handler?: (event: PreUpdateEvent<Engine>) => void): void;\n  public off(eventName: Events.postupdate, handler?: (event: PostUpdateEvent<Engine>) => void): void;\n  public off(eventName: Events.preframe, handler?: (event: PreFrameEvent) => void): void;\n  public off(eventName: Events.postframe, handler?: (event: PostFrameEvent) => void): void;\n  public off(eventName: Events.predraw, handler?: (event: PreDrawEvent) => void): void;\n  public off(eventName: Events.postdraw, handler?: (event: PostDrawEvent) => void): void;\n  public off(eventName: string, handler?: (event: GameEvent<any>) => void): void;\n  public off(eventName: string, handler?: (event: any) => void): void {\n    super.off(eventName, handler);\n  }\n\n  /**\n   * Default [[EngineOptions]]\n   */\n  private static _DefaultEngineOptions: EngineOptions = {\n    width: 0,\n    height: 0,\n    enableCanvasTransparency: true,\n    canvasElementId: '',\n    canvasElement: undefined,\n    pointerScope: Input.PointerScope.Document,\n    suppressConsoleBootMessage: null,\n    suppressMinimumBrowserFeatureDetection: null,\n    suppressHiDPIScaling: null,\n    suppressPlayButton: null,\n    scrollPreventionMode: ScrollPreventionMode.Canvas,\n    backgroundColor: Color.fromHex('#2185d0') // Excalibur blue\n  };\n\n  /**\n   * Creates a new game using the given [[EngineOptions]]. By default, if no options are provided,\n   * the game will be rendered full screen (taking up all available browser window space).\n   * You can customize the game rendering through [[EngineOptions]].\n   *\n   * Example:\n   *\n   * ```js\n   * var game = new ex.Engine({\n   *   width: 0, // the width of the canvas\n   *   height: 0, // the height of the canvas\n   *   enableCanvasTransparency: true, // the transparencySection of the canvas\n   *   canvasElementId: '', // the DOM canvas element ID, if you are providing your own\n   *   displayMode: ex.DisplayMode.FullScreen, // the display mode\n   *   pointerScope: ex.Input.PointerScope.Document, // the scope of capturing pointer (mouse/touch) events\n   *   backgroundColor: ex.Color.fromHex('#2185d0') // background color of the engine\n   * });\n   *\n   * // call game.start, which is a Promise\n   * game.start().then(function () {\n   *   // ready, set, go!\n   * });\n   * ```\n   */\n  constructor(options?: EngineOptions) {\n    super();\n\n    options = { ...Engine._DefaultEngineOptions, ...options };\n\n    // Initialize browser events facade\n    this.browser = new BrowserEvents(window, document);\n\n    // Check compatibility\n    const detector = new Detector();\n    if (!options.suppressMinimumBrowserFeatureDetection && !(this._compatible = detector.test())) {\n      const message = document.createElement('div');\n      message.innerText = 'Sorry, your browser does not support all the features needed for Excalibur';\n      document.body.appendChild(message);\n\n      detector.failedTests.forEach(function (test) {\n        const testMessage = document.createElement('div');\n        testMessage.innerText = 'Browser feature missing ' + test;\n        document.body.appendChild(testMessage);\n      });\n\n      if (options.canvasElementId) {\n        const canvas = document.getElementById(options.canvasElementId);\n        if (canvas) {\n          canvas.parentElement.removeChild(canvas);\n        }\n      }\n\n      return;\n    } else {\n      this._compatible = true;\n    }\n\n    // Use native console API for color fun\n    // eslint-disable-next-line no-console\n    if (console.log && !options.suppressConsoleBootMessage) {\n      // eslint-disable-next-line no-console\n      console.log(\n        `%cPowered by Excalibur.js (v${EX_VERSION})`,\n        'background: #176BAA; color: white; border-radius: 5px; padding: 15px; font-size: 1.5em; line-height: 80px;'\n      );\n      // eslint-disable-next-line no-console\n      console.log('\\n\\\n      /| ________________\\n\\\nO|===|* >________________>\\n\\\n      \\\\|');\n      // eslint-disable-next-line no-console\n      console.log('Visit', 'http://excaliburjs.com', 'for more information');\n    }\n\n    // Suppress play button\n    if (options.suppressPlayButton) {\n      this._suppressPlayButton = true;\n    }\n\n    this._logger = Logger.getInstance();\n\n    // If debug is enabled, let's log browser features to the console.\n    if (this._logger.defaultLevel === LogLevel.Debug) {\n      detector.logBrowserFeatures();\n    }\n\n    this._logger.debug('Building engine...');\n\n    this.canvasElementId = options.canvasElementId;\n\n    if (options.canvasElementId) {\n      this._logger.debug('Using Canvas element specified: ' + options.canvasElementId);\n      this.canvas = <HTMLCanvasElement>document.getElementById(options.canvasElementId);\n    } else if (options.canvasElement) {\n      this._logger.debug('Using Canvas element specified:', options.canvasElement);\n      this.canvas = options.canvasElement;\n    } else {\n      this._logger.debug('Using generated canvas element');\n      this.canvas = <HTMLCanvasElement>document.createElement('canvas');\n    }\n\n    let displayMode = options.displayMode ?? DisplayMode.Fixed;\n    if ((options.width && options.height) || options.viewport) {\n      if (options.displayMode === undefined) {\n        displayMode = DisplayMode.Fixed;\n      }\n      this._logger.debug('Engine viewport is size ' + options.width + ' x ' + options.height);\n    } else if (!options.displayMode) {\n      this._logger.debug('Engine viewport is fullscreen');\n      displayMode = DisplayMode.FullScreen;\n    }\n\n    // eslint-disable-next-line\n    this.ctx = this.canvas.getContext('2d', { alpha: this.enableCanvasTransparency });\n\n    this.screen = new Screen({\n      canvas: this.canvas,\n      context: this.ctx,\n      antialiasing: options.antialiasing ?? true,\n      browser: this.browser,\n      viewport: options.viewport ?? { width: options.width, height: options.height },\n      resolution: options.resolution,\n      displayMode,\n      position: options.position,\n      pixelRatio: options.suppressHiDPIScaling ? 1 : null\n    });\n\n    this.screen.applyResolutionAndViewport();\n\n    if (options.backgroundColor) {\n      this.backgroundColor = options.backgroundColor.clone();\n    }\n\n    this.enableCanvasTransparency = options.enableCanvasTransparency;\n\n    this._loader = new Loader();\n    this.debug = new Debug(this);\n\n    this._initialize(options);\n\n    this.rootScene = this.currentScene = new Scene(this);\n\n    this.addScene('root', this.rootScene);\n    this.goToScene('root');\n  }\n\n  /**\n   * Returns a BoundingBox of the top left corner of the screen\n   * and the bottom right corner of the screen.\n   */\n  public getWorldBounds() {\n    return this.screen.getWorldBounds();\n  }\n\n  /**\n   * Gets the current engine timescale factor (default is 1.0 which is 1:1 time)\n   */\n  public get timescale() {\n    return this._timescale;\n  }\n\n  /**\n   * Sets the current engine timescale factor. Useful for creating slow-motion effects or fast-forward effects\n   * when using time-based movement.\n   */\n  public set timescale(value: number) {\n    if (value <= 0) {\n      Logger.getInstance().error('Cannot set engine.timescale to a value of 0 or less than 0.');\n      return;\n    }\n\n    this._timescale = value;\n  }\n\n  /**\n   * Plays a sprite animation on the screen at the specified `x` and `y`\n   * (in game coordinates, not screen pixels). These animations play\n   * independent of actors, and will be cleaned up internally as soon\n   * as they are complete. Note animations that loop will never be\n   * cleaned up.\n   *\n   * @param animation  Animation to play\n   * @param x          x game coordinate to play the animation\n   * @param y          y game coordinate to play the animation\n   */\n  public playAnimation(animation: Animation, x: number, y: number) {\n    this._animations.push(new AnimationNode(animation, x, y));\n  }\n\n  /**\n   * Adds a [[TileMap]] to the [[currentScene]], once this is done the TileMap\n   * will be drawn and updated.\n   */\n  public addTileMap(tileMap: TileMap) {\n    this.currentScene.addTileMap(tileMap);\n  }\n\n  /**\n   * Removes a [[TileMap]] from the [[currentScene]], it will no longer be drawn or updated.\n   */\n  public removeTileMap(tileMap: TileMap) {\n    this.currentScene.removeTileMap(tileMap);\n  }\n\n  /**\n   * Adds a [[Timer]] to the [[currentScene]].\n   * @param timer  The timer to add to the [[currentScene]].\n   */\n  public addTimer(timer: Timer): Timer {\n    return this.currentScene.addTimer(timer);\n  }\n\n  /**\n   * Removes a [[Timer]] from the [[currentScene]].\n   * @param timer  The timer to remove to the [[currentScene]].\n   */\n  public removeTimer(timer: Timer): Timer {\n    return this.currentScene.removeTimer(timer);\n  }\n\n  /**\n   * Adds a [[Scene]] to the engine, think of scenes in Excalibur as you\n   * would levels or menus.\n   *\n   * @param key  The name of the scene, must be unique\n   * @param scene The scene to add to the engine\n   */\n  public addScene(key: string, scene: Scene) {\n    if (this.scenes[key]) {\n      this._logger.warn('Scene', key, 'already exists overwriting');\n    }\n    this.scenes[key] = scene;\n  }\n\n  /**\n   * Removes a [[Scene]] instance from the engine\n   * @param scene  The scene to remove\n   */\n  public removeScene(scene: Scene): void;\n  /**\n   * Removes a scene from the engine by key\n   * @param key  The scene key to remove\n   */\n  public removeScene(key: string): void;\n  /**\n   * @internal\n   */\n  public removeScene(entity: any): void {\n    if (entity instanceof Scene) {\n      // remove scene\n      for (const key in this.scenes) {\n        if (this.scenes.hasOwnProperty(key)) {\n          if (this.scenes[key] === entity) {\n            delete this.scenes[key];\n          }\n        }\n      }\n    }\n\n    if (typeof entity === 'string') {\n      // remove scene\n      delete this.scenes[entity];\n    }\n  }\n\n  /**\n   * Adds a [[Scene]] to the engine, think of scenes in Excalibur as you\n   * would levels or menus.\n   * @param sceneKey  The key of the scene, must be unique\n   * @param scene     The scene to add to the engine\n   */\n  public add(sceneKey: string, scene: Scene): void;\n  /**\n   * Adds a [[Timer]] to the [[currentScene]].\n   * @param timer  The timer to add to the [[currentScene]].\n   */\n  public add(timer: Timer): void;\n  /**\n   * Adds a [[TileMap]] to the [[currentScene]], once this is done the TileMap\n   * will be drawn and updated.\n   */\n  public add(tileMap: TileMap): void;\n  /**\n   * Adds an actor to the [[currentScene]] of the game. This is synonymous\n   * to calling `engine.currentScene.add(actor)`.\n   *\n   * Actors can only be drawn if they are a member of a scene, and only\n   * the [[currentScene]] may be drawn or updated.\n   *\n   * @param actor  The actor to add to the [[currentScene]]\n   */\n  public add(actor: Actor): void;\n\n  /**\n   * Adds a [[ScreenElement]] to the [[currentScene]] of the game,\n   * ScreenElements do not participate in collisions, instead the\n   * remain in the same place on the screen.\n   * @param screenElement  The ScreenElement to add to the [[currentScene]]\n   */\n  public add(screenElement: ScreenElement): void;\n  public add(entity: any): void {\n    if (entity instanceof ScreenElement) {\n      this.currentScene.addScreenElement(entity);\n      return;\n    }\n    if (entity instanceof Actor) {\n      this._addChild(entity);\n    }\n    if (entity instanceof Timer) {\n      this.addTimer(entity);\n    }\n\n    if (entity instanceof TileMap) {\n      this.addTileMap(entity);\n    }\n\n    if (arguments.length === 2) {\n      this.addScene(<string>arguments[0], <Scene>arguments[1]);\n    }\n  }\n\n  /**\n   * Removes a scene instance from the engine\n   * @param scene  The scene to remove\n   */\n  public remove(scene: Scene): void;\n  /**\n   * Removes a scene from the engine by key\n   * @param sceneKey  The scene to remove\n   */\n  public remove(sceneKey: string): void;\n  /**\n   * Removes a [[Timer]] from the [[currentScene]].\n   * @param timer  The timer to remove to the [[currentScene]].\n   */\n  public remove(timer: Timer): void;\n  /**\n   * Removes a [[TileMap]] from the [[currentScene]], it will no longer be drawn or updated.\n   */\n  public remove(tileMap: TileMap): void;\n  /**\n   * Removes an actor from the [[currentScene]] of the game. This is synonymous\n   * to calling `engine.currentScene.removeChild(actor)`.\n   * Actors that are removed from a scene will no longer be drawn or updated.\n   *\n   * @param actor  The actor to remove from the [[currentScene]].\n   */\n  public remove(actor: Actor): void;\n  /**\n   * Removes a [[ScreenElement]] to the scene, it will no longer be drawn or updated\n   * @param screenElement  The ScreenElement to remove from the [[currentScene]]\n   */\n  public remove(screenElement: ScreenElement): void;\n  public remove(entity: any): void {\n    if (entity instanceof ScreenElement) {\n      this.currentScene.removeScreenElement(entity);\n      return;\n    }\n    if (entity instanceof Actor) {\n      this._removeChild(entity);\n    }\n    if (entity instanceof Timer) {\n      this.removeTimer(entity);\n    }\n\n    if (entity instanceof TileMap) {\n      this.removeTileMap(entity);\n    }\n\n    if (entity instanceof Scene) {\n      this.removeScene(entity);\n    }\n\n    if (typeof entity === 'string') {\n      this.removeScene(entity);\n    }\n  }\n\n  /**\n   * Adds an actor to the [[currentScene]] of the game. This is synonymous\n   * to calling `engine.currentScene.add(actor)`.\n   *\n   * Actors can only be drawn if they are a member of a scene, and only\n   * the [[currentScene]] may be drawn or updated.\n   *\n   * @param actor  The actor to add to the [[currentScene]]\n   */\n  protected _addChild(actor: Actor) {\n    this.currentScene.add(actor);\n  }\n\n  /**\n   * Removes an actor from the [[currentScene]] of the game. This is synonymous\n   * to calling `engine.currentScene.remove(actor)`.\n   * Actors that are removed from a scene will no longer be drawn or updated.\n   *\n   * @param actor  The actor to remove from the [[currentScene]].\n   */\n  protected _removeChild(actor: Actor) {\n    this.currentScene.remove(actor);\n  }\n\n  /**\n   * Changes the currently updating and drawing scene to a different,\n   * named scene. Calls the [[Scene]] lifecycle events.\n   * @param key  The key of the scene to transition to.\n   */\n  public goToScene(key: string) {\n    if (this.scenes[key]) {\n      const oldScene = this.currentScene;\n      const newScene = this.scenes[key];\n\n      this._logger.debug('Going to scene:', key);\n\n      // only deactivate when initialized\n      if (this.currentScene.isInitialized) {\n        this.currentScene._deactivate.call(this.currentScene, [oldScene, newScene]);\n        this.currentScene.eventDispatcher.emit('deactivate', new DeactivateEvent(newScene, this.currentScene));\n      }\n\n      // set current scene to new one\n      this.currentScene = newScene;\n      this.screen.setCurrentCamera(newScene.camera);\n\n      // initialize the current scene if has not been already\n      this.currentScene._initialize(this);\n\n      this.currentScene._activate.call(this.currentScene, [oldScene, newScene]);\n      this.currentScene.eventDispatcher.emit('activate', new ActivateEvent(oldScene, this.currentScene));\n    } else {\n      this._logger.error('Scene', key, 'does not exist!');\n    }\n  }\n\n  /**\n   * Transforms the current x, y from screen coordinates to world coordinates\n   * @param point  Screen coordinate to convert\n   */\n  public screenToWorldCoordinates(point: Vector): Vector {\n    return this.screen.screenToWorldCoordinates(point);\n  }\n\n  /**\n   * Transforms a world coordinate, to a screen coordinate\n   * @param point  World coordinate to convert\n   */\n  public worldToScreenCoordinates(point: Vector): Vector {\n    return this.screen.worldToScreenCoordinates(point);\n  }\n\n  /**\n   * Initializes the internal canvas, rendering context, display mode, and native event listeners\n   */\n  private _initialize(options?: EngineOptions) {\n    this.pageScrollPreventionMode = options.scrollPreventionMode;\n\n    // initialize inputs\n    this.input = {\n      keyboard: new Input.Keyboard(),\n      pointers: new Input.Pointers(this),\n      gamepads: new Input.Gamepads()\n    };\n    this.input.keyboard.init();\n    this.input.pointers.init(options && options.pointerScope === Input.PointerScope.Document ? document : this.canvas);\n    this.input.gamepads.init();\n\n    // Issue #385 make use of the visibility api\n    // https://developer.mozilla.org/en-US/docs/Web/Guide/User_experience/Using_the_Page_Visibility_API\n\n    let hidden: keyof HTMLDocument, visibilityChange: string;\n    if (typeof document.hidden !== 'undefined') {\n      // Opera 12.10 and Firefox 18 and later support\n      hidden = 'hidden';\n      visibilityChange = 'visibilitychange';\n    } else if ('msHidden' in document) {\n      hidden = <keyof HTMLDocument>'msHidden';\n      visibilityChange = 'msvisibilitychange';\n    } else if ('webkitHidden' in document) {\n      hidden = <keyof HTMLDocument>'webkitHidden';\n      visibilityChange = 'webkitvisibilitychange';\n    }\n\n    this.browser.document.on(visibilityChange, () => {\n      if (document[hidden]) {\n        this.eventDispatcher.emit('hidden', new HiddenEvent(this));\n        this._logger.debug('Window hidden');\n      } else {\n        this.eventDispatcher.emit('visible', new VisibleEvent(this));\n        this._logger.debug('Window visible');\n      }\n    });\n\n    if (!this.canvasElementId && !options.canvasElement) {\n      document.body.appendChild(this.canvas);\n    }\n  }\n\n  public onInitialize(_engine: Engine) {\n    // Override me\n  }\n\n  /**\n   * If supported by the browser, this will set the antialiasing flag on the\n   * canvas. Set this to `false` if you want a 'jagged' pixel art look to your\n   * image resources.\n   * @param isSmooth  Set smoothing to true or false\n   */\n  public setAntialiasing(isSmooth: boolean) {\n    this.screen.antialiasing = isSmooth;\n  }\n\n  /**\n   * Return the current smoothing status of the canvas\n   */\n  public getAntialiasing(): boolean {\n    return this.screen.antialiasing;\n  }\n\n  /**\n   * Gets whether the actor is Initialized\n   */\n  public get isInitialized(): boolean {\n    return this._isInitialized;\n  }\n\n  private _overrideInitialize(engine: Engine) {\n    if (!this.isInitialized) {\n      this.onInitialize(engine);\n      super.emit('initialize', new InitializeEvent(engine, this));\n      this._isInitialized = true;\n    }\n  }\n\n  /**\n   * Updates the entire state of the game\n   * @param delta  Number of milliseconds elapsed since the last update.\n   */\n  private _update(delta: number) {\n    if (this._isLoading) {\n      // suspend updates until loading is finished\n      this._loader.update(this, delta);\n      // Update input listeners\n      this.input.keyboard.update();\n      this.input.pointers.update();\n      this.input.gamepads.update();\n      return;\n    }\n    this._overrideInitialize(this);\n    // Publish preupdate events\n    this._preupdate(delta);\n\n    // process engine level events\n    this.currentScene.update(this, delta);\n\n    // update animations\n    // TODO remove\n    this._animations = this._animations.filter(function (a) {\n      return !a.animation.isDone();\n    });\n\n    // Update input listeners\n    this.input.keyboard.update();\n    this.input.pointers.update();\n    this.input.gamepads.update();\n\n    // Publish update event\n    this._postupdate(delta);\n  }\n\n  /**\n   * @internal\n   */\n  public _preupdate(delta: number) {\n    this.emit('preupdate', new PreUpdateEvent(this, delta, this));\n    this.onPreUpdate(this, delta);\n  }\n\n  public onPreUpdate(_engine: Engine, _delta: number) {\n    // Override me\n  }\n\n  /**\n   * @internal\n   */\n  public _postupdate(delta: number) {\n    this.emit('postupdate', new PostUpdateEvent(this, delta, this));\n    this.onPostUpdate(this, delta);\n  }\n\n  public onPostUpdate(_engine: Engine, _delta: number) {\n    // Override me\n  }\n\n  /**\n   * Draws the entire game\n   * @param delta  Number of milliseconds elapsed since the last draw.\n   */\n  private _draw(delta: number) {\n    const ctx = this.ctx;\n    this._predraw(ctx, delta);\n\n    if (this._isLoading) {\n      this._loader.draw(ctx, delta);\n      // Drawing nothing else while loading\n      return;\n    }\n\n    ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n    ctx.fillStyle = this.backgroundColor.toString();\n    ctx.fillRect(0, 0, this.canvasWidth, this.canvasHeight);\n\n    this.currentScene.draw(this.ctx, delta);\n\n    // todo needs to be a better way of doing this\n    let a = 0;\n    const len = this._animations.length;\n    for (a; a < len; a++) {\n      this._animations[a].animation.draw(ctx, this._animations[a].x, this._animations[a].y);\n    }\n\n    // Draw debug information\n    if (this.isDebug) {\n      this.ctx.font = 'Consolas';\n      this.ctx.fillStyle = this.debugColor.toString();\n      const keys = this.input.keyboard.getKeys();\n      for (let j = 0; j < keys.length; j++) {\n        this.ctx.fillText(keys[j].toString() + ' : ' + (Input.Keys[keys[j]] ? Input.Keys[keys[j]] : 'Not Mapped'), 100, 10 * j + 10);\n      }\n\n      this.ctx.fillText('FPS:' + this.stats.currFrame.fps.toFixed(2).toString(), 10, 10);\n    }\n\n    // Post processing\n    for (let i = 0; i < this.postProcessors.length; i++) {\n      this.postProcessors[i].process(this.ctx.getImageData(0, 0, this.canvasWidth, this.canvasHeight), this.ctx);\n    }\n\n    this._postdraw(ctx, delta);\n  }\n\n  /**\n   * @internal\n   */\n  public _predraw(_ctx: CanvasRenderingContext2D, delta: number) {\n    this.emit('predraw', new PreDrawEvent(_ctx, delta, this));\n    this.onPreDraw(_ctx, delta);\n  }\n\n  public onPreDraw(_ctx: CanvasRenderingContext2D, _delta: number) {\n    // Override me\n  }\n\n  /**\n   * @internal\n   */\n  public _postdraw(_ctx: CanvasRenderingContext2D, delta: number) {\n    this.emit('postdraw', new PostDrawEvent(_ctx, delta, this));\n    this.onPostDraw(_ctx, delta);\n  }\n\n  public onPostDraw(_ctx: CanvasRenderingContext2D, _delta: number) {\n    // Override me\n  }\n\n  /**\n   * Starts the internal game loop for Excalibur after loading\n   * any provided assets.\n   * @param loader  Optional [[Loader]] to use to load resources. The default loader is [[Loader]], override to provide your own\n   * custom loader.\n   */\n  public start(loader?: CanLoad): Promise<any> {\n    if (!this._compatible) {\n      const promise = new Promise();\n      return promise.reject('Excalibur is incompatible with your browser');\n    }\n    // Changing resolution invalidates context state, so we need to capture it before applying\n    this.screen.pushResolutionAndViewport();\n    this.screen.resolution = this.screen.viewport;\n    this.screen.applyResolutionAndViewport();\n\n    let loadingComplete: Promise<any>;\n    if (loader) {\n      this._loader = loader;\n      this._loader.suppressPlayButton = this._suppressPlayButton || this._loader.suppressPlayButton;\n      this._loader.wireEngine(this);\n      loadingComplete = this.load(this._loader);\n    } else {\n      loadingComplete = Promise.resolve();\n    }\n\n    loadingComplete.then(() => {\n      this.screen.popResolutionAndViewport();\n      this.screen.applyResolutionAndViewport();\n      this.emit('start', new GameStartEvent(this));\n    });\n\n    if (!this._hasStarted) {\n      this._hasStarted = true;\n      this._logger.debug('Starting game...');\n      this.browser.resume();\n      Engine.createMainLoop(this, window.requestAnimationFrame, Date.now)();\n\n      this._logger.debug('Game started');\n    } else {\n      // Game already started;\n    }\n    return loadingComplete;\n  }\n\n  public static createMainLoop(game: Engine, raf: (func: Function) => number, nowFn: () => number) {\n    let lastTime = nowFn();\n\n    return function mainloop() {\n      if (!game._hasStarted) {\n        return;\n      }\n      try {\n        game._requestId = raf(mainloop);\n        game.emit('preframe', new PreFrameEvent(game, game.stats.prevFrame));\n\n        // Get the time to calculate time-elapsed\n        const now = nowFn();\n        let elapsed = Math.floor(now - lastTime) || 1;\n        // Resolves issue #138 if the game has been paused, or blurred for\n        // more than a 200 milliseconds, reset elapsed time to 1. This improves reliability\n        // and provides more expected behavior when the engine comes back\n        // into focus\n        if (elapsed > 200) {\n          elapsed = 1;\n        }\n        const delta = elapsed * game.timescale;\n\n        // reset frame stats (reuse existing instances)\n        const frameId = game.stats.prevFrame.id + 1;\n        game.stats.currFrame.reset();\n        game.stats.currFrame.id = frameId;\n        game.stats.currFrame.delta = delta;\n        game.stats.currFrame.fps = 1.0 / (delta / 1000);\n\n        const beforeUpdate = nowFn();\n        game._update(delta);\n        const afterUpdate = nowFn();\n        game._draw(delta);\n        const afterDraw = nowFn();\n\n        game.stats.currFrame.duration.update = afterUpdate - beforeUpdate;\n        game.stats.currFrame.duration.draw = afterDraw - afterUpdate;\n\n        lastTime = now;\n\n        game.emit('postframe', new PostFrameEvent(game, game.stats.currFrame));\n        game.stats.prevFrame.reset(game.stats.currFrame);\n      } catch (e) {\n        window.cancelAnimationFrame(game._requestId);\n        game.stop();\n        game.onFatalException(e);\n      }\n    };\n  }\n\n  /**\n   * Stops Excalibur's main loop, useful for pausing the game.\n   */\n  public stop() {\n    if (this._hasStarted) {\n      this.emit('stop', new GameStopEvent(this));\n      this.browser.pause();\n      this._hasStarted = false;\n      this._logger.debug('Game stopped');\n    }\n  }\n\n  /**\n   * Returns the Engine's Running status, Useful for checking whether engine is running or paused.\n   */\n  public isPaused(): boolean {\n    return !this._hasStarted;\n  }\n\n  /**\n   * Takes a screen shot of the current viewport and returns it as an\n   * HTML Image Element.\n   */\n  public screenshot(): HTMLImageElement {\n    const result = new Image();\n    const raw = this.canvas.toDataURL('image/png');\n    result.src = raw;\n    return result;\n  }\n\n  /**\n   * Another option available to you to load resources into the game.\n   * Immediately after calling this the game will pause and the loading screen\n   * will appear.\n   * @param loader  Some [[Loadable]] such as a [[Loader]] collection, [[Sound]], or [[Texture]].\n   */\n  public load(loader: Loadable): Promise<any> {\n    const complete = new Promise<any>();\n\n    this._isLoading = true;\n\n    loader.load().then(() => {\n      if (this._suppressPlayButton) {\n        setTimeout(() => {\n          this._isLoading = false;\n          complete.resolve();\n          // Delay is to give the logo a chance to show, otherwise don't delay\n        }, 500);\n      } else {\n        this._isLoading = false;\n        complete.resolve();\n      }\n    });\n\n    return complete;\n  }\n}\n\n/**\n * @internal\n */\nclass AnimationNode {\n  constructor(public animation: Animation, public x: number, public y: number) {}\n}\n", "import { Engine } from './Engine';\nimport { Actor } from './Actor';\nimport { Sprite } from './Drawing/Sprite';\nimport { Color } from './Drawing/Color';\nimport { Vector } from './Algebra';\nimport * as Util from './Util/Util';\nimport * as DrawUtil from './Util/DrawUtil';\nimport * as Traits from './Traits/Index';\nimport { Configurable } from './Configurable';\nimport { Random } from './Math/Random';\nimport { CollisionType } from './Collision/CollisionType';\n\n/**\n * An enum that represents the types of emitter nozzles\n */\nexport enum EmitterType {\n  /**\n   * Constant for the circular emitter type\n   */\n  Circle,\n  /**\n   * Constant for the rectangular emitter type\n   */\n  Rectangle\n}\n\n/**\n * @hidden\n */\nexport class ParticleImpl {\n  public position: Vector = new Vector(0, 0);\n  public velocity: Vector = new Vector(0, 0);\n  public acceleration: Vector = new Vector(0, 0);\n  public particleRotationalVelocity: number = 0;\n  public currentRotation: number = 0;\n\n  public focus: Vector = null;\n  public focusAccel: number = 0;\n  public opacity: number = 1;\n  public beginColor: Color = Color.White;\n  public endColor: Color = Color.White;\n\n  // Life is counted in ms\n  public life: number = 300;\n  public fadeFlag: boolean = false;\n\n  // Color transitions\n  private _rRate: number = 1;\n  private _gRate: number = 1;\n  private _bRate: number = 1;\n  private _aRate: number = 0;\n  private _currentColor: Color = Color.White;\n\n  public emitter: ParticleEmitter = null;\n  public particleSize: number = 5;\n  public particleSprite: Sprite = null;\n\n  public startSize: number;\n  public endSize: number;\n  public sizeRate: number = 0;\n  public elapsedMultiplier: number = 0;\n\n  constructor(\n    emitterOrConfig: ParticleEmitter | ParticleArgs,\n    life?: number,\n    opacity?: number,\n    beginColor?: Color,\n    endColor?: Color,\n    position?: Vector,\n    velocity?: Vector,\n    acceleration?: Vector,\n    startSize?: number,\n    endSize?: number\n  ) {\n    let emitter = emitterOrConfig;\n    if (emitter && !(emitterOrConfig instanceof ParticleEmitter)) {\n      const config = emitterOrConfig;\n      emitter = config.emitter;\n      life = config.life;\n      opacity = config.opacity;\n      endColor = config.endColor;\n      beginColor = config.beginColor;\n      position = config.position;\n      velocity = config.velocity;\n      acceleration = config.acceleration;\n      startSize = config.startSize;\n      endSize = config.endSize;\n    }\n    this.emitter = <ParticleEmitter>emitter;\n    this.life = life || this.life;\n    this.opacity = opacity || this.opacity;\n    this.endColor = endColor || this.endColor.clone();\n    this.beginColor = beginColor || this.beginColor.clone();\n    this._currentColor = this.beginColor.clone();\n    this.position = position || this.position;\n    this.velocity = velocity || this.velocity;\n    this.acceleration = acceleration || this.acceleration;\n    this._rRate = (this.endColor.r - this.beginColor.r) / this.life;\n    this._gRate = (this.endColor.g - this.beginColor.g) / this.life;\n    this._bRate = (this.endColor.b - this.beginColor.b) / this.life;\n    this._aRate = this.opacity / this.life;\n\n    this.startSize = startSize || 0;\n    this.endSize = endSize || 0;\n\n    if (this.endSize > 0 && this.startSize > 0) {\n      this.sizeRate = (this.endSize - this.startSize) / this.life;\n      this.particleSize = this.startSize;\n    }\n  }\n\n  public kill() {\n    this.emitter.removeParticle(this);\n  }\n\n  public update(delta: number) {\n    this.life = this.life - delta;\n    this.elapsedMultiplier = this.elapsedMultiplier + delta;\n\n    if (this.life < 0) {\n      this.kill();\n    }\n\n    if (this.fadeFlag) {\n      this.opacity = Util.clamp(this._aRate * this.life, 0.0001, 1);\n    }\n\n    if (this.startSize > 0 && this.endSize > 0) {\n      this.particleSize = Util.clamp(\n        this.sizeRate * delta + this.particleSize,\n        Math.min(this.startSize, this.endSize),\n        Math.max(this.startSize, this.endSize)\n      );\n    }\n\n    this._currentColor.r = Util.clamp(this._currentColor.r + this._rRate * delta, 0, 255);\n    this._currentColor.g = Util.clamp(this._currentColor.g + this._gRate * delta, 0, 255);\n    this._currentColor.b = Util.clamp(this._currentColor.b + this._bRate * delta, 0, 255);\n    this._currentColor.a = Util.clamp(this.opacity, 0.0001, 1);\n\n    if (this.focus) {\n      const accel = this.focus\n        .sub(this.position)\n        .normalize()\n        .scale(this.focusAccel)\n        .scale(delta / 1000);\n      this.velocity = this.velocity.add(accel);\n    } else {\n      this.velocity = this.velocity.add(this.acceleration.scale(delta / 1000));\n    }\n    this.position = this.position.add(this.velocity.scale(delta / 1000));\n\n    if (this.particleRotationalVelocity) {\n      this.currentRotation = (this.currentRotation + (this.particleRotationalVelocity * delta) / 1000) % (2 * Math.PI);\n    }\n  }\n\n  public draw(ctx: CanvasRenderingContext2D) {\n    if (this.particleSprite) {\n      this.particleSprite.rotation = this.currentRotation;\n      this.particleSprite.scale.setTo(this.particleSize, this.particleSize);\n      this.particleSprite.draw(ctx, this.position.x, this.position.y);\n      return;\n    }\n\n    this._currentColor.a = Util.clamp(this.opacity, 0.0001, 1);\n    ctx.fillStyle = this._currentColor.toString();\n    ctx.beginPath();\n    ctx.arc(this.position.x, this.position.y, this.particleSize, 0, Math.PI * 2);\n    ctx.fill();\n    ctx.closePath();\n  }\n}\n\n/**\n * [[include:Constructors.md]]\n */\nexport interface ParticleArgs extends Partial<ParticleImpl> {\n  emitter: ParticleEmitter;\n  position?: Vector;\n  velocity?: Vector;\n  acceleration?: Vector;\n  particleRotationalVelocity?: number;\n  currentRotation?: number;\n  particleSize?: number;\n  particleSprite?: Sprite;\n}\n\n/**\n * Particle is used in a [[ParticleEmitter]]\n */\nexport class Particle extends Configurable(ParticleImpl) {\n  constructor(config: ParticleArgs);\n  constructor(\n    emitter: ParticleEmitter,\n    life?: number,\n    opacity?: number,\n    beginColor?: Color,\n    endColor?: Color,\n    position?: Vector,\n    velocity?: Vector,\n    acceleration?: Vector,\n    startSize?: number,\n    endSize?: number\n  );\n  constructor(\n    emitterOrConfig: ParticleEmitter | ParticleArgs,\n    life?: number,\n    opacity?: number,\n    beginColor?: Color,\n    endColor?: Color,\n    position?: Vector,\n    velocity?: Vector,\n    acceleration?: Vector,\n    startSize?: number,\n    endSize?: number\n  ) {\n    super(emitterOrConfig, life, opacity, beginColor, endColor, position, velocity, acceleration, startSize, endSize);\n  }\n}\n\n/**\n * @hidden\n */\nexport class ParticleEmitterImpl extends Actor {\n  private _particlesToEmit: number;\n\n  public numParticles: number = 0;\n\n  /**\n   * Random number generator\n   */\n  public random: Random;\n\n  /**\n   * Gets or sets the isEmitting flag\n   */\n  public isEmitting: boolean = true;\n  /**\n   * Gets or sets the backing particle collection\n   */\n  public particles: Util.Collection<Particle> = null;\n\n  /**\n   * Gets or sets the backing deadParticle collection\n   */\n  public deadParticles: Util.Collection<Particle> = null;\n\n  /**\n   * Gets or sets the minimum particle velocity\n   */\n  public minVel: number = 0;\n  /**\n   * Gets or sets the maximum particle velocity\n   */\n  public maxVel: number = 0;\n\n  /**\n   * Gets or sets the acceleration vector for all particles\n   */\n  public acceleration: Vector = new Vector(0, 0);\n\n  /**\n   * Gets or sets the minimum angle in radians\n   */\n  public minAngle: number = 0;\n  /**\n   * Gets or sets the maximum angle in radians\n   */\n  public maxAngle: number = 0;\n\n  /**\n   * Gets or sets the emission rate for particles (particles/sec)\n   */\n  public emitRate: number = 1; //particles/sec\n  /**\n   * Gets or sets the life of each particle in milliseconds\n   */\n  public particleLife: number = 2000;\n  /**\n   * Gets or sets the opacity of each particle from 0 to 1.0\n   */\n  public opacity: number = 1;\n  /**\n   * Gets or sets the fade flag which causes particles to gradually fade out over the course of their life.\n   */\n  public fadeFlag: boolean = false;\n\n  /**\n   * Gets or sets the optional focus where all particles should accelerate towards\n   */\n  public focus: Vector = null;\n  /**\n   * Gets or sets the acceleration for focusing particles if a focus has been specified\n   */\n  public focusAccel: number = 1;\n  /*\n   * Gets or sets the optional starting size for the particles\n   */\n  public startSize: number = null;\n  /*\n   * Gets or sets the optional ending size for the particles\n   */\n  public endSize: number = null;\n\n  /**\n   * Gets or sets the minimum size of all particles\n   */\n  public minSize: number = 5;\n  /**\n   * Gets or sets the maximum size of all particles\n   */\n  public maxSize: number = 5;\n\n  /**\n   * Gets or sets the beginning color of all particles\n   */\n  public beginColor: Color = Color.White;\n  /**\n   * Gets or sets the ending color of all particles\n   */\n  public endColor: Color = Color.White;\n\n  /**\n   * Gets or sets the sprite that a particle should use\n   * @warning Performance intensive\n   */\n  public particleSprite: Sprite = null;\n\n  /**\n   * Gets or sets the emitter type for the particle emitter\n   */\n  public emitterType: EmitterType = EmitterType.Rectangle;\n\n  /**\n   * Gets or sets the emitter radius, only takes effect when the [[emitterType]] is [[EmitterType.Circle]]\n   */\n  public radius: number = 0;\n\n  /**\n   * Gets or sets the particle rotational speed velocity\n   */\n  public particleRotationalVelocity: number = 0;\n\n  /**\n   * Indicates whether particles should start with a random rotation\n   */\n  public randomRotation: boolean = false;\n\n  /**\n   * @param x       The x position of the emitter\n   * @param y       The y position of the emitter\n   * @param width   The width of the emitter\n   * @param height  The height of the emitter\n   */\n  constructor(xOrConfig?: number | ParticleEmitterArgs, y?: number, width?: number, height?: number) {\n    super(typeof xOrConfig === 'number' ? { pos: new Vector(xOrConfig, y), width: width, height: height } : xOrConfig);\n    this._particlesToEmit = 0;\n    this.body.collider.type = CollisionType.PreventCollision;\n    this.particles = new Util.Collection<Particle>();\n    this.deadParticles = new Util.Collection<Particle>();\n    this.random = new Random();\n\n    // Remove offscreen culling from particle emitters\n    for (let i = 0; i < this.traits.length; i++) {\n      if (this.traits[i] instanceof Traits.OffscreenCulling) {\n        this.traits.splice(i, 1);\n      }\n    }\n  }\n\n  public removeParticle(particle: Particle) {\n    this.deadParticles.push(particle);\n  }\n\n  /**\n   * Causes the emitter to emit particles\n   * @param particleCount  Number of particles to emit right now\n   */\n  public emitParticles(particleCount: number) {\n    for (let i = 0; i < particleCount; i++) {\n      this.particles.push(this._createParticle());\n    }\n  }\n\n  public clearParticles() {\n    this.particles.clear();\n  }\n\n  // Creates a new particle given the constraints of the emitter\n  private _createParticle(): Particle {\n    // todo implement emitter constraints;\n    let ranX = 0;\n    let ranY = 0;\n\n    const angle = Util.randomInRange(this.minAngle, this.maxAngle, this.random);\n    const vel = Util.randomInRange(this.minVel, this.maxVel, this.random);\n    const size = this.startSize || Util.randomInRange(this.minSize, this.maxSize, this.random);\n    const dx = vel * Math.cos(angle);\n    const dy = vel * Math.sin(angle);\n\n    if (this.emitterType === EmitterType.Rectangle) {\n      ranX = Util.randomInRange(this.pos.x, this.pos.x + this.width, this.random);\n      ranY = Util.randomInRange(this.pos.y, this.pos.y + this.height, this.random);\n    } else if (this.emitterType === EmitterType.Circle) {\n      const radius = Util.randomInRange(0, this.radius, this.random);\n      ranX = radius * Math.cos(angle) + this.pos.x;\n      ranY = radius * Math.sin(angle) + this.pos.y;\n    }\n\n    const p = new Particle(\n      this,\n      this.particleLife,\n      this.opacity,\n      this.beginColor,\n      this.endColor,\n      new Vector(ranX, ranY),\n      new Vector(dx, dy),\n      this.acceleration,\n      this.startSize,\n      this.endSize\n    );\n    p.fadeFlag = this.fadeFlag;\n    p.particleSize = size;\n    if (this.particleSprite) {\n      p.particleSprite = this.particleSprite;\n    }\n    p.particleRotationalVelocity = this.particleRotationalVelocity;\n    if (this.randomRotation) {\n      p.currentRotation = Util.randomInRange(0, Math.PI * 2, this.random);\n    }\n    if (this.focus) {\n      p.focus = this.focus.add(new Vector(this.pos.x, this.pos.y));\n      p.focusAccel = this.focusAccel;\n    }\n    return p;\n  }\n\n  public update(engine: Engine, delta: number) {\n    super.update(engine, delta);\n\n    if (this.isEmitting) {\n      this._particlesToEmit += this.emitRate * (delta / 1000);\n      //var numParticles = Math.ceil(this.emitRate * delta / 1000);\n      if (this._particlesToEmit > 1.0) {\n        this.emitParticles(Math.floor(this._particlesToEmit));\n        this._particlesToEmit = this._particlesToEmit - Math.floor(this._particlesToEmit);\n      }\n    }\n\n    this.particles.forEach((p) => p.update(delta));\n    this.deadParticles.forEach((p) => this.particles.removeElement(p));\n    this.deadParticles.clear();\n  }\n\n  public draw(ctx: CanvasRenderingContext2D) {\n    // todo is there a more efficient to draw\n    // possibly use a webgl offscreen canvas and shaders to do particles?\n    this.particles.forEach((p) => p.draw(ctx));\n  }\n\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    super.debugDraw(ctx);\n    ctx.fillStyle = Color.Black.toString();\n    ctx.fillText('Particles: ' + this.particles.count(), this.pos.x, this.pos.y + 20);\n\n    if (this.focus) {\n      ctx.fillRect(this.focus.x + this.pos.x, this.focus.y + this.pos.y, 3, 3);\n      DrawUtil.line(ctx, Color.Yellow, this.focus.x + this.pos.x, this.focus.y + this.pos.y, this.center.x, this.center.y);\n      ctx.fillText('Focus', this.focus.x + this.pos.x, this.focus.y + this.pos.y);\n    }\n  }\n}\n\n/**\n * [[include:Constructors.md]]\n */\nexport interface ParticleEmitterArgs extends Partial<ParticleEmitterImpl> {\n  width?: number;\n  height?: number;\n  isEmitting?: boolean;\n  minVel?: number;\n  maxVel?: number;\n  acceleration?: Vector;\n  minAngle?: number;\n  maxAngle?: number;\n  emitRate?: number;\n  particleLife?: number;\n  opacity?: number;\n  fadeFlag?: boolean;\n  focus?: Vector;\n  focusAccel?: number;\n  startSize?: number;\n  endSize?: number;\n  minSize?: number;\n  maxSize?: number;\n  beginColor?: Color;\n  endColor?: Color;\n  particleSprite?: Sprite;\n  emitterType?: EmitterType;\n  radius?: number;\n  particleRotationalVelocity?: number;\n  randomRotation?: boolean;\n  random?: Random;\n}\n\n/**\n * Using a particle emitter is a great way to create interesting effects\n * in your game, like smoke, fire, water, explosions, etc. `ParticleEmitter`\n * extend [[Actor]] allowing you to use all of the features that come with.\n *\n * [[include:Particles.md]]\n */\nexport class ParticleEmitter extends Configurable(ParticleEmitterImpl) {\n  constructor(config?: ParticleEmitterArgs);\n  constructor(x?: number | ParticleEmitterArgs, y?: number, width?: number, height?: number);\n  constructor(xOrConfig?: number | ParticleEmitterArgs, y?: number, width?: number, height?: number) {\n    super(xOrConfig, y, width, height);\n  }\n}\n", "import { GameEvent } from '../Events';\nimport { Sound } from '../Resources/Sound/Sound';\nimport { Actor } from '../Actor';\nimport { AudioInstance } from '../Resources/Sound/AudioInstance';\n\nexport class MediaEvent extends GameEvent<Sound> {\n  /**\n   * Media event cannot bubble\n   */\n  public set bubbles(_value: boolean) {\n    // stubbed\n  }\n  /**\n   * Media event cannot bubble\n   */\n  public get bubbles(): boolean {\n    return false;\n  }\n  /**\n   * Media event cannot bubble, so they have no path\n   */\n  protected get _path(): Actor[] {\n    return null;\n  }\n  /**\n   * Media event cannot bubble, so they have no path\n   */\n  protected set _path(_val: Actor[]) {\n    // stubbed\n  }\n\n  constructor(public target: Sound, protected _name: string = 'MediaEvent') {\n    super();\n  }\n\n  /**\n   * Prevents event from bubbling\n   */\n  public stopPropagation(): void {\n    /**\n     * Stub\n     */\n  }\n  /**\n   * Action, that calls when event happens\n   */\n  public action(): void {\n    /**\n     * Stub\n     */\n  }\n  /**\n   * Propagate event further through event path\n   */\n  public propagate(): void {\n    /**\n     * Stub\n     */\n  }\n\n  public layPath(_actor: Actor): void {\n    /**\n     * Stub\n     */\n  }\n}\n\nexport class NativeSoundEvent extends MediaEvent {\n  constructor(target: Sound, public track?: AudioInstance) {\n    super(target, 'NativeSoundEvent');\n  }\n}\n\nexport class NativeSoundProcessedEvent extends MediaEvent {\n  public data: string | AudioBuffer;\n\n  constructor(target: Sound, private processedData: string | AudioBuffer) {\n    super(target, 'NativeSoundProcessedEvent');\n\n    this.data = this.processedData;\n  }\n}\n", "export * from './ActionContext';\nexport * from './Actionable';\nexport * from './RotationType';\n\nimport * as actions from './Action';\nexport { actions as Actions };\n\n// legacy Internal.Actions namespace support\nexport const Internal = { Actions: actions };\n", "import { CollisionGroup } from './CollisionGroup';\n\n/**\n * Static class for managing collision groups in excalibur, there is a maximum of 32 collision groups possible in excalibur\n */\nexport class CollisionGroupManager {\n  // using bitmasking the maximum number of groups is 32, because that is the highest 32bit integer that JS can present.\n  private static _STARTING_BIT = 0b1 | 0;\n  private static _MAX_GROUPS = 32;\n  private static _currentGroup = 1;\n  private static _currentBit = CollisionGroupManager._STARTING_BIT;\n  private static _groups: Map<string, CollisionGroup> = new Map<string, CollisionGroup>();\n\n  /**\n   * Create a new named collision group up to a max of 32.\n   * @param name Name for the collision group\n   * @param mask Optionally provide your own 32-bit mask, if none is provide the manager will generate one\n   */\n  public static create(name: string, mask?: number) {\n    if (this._currentGroup > this._MAX_GROUPS) {\n      throw new Error(`Cannot have more than ${this._MAX_GROUPS} collision groups`);\n    }\n    if (this._groups.get(name)) {\n      throw new Error(`Collision group ${name} already exists`);\n    }\n    const group = new CollisionGroup(name, this._currentBit, mask !== undefined ? mask : ~this._currentBit);\n    this._currentBit = (this._currentBit << 1) | 0;\n    this._currentGroup++;\n    this._groups.set(name, group);\n    return group;\n  }\n\n  /**\n   * Get all collision groups currently tracked by excalibur\n   */\n  public static get groups(): CollisionGroup[] {\n    return Array.from(this._groups.values());\n  }\n\n  /**\n   * Get a collision group by it's name\n   * @param name\n   */\n  public static groupByName(name: string) {\n    return this._groups.get(name);\n  }\n\n  /**\n   * Resets the managers internal group management state\n   */\n  public static reset() {\n    this._groups = new Map<string, CollisionGroup>();\n    this._currentBit = this._STARTING_BIT;\n    this._currentGroup = 1;\n  }\n}\n", "import { Color } from './Color';\nimport * as Effects from './SpriteEffects';\n\nimport { Drawable, DrawOptions } from '../Interfaces/Drawable';\nimport { Vector } from '../Algebra';\n\n/**\n * Creates a closed polygon drawing given a list of [[Vector]]s.\n *\n * @warning Use sparingly as Polygons are performance intensive\n */\nexport class Polygon implements Drawable {\n  public flipVertical: boolean;\n  public flipHorizontal: boolean;\n  public drawWidth: number;\n  public drawHeight: number;\n\n  public width: number;\n  public height: number;\n\n  /**\n   * The color to use for the lines of the polygon\n   */\n  public lineColor: Color;\n  /**\n   * The color to use for the interior of the polygon\n   */\n  public fillColor: Color;\n  /**\n   * The width of the lines of the polygon\n   */\n  public lineWidth: number = 5;\n  /**\n   * Indicates whether the polygon is filled or not.\n   */\n  public filled: boolean = false;\n\n  private _points: Vector[] = [];\n  public anchor = Vector.Zero;\n  public offset = Vector.Zero;\n  public rotation: number = 0;\n  public scale = Vector.One;\n  public opacity: number = 1;\n\n  /**\n   * @param points  The vectors to use to build the polygon in order\n   */\n  constructor(points: Vector[]) {\n    this._points = points;\n\n    const minX = this._points.reduce((prev: number, curr: Vector) => {\n      return Math.min(prev, curr.x);\n    }, 0);\n    const maxX = this._points.reduce((prev: number, curr: Vector) => {\n      return Math.max(prev, curr.x);\n    }, 0);\n\n    this.drawWidth = maxX - minX;\n\n    const minY = this._points.reduce((prev: number, curr: Vector) => {\n      return Math.min(prev, curr.y);\n    }, 0);\n    const maxY = this._points.reduce((prev: number, curr: Vector) => {\n      return Math.max(prev, curr.y);\n    }, 0);\n\n    this.drawHeight = maxY - minY;\n\n    this.height = this.drawHeight;\n    this.width = this.drawWidth;\n  }\n\n  /**\n   * @notimplemented Effects are not supported on `Polygon`\n   */\n  public addEffect() {\n    // not supported on polygons\n  }\n  /**\n   * @notimplemented Effects are not supported on `Polygon`\n   */\n  public removeEffect(index: number): void;\n  /**\n   * @notimplemented Effects are not supported on `Polygon`\n   */\n  public removeEffect(effect: Effects.SpriteEffect): void;\n  /**\n   * @notimplemented Effects are not supported on `Polygon`\n   */\n  public removeEffect() {\n    // not supported on polygons\n  }\n\n  /**\n   * @notimplemented Effects are not supported on `Polygon`\n   */\n  public clearEffects() {\n    // not supported on polygons\n  }\n\n  public reset() {\n    //pass\n  }\n\n  /**\n   * Draws the sprite appropriately to the 2D rendering context, at an x and y coordinate.\n   * @param ctx  The 2D rendering context\n   * @param x    The x coordinate of where to draw\n   * @param y    The y coordinate of where to draw\n   */\n  public draw(ctx: CanvasRenderingContext2D, x: number, y: number): void;\n  /**\n   * Draws the sprite with custom options to override internals without mutating them.\n   * @param options\n   */\n  public draw(options: DrawOptions): void;\n  public draw(ctxOrOptions: CanvasRenderingContext2D | DrawOptions, x?: number, y?: number): void {\n    if (ctxOrOptions instanceof CanvasRenderingContext2D) {\n      this._drawWithOptions({ ctx: ctxOrOptions, x, y });\n    } else {\n      this._drawWithOptions(ctxOrOptions);\n    }\n  }\n\n  private _drawWithOptions(options: DrawOptions) {\n    const { ctx, x, y, rotation, drawWidth, drawHeight, anchor, offset, opacity, flipHorizontal, flipVertical } = {\n      ...options,\n      rotation: options.rotation ?? this.rotation,\n      drawWidth: options.drawWidth ?? this.drawWidth,\n      drawHeight: options.drawHeight ?? this.drawHeight,\n      flipHorizontal: options.flipHorizontal ?? this.flipHorizontal,\n      flipVertical: options.flipVertical ?? this.flipVertical,\n      anchor: options.anchor ?? this.anchor,\n      offset: options.offset ?? this.offset,\n      opacity: options.opacity ?? this.opacity\n    };\n\n    const xpoint = drawWidth * anchor.x + offset.x + x;\n    const ypoint = drawHeight * anchor.y + offset.y + y;\n\n    ctx.save();\n    ctx.translate(xpoint, ypoint);\n    ctx.scale(this.scale.x, this.scale.y);\n    ctx.rotate(rotation);\n    ctx.beginPath();\n    ctx.lineWidth = this.lineWidth;\n\n    // Iterate through the supplied points and construct a 'polygon'\n    const firstPoint = this._points[0];\n    ctx.moveTo(firstPoint.x, firstPoint.y);\n\n    let i = 0;\n    const len = this._points.length;\n\n    for (i; i < len; i++) {\n      ctx.lineTo(this._points[i].x, this._points[i].y);\n    }\n\n    ctx.lineTo(firstPoint.x, firstPoint.y);\n    ctx.closePath();\n\n    if (this.filled) {\n      ctx.fillStyle = this.fillColor.toString();\n      ctx.fill();\n    }\n\n    ctx.strokeStyle = this.lineColor.toString();\n\n    if (flipHorizontal) {\n      ctx.translate(drawWidth, 0);\n      ctx.scale(-1, 1);\n    }\n\n    if (flipVertical) {\n      ctx.translate(0, drawHeight);\n      ctx.scale(1, -1);\n    }\n\n    const oldAlpha = ctx.globalAlpha;\n    ctx.globalAlpha = opacity ?? 1;\n    ctx.stroke();\n    ctx.globalAlpha = oldAlpha;\n\n    ctx.restore();\n  }\n}\n", "import { Sprite, SpriteArgs } from './Sprite';\nimport { Animation } from './Animation';\nimport { Color } from './Color';\nimport * as Effects from './SpriteEffects';\n\nimport { Texture } from '../Resources/Texture';\nimport { Engine } from '../Engine';\nimport { Logger } from '../Util/Log';\nimport { TextAlign, BaseAlign } from '../Label';\nimport { Configurable } from '../Configurable';\n\n/**\n * @hidden\n */\nexport class SpriteSheetImpl {\n  public sprites: Sprite[] = [];\n  public image: Texture = null;\n  public columns: number = 0;\n  public rows: number = 0;\n  public spWidth: number = 0;\n  public spHeight: number = 0;\n  public spacing: number = 0;\n  /**\n   * @param image     The backing image texture to build the SpriteSheet\n   * @param columns   The number of columns in the image texture\n   * @param rows      The number of rows in the image texture\n   * @param spWidth   The width of each individual sprite in pixels\n   * @param spHeight  The height of each individual sprite in pixels\n   * @param spacing   The spacing between every sprite in a spritesheet\n   */\n  constructor(\n    imageOrConfigOrSprites: Texture | SpriteSheetArgs | Sprite[],\n    columns?: number,\n    rows?: number,\n    spWidth?: number,\n    spHeight?: number,\n    spacing?: number\n  ) {\n    let loadFromImage: boolean = false;\n    if (imageOrConfigOrSprites instanceof Array) {\n      this.sprites = imageOrConfigOrSprites;\n    } else {\n      if (imageOrConfigOrSprites && !(imageOrConfigOrSprites instanceof Texture)) {\n        this.columns = imageOrConfigOrSprites.columns;\n        this.rows = imageOrConfigOrSprites.rows;\n        this.spWidth = imageOrConfigOrSprites.spWidth;\n        this.spHeight = imageOrConfigOrSprites.spHeight;\n        this.image = imageOrConfigOrSprites.image;\n        this.spacing = imageOrConfigOrSprites.spacing || 0;\n      } else {\n        this.image = <Texture>imageOrConfigOrSprites;\n        this.columns = columns;\n        this.rows = rows;\n        this.spWidth = spWidth;\n        this.spHeight = spHeight;\n        this.spacing = spacing || 0;\n      }\n      this.sprites = new Array(this.columns * this.rows);\n      loadFromImage = true;\n    }\n\n    // Inspect actual image dimensions with preloading\n    if (this.image instanceof Texture) {\n      let isWidthError: boolean = false;\n      let isHeightError: boolean = false;\n      this.image.loaded.then((image: HTMLImageElement) => {\n        isWidthError = this.spWidth * this.columns > image.naturalWidth;\n        isHeightError = this.spHeight * this.rows > image.naturalHeight;\n      });\n      if (isWidthError) {\n        throw new RangeError(\n          `SpriteSheet specified is wider, ` +\n            `${this.columns} cols x ${this.spWidth} pixels > ${this.image.image.naturalWidth} ` +\n            `pixels than image width`\n        );\n      }\n      if (isHeightError) {\n        throw new RangeError(\n          `SpriteSheet specified is taller, ` +\n            `${this.rows} rows x ${this.spHeight} pixels > ${this.image.image.naturalHeight} ` +\n            `pixels than image height`\n        );\n      }\n    }\n\n    if (loadFromImage) {\n      for (let i = 0; i < this.rows; i++) {\n        for (let j = 0; j < this.columns; j++) {\n          this.sprites[j + i * this.columns] = new Sprite(\n            this.image,\n            j * this.spWidth + this.spacing * j + this.spacing,\n            i * this.spHeight + this.spacing * i + this.spacing,\n            this.spWidth,\n            this.spHeight\n          );\n        }\n      }\n    }\n  }\n\n  /**\n   * Create an animation from the this SpriteSheet by listing out the\n   * sprite indices. Sprites are organized in row major order in the SpriteSheet.\n   * @param engine   Reference to the current game [[Engine]]\n   * @param indices  An array of sprite indices to use in the animation\n   * @param speed    The number in milliseconds to display each frame in the animation\n   */\n  public getAnimationByIndices(engine: Engine, indices: number[], speed: number) {\n    let images: Sprite[] = indices.map((index) => {\n      return this.sprites[index];\n    });\n\n    images = images.map(function(i) {\n      return i.clone();\n    });\n    return new Animation(engine, images, speed);\n  }\n\n  /**\n   * Create an animation from the this SpriteSheet by specifying the range of\n   * images with the beginning (inclusive) and ending (exclusive) index\n   * For example `getAnimationBetween(engine, 0, 5, 200)` returns an animation with 5 frames.\n   * @param engine      Reference to the current game Engine\n   * @param beginIndex  The index to start taking frames (inclusive)\n   * @param endIndex    The index to stop taking frames (exclusive)\n   * @param speed       The number in milliseconds to display each frame in the animation\n   */\n  public getAnimationBetween(engine: Engine, beginIndex: number, endIndex: number, speed: number) {\n    let images = this.sprites.slice(beginIndex, endIndex);\n    images = images.map(function(i) {\n      return i.clone();\n    });\n    return new Animation(engine, images, speed);\n  }\n\n  /**\n   * Treat the entire SpriteSheet as one animation, organizing the frames in\n   * row major order.\n   * @param engine  Reference to the current game [[Engine]]\n   * @param speed   The number in milliseconds to display each frame the animation\n   */\n  public getAnimationForAll(engine: Engine, speed: number) {\n    const sprites = this.sprites.map(function(i) {\n      return i.clone();\n    });\n    return new Animation(engine, sprites, speed);\n  }\n\n  /**\n   * Retrieve a specific sprite from the SpriteSheet by its index. Sprites are organized\n   * in row major order in the SpriteSheet.\n   * @param index  The index of the sprite\n   */\n  public getSprite(index: number): Sprite {\n    if (index >= 0 && index < this.sprites.length) {\n      return this.sprites[index];\n    } else {\n      throw new Error('Invalid index: ' + index);\n    }\n  }\n\n  /**\n   * Get an animation with bespoke sprite coordinates. This is useful if the SpriteSheet is\n   * packed and not a uniform width or height. The resulting [[Animation]] will have the height and width of the\n   * largest dimension (width, height) from among the sprite coordinates\n   * @param engine\n   * @param spriteCoordinates\n   * @param speed\n   */\n  public getAnimationByCoords(engine: Engine, spriteCoordinates: SpriteArgs[], speed: number): Animation {\n    let maxWidth: number = 0;\n    let maxHeight: number = 0;\n    const sprites: Sprite[] = new Array(spriteCoordinates.length);\n    for (let i = 0; i < spriteCoordinates.length; i++) {\n      const coord = spriteCoordinates[i];\n      // no need to pass image again if using a spritesheet\n      coord.image = coord.image || this.image;\n      maxWidth = Math.max(maxWidth, coord.drawWidth);\n      maxHeight = Math.max(maxHeight, coord.drawHeight);\n      sprites[i] = new Sprite(coord);\n    }\n\n    const anim = new Animation(engine, sprites, speed);\n\n    anim.drawWidth = maxWidth;\n    anim.drawHeight = maxHeight;\n    return anim;\n  }\n}\n\n/**\n * [[include:Constructors.md]]\n */\nexport interface SpriteSheetArgs extends Partial<SpriteSheetImpl> {\n  image: Texture;\n  sprites?: Sprite[];\n  spWidth: number;\n  spHeight: number;\n  rows: number;\n  columns: number;\n  spacing?: number;\n}\n\n/**\n * Sprite sheets are a useful mechanism for slicing up image resources into\n * separate sprites or for generating in game animations. [[Sprite|Sprites]] are organized\n * in row major order in the [[SpriteSheet]].\n *\n * [[include:SpriteSheets.md]]\n */\nexport class SpriteSheet extends Configurable(SpriteSheetImpl) {\n  constructor(config: SpriteSheetArgs);\n  constructor(sprites: Sprite[]);\n  constructor(image: Texture, columns: number, rows: number, spWidth: number, spHeight: number);\n  constructor(\n    imageOrConfigOrSprites: Texture | SpriteSheetArgs | Sprite[],\n    columns?: number,\n    rows?: number,\n    spWidth?: number,\n    spHeight?: number,\n    spacing?: number\n  ) {\n    super(imageOrConfigOrSprites, columns, rows, spWidth, spHeight, spacing);\n  }\n}\n\nexport class SpriteFontImpl extends SpriteSheet {\n  private _currentColor: Color = Color.Black;\n  private _currentOpacity: Number = 1.0;\n  private _sprites: { [key: string]: Sprite } = {};\n\n  // text shadow\n  private _textShadowOn: boolean = false;\n  private _textShadowDirty: boolean = true;\n  private _textShadowColor: Color = Color.Black;\n  private _textShadowSprites: { [key: string]: Sprite } = {};\n  private _shadowOffsetX: number = 5;\n  private _shadowOffsetY: number = 5;\n  private _alphabet: string;\n  private _caseInsensitive: boolean;\n\n  /**\n   * @param image           The backing image texture to build the SpriteFont\n   * @param alphabet        A string representing all the characters in the image, in row major order.\n   * @param caseInsensitive  Indicate whether this font takes case into account\n   * @param columns         The number of columns of characters in the image\n   * @param rows            The number of rows of characters in the image\n   * @param spWidth         The width of each character in pixels\n   * @param spHeight        The height of each character in pixels\n   */\n  constructor(\n    imageOrConfig: Texture | SpriteFontArgs,\n    alphabet: string,\n    caseInsensitive: boolean,\n    columns: number,\n    rows: number,\n    spWidth: number,\n    spHeight: number,\n    spacing?: number\n  ) {\n    super(\n      imageOrConfig instanceof Texture ?\n        {\n          image: imageOrConfig,\n          spWidth: spWidth,\n          spHeight: spHeight,\n          rows: rows,\n          columns: columns,\n          spacing: spacing || 0\n        }\n        : imageOrConfig\n    );\n\n    if (imageOrConfig && !(imageOrConfig instanceof Texture)) {\n      alphabet = imageOrConfig.alphabet;\n      caseInsensitive = imageOrConfig.caseInsensitive;\n    }\n\n    this._alphabet = alphabet;\n    this._caseInsensitive = caseInsensitive;\n    this._sprites = this.getTextSprites();\n  }\n\n  /**\n   * Returns a dictionary that maps each character in the alphabet to the appropriate [[Sprite]].\n   */\n  public getTextSprites(): { [key: string]: Sprite } {\n    const lookup: { [key: string]: Sprite } = {};\n    for (let i = 0; i < this._alphabet.length; i++) {\n      let char = this._alphabet[i];\n      if (this._caseInsensitive) {\n        char = char.toLowerCase();\n      }\n      lookup[char] = this.sprites[i].clone();\n    }\n    return lookup;\n  }\n\n  /**\n   * Sets the text shadow for sprite fonts\n   * @param offsetX      The x offset in pixels to place the shadow\n   * @param offsetY      The y offset in pixels to place the shadow\n   * @param shadowColor  The color of the text shadow\n   */\n  public setTextShadow(offsetX: number, offsetY: number, shadowColor: Color) {\n    this._textShadowOn = true;\n    this._shadowOffsetX = offsetX;\n    this._shadowOffsetY = offsetY;\n    this._textShadowColor = shadowColor.clone();\n    this._textShadowDirty = true;\n    for (const character in this._sprites) {\n      this._textShadowSprites[character] = this._sprites[character].clone();\n    }\n  }\n\n  /**\n   * Toggles text shadows on or off\n   */\n  public useTextShadow(on: boolean) {\n    this._textShadowOn = on;\n    if (on) {\n      this.setTextShadow(5, 5, this._textShadowColor);\n    }\n  }\n\n  /**\n   * Draws the current sprite font\n   */\n  public draw(ctx: CanvasRenderingContext2D, text: string, x: number, y: number, options: SpriteFontOptions) {\n    options = this._parseOptions(options);\n\n    if (this._currentColor.toString() !== options.color.toString() || this._currentOpacity !== options.opacity) {\n      this._currentOpacity = options.opacity;\n      this._currentColor = options.color;\n      for (const char in this._sprites) {\n        this._sprites[char].clearEffects();\n        this._sprites[char].fill(options.color);\n        this._sprites[char].opacity(options.opacity);\n      }\n    }\n\n    if (this._textShadowOn && this._textShadowDirty && this._textShadowColor) {\n      for (const characterShadow in this._textShadowSprites) {\n        this._textShadowSprites[characterShadow].clearEffects();\n        this._textShadowSprites[characterShadow].addEffect(new Effects.Fill(this._textShadowColor.clone()));\n      }\n      this._textShadowDirty = false;\n    }\n\n    // find the current length of text in pixels\n    const sprite = this.sprites[0];\n\n    // find the current height fo the text in pixels\n    const height = sprite.drawHeight;\n\n    // calculate appropriate scale for font size\n    const scale = options.fontSize / height;\n\n    const length = text.length * sprite.drawWidth * scale + text.length * options.letterSpacing;\n\n    let currX = x;\n    if (options.textAlign === TextAlign.Left || options.textAlign === TextAlign.Start) {\n      currX = x;\n    } else if (options.textAlign === TextAlign.Right || options.textAlign === TextAlign.End) {\n      currX = x - length;\n    } else if (options.textAlign === TextAlign.Center) {\n      currX = x - length / 2;\n    }\n\n    let currY = y - height * scale;\n    if (options.baseAlign === BaseAlign.Top || options.baseAlign === BaseAlign.Hanging) {\n      currY = y;\n    } else if (\n      options.baseAlign === BaseAlign.Ideographic ||\n      options.baseAlign === BaseAlign.Bottom ||\n      options.baseAlign === BaseAlign.Alphabetic\n    ) {\n      currY = y - height * scale;\n    } else if (options.baseAlign === BaseAlign.Middle) {\n      currY = y - (height * scale) / 2;\n    }\n\n    for (let i = 0; i < text.length; i++) {\n      let character = text[i];\n      if (this._caseInsensitive) {\n        character = character.toLowerCase();\n      }\n      try {\n        // if text shadow\n        if (this._textShadowOn) {\n          this._textShadowSprites[character].scale.x = scale;\n          this._textShadowSprites[character].scale.y = scale;\n          this._textShadowSprites[character].draw(ctx, currX + this._shadowOffsetX, currY + this._shadowOffsetY);\n        }\n\n        const charSprite = this._sprites[character];\n        charSprite.scale.x = scale;\n        charSprite.scale.y = scale;\n        charSprite.draw(ctx, currX, currY);\n        currX += charSprite.drawWidth + options.letterSpacing;\n      } catch (e) {\n        Logger.getInstance().error(`SpriteFont Error drawing char ${character}`);\n      }\n    }\n  }\n\n  private _parseOptions(options: SpriteFontOptions): SpriteFontOptions {\n    return {\n      fontSize: options.fontSize || 10,\n      letterSpacing: options.letterSpacing || 0,\n      color: options.color || Color.Black,\n      textAlign: typeof options.textAlign === undefined ? TextAlign.Left : options.textAlign,\n      baseAlign: typeof options.baseAlign === undefined ? BaseAlign.Bottom : options.baseAlign,\n      maxWidth: options.maxWidth || -1,\n      opacity: options.opacity || 0\n    };\n  }\n}\n\n/**\n * Specify various font attributes for sprite fonts\n */\nexport interface SpriteFontOptions {\n  color?: Color;\n  opacity?: number;\n  fontSize?: number;\n  letterSpacing?: number;\n  textAlign?: TextAlign;\n  baseAlign?: BaseAlign;\n  maxWidth?: number;\n}\n\n/**\n * [[include:Constructors.md]]\n */\nexport interface SpriteFontArgs extends SpriteSheetArgs {\n  image: Texture;\n  columns: number;\n  rows: number;\n  spWidth: number;\n  spHeight: number;\n  alphabet: string;\n  caseInsensitive: boolean;\n}\n\n/**\n * Sprite fonts are a used in conjunction with a [[Label]] to specify\n * a particular bitmap as a font. Note that some font features are not\n * supported by Sprite fonts.\n *\n * [[include:SpriteFonts.md]]\n */\nexport class SpriteFont extends Configurable(SpriteFontImpl) {\n  constructor(config: SpriteFontArgs);\n  constructor(image: Texture, alphabet: string, caseInsensitive: boolean, columns: number, rows: number, spWidth: number, spHeight: number);\n  constructor(\n    imageOrConfig: Texture | SpriteFontArgs,\n    alphabet?: string,\n    caseInsensitive?: boolean,\n    columns?: number,\n    rows?: number,\n    spWidth?: number,\n    spHeight?: number,\n    spacing?: number\n  ) {\n    super(imageOrConfig, alphabet, caseInsensitive, columns, rows, spWidth, spHeight, spacing);\n  }\n}\n", "import { Promise } from '../Promises';\nimport { Audio } from './Audio';\n\nexport type ExResponseType = '' | 'arraybuffer' | 'blob' | 'document' | 'json' | 'text';\n\nexport interface ExResponseTypesLookup {\n  [name: string]: ExResponseType;\n}\n\nexport class ExResponse {\n  public static type: ExResponseTypesLookup = {\n    any: '',\n    blob: 'blob',\n    json: 'json',\n    text: 'text',\n    document: 'document',\n    arraybuffer: 'arraybuffer'\n  };\n}\n\n/**\n * Represents an audio implementation like [[AudioTagInstance]] or [[WebAudioInstance]]\n */\nexport interface AudioImplementation {\n  /**\n   * XHR response type\n   */\n  responseType: ExResponseType;\n\n  /**\n   * Processes raw data and transforms into sound data\n   */\n  processData(data: Blob | ArrayBuffer): Promise<string | AudioBuffer>;\n\n  /**\n   * Factory method that returns an instance of a played audio track\n   */\n  createInstance(data: string | AudioBuffer): Audio;\n}\n", "import { Engine } from './../Engine';\nimport * as Events from './../Events';\nimport { Scene } from '../Scene';\n\n// eslint-disable-next-line @typescript-eslint/class-name-casing\nexport interface _initialize {\n  _initialize(engine: Engine): void;\n}\n\nexport function has_initialize(a: any): a is _initialize {\n  return !!a._initialize;\n}\n\nexport interface OnInitialize {\n  onInitialize(engine: Engine): void;\n}\n\nexport function hasOnInitialize(a: any): a is OnInitialize {\n  return !!a.onInitialize;\n}\n\n// eslint-disable-next-line @typescript-eslint/class-name-casing\nexport interface _preupdate {\n  _preupdate(engine: Engine, delta: number): void;\n}\n\nexport function has_preupdate(a: any): a is _preupdate {\n  return !!a._preupdate;\n}\n\nexport interface OnPreUpdate {\n  onPreUpdate(engine: Engine, delta: number): void;\n}\n\nexport function hasOnPreUpdate(a: any): a is OnPreUpdate {\n  return !!a.onPreUpdate;\n}\n\n// eslint-disable-next-line @typescript-eslint/class-name-casing\nexport interface _postupdate {\n  _postupdate(engine: Engine, delta: number): void;\n}\n\nexport function has_postupdate(a: any): a is _postupdate {\n  return !!a.onPostUpdate;\n}\n\nexport interface OnPostUpdate {\n  onPostUpdate(engine: Engine, delta: number): void;\n}\n\nexport function hasOnPostUpdate(a: any): a is OnPostUpdate {\n  return !!a.onPostUpdate;\n}\n\nexport interface CanInitialize {\n  /**\n   * Overridable implementation\n   */\n  onInitialize(_engine: Engine): void;\n\n  /**\n   * Event signatures\n   */\n  on(eventName: Events.initialize, handler: (event: Events.InitializeEvent<any>) => void): void;\n  once(eventName: Events.initialize, handler: (event: Events.InitializeEvent<any>) => void): void;\n  off(eventName: Events.initialize, handler?: (event: Events.InitializeEvent<any>) => void): void;\n}\n\nexport interface CanActivate {\n  /**\n   * Overridable implementation\n   */\n  onActivate(oldScene: Scene, newScene: Scene): void;\n\n  /**\n   * Event signatures\n   */\n  on(eventName: Events.activate, handler: (event: Events.ActivateEvent) => void): void;\n  once(eventName: Events.activate, handler: (event: Events.ActivateEvent) => void): void;\n  off(eventName: Events.activate, handler?: (event: Events.ActivateEvent) => void): void;\n}\n\nexport interface CanDeactivate {\n  /**\n   * Overridable implementation\n   */\n  onDeactivate(oldScene: Scene, newScene: Scene): void;\n\n  /**\n   * Event signature\n   */\n  on(eventName: Events.deactivate, handler: (event: Events.DeactivateEvent) => void): void;\n  once(eventName: Events.deactivate, handler: (event: Events.DeactivateEvent) => void): void;\n  off(eventName: Events.deactivate, handler?: (event: Events.DeactivateEvent) => void): void;\n}\n\nexport interface CanUpdate {\n  /**\n   * Overridable implementation\n   */\n  onPreUpdate(_engine: Engine, _delta: number): void;\n\n  /**\n   * Event signature\n   */\n  on(eventName: Events.preupdate, handler: (event: Events.PreUpdateEvent<any>) => void): void;\n  once(eventName: Events.preupdate, handler: (event: Events.PreUpdateEvent<any>) => void): void;\n  off(eventName: Events.preupdate, handler?: (event: Events.PreUpdateEvent<any>) => void): void;\n\n  /**\n   * Overridable implementation\n   */\n  onPostUpdate(_engine: Engine, _delta: number): void;\n\n  /**\n   * Event signatures\n   */\n  on(eventName: Events.postupdate, handler: (event: Events.PostUpdateEvent<any>) => void): void;\n  once(eventName: Events.postupdate, handler: (event: Events.PostUpdateEvent<any>) => void): void;\n  off(eventName: Events.postupdate, handler?: (event: Events.PostUpdateEvent<any>) => void): void;\n}\n\nexport interface OnPreDraw {\n  /**\n   * Overridable implementation\n   */\n  onPreDraw(_ctx: CanvasRenderingContext2D, _delta: number): void;\n\n  /**\n   * Event signatures\n   */\n  on(eventName: Events.predraw, handler: (event: Events.PreDrawEvent) => void): void;\n  once(eventName: Events.predraw, handler: (event: Events.PreDrawEvent) => void): void;\n  off(eventName: Events.predraw, handler?: (event: Events.PreDrawEvent) => void): void;\n}\n\nexport interface OnPostDraw {\n  /**\n   * Overridable implementation\n   */\n  onPostDraw(_ctx: CanvasRenderingContext2D, _delta: number): void;\n\n  /**\n   * Event signatures\n   */\n  on(eventName: Events.postdraw, handler: (event: Events.PostDrawEvent) => void): void;\n  once(eventName: Events.postdraw, handler: (event: Events.PostDrawEvent) => void): void;\n  off(eventName: Events.postdraw, handler?: (event: Events.PostDrawEvent) => void): void;\n}\n\nexport interface CanDraw extends OnPreDraw, OnPostDraw {\n  on(eventName: Events.predraw, handler: (event: Events.PreDrawEvent) => void): void;\n  on(eventName: Events.postdraw, handler: (event: Events.PostDrawEvent) => void): void;\n\n  once(eventName: Events.predraw, handler: (event: Events.PreDrawEvent) => void): void;\n  once(eventName: Events.postdraw, handler: (event: Events.PostDrawEvent) => void): void;\n\n  off(eventName: Events.predraw, handler?: (event: Events.PreDrawEvent) => void): void;\n  off(eventName: Events.postdraw, handler?: (event: Events.PostDrawEvent) => void): void;\n}\n\nexport function hasPreDraw(a: any): a is OnPreDraw {\n  return !!a.onPreDraw;\n}\n\nexport function hasPostDraw(a: any): a is OnPostDraw {\n  return !!a.onPostDraw;\n}\n\nexport interface CanBeKilled {\n  /**\n   * Overridable implementation\n   */\n  onPreKill(_scene: Scene): void;\n\n  /**\n   * Event signatures\n   */\n  on(eventName: Events.prekill, handler: (event: Events.PreKillEvent) => void): void;\n  once(eventName: Events.prekill, handler: (event: Events.PreKillEvent) => void): void;\n  off(eventName: Events.prekill, handler: (event: Events.PreKillEvent) => void): void;\n\n  /**\n   * Overridable implementation\n   */\n  onPostKill(_scene: Scene): void;\n\n  /**\n   * Event signatures\n   */\n  on(eventName: Events.postkill, handler: (event: Events.PostKillEvent) => void): void;\n  once(eventName: Events.postkill, handler: (event: Events.PostKillEvent) => void): void;\n  off(eventName: Events.postkill, handler: (event: Events.PostKillEvent) => void): void;\n}\n", "import { Random } from './Random';\nimport { Color } from '../Drawing/Color';\nimport * as Util from '../Util/Util';\n\nfunction _lerp(time: number, a: number, b: number): number {\n  return a + time * (b - a);\n}\n\nfunction _fade(t: number): number {\n  return t * t * t * (t * (t * 6 - 15) + 10);\n}\n\n/**\n * Options for the perlin noise generator\n */\nexport interface PerlinOptions {\n  /**\n   * Random number seed for the Perlin noise generator\n   */\n  seed?: number;\n  /**\n   * Number of octaves to use when generating the noise, the number of octaves is the number of times the perlin\n   * noise is generated and laid on top of itself. Using higher values can increase the curviness of the noise, and\n   * make it look more natural.\n   */\n  octaves?: number;\n  /**\n   * Frequency to use when generating the noise, the higher the number the more quickly the pattern will oscillate. Another way\n   * to think about this is that it is like \"zooming\" out from an infinite pattern determined by the seed.\n   */\n  frequency?: number;\n  /**\n   * The amplitude determines the relative height of the peaks generated in the noise.\n   */\n  amplitude?: number;\n  /**\n   * The persistance determines how quickly the amplitude will drop off, a high degree of persistance results in smoother patterns,\n   * a low degree of persistance generates spiky patterns.\n   */\n  persistance?: number;\n}\n\n/**\n * Generates perlin noise based on the 2002 Siggraph paper http://mrl.nyu.edu/~perlin/noise/\n * Also https://flafla2.github.io/2014/08/09/perlinnoise.html\n */\nexport class PerlinGenerator {\n  private _perm: number[] = [\n    151,\n    160,\n    137,\n    91,\n    90,\n    15,\n    131,\n    13,\n    201,\n    95,\n    96,\n    53,\n    194,\n    233,\n    7,\n    225,\n    140,\n    36,\n    103,\n    30,\n    69,\n    142,\n    8,\n    99,\n    37,\n    240,\n    21,\n    10,\n    23,\n    190,\n    6,\n    148,\n    247,\n    120,\n    234,\n    75,\n    0,\n    26,\n    197,\n    62,\n    94,\n    252,\n    219,\n    203,\n    117,\n    35,\n    11,\n    32,\n    57,\n    177,\n    33,\n    88,\n    237,\n    149,\n    56,\n    87,\n    174,\n    20,\n    125,\n    136,\n    171,\n    168,\n    68,\n    175,\n    74,\n    165,\n    71,\n    134,\n    139,\n    48,\n    27,\n    166,\n    77,\n    146,\n    158,\n    231,\n    83,\n    111,\n    229,\n    122,\n    60,\n    211,\n    133,\n    230,\n    220,\n    105,\n    92,\n    41,\n    55,\n    46,\n    245,\n    40,\n    244,\n    102,\n    143,\n    54,\n    65,\n    25,\n    63,\n    161,\n    1,\n    216,\n    80,\n    73,\n    209,\n    76,\n    132,\n    187,\n    208,\n    89,\n    18,\n    169,\n    200,\n    196,\n    135,\n    130,\n    116,\n    188,\n    159,\n    86,\n    164,\n    100,\n    109,\n    198,\n    173,\n    186,\n    3,\n    64,\n    52,\n    217,\n    226,\n    250,\n    124,\n    123,\n    5,\n    202,\n    38,\n    147,\n    118,\n    126,\n    255,\n    82,\n    85,\n    212,\n    207,\n    206,\n    59,\n    227,\n    47,\n    16,\n    58,\n    17,\n    182,\n    189,\n    28,\n    42,\n    223,\n    183,\n    170,\n    213,\n    119,\n    248,\n    152,\n    2,\n    44,\n    154,\n    163,\n    70,\n    221,\n    153,\n    101,\n    155,\n    167,\n    43,\n    172,\n    9,\n    129,\n    22,\n    39,\n    253,\n    19,\n    98,\n    108,\n    110,\n    79,\n    113,\n    224,\n    232,\n    178,\n    185,\n    112,\n    104,\n    218,\n    246,\n    97,\n    228,\n    251,\n    34,\n    242,\n    193,\n    238,\n    210,\n    144,\n    12,\n    191,\n    179,\n    162,\n    241,\n    81,\n    51,\n    145,\n    235,\n    249,\n    14,\n    239,\n    107,\n    49,\n    192,\n    214,\n    31,\n    181,\n    199,\n    106,\n    157,\n    184,\n    84,\n    204,\n    176,\n    115,\n    121,\n    50,\n    45,\n    127,\n    4,\n    150,\n    254,\n    138,\n    236,\n    205,\n    93,\n    222,\n    114,\n    67,\n    29,\n    24,\n    72,\n    243,\n    141,\n    128,\n    195,\n    78,\n    66,\n    215,\n    61,\n    156,\n    180\n  ];\n  private _p: Uint8Array = new Uint8Array(512);\n  private _random: Random;\n\n  private _defaultPerlinOptions: PerlinOptions = {\n    octaves: 1,\n    frequency: 1,\n    amplitude: 1,\n    persistance: 0.5\n  };\n\n  /**\n   * The persistance determines how quickly the amplitude will drop off, a high degree of persistance results in smoother patterns,\n   * a low degree of persistance generates spiky patterns.\n   */\n  public persistance: number;\n\n  /**\n   * The amplitude determines the relative height of the peaks generated in the noise.\n   */\n  public amplitude: number;\n\n  /**\n   * Frequency to use when generating the noise, the higher the number the more quickly the pattern will oscillate. Another way\n   * to think about this is that it is like \"zooming\" out from an infinite pattern determined by the seed.\n   */\n  public frequency: number;\n\n  /**\n   * Number of octaves to use when generating the noise, the number of octaves is the number of times the perlin\n   * noise is generated and laid on top of itself. Using higher values can increase the curviness of the noise, and\n   * make it look more natural.\n   */\n  public octaves: number;\n\n  constructor(options?: PerlinOptions) {\n    options = Util.extend({}, this._defaultPerlinOptions, options);\n\n    this.persistance = options.persistance;\n    this.amplitude = options.amplitude;\n    this.frequency = options.frequency;\n    this.octaves = options.octaves;\n\n    if (options.seed) {\n      this._random = new Random(options.seed);\n    } else {\n      this._random = new Random();\n    }\n\n    this._perm = this._random.shuffle(this._perm);\n\n    for (let i = 0; i < 512; i++) {\n      this._p[i] = this._perm[i % 256] & 0xff;\n    }\n  }\n\n  /**\n   * Generates 1-Dimensional perlin noise given an x and generates noises values between [0, 1].\n   */\n  public noise(x: number): number;\n  /**\n   * Generates 2-Dimensional perlin noise given an (x, y) and generates noise values between [0, 1]\n   */\n  public noise(x: number, y: number): number;\n  /**\n   * Generates 3-Dimensional perlin noise given an (x, y, z) and generates noise values between [0, 1]\n   */\n  public noise(x: number, y: number, z: number): number;\n  public noise(): number {\n    let amp = this.amplitude;\n    let freq = this.frequency;\n\n    let total = 0;\n    let maxValue = 0;\n    for (let i = 0; i < this.octaves; i++) {\n      switch (arguments.length) {\n        case 1:\n          total += this._noise1d(arguments[0] * freq) * amp;\n          break;\n        case 2:\n          total += this._noise2d(arguments[0] * freq, arguments[1] * freq) * amp;\n          break;\n        case 3:\n          total += this._noise3d(arguments[0] * freq, arguments[1] * freq, arguments[2] * freq) * amp;\n          break;\n        /* istanbul ignore next */\n        default:\n          throw new Error('Invalid arguments for perlin noise');\n      }\n      maxValue += amp;\n      amp *= this.persistance;\n      freq *= 2;\n    }\n    return total / maxValue;\n  }\n\n  /**\n   * Generates a list starting at 0 and ending at 1 of continuous perlin noise, by default the step is 1/length;\n   *\n   */\n  public sequence(length: number, step?: number): number[] {\n    if (!step) {\n      step = 1 / length;\n    }\n    const array: number[] = new Array(length);\n    for (let i = 0; i < length; i++) {\n      array[i] = this.noise(i * step);\n    }\n    return array;\n  }\n\n  /**\n   * Generates a 2D grid of perlin noise given a step value packed into a 1D array i = (x + y*width),\n   * by default the step will 1/(min(dimension))\n   */\n  public grid(width: number, height: number, step?: number): number[] {\n    if (!step) {\n      step = 1 / Math.min(width, height);\n    }\n\n    const array: number[] = new Array(width * height);\n\n    for (let y = 0; y < height; y++) {\n      for (let x = 0; x < width; x++) {\n        array[x + y * width] = this.noise(x * step, y * step);\n      }\n    }\n\n    return array;\n  }\n\n  private _gradient3d(hash: number, x: number, y: number, z: number) {\n    const h = hash & 0xf;\n    const u = h < 8 ? x : y;\n    const v = h < 4 ? y : h === 12 || h === 14 ? x : z;\n    return ((h & 0b1) === 0 ? u : -u) + ((h & 0b10) === 0 ? v : -v);\n  }\n\n  private _gradient2d(hash: number, x: number, y: number) {\n    const value = (hash & 0b1) === 0 ? x : y;\n    return (hash & 0b10) === 0 ? -value : value;\n  }\n\n  private _gradient1d(hash: number, x: number) {\n    return (hash & 0b1) === 0 ? -x : x;\n  }\n\n  private _noise1d(x: number) {\n    const intX = Math.floor(x) & 0xff; // force 0-255 integers to lookup in permutation\n    x -= Math.floor(x);\n    const fadeX = _fade(x);\n    return (_lerp(fadeX, this._gradient1d(this._p[intX], x), this._gradient1d(this._p[intX + 1], x - 1)) + 1) / 2;\n  }\n\n  private _noise2d(x: number, y: number) {\n    const intX = Math.floor(x) & 0xff;\n    const intY = Math.floor(y) & 0xff;\n\n    x -= Math.floor(x);\n    y -= Math.floor(y);\n\n    const fadeX = _fade(x);\n    const fadeY = _fade(y);\n    const a = this._p[intX] + intY;\n    const b = this._p[intX + 1] + intY;\n    return (\n      (_lerp(\n        fadeY,\n        _lerp(fadeX, this._gradient2d(this._p[a], x, y), this._gradient2d(this._p[b], x - 1, y)),\n        _lerp(fadeX, this._gradient2d(this._p[a + 1], x, y - 1), this._gradient2d(this._p[b + 1], x - 1, y - 1))\n      ) +\n        1) /\n      2\n    );\n  }\n\n  private _noise3d(x: number, y: number, z: number) {\n    const intX = Math.floor(x) & 0xff;\n    const intY = Math.floor(y) & 0xff;\n    const intZ = Math.floor(z) & 0xff;\n\n    x -= Math.floor(x);\n    y -= Math.floor(y);\n    z -= Math.floor(z);\n\n    const fadeX = _fade(x);\n    const fadeY = _fade(y);\n    const fadeZ = _fade(z);\n\n    const a = this._p[intX] + intY;\n    const b = this._p[intX + 1] + intY;\n\n    const aa = this._p[a] + intZ;\n    const ba = this._p[b] + intZ;\n\n    const ab = this._p[a + 1] + intZ;\n    const bb = this._p[b + 1] + intZ;\n\n    return (\n      (_lerp(\n        fadeZ,\n        _lerp(\n          fadeY,\n          _lerp(fadeX, this._gradient3d(this._p[aa], x, y, z), this._gradient3d(this._p[ba], x - 1, y, z)),\n          _lerp(fadeX, this._gradient3d(this._p[ab], x, y - 1, z), this._gradient3d(this._p[bb], x - 1, y - 1, z))\n        ),\n        _lerp(\n          fadeY,\n          _lerp(fadeX, this._gradient3d(this._p[aa + 1], x, y, z - 1), this._gradient3d(this._p[ba + 1], x - 1, y, z - 1)),\n          _lerp(fadeX, this._gradient3d(this._p[ab + 1], x, y - 1, z - 1), this._gradient3d(this._p[bb + 1], x - 1, y - 1, z - 1))\n        )\n      ) +\n        1) /\n      2\n    );\n  }\n}\n\n/**\n * A helper to draw 2D perlin maps given a perlin generator and a function\n */\nexport class PerlinDrawer2D {\n  /**\n   * @param generator - An existing perlin generator\n   * @param colorFcn - A color function that takes a value between [0, 255] derived from the perlin generator, and returns a color\n   */\n  constructor(public generator: PerlinGenerator, public colorFcn?: (val: number) => Color) {\n    if (!colorFcn) {\n      this.colorFcn = (val: number) => {\n        return val < 125 ? Color.Black : Color.White;\n      };\n    }\n  }\n\n  /**\n   * Returns an image of 2D perlin noise\n   */\n  public image(width: number, height: number): HTMLImageElement {\n    const image = document.createElement('img');\n    const canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    const ctx = canvas.getContext('2d');\n    this.draw(ctx, 0, 0, width, height);\n    image.src = canvas.toDataURL();\n    return image;\n  }\n\n  /**\n   * This draws a 2D perlin grid on a canvas context, not recommended to be called every frame due to performance\n   */\n  public draw(ctx: CanvasRenderingContext2D, x: number, y: number, width: number, height: number) {\n    const grid = this.generator.grid(width, height);\n    const imageData = ctx.getImageData(x, y, width, height);\n    for (let j = 0; j < height; j++) {\n      for (let i = 0; i < width; i++) {\n        const val = grid[i + width * j];\n        const c = Math.floor(val * 255) & 0xff;\n        const pixel = (i + j * imageData.width) * 4;\n        const color = this.colorFcn(c);\n\n        imageData.data[pixel] = color.r;\n        imageData.data[pixel + 1] = color.g;\n        imageData.data[pixel + 2] = color.b;\n        imageData.data[pixel + 3] = Math.floor(color.a * 255);\n      }\n    }\n    ctx.putImageData(imageData, x, y);\n  }\n}\n", "import { Audio } from '../../Interfaces/Audio';\nimport { Promise } from '../../Promises';\nimport * as Util from '../../Util/Util';\nimport { AudioContextFactory } from './AudioContext';\n\n/**\n * Internal class for producing of AudioInstances\n */\n/* istanbul ignore next */\n\nexport class AudioInstanceFactory {\n  public static create(src: string | AudioBuffer): AudioInstance {\n    if (src instanceof AudioBuffer) {\n      return new WebAudioInstance(src);\n    }\n\n    return new AudioInstance(src);\n  }\n}\n\n/**\n * Internal class representing base AudioInstance implementation\n */\n/* istanbul ignore next */\nexport class AudioInstance implements Audio {\n  public set loop(value: boolean) {\n    this._loop = value;\n\n    if (this._instance) {\n      this._instance.loop = value;\n      this._wireUpOnEnded();\n    }\n  }\n  public get loop(): boolean {\n    return this._loop;\n  }\n  public set volume(value: number) {\n    this._volume = Util.clamp(value, 0, 1.0);\n  }\n  public get volume(): number {\n    return this._volume;\n  }\n  public set duration(value: number | undefined) {\n    this._duration = value;\n  }\n\n  /**\n   * Duration of the sound, in seconds.\n   */\n  public get duration() {\n    return this._duration;\n  }\n\n  protected _volume = 1;\n  protected _duration: number | undefined = undefined;\n  protected _loop = false;\n  protected _playingPromise: Promise<boolean>;\n  protected _isPlaying = false;\n  protected _isPaused = false;\n  protected _instance: HTMLAudioElement | AudioBufferSourceNode;\n\n  constructor(protected _src: string | AudioBuffer) {}\n\n  public isPlaying() {\n    return this._isPlaying;\n  }\n\n  public pause() {\n    if (!this._isPlaying) {\n      return;\n    }\n\n    this._isPaused = true;\n    this._isPlaying = false;\n  }\n\n  public stop() {\n    if (!this._isPlaying) {\n      return;\n    }\n\n    this._isPlaying = false;\n    this._isPaused = false;\n  }\n\n  public play() {\n    if (this._isPaused) {\n      this._resumePlayBack();\n    }\n\n    if (!this._isPlaying) {\n      this._startPlayBack();\n    }\n\n    return this._playingPromise;\n  }\n\n  protected _startPlayBack() {\n    this._isPlaying = true;\n    this._isPaused = false;\n    this._playingPromise = new Promise<boolean>();\n  }\n\n  protected _resumePlayBack() {\n    if (!this._isPaused) {\n      return;\n    }\n\n    this._isPaused = false;\n    this._isPlaying = true;\n  }\n\n  protected _wireUpOnEnded() {\n    if (!this.loop) {\n      this._instance.onended = () => this._handleOnEnded();\n    }\n  }\n\n  protected _handleOnEnded() {\n    /**\n     * Override me\n     */\n  }\n}\n\n/**\n * Internal class representing a Web Audio AudioBufferSourceNode instance\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API\n */\n/* istanbul ignore next */\nexport class WebAudioInstance extends AudioInstance {\n  public set volume(value: number) {\n    value = Util.clamp(value, 0, 1.0);\n\n    this._volume = value;\n\n    if (this._isPlaying && this._volumeNode.gain.setTargetAtTime) {\n      // https://developer.mozilla.org/en-US/docs/Web/API/AudioParam/setTargetAtTime\n      // After each .1 seconds timestep, the target value will ~63.2% closer to the target value.\n      // This exponential ramp provides a more pleasant transition in gain\n      this._volumeNode.gain.setTargetAtTime(value, this._audioContext.currentTime, 0.1);\n    } else {\n      this._volumeNode.gain.value = value;\n    }\n  }\n  public get volume(): number {\n    return this._volume;\n  }\n\n  private get _playbackRate(): number {\n    return this._instance ? 1 / (this._instance.playbackRate.value || 1.0) : null;\n  }\n\n  protected _src: AudioBuffer;\n  protected _instance: AudioBufferSourceNode;\n  private _audioContext: AudioContext = AudioContextFactory.create();\n  private _volumeNode = this._audioContext.createGain();\n  private _startTime: number;\n\n  /**\n   * Current playback offset (in seconds)\n   */\n  private _currentOffset = 0;\n\n  constructor(_src: AudioBuffer) {\n    super(_src);\n\n    this._createNewBufferSource();\n  }\n\n  public pause() {\n    super.pause();\n\n    this._instance.stop(0);\n    // Playback rate will be a scale factor of how fast/slow the audio is being played\n    // default is 1.0\n    // we need to invert it to get the time scale\n\n    this._setPauseOffset();\n  }\n\n  public stop() {\n    super.stop();\n\n    this._currentOffset = 0;\n    this._instance.stop(0);\n\n    // handler will not be wired up if we were looping\n    if (!this._instance.onended) {\n      this._handleOnEnded();\n    }\n  }\n\n  protected _startPlayBack() {\n    super._startPlayBack();\n\n    if (!this._instance) {\n      this._createNewBufferSource();\n    }\n\n    this._rememberStartTime();\n\n    this._volumeNode.connect(this._audioContext.destination);\n    this._instance.start(0, 0);\n    this._currentOffset = 0;\n\n    this._playingPromise = new Promise<boolean>();\n    this._wireUpOnEnded();\n  }\n\n  protected _resumePlayBack() {\n    super._resumePlayBack();\n\n    // a buffer source can only be started once\n    // so we need to dispose of the previous instance before\n    // \"resuming\" the next one\n    this._instance.onended = null; // dispose of any previous event handler\n    this._createNewBufferSource();\n\n    const duration = this._playbackRate * this._src.duration;\n    const restartTime = this._currentOffset % duration;\n\n    this._rememberStartTime(restartTime * -1000);\n    this._instance.start(0, restartTime);\n    this._wireUpOnEnded();\n  }\n\n  protected _handleOnEnded() {\n    // pausing calls stop(0) which triggers onended event\n    // so we don't \"resolve\" yet (when we resume we'll try again)\n    if (!this._isPaused) {\n      this._isPlaying = false;\n      this._playingPromise.resolve(true);\n    }\n  }\n\n  private _rememberStartTime(amend?: number) {\n    this._startTime = new Date().getTime() + (amend | 0);\n  }\n\n  private _setPauseOffset() {\n    this._currentOffset = ((new Date().getTime() - this._startTime) * this._playbackRate) / 1000; // in seconds\n  }\n\n  private _createNewBufferSource() {\n    this._instance = this._audioContext.createBufferSource();\n    this._instance.buffer = this._src;\n    this._instance.loop = this.loop;\n    this._instance.playbackRate.setValueAtTime(1.0, 0);\n\n    this._instance.connect(this._volumeNode);\n  }\n}\n", "import { Logger } from './Log';\n\n/**\n * Whether or not the browser can play this file as HTML5 Audio\n */\nexport function canPlayFile(file: string): boolean {\n  try {\n    const a = new Audio();\n    const filetype = /.*\\.([A-Za-z0-9]+)$/;\n    const type = file.match(filetype)[1];\n    if (a.canPlayType('audio/' + type)) {\n      return true;\n    } else {\n      return false;\n    }\n  } catch (e) {\n    Logger.getInstance().warn('Cannot determine audio support, assuming no support for the Audio Tag', e);\n    return false;\n  }\n}\n", "import { ExResponse } from '../../Interfaces/AudioImplementation';\nimport { Audio } from '../../Interfaces/Audio';\nimport { Engine } from '../../Engine';\nimport { Resource } from '../Resource';\nimport { AudioInstance, AudioInstanceFactory } from './AudioInstance';\nimport { AudioContextFactory } from './AudioContext';\nimport { NativeSoundEvent, NativeSoundProcessedEvent } from '../../Events/MediaEvents';\nimport { Promise } from '../../Promises';\nimport { canPlayFile } from '../../Util/Sound';\n\n/**\n * The [[Sound]] object allows games built in Excalibur to load audio\n * components, from soundtracks to sound effects. [[Sound]] is an [[Loadable]]\n * which means it can be passed to a [[Loader]] to pre-load before a game or level.\n *\n * [[include:Sounds.md]]\n */\nexport class Sound extends Resource<Blob | ArrayBuffer> implements Audio {\n  /**\n   * Indicates whether the clip should loop when complete\n   * @param value  Set the looping flag\n   */\n  public set loop(value: boolean) {\n    this._loop = value;\n\n    for (const track of this._tracks) {\n      track.loop = this._loop;\n    }\n\n    this.logger.debug('Set loop for all instances of sound', this.path, 'to', this._loop);\n  }\n  public get loop(): boolean {\n    return this._loop;\n  }\n\n  public set volume(value: number) {\n    this._volume = value;\n\n    for (const track of this._tracks) {\n      track.volume = this._volume;\n    }\n\n    this.emit('volumechange', new NativeSoundEvent(this));\n\n    this.logger.debug('Set loop for all instances of sound', this.path, 'to', this._volume);\n  }\n  public get volume(): number {\n    return this._volume;\n  }\n\n  public get duration(): number | undefined {\n    return this._duration;\n  }\n\n  /**\n   * Return array of Current AudioInstances playing or being paused\n   */\n  public get instances(): AudioInstance[] {\n    return this._tracks;\n  }\n\n  public path: string;\n\n  private _loop = false;\n  private _volume = 1;\n  private _duration: number | undefined = undefined;\n  private _isStopped = false;\n  private _isPaused = false;\n  private _tracks: AudioInstance[] = [];\n  private _engine: Engine;\n  private _wasPlayingOnHidden: boolean = false;\n  private _processedData = new Promise<string | AudioBuffer>();\n  private _audioContext = AudioContextFactory.create();\n\n  /**\n   * @param paths A list of audio sources (clip.wav, clip.mp3, clip.ogg) for this audio clip. This is done for browser compatibility.\n   */\n  constructor(...paths: string[]) {\n    super('', '');\n\n    this._detectResponseType();\n    /* Chrome : MP3, WAV, Ogg\n     * Firefox : WAV, Ogg,\n     * IE : MP3, WAV coming soon\n     * Safari MP3, WAV, Ogg\n     */\n    for (const path of paths) {\n      if (canPlayFile(path)) {\n        this.path = path;\n        break;\n      }\n    }\n\n    if (!this.path) {\n      this.logger.warn('This browser does not support any of the audio files specified:', paths.join(', '));\n      this.logger.warn('Attempting to use', paths[0]);\n      this.path = paths[0]; // select the first specified\n    }\n  }\n\n  public wireEngine(engine: Engine) {\n    if (engine) {\n      this._engine = engine;\n\n      this._engine.on('hidden', () => {\n        if (engine.pauseAudioWhenHidden && this.isPlaying()) {\n          this._wasPlayingOnHidden = true;\n          this.pause();\n        }\n      });\n\n      this._engine.on('visible', () => {\n        if (engine.pauseAudioWhenHidden && this._wasPlayingOnHidden) {\n          this.play();\n          this._wasPlayingOnHidden = false;\n        }\n      });\n\n      this._engine.on('start', () => {\n        this._isStopped = false;\n      });\n\n      this._engine.on('stop', () => {\n        this.stop();\n        this._isStopped = true;\n      });\n    }\n  }\n\n  /**\n   * Returns how many instances of the sound are currently playing\n   */\n  public instanceCount(): number {\n    return this._tracks.length;\n  }\n\n  /**\n   * Whether or not the sound is playing right now\n   */\n  public isPlaying(): boolean {\n    return this._tracks.some((t) => t.isPlaying());\n  }\n\n  /**\n   * Play the sound, returns a promise that resolves when the sound is done playing\n   * An optional volume argument can be passed in to play the sound. Max volume is 1.0\n   */\n  public play(volume?: number): Promise<boolean> {\n    if (!this.isLoaded()) {\n      this.logger.warn('Cannot start playing. Resource', this.path, 'is not loaded yet');\n\n      return Promise.resolve(true);\n    }\n\n    if (this._isStopped) {\n      this.logger.warn('Cannot start playing. Engine is in a stopped state.');\n      return Promise.resolve(false);\n    }\n\n    this.volume = volume || this.volume;\n\n    if (this._isPaused) {\n      return this._resumePlayback();\n    } else {\n      return this._startPlayback();\n    }\n  }\n\n  /**\n   * Stop the sound, and do not rewind\n   */\n  public pause() {\n    if (!this.isPlaying()) {\n      return;\n    }\n\n    for (const track of this._tracks) {\n      track.pause();\n    }\n\n    this._isPaused = true;\n\n    this.emit('pause', new NativeSoundEvent(this));\n\n    this.logger.debug('Paused all instances of sound', this.path);\n  }\n\n  /**\n   * Stop the sound if it is currently playing and rewind the track. If the sound is not playing, rewinds the track.\n   */\n  public stop() {\n    for (const track of this._tracks) {\n      track.stop();\n    }\n\n    this.emit('stop', new NativeSoundEvent(this));\n\n    this._isPaused = false;\n    this._tracks.length = 0;\n    this.logger.debug('Stopped all instances of sound', this.path);\n  }\n\n  public setData(data: any) {\n    this.emit('emptied', new NativeSoundEvent(this));\n\n    this.data = data;\n    this._processedData = new Promise<string | AudioBuffer>();\n  }\n\n  public processData(data: Blob | ArrayBuffer): Promise<string | AudioBuffer> {\n    /**\n     * Processes raw arraybuffer data and decodes into WebAudio buffer (async).\n     */\n    const processPromise: Promise<string | AudioBuffer> =\n      data instanceof ArrayBuffer ? this._processArrayBufferData(data) : this._processBlobData(data);\n\n    return processPromise.then((processedData) => this._setProcessedData(processedData));\n  }\n\n  /**\n   * Get Id of provided AudioInstance in current trackList\n   * @param track [[AudioInstance]] which Id is to be given\n   */\n  public getTrackId(track: AudioInstance): number {\n    return this._tracks.indexOf(track);\n  }\n\n  private _resumePlayback(): Promise<boolean> {\n    if (this._isPaused) {\n      const resumed = [];\n      // ensure we resume *current* tracks (if paused)\n      for (const track of this._tracks) {\n        resumed.push(track.play());\n      }\n\n      this._isPaused = false;\n\n      this.emit('resume', new NativeSoundEvent(this));\n\n      this.logger.debug('Resuming paused instances for sound', this.path, this._tracks);\n      // resolve when resumed tracks are done\n      return Promise.join(resumed);\n    } else {\n      return Promise.resolve(true);\n    }\n  }\n\n  private _startPlayback(): Promise<boolean> {\n    const newTrack = this._createNewTrack();\n    const playPromise = new Promise<boolean>();\n\n    newTrack.then((track) => {\n      track.play().then((resolved) => {\n        // when done, remove track\n        this.emit('playbackend', new NativeSoundEvent(this, track));\n        this._tracks.splice(this.getTrackId(track), 1);\n\n        playPromise.resolve(resolved);\n\n        return resolved;\n      });\n\n      this.emit('playbackstart', new NativeSoundEvent(this, track));\n      this.logger.debug('Playing new instance for sound', this.path);\n    });\n\n    return playPromise;\n  }\n\n  private _processArrayBufferData(data: ArrayBuffer): Promise<AudioBuffer> {\n    const complete = new Promise<AudioBuffer>();\n\n    this._audioContext.decodeAudioData(\n      data,\n      (buffer: AudioBuffer) => {\n        complete.resolve(buffer);\n      },\n      () => {\n        this.logger.error(\n          'Unable to decode ' +\n            ' this browser may not fully support this format, or the file may be corrupt, ' +\n            'if this is an mp3 try removing id3 tags and album art from the file.'\n        );\n        complete.resolve(undefined);\n      }\n    );\n\n    return complete;\n  }\n\n  private _processBlobData(data: Blob): Promise<string> {\n    return new Promise<string>().resolve(super.processData(data));\n  }\n\n  private _setProcessedData(processedData: string | AudioBuffer): void {\n    this._processedData.resolve(processedData);\n    this._duration = typeof processedData === 'object' ? processedData.duration : undefined;\n    this.emit('processed', new NativeSoundProcessedEvent(this, processedData));\n  }\n\n  private _createNewTrack(): Promise<AudioInstance> {\n    const aiPromise = new Promise<AudioInstance>();\n\n    if (this._processedData.state() !== 0) {\n      this.processData(this.data);\n    }\n\n    this._processedData.then(\n      (processedData) => {\n        aiPromise.resolve(this._getTrackInstance(processedData));\n\n        return processedData;\n      },\n      (error) => {\n        this.logger.error(error, 'Cannot create AudioInstance due to wrong processed data.');\n      }\n    );\n\n    return aiPromise;\n  }\n\n  private _getTrackInstance(data: string | AudioBuffer): AudioInstance {\n    const newTrack = AudioInstanceFactory.create(data);\n\n    newTrack.loop = this.loop;\n    newTrack.volume = this.volume;\n    newTrack.duration = this.duration;\n\n    this._tracks.push(newTrack);\n\n    return newTrack;\n  }\n\n  private _detectResponseType() {\n    if ((<any>window).AudioContext) {\n      this.responseType = ExResponse.type.arraybuffer;\n    } else {\n      this.responseType = ExResponse.type.blob;\n    }\n  }\n}\n", "import { Resource } from './Resource';\nimport { Promise } from '../Promises';\nimport { Sprite } from '../Drawing/Sprite';\nimport { Texture } from './Texture';\nimport { Color } from '../Drawing/Color';\nimport { SpriteSheet } from '../Drawing/SpriteSheet';\nimport { Animation } from '../Drawing/Animation';\nimport { Engine } from '../Engine';\n/**\n * The [[Texture]] object allows games built in Excalibur to load image resources.\n * [[Texture]] is an [[Loadable]] which means it can be passed to a [[Loader]]\n * to pre-load before starting a level or game.\n *\n * [[include:Textures.md]]\n */\nexport class Gif extends Resource<Texture[]> {\n  /**\n   * The width of the texture in pixels\n   */\n  public width: number;\n\n  /**\n   * The height of the texture in pixels\n   */\n  public height: number;\n\n  /**\n   * A [[Promise]] that resolves when the Texture is loaded.\n   */\n  public loaded: Promise<any> = new Promise<any>();\n\n  private _isLoaded: boolean = false;\n  private _stream: Stream = null;\n  private _gif: ParseGif = null;\n  private _texture: Texture[] = [];\n  private _animation: Animation = null;\n  private _transparentColor: Color = null;\n\n  /**\n   * Populated once loading is complete\n   */\n  public images: HTMLImageElement;\n\n  /**\n   * @param path       Path to the image resource\n   * @param color      Optionally set the color to treat as transparent the gif, by default [[Color.Magenta]]\n   * @param bustCache  Optionally load texture with cache busting\n   */\n  constructor(public path: string, public color: Color = Color.Magenta, public bustCache = true) {\n    super(path, 'arraybuffer', bustCache);\n    this._transparentColor = color;\n  }\n\n  /**\n   * Returns true if the Texture is completely loaded and is ready\n   * to be drawn.\n   */\n  public isLoaded(): boolean {\n    return this._isLoaded;\n  }\n\n  /**\n   * Begins loading the texture and returns a promise to be resolved on completion\n   */\n  public load(): Promise<Texture[]> {\n    const complete = new Promise<Texture[]>();\n    const loaded = super.load();\n    loaded.then(\n      () => {\n        this._stream = new Stream(this.getData());\n        this._gif = new ParseGif(this._stream, this._transparentColor);\n        const promises: Promise<HTMLImageElement>[] = [];\n        for (let imageIndex: number = 0; imageIndex < this._gif.images.length; imageIndex++) {\n          const texture = new Texture(this._gif.images[imageIndex].src, false);\n          this._texture.push(texture);\n          promises.push(texture.load());\n        }\n        Promise.join(promises).then(() => {\n          this._isLoaded = true;\n          complete.resolve(this._texture);\n        });\n      },\n      () => {\n        complete.reject('Error loading texture.');\n      }\n    );\n    return complete;\n  }\n\n  public asSprite(id: number = 0): Sprite {\n    const sprite = this._texture[id].asSprite();\n    return sprite;\n  }\n\n  public asSpriteSheet(): SpriteSheet {\n    const spriteArray: Sprite[] = this._texture.map((texture) => {\n      return texture.asSprite();\n    });\n    return new SpriteSheet(spriteArray);\n  }\n\n  public asAnimation(engine: Engine, speed: number): Animation {\n    const spriteSheet: SpriteSheet = this.asSpriteSheet();\n    this._animation = spriteSheet.getAnimationForAll(engine, speed);\n    return this._animation;\n  }\n\n  public get readCheckBytes(): number[] {\n    return this._gif.checkBytes;\n  }\n}\n\nexport interface Frame {\n  sentinel: number;\n  type: string;\n  leftPos: number;\n  topPos: number;\n  width: number;\n  height: number;\n  lctFlag: boolean;\n  interlaced: boolean;\n  sorted: boolean;\n  reserved: boolean[];\n  lctSize: number;\n  lzwMinCodeSize: number;\n  pixels: number[];\n}\n\nconst bitsToNum = (ba: any) => {\n  return ba.reduce(function(s: number, n: number) {\n    return s * 2 + n;\n  }, 0);\n};\n\nconst byteToBitArr = (bite: any) => {\n  const a = [];\n  for (let i = 7; i >= 0; i--) {\n    a.push(!!(bite & (1 << i)));\n  }\n  return a;\n};\n\nexport class Stream {\n  data: any = null;\n  len: number = 0;\n  position: number = 0;\n\n  constructor(dataArray: ArrayBuffer) {\n    this.data = new Uint8Array(dataArray);\n    this.len = this.data.byteLength;\n    if (this.len === 0) {\n      throw new Error('No data loaded from file');\n    }\n  }\n\n  public readByte = () => {\n    if (this.position >= this.data.byteLength) {\n      throw new Error('Attempted to read past end of stream.');\n    }\n    return this.data[this.position++];\n  };\n\n  public readBytes = (n: number) => {\n    const bytes = [];\n    for (let i = 0; i < n; i++) {\n      bytes.push(this.readByte());\n    }\n    return bytes;\n  };\n\n  public read = (n: number) => {\n    let s = '';\n    for (let i = 0; i < n; i++) {\n      s += String.fromCharCode(this.readByte());\n    }\n    return s;\n  };\n\n  public readUnsigned = () => {\n    // Little-endian.\n    const a = this.readBytes(2);\n    return (a[1] << 8) + a[0];\n  };\n}\n\nconst lzwDecode = function(minCodeSize: number, data: any) {\n  // TODO: Now that the GIF parser is a bit different, maybe this should get an array of bytes instead of a String?\n  let pos = 0; // Maybe this streaming thing should be merged with the Stream?\n\n  const readCode = function(size: number) {\n    let code = 0;\n    for (let i = 0; i < size; i++) {\n      if (data.charCodeAt(pos >> 3) & (1 << (pos & 7))) {\n        code |= 1 << i;\n      }\n      pos++;\n    }\n    return code;\n  };\n\n  const output: any[] = [];\n\n  const clearCode = 1 << minCodeSize;\n  const eoiCode = clearCode + 1;\n\n  let codeSize = minCodeSize + 1;\n\n  let dict: any[] = [];\n\n  const clear = function() {\n    dict = [];\n    codeSize = minCodeSize + 1;\n    for (let i = 0; i < clearCode; i++) {\n      dict[i] = [i];\n    }\n    dict[clearCode] = [];\n    dict[eoiCode] = null;\n  };\n\n  let code;\n  let last;\n\n  while (true) {\n    last = code;\n    code = readCode(codeSize);\n    if (code === clearCode) {\n      clear();\n      continue;\n    }\n    if (code === eoiCode) {\n      break;\n    }\n\n    if (code < dict.length) {\n      if (last !== clearCode) {\n        dict.push(dict[last].concat(dict[code][0]));\n      }\n    } else {\n      if (code !== dict.length) {\n        throw new Error('Invalid LZW code.');\n      }\n      dict.push(dict[last].concat(dict[last][0]));\n    }\n    output.push.apply(output, dict[code]);\n\n    if (dict.length === 1 << codeSize && codeSize < 12) {\n      // If we're at the last code and codeSize is 12, the next code will be a clearCode, and it'll be 12 bits long.\n      codeSize++;\n    }\n  }\n\n  // I don't know if this is technically an error, but some GIFs do it.\n  //if (Math.ceil(pos / 8) !== data.length) throw new Error('Extraneous LZW bytes.');\n  return output;\n};\n\n// The actual parsing; returns an object with properties.\nexport class ParseGif {\n  private _st: Stream = null;\n  private _handler: any = {};\n  private _transparentColor: Color = null;\n  public frames: Frame[] = [];\n  public images: HTMLImageElement[] = [];\n  public globalColorTable: any[] = [];\n  public checkBytes: number[] = [];\n\n  constructor(stream: Stream, color: Color = Color.Magenta) {\n    this._st = stream;\n    this._handler = {};\n    this._transparentColor = color;\n    this.parseHeader();\n    this.parseBlock();\n  }\n\n  // LZW (GIF-specific)\n  parseColorTable = (entries: any) => {\n    // Each entry is 3 bytes, for RGB.\n    const ct = [];\n    for (let i = 0; i < entries; i++) {\n      const rgb: number[] = this._st.readBytes(3);\n      const rgba =\n        '#' +\n        rgb\n          .map((x: any) => {\n            const hex = x.toString(16);\n            return hex.length === 1 ? '0' + hex : hex;\n          })\n          .join('');\n      ct.push(rgba);\n    }\n    return ct;\n  };\n\n  readSubBlocks = () => {\n    let size, data;\n    data = '';\n    do {\n      size = this._st.readByte();\n      data += this._st.read(size);\n    } while (size !== 0);\n    return data;\n  };\n\n  parseHeader = () => {\n    const hdr: any = {\n      sig: null,\n      ver: null,\n      width: null,\n      height: null,\n      colorRes: null,\n      globalColorTableSize: null,\n      gctFlag: null,\n      sorted: null,\n      globalColorTable: [],\n      bgColor: null,\n      pixelAspectRatio: null // if not 0, aspectRatio = (pixelAspectRatio + 15) / 64\n    };\n\n    hdr.sig = this._st.read(3);\n    hdr.ver = this._st.read(3);\n    if (hdr.sig !== 'GIF') {\n      throw new Error('Not a GIF file.'); // XXX: This should probably be handled more nicely.\n    }\n\n    hdr.width = this._st.readUnsigned();\n    hdr.height = this._st.readUnsigned();\n\n    const bits = byteToBitArr(this._st.readByte());\n    hdr.gctFlag = bits.shift();\n    hdr.colorRes = bitsToNum(bits.splice(0, 3));\n    hdr.sorted = bits.shift();\n    hdr.globalColorTableSize = bitsToNum(bits.splice(0, 3));\n\n    hdr.bgColor = this._st.readByte();\n    hdr.pixelAspectRatio = this._st.readByte(); // if not 0, aspectRatio = (pixelAspectRatio + 15) / 64\n\n    if (hdr.gctFlag) {\n      hdr.globalColorTable = this.parseColorTable(1 << (hdr.globalColorTableSize + 1));\n      this.globalColorTable = hdr.globalColorTable;\n    }\n    if (this._handler.hdr && this._handler.hdr(hdr)) {\n      this.checkBytes.push(this._handler.hdr);\n    }\n  };\n\n  parseExt = (block: any) => {\n    const parseGCExt = (block: any) => {\n      this.checkBytes.push(this._st.readByte()); // Always 4\n\n      const bits = byteToBitArr(this._st.readByte());\n      block.reserved = bits.splice(0, 3); // Reserved; should be 000.\n      block.disposalMethod = bitsToNum(bits.splice(0, 3));\n      block.userInput = bits.shift();\n      block.transparencyGiven = bits.shift();\n\n      block.delayTime = this._st.readUnsigned();\n\n      block.transparencyIndex = this._st.readByte();\n\n      block.terminator = this._st.readByte();\n\n      if (this._handler.gce && this._handler.gce(block)) {\n        this.checkBytes.push(this._handler.gce);\n      }\n    };\n\n    const parseComExt = (block: any) => {\n      block.comment = this.readSubBlocks();\n      if (this._handler.com && this._handler.com(block)) {\n        this.checkBytes.push(this._handler.com);\n      }\n    };\n\n    const parsePTExt = (block: any) => {\n      this.checkBytes.push(this._st.readByte()); // Always 12\n      block.ptHeader = this._st.readBytes(12);\n      block.ptData = this.readSubBlocks();\n      if (this._handler.pte && this._handler.pte(block)) {\n        this.checkBytes.push(this._handler.pte);\n      }\n    };\n\n    const parseAppExt = (block: any) => {\n      const parseNetscapeExt = (block: any) => {\n        this.checkBytes.push(this._st.readByte()); // Always 3\n        block.unknown = this._st.readByte(); // ??? Always 1? What is this?\n        block.iterations = this._st.readUnsigned();\n        block.terminator = this._st.readByte();\n        if (this._handler.app && this._handler.app.NETSCAPE && this._handler.app.NETSCAPE(block)) {\n          this.checkBytes.push(this._handler.app);\n        }\n      };\n\n      const parseUnknownAppExt = (block: any) => {\n        block.appData = this.readSubBlocks();\n        // FIXME: This won't work if a handler wants to match on any identifier.\n        if (this._handler.app && this._handler.app[block.identifier] && this._handler.app[block.identifier](block)) {\n          this.checkBytes.push(this._handler.app[block.identifier]);\n        }\n      };\n\n      this.checkBytes.push(this._st.readByte()); // Always 11\n      block.identifier = this._st.read(8);\n      block.authCode = this._st.read(3);\n      switch (block.identifier) {\n        case 'NETSCAPE':\n          parseNetscapeExt(block);\n          break;\n        default:\n          parseUnknownAppExt(block);\n          break;\n      }\n    };\n\n    const parseUnknownExt = (block: any) => {\n      block.data = this.readSubBlocks();\n      if (this._handler.unknown && this._handler.unknown(block)) {\n        this.checkBytes.push(this._handler.unknown);\n      }\n    };\n\n    block.label = this._st.readByte();\n    switch (block.label) {\n      case 0xf9:\n        block.extType = 'gce';\n        parseGCExt(block);\n        break;\n      case 0xfe:\n        block.extType = 'com';\n        parseComExt(block);\n        break;\n      case 0x01:\n        block.extType = 'pte';\n        parsePTExt(block);\n        break;\n      case 0xff:\n        block.extType = 'app';\n        parseAppExt(block);\n        break;\n      default:\n        block.extType = 'unknown';\n        parseUnknownExt(block);\n        break;\n    }\n  };\n\n  parseImg = (img: any) => {\n    const deinterlace = (pixels: any, width: any) => {\n      // Of course this defeats the purpose of interlacing. And it's *probably*\n      // the least efficient way it's ever been implemented. But nevertheless...\n\n      const newPixels = new Array(pixels.length);\n      const rows = pixels.length / width;\n      const cpRow = (toRow: any, fromRow: any) => {\n        const fromPixels = pixels.slice(fromRow * width, (fromRow + 1) * width);\n        newPixels.splice.apply(newPixels, [toRow * width, width].concat(fromPixels));\n      };\n\n      const offsets = [0, 4, 2, 1];\n      const steps = [8, 8, 4, 2];\n\n      let fromRow = 0;\n      for (let pass = 0; pass < 4; pass++) {\n        for (let toRow = offsets[pass]; toRow < rows; toRow += steps[pass]) {\n          cpRow(toRow, fromRow);\n          fromRow++;\n        }\n      }\n\n      return newPixels;\n    };\n\n    img.leftPos = this._st.readUnsigned();\n    img.topPos = this._st.readUnsigned();\n    img.width = this._st.readUnsigned();\n    img.height = this._st.readUnsigned();\n\n    const bits = byteToBitArr(this._st.readByte());\n    img.lctFlag = bits.shift();\n    img.interlaced = bits.shift();\n    img.sorted = bits.shift();\n    img.reserved = bits.splice(0, 2);\n    img.lctSize = bitsToNum(bits.splice(0, 3));\n\n    if (img.lctFlag) {\n      img.lct = this.parseColorTable(1 << (img.lctSize + 1));\n    }\n\n    img.lzwMinCodeSize = this._st.readByte();\n\n    const lzwData = this.readSubBlocks();\n\n    img.pixels = lzwDecode(img.lzwMinCodeSize, lzwData);\n\n    if (img.interlaced) {\n      // Move\n      img.pixels = deinterlace(img.pixels, img.width);\n    }\n\n    this.frames.push(img);\n    this.arrayToImage(img);\n    if (this._handler.img && this._handler.img(img)) {\n      this.checkBytes.push(this._handler);\n    }\n  };\n\n  public parseBlock = () => {\n    const block = {\n      sentinel: this._st.readByte(),\n      type: ''\n    };\n    const blockChar = String.fromCharCode(block.sentinel);\n    switch (blockChar) {\n      case '!':\n        block.type = 'ext';\n        this.parseExt(block);\n        break;\n      case ',':\n        block.type = 'img';\n        this.parseImg(block);\n        break;\n      case ';':\n        block.type = 'eof';\n        if (this._handler.eof && this._handler.eof(block)) {\n          this.checkBytes.push(this._handler.eof);\n        }\n        break;\n      default:\n        throw new Error('Unknown block: 0x' + block.sentinel.toString(16));\n    }\n\n    if (block.type !== 'eof') {\n      this.parseBlock();\n    }\n  };\n\n  arrayToImage = (frame: Frame) => {\n    let count = 0;\n    const c = document.createElement('canvas');\n    c.id = count.toString();\n    c.width = frame.width;\n    c.height = frame.height;\n    count++;\n    const context = c.getContext('2d');\n    const pixSize = 1;\n    let y = 0;\n    let x = 0;\n    for (let i = 0; i < frame.pixels.length; i++) {\n      if (x % frame.width === 0) {\n        y++;\n        x = 0;\n      }\n      if (this.globalColorTable[frame.pixels[i]] === this._transparentColor.toHex()) {\n        context.fillStyle = `rgba(0, 0, 0, 0)`;\n      } else {\n        context.fillStyle = this.globalColorTable[frame.pixels[i]];\n      }\n\n      context.fillRect(x, y, pixSize, pixSize);\n      x++;\n    }\n    const img = new Image();\n    img.src = c.toDataURL();\n    this.images.push(img);\n  };\n}\n", "/**\n * The current Excalibur version string\n * @description `process.env.__EX_VERSION` gets replaced by Webpack on build\n */\nexport const EX_VERSION = process.env.__EX_VERSION;\nimport { polyfill } from './Polyfill';\npolyfill();\n\n// This file is used as the bundle entry point and exports everything\n// that will be exposed as the `ex` global variable.\n\nexport * from './Engine';\nexport * from './Screen';\nexport { Actor, ActorArgs } from './Actor';\nexport { CollisionType } from './Collision/CollisionType';\nexport * from './Algebra';\nexport * from './Camera';\nexport * from './Class';\nexport * from './Configurable';\nexport * from './Debug';\nexport * from './EventDispatcher';\nexport * from './Events/MediaEvents';\nexport * from './Events';\nexport { Label, FontStyle, FontUnit, TextAlign, BaseAlign } from './Label';\nexport * from './Loader';\nexport { Particle, ParticleEmitter, ParticleArgs, ParticleEmitterArgs, EmitterType } from './Particles';\nexport * from './Physics';\nexport * from './Promises';\nexport * from './Scene';\nexport { TileMap, Cell, TileMapArgs, CellArgs, TileSprite } from './TileMap';\nexport * from './Timer';\nexport * from './Trigger';\nexport * from './ScreenElement';\n\nexport * from './Actions/Index';\nexport * from './Collision/Index';\nexport * from './Drawing/Index';\nexport * from './Interfaces/Index';\nexport * from './Math/Index';\nexport * from './PostProcessing/Index';\nexport * from './Resources/Index';\n\nexport * from './EntityComponentSystem/index';\n\n// ex.Events namespace\nimport * as events from './Events';\nexport { events as Events };\n\n// ex.Input namespace\nimport * as input from './Input/Index';\nexport { input as Input };\n\n// ex.Traits namespace\nimport * as traits from './Traits/Index';\nexport { traits as Traits };\n\n// ex.Util namespaces\nimport * as util from './Util/Index';\nexport { util as Util };\n\nexport * from './Util/Browser';\nexport * from './Util/Decorators';\nexport * from './Util/Detector';\nexport * from './Util/CullingBox';\nexport * from './Util/EasingFunctions';\nexport * from './Util/Log';\nexport * from './Util/SortedList';\n\n// ex.Deprecated\n// import * as deprecated from './Deprecated';\n// export { deprecated as Deprecated };\n// export * from './Deprecated';\n"],
  "mappings": "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CA,KACA,IACA,KACA,IACA,KACA,KACA,IACA,IACA,KACA,IACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,KACA,IACA,IACA,IACA,IACA,KACA,IACA,KACA,KACA,KACA,IACA,IACA,IACA,IACA,KACA,GACA,KACA,IACA,IACA,KACA,IACA,KACA,KACA,KACA,IACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,GACA,IACA,IACA,KACA,KACA,KACA,KACA,KACA,GACA,KACA,IACA,KACA,KACA,KACA,KACA,IACA,IACA,KACA,KACA,KACA,IACA,KACA,IACA,IACA,IACA,IACA,KACA,KACA,IACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,GACA,IACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,KACA,IACA,KACA,GACA,KACA,IACA,IACA,KACA,IACA,IACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,IACA,IACA,KACA,KACA,KACA,IACA,KACA,KACA,IACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,IACA,IACA,KACA,GACA,KACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,IACA,IACA,IACA,IACA,KACA,KACA,KACA,KACA,IACA,IACA,KACA,IACA,KACA,GAAA,GAEM,KAAAC,KAAiB,IAAIlY,WAAW,GAAA,GAGhC,KAAAmY,wBAAuC,EAC7CC,SAAS,GACTC,WAAW,GACXC,WAAW,GACXC,aAAa,IAAA,GA4BbxgF,KAAU,EAAY,CAAA,GAAI8K,KAAKs1E,uBAAuBpgF,EAAAA,GAEtD8K,KAAK01E,cAAcxgF,GAAQwgF,aAC3B11E,KAAKy1E,YAAYvgF,GAAQugF,WACzBz1E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",
  "names": ["root", "factory", "exports", "module", "define", "amd", "window", "installedModules", "__webpack_require__", "moduleId", "i", "l", "modules", "call", "m", "c", "d", "name", "getter", "o", "Object", "defineProperty", "enumerable", "get", "r", "Symbol", "toStringTag", "value", "t", "mode", "__esModule", "ns", "create", "key", "bind", "n", "object", "property", "prototype", "hasOwnProperty", "p", "s", "global", "getOwnPropertyDescriptor", "f", "createNonEnumerableProperty", "redefine", "setGlobal", "copyConstructorProperties", "isForced", "options", "source", "target", "targetProperty", "sourceProperty", "descriptor", "TARGET", "GLOBAL", "STATIC", "stat", "noTargetGet", "forced", "sham", "shared", "has", "uid", "NATIVE_SYMBOL", "USE_SYMBOL_AS_UID", "WellKnownSymbolsStore", "createWellKnownSymbol", "withoutSetter", "DESCRIPTORS", "fails", "cache", "thrower", "it", "METHOD_NAME", "method", "ACCESSORS", "argument0", "argument1", "O", "length", "toInteger", "min", "Math", "argument", "exec", "error", "e", "check", "globalThis", "self", "Function", "requireObjectCoercible", "IE8_DOM_DEFINE", "anObject", "toPrimitive", "nativeDefineProperty", "P", "Attributes", "TypeError", "wellKnownSymbol", "definePropertyModule", "UNSCOPABLES", "ArrayPrototype", "Array", "undefined", "configurable", "IndexedObject", "toObject", "toLength", "arraySpeciesCreate", "push", "createMethod", "TYPE", "IS_MAP", "IS_FILTER", "IS_SOME", "IS_EVERY", "IS_FIND_INDEX", "NO_HOLES", "$this", "callbackfn", "that", "specificCreate", "result", "boundFunction", "index", "forEach", "map", "filter", "some", "every", "find", "findIndex", "ceil", "floor", "isNaN", "createPropertyDescriptor", "isObject", "String", "classof", "isArray", "arg", "max", "integer", "propertyKey", "SPECIES", "originalArray", "C", "constructor", "V8_VERSION", "array", "foo", "Boolean", "bitmap", "writable", "split", "propertyIsEnumerable", "path", "aFunction", "variable", "namespace", "arguments", "set", "NATIVE_WEAK_MAP", "objectHas", "sharedKey", "hiddenKeys", "WeakMap", "store", "wmget", "wmhas", "wmset", "metadata", "STATE", "enforce", "getterFor", "state", "type", "input", "PREFERRED_STRING", "fn", "val", "toString", "valueOf", "keys", "slice", "toIndexedObject", "toAbsoluteIndex", "IS_INCLUDES", "el", "fromIndex", "includes", "indexOf", "CORRECT_PROTOTYPE_GETTER", "IE_PROTO", "ObjectPrototype", "getPrototypeOf", "a", "b", "apply", "functionToString", "inspectSource", "createElement", "document", "EXISTS", "IS_PURE", "version", "copyright", "id", "postfix", "random", "$", "createIteratorConstructor", "setPrototypeOf", "setToStringTag", "Iterators", "IteratorsCore", "IteratorPrototype", "BUGGY_SAFARI_ITERATORS", "ITERATOR", "returnThis", "this", "Iterable", "NAME", "IteratorConstructor", "next", "DEFAULT", "IS_SET", "FORCED", "CurrentIteratorPrototype", "methods", "KEY", "getIterationMethod", "KIND", "defaultIterator", "IterablePrototype", "TO_STRING_TAG", "INCORRECT_VALUES_NAME", "nativeIterator", "anyNativeIterator", "entries", "values", "proto", "propertyIsEnumerableModule", "nativeGetOwnPropertyDescriptor", "InternalStateModule", "getInternalState", "enforceInternalState", "TEMPLATE", "unsafe", "simple", "join", "names", "PrototypeOfArrayIteratorPrototype", "arrayIterator", "getOwnPropertySymbols", "activeXDocument", "defineProperties", "enumBugKeys", "html", "documentCreateElement", "EmptyConstructor", "scriptTag", "content", "LT", "NullProtoObject", "domain", "ActiveXObject", "iframeDocument", "iframe", "write", "close", "temp", "parentWindow", "style", "display", "appendChild", "src", "contentWindow", "open", "F", "Properties", "TAG", "match", "userAgent", "process", "versions", "v8", "flattenIntoArray", "original", "sourceLen", "start", "depth", "mapper", "thisArg", "element", "targetIndex", "sourceIndex", "mapFn", "IS_RIGHT", "argumentsLength", "memo", "left", "right", "___CSS_LOADER_EXPORT___", "useSourceMap", "list", "item", "cssMapping", "btoa", "sourceMapping", "sourceMap", "base64", "unescape", "encodeURIComponent", "JSON", "stringify", "data", "concat", "sourceURLs", "sources", "sourceRoot", "mediaQuery", "dedupe", "alreadyImportedModules", "_i", "charAt", "defineIterator", "setInternalState", "iterated", "string", "point", "done", "CONVERT_TO_STRING", "pos", "first", "second", "S", "position", "size", "charCodeAt", "codeAt", "test", "g", "nativePropertyIsEnumerable", "NASHORN_BUG", "1", "V", "ownKeys", "getOwnPropertyDescriptorModule", "getBuiltIn", "getOwnPropertyNamesModule", "getOwnPropertySymbolsModule", "internalObjectKeys", "getOwnPropertyNames", "replacement", "feature", "detection", "normalize", "POLYFILL", "NATIVE", "replace", "toLowerCase", "iterator", "objectKeys", "aPossiblePrototype", "setter", "CORRECT_SETTER", "__proto__", "from", "iterable", "callWithSafeIterationClosing", "isArrayIteratorMethod", "createProperty", "getIteratorMethod", "arrayLike", "step", "mapfn", "mapping", "iteratorMethod", "ENTRIES", "returnMethod", "TO_STRING_TAG_SUPPORT", "classofRaw", "CORRECT_ARGUMENTS", "tag", "callee", "SAFE_CLOSING", "called", "iteratorWithReturn", "SKIP_CLOSING", "ITERATION_SUPPORT", "of", "arrayMethodHasSpeciesSupport", "IS_CONCAT_SPREADABLE", "IS_CONCAT_SPREADABLE_SUPPORT", "SPECIES_SUPPORT", "isConcatSpreadable", "spreadable", "k", "len", "E", "A", "copyWithin", "addToUnscopables", "to", "end", "count", "inc", "$every", "arrayMethodIsStrict", "arrayMethodUsesToLength", "STRICT_METHOD", "USES_TO_LENGTH", "fill", "endPos", "$filter", "HAS_SPECIES_SUPPORT", "$find", "SKIPS_HOLES", "$findIndex", "flat", "depthArg", "flatMap", "$forEach", "$includes", "$indexOf", "nativeIndexOf", "NEGATIVE_ZERO", "searchElement", "kind", "Arguments", "nativeJoin", "ES3_STRINGS", "separator", "lastIndexOf", "nativeLastIndexOf", "$map", "$reduce", "reduce", "$reduceRight", "reduceRight", "nativeReverse", "reverse", "0", "nativeSlice", "Constructor", "fin", "$some", "nativeSort", "sort", "FAILS_ON_UNDEFINED", "FAILS_ON_NULL", "comparefn", "CONSTRUCTOR_NAME", "splice", "deleteCount", "insertCount", "actualDeleteCount", "actualStart", "factories", "construct", "argsLength", "args", "partArgs", "FunctionPrototype", "FunctionPrototypeToString", "nameRE", "HAS_INSTANCE", "PromiseState", "polyfill", "audioContext", "requestAnimationFrame", "webkitRequestAnimationFrame", "mozRequestAnimationFrame", "callback", "setInterval", "cancelAnimationFrame", "webkitCancelAnimationFrame", "mozCancelAnimationFrame", "AudioContext", "webkitAudioContext", "mozAudioContext", "msAudioContext", "oAudioContext", "devicePixelRatio", "Side", "_state", "Pending", "_successCallbacks", "_rejectCallback", "resolve", "Promise", "reject", "promises", "joinedPromise", "total", "successes", "rejects", "errors", "then", "successCallback", "rejectCallback", "Resolved", "_value", "_handleError", "Rejected", "errorCallback", "_errorCallback", "Error", "cb", "seed", "_lowerMask", "_upperMask", "_w", "_n", "_m", "_a", "_u", "_s", "_b", "_t", "_c", "_l", "_f", "_mt", "Date", "now", "_index", "_twist", "mag01", "y", "nextInt", "floating", "bool", "likelihood", "pickOne", "pickSet", "numPicks", "allowDuplicates", "_pickSetWithDuplicates", "_pickSetWithoutDuplicates", "currentPick", "tempArray", "shuffle", "swap", "randomIndex", "range", "d4", "d6", "d8", "d10", "d12", "d20", "TwoPI", "PI", "extend", "extended", "deep", "assignExists", "assign", "merge", "obj", "prop", "base64Encode", "inputStr", "b64", "outputStr", "byte1", "byte2", "byte3", "enc1", "enc2", "enc3", "enc4", "nullish", "nullishVal", "defaultVal", "clamp", "randomInRange", "Random", "randomIntInRange", "round", "canonicalizeAngle", "angle", "tmpAngle", "toDegrees", "radians", "toRadians", "degrees", "getPosition", "oLeft", "oTop", "calcOffsetLeft", "parent", "offsetLeft", "offsetParent", "calcOffsetTop", "offsetTop", "addItemToArray", "removeItemFromArray", "contains", "getOppositeSide", "side", "Top", "Bottom", "Left", "Right", "None", "getSideFromDirection", "direction", "directions", "Up", "Down", "directionEnum", "Number", "MAX_VALUE", "maxIndex", "dot", "LogLevel", "initialSize", "Collection", "DefaultSize", "_internalArray", "_endPointer", "_resize", "newSize", "newArray", "pop", "clear", "internalSize", "elementAt", "insert", "remove", "removed", "removeElement", "toArray", "func", "fail", "message", "_appenders", "defaultLevel", "Info", "Logger", "_instance", "addAppender", "ConsoleAppender", "getInstance", "appender", "clearAppenders", "_log", "level", "log", "debug", "Debug", "info", "warn", "Warn", "fatal", "Fatal", "console", "consoleArgs", "unshift", "width", "height", "_messages", "_canvas", "innerWidth", "innerHeight", "_ctx", "getContext", "body", "clearRect", "opacity", "fillStyle", "toFixed", "fillText", "maxMessages", "obsoleteMessage", "resetObsoleteCounter", "logMessage", "trace", "showStackTrace", "obsolete", "alternateMethod", "showStackTrack", "SyntaxError", "x", "Vector", "fromAngle", "cos", "sin", "isValid", "vec", "Infinity", "distance", "vec1", "vec2", "sqrt", "pow", "setTo", "equals", "vector", "tolerance", "abs", "v", "Zero", "magnitude", "newLength", "scale", "average", "add", "sizeOrScale", "sub", "addEqual", "subEqual", "scaleEqual", "cross", "perpendicular", "normal", "negate", "toAngle", "atan2", "rotate", "anchor", "sinAngle", "cosAngle", "clone", "dir", "intersect", "line", "numerator", "begin", "getSlope", "divisor", "u", "getLength", "getPoint", "time", "slope", "getEdge", "flip", "Line", "distanceToPoint", "x0", "y0", "dy", "dx", "findVectorToPoint", "aMinusP", "findPoint", "intercept", "hasPoint", "currPoint", "threshold", "dxc", "dyc", "dx1", "dy1", "overlaps", "projection", "getOverlap", "worldPos", "pagePos", "screenPos", "fromPagePosition", "xOrPos", "yOrEngine", "engineOrUndefined", "pageX", "pageY", "engine", "screenX", "canvas", "screenY", "screenToWorldCoordinates", "GlobalCoordinates", "CollisionResolutionStrategy", "BroadphaseStrategy", "Integrator", "fromRGB", "Color", "fromHex", "hex", "parseInt", "fromHSL", "h", "HSLColor", "toRGBA", "lighten", "factor", "fromRGBA", "darken", "saturate", "desaturate", "multiply", "color", "mulitiply", "screen", "color1", "invert", "color2", "format", "toHSLA", "toHex", "_componentToHex", "Vermilion", "hue2rgb", "q", "EventTypes", "useBoxPhysics", "Physics", "collisionResolutionStrategy", "Box", "useRigidBodyPhysics", "RigidBody", "dynamicTreeVelocityMultiplier", "acc", "enabled", "collisionPasses", "broadphaseStrategy", "DynamicAABBTree", "broadphaseDebug", "showCollisionNormals", "showMotionVectors", "showBounds", "showArea", "showContacts", "showNormals", "defaultMass", "integrator", "Euler", "integrationSteps", "allowRigidBodyRotation", "collisionShift", "boundsPadding", "surfaceEpsilon", "checkForFastBodies", "disableMinimumSpeedForFastBody", "CollisionType", "_bubbles", "stopPropagation", "bubbles", "GameEvent", "ctx", "delta", "prevStats", "stats", "gamepad", "button", "axis", "topic", "handler", "actor", "other", "intersection", "pair", "oldScene", "newScene", "colliderA", "colliderB", "mtv", "strategy", "_resolveRigidBodyCollision", "_resolveBoxCollision", "_applyBoxImpulse", "Active", "Passive", "mtvDir", "vel", "velAdj", "emit", "PostCollisionEvent", "PreCollisionEvent", "bodyA", "bodyB", "invMassA", "Fixed", "mass", "invMassB", "invMoiA", "inertia", "invMoiB", "coefRestitution", "bounciness", "coefFriction", "friction", "tangent", "ra", "center", "rb", "rv", "rx", "rvNormal", "rvTangent", "raTangent", "raNormal", "rbTangent", "rbNormal", "impulse", "addMtv", "jt", "frictionImpulse", "CollisionJumpTable", "CollideCircleCircle", "circleA", "circleB", "radius", "circleAPos", "circleBPos", "axisOfCollision", "mvt", "pointOfCollision", "getFurthestPoint", "collider", "CollideCirclePolygon", "circle", "polygon", "minAxis", "testSeparatingAxisTheorem", "samedir", "verts", "point1", "point2", "CollideCircleEdge", "edge", "cc", "da", "dda", "db", "ddb", "den", "pointOnEdge", "dd", "CollideEdgeEdge", "CollidePolygonEdge", "edgeNormal", "getClosestFace", "face", "pc", "linePoly", "points", "CollidePolygonPolygon", "polyA", "polyB", "sameDir", "pointA", "pointB", "contact", "ClosestLine", "p0", "q0", "w0", "denom", "sDenom", "tDenom", "tClosestParallel", "sClosest", "tClosest", "DisplayMode", "ClosestLineJumpTable", "PolygonPolygonClosestLine", "polygonA", "polygonB", "otherWorldPos", "otherDirection", "thisDirection", "rayTowardsOther", "Ray", "rayTowardsThis", "thisPoint", "rayCast", "otherPoint", "thisFace", "otherFace", "PolygonEdgeClosestLine", "edgeLine", "asLine", "PolygonCircleClosestLine", "circlex", "circley", "CircleCircleClosestLine", "CircleEdgeClosestLine", "circleWorlPos", "EdgeEdgeClosestLine", "edgeA", "edgeB", "edgeLineA", "edgeLineB", "offset", "Circle", "ray", "orig", "discriminant", "toi", "toi1", "toi2", "positiveToi", "mintoi", "getClosestLineBetween", "shape", "collide", "bodyPos", "axes", "closestPointOnPoly", "minOverlap", "minIndex", "proj1", "project", "proj2", "overlap", "recalc", "scalars", "dotProduct", "Projection", "draw", "Green", "newPos", "beginPath", "arc", "closePath", "debugDraw", "rotation", "strokeStyle", "stroke", "moveTo", "lineTo", "Edge", "_getBodyPos", "_getTransformedBegin", "_getTransformedEnd", "transformedBegin", "transformedEnd", "_boundsFromBeginEnd", "asLocalLine", "Red", "_transformedPoints", "_axes", "_sides", "winding", "clockwiseWinding", "_calculateTransformation", "ConvexPolygon", "One", "getTransformedPoints", "oldPos", "oldRotation", "oldScale", "getSides", "lines", "testRay", "accum", "pts", "furthestPoint", "maxDistance", "sides", "POSITIVE_INFINITY", "faceIndex", "dist", "fromPoints", "denominator", "iplusone", "crossTerm", "minContactTime", "contactIndex", "contactTime", "poly2", "scalar", "firstPoint", "leftOrOptions", "top", "bottom", "getSideFromIntersection", "minX", "minY", "maxX", "maxY", "BoundingBox", "fromDimension", "Half", "translate", "getPoints", "shifted", "getPerimeter", "results", "toPolygon", "maybeCollider", "farClipDistance", "tmin", "tmax", "xinv", "yinv", "tx1", "tx2", "ty1", "ty2", "rayCastTime", "combine", "totalBoundingBox", "dimensions", "overlapX", "overlapY", "intersectWithSide", "bb", "Yellow", "strokeRect", "_antialiasing", "_resolutionStack", "_viewportStack", "_pixelRatio", "_isFullScreen", "_isDisposed", "_logger", "_pixelRatioChangeHandler", "applyResolutionAndViewport", "_windowResizeHandler", "displayMode", "Container", "parentElement", "_setHeightByDisplayMode", "clientHeight", "viewport", "resolution", "_displayMode", "context", "antialiasing", "_browser", "browser", "_position", "pixelRatio", "_applyDisplayMode", "_mediaQueryList", "nativeComponent", "matchMedia", "addEventListener", "dispose", "off", "removeEventListener", "_resolution", "_viewport", "setCurrentCamera", "camera", "_camera", "pushResolutionAndViewport", "popResolutionAndViewport", "scaledWidth", "scaledHeight", "imageRendering", "resetTransform", "imageSmoothingEnabled", "isSmooth", "goFullScreen", "requestFullscreen", "exitFullScreen", "exitFullscreen", "newX", "newY", "drawWidth", "drawHeight", "halfDrawWidth", "halfDrawHeight", "worldToScreenCoordinates", "getWorldBounds", "z", "FullScreen", "on", "Position", "_initializeDisplayModePosition", "clientWidth", "margin", "overflow", "specifiedPosition", "offsetY", "marginTop", "offsetX", "marginLeft", "_handlers", "_wiredEventDispatchers", "_target", "eventName", "event", "SubscribeEvent", "eventHandlers", "UnsubscribeEvent", "once", "ev", "wire", "eventDispatcher", "unwire", "eventObject", "responseType", "bustCache", "logger", "arrayBuffer", "onprogress", "oncomplete", "onerror", "isLoaded", "wireEngine", "_engine", "_cacheBust", "uri", "_start", "load", "complete", "request", "XMLHttpRequest", "onloadstart", "onload", "status", "response", "processData", "send", "getData", "getArrayData", "setData", "URL", "createObjectURL", "updatePixel", "imageData", "firstPixel", "pixel", "avg", "Configurable", "base", "props", "RotationType", "imageOrConfig", "flipVertical", "flipHorizontal", "effects", "_spriteCanvas", "_spriteCtx", "_pixelData", "_pixelsLoaded", "_dirtyEffect", "_opacity", "image", "_texture", "loaded", "naturalWidth", "naturalHeight", "_loadPixels", "drawImage", "grayscale", "addEffect", "colorize", "effect", "_applyEffects", "removeEffect", "param", "indexToRemove", "getImageData", "putImageData", "clearEffects", "reset", "save", "xpoint", "ypoint", "Black", "restore", "ctxOrOptions", "CanvasRenderingContext2D", "_drawWithOptions", "oldAlpha", "globalAlpha", "Sprite", "_isLoaded", "_sprite", "Image", "asSprite", "engineOrConfig", "images", "speed", "loop", "sprites", "currentFrame", "_timeLeftInFrame", "_idempotencyToken", "freezeFrame", "config", "_setAnchor", "_setRotation", "_setScale", "isDone", "tick", "elapsed", "idempotencyToken", "_updateValues", "current", "skip", "frames", "currSprite", "animOptions", "play", "playAnimation", "duration", "easingFcn", "_currentLerpTime", "_lerpDuration", "_lerpStart", "_lerpEnd", "_initialized", "_stopped", "_distance", "_initialize", "update", "isComplete", "stop", "destx", "desty", "_started", "_actor", "_end", "_speed", "_delta", "_dir", "_offset", "actorToFollow", "followDistance", "_actorToFollow", "_current", "_maximumDistance", "_distanceBetween", "actorToFollowSpeed", "actorToMeet", "_speedWasSpecified", "_actorToMeet", "actorToMeetSpeed", "angleRadians", "rotationType", "_rotationType", "ShortestPath", "distance1", "distance2", "_shortDistance", "_longDistance", "_shortestPathIsPositive", "_direction", "LongestPath", "Clockwise", "CounterClockwise", "distanceTravelled", "angleRadiansOffset", "scaleX", "scaleY", "speedX", "speedY", "_endX", "_endY", "_speedX", "_speedY", "_startX", "_startY", "_distanceX", "_distanceY", "sx", "directionX", "sy", "directionY", "ScaleTo", "scaleOffsetX", "scaleOffsetY", "_startScale", "_endScale", "_directionX", "_directionY", "ScaleBy", "delay", "_elapsedTime", "_delay", "timeVisible", "timeNotVisible", "numBlinks", "_timeVisible", "_timeNotVisible", "_totalTime", "_duration", "visible", "endOpacity", "_multiplier", "_endOpacity", "actionQueue", "clearActions", "kill", "_method", "_hasBeenCalled", "repeat", "actions", "_actionQueue", "ActionQueue", "_repeat", "_originalRepeat", "hasNext", "_actions", "_completedActions", "action", "_currentAction", "getActions", "shift", "CreateReversibleEasingFunction", "easing", "CreateReversableEasingFunction", "EasingFunctions", "CreateVectorEasingFunction", "Linear", "currentTime", "startValue", "endValue", "EaseInQuad", "EaseOutQuad", "EaseInOutQuad", "EaseInCubic", "EaseOutCubic", "EaseInOutCubic", "_actors", "_queues", "addActorToContext", "removeActorFromContext", "easeTo", "moveBy", "xOffset", "yOffset", "rotateTo", "rotateBy", "scaleTo", "sizeX", "sizeY", "scaleBy", "sizeOffsetX", "sizeOffsetY", "blink", "fade", "die", "callMethod", "times", "repeatForever", "follow", "meet", "asPromise", "Polygon", "oldVel", "oldAcc", "torque", "motion", "_geometryDirty", "_totalMtv", "useBoxCollider", "Body", "isKilled", "_collider", "_wireColliderEventsToActor", "applyMtv", "markCollisionShapeDirty", "captureOldTransform", "integrate", "seconds", "totalAcc", "usePolygonCollider", "useCircleCollider", "useEdgeCollider", "evt", "CollisionStartEvent", "CollisionEndEvent", "PreventCollision", "currentScene", "tileMaps", "j", "intersectMap", "collides", "_topLeft", "_topRight", "_bottomLeft", "_bottomRight", "isSpriteOffScreen", "drawingWidth", "currentDrawing", "drawingHeight", "getWorldPos", "topLeftScreen", "topRightScreen", "bottomLeftScreen", "bottomRightScreen", "_xCoords", "_yCoords", "_xMin", "_yMin", "_xMax", "_yMax", "minWorld", "maxWorld", "_xMinWorld", "_yMinWorld", "_xMaxWorld", "_yMaxWorld", "boundingPoints", "White", "rect", "Blue", "Magenta", "cullingBox", "events", "actorBoundsOffscreen", "bounds", "isOffScreen", "EnterViewPortEvent", "ExitViewPortEvent", "enableCapturePointer", "pointers", "checkAndUpdateActorUnderPointer", "x1", "y1", "x2", "y2", "thickness", "cap", "lineWidth", "lineCap", "origin", "roundRect", "br", "tl", "tr", "bl", "defaultRadius", "quadraticCurveTo", "category", "mask", "_name", "_category", "_mask", "canCollide", "All", "CollisionGroup", "collision", "Pair", "calculatePairHash", "group", "active", "actorA", "actorB", "Cyan", "isCollider", "useShapeInertia", "_events", "_shape", "Collider", "touching", "localBounds", "newComponent", "Component", "observers", "register", "observer", "unregister", "notifyAll", "notify", "isAddedComponent", "isRemovedComponent", "Entity", "_ID", "_componentsToRemove", "_typesMemo", "_dirty", "_handleChanges", "changes", "AddedComponent", "component", "entity", "deleteProperty", "RemovedComponent", "components", "Proxy", "Observable", "_isInitialized", "newEntity", "types", "addComponent", "componentOrEntity", "force", "removeComponent", "dependencies", "ctor", "owner", "onAdd", "componentOrType", "_removeComponentByType", "onRemove", "processRemoval", "isInitialized", "onInitialize", "InitializeEvent", "_preupdate", "PreUpdateEvent", "onPreUpdate", "_postupdate", "PostUpdateEvent", "onPostUpdate", "isActor", "Actor", "xOrConfig", "ActorImpl", "maxId", "_height", "_width", "previousOpacity", "scene", "children", "_draggable", "_dragging", "_pointerDragStartHandler", "_pointerDragEndHandler", "_pointerDragMoveHandler", "pe", "pointer", "lastWorldPos", "_pointerDragLeaveHandler", "traits", "capturePointer", "captureMoveEvents", "captureDragEvents", "_zIndex", "_isKilled", "_capturePointerEvents", "_captureMoveEvents", "_captureDragEvents", "_initDefaults", "shouldInitializeBody", "collisionType", "_body", "thePos", "theVel", "theAcc", "theAngle", "angularVelocity", "scalePerSecondX", "scalePerSecondY", "isDraggable", "_color", "defaults", "_checkForPointerOptIn", "normalized", "_prekill", "_scene", "PreKillEvent", "onPreKill", "_postkill", "PostKillEvent", "onPostKill", "KillEvent", "unkill", "setDrawing", "addDrawing", "getZIndex", "newZ", "setZIndex", "newIndex", "cleanupDrawTree", "updateDrawTree", "getGlobalScale", "getWorldRotation", "parents", "px", "py", "parentScale", "recurse", "childShift", "containment", "child", "within", "drawing", "Animation", "currFrame", "_predraw", "_postdraw", "onPreDraw", "onPostDraw", "PreDrawEvent", "PreDebugDrawEvent", "ticks", "Pi", "oldFont", "font", "textAlign", "PostDebugDrawEvent", "getAncestors", "currentActor", "useWorld", "coords", "UIActor", "fcn", "interval", "repeats", "numberOfRepeats", "maxNumberOfRepeats", "_totalTimeAlive", "_paused", "_numberOfTicks", "Timer", "_callbacks", "newInterval", "newNumberOfRepeats", "getTimeRunning", "pause", "unpause", "cancel", "cancelTimer", "cellWidth", "cellHeight", "rows", "cols", "_collidingX", "_collidingY", "_onScreenXStart", "_onScreenXEnd", "_onScreenYStart", "_onScreenYEnd", "_spriteSheets", "cd", "Cell", "registerSpriteSheet", "spriteSheet", "actorBounds", "cell", "getCellByPoint", "solid", "getCellByIndex", "getCell", "worldCoordsUpperLeft", "worldCoordsLowerRight", "cs", "csi", "cslen", "xEnd", "yEnd", "spriteId", "ss", "spriteSheetKey", "sprite", "getSprite", "fillRect", "_bounds", "pushSprite", "tileSprite", "removeSprite", "clearSprites", "_INSTANCE", "Axis", "unlock", "promise", "WebAudio", "_unlocked", "AudioContextFactory", "unlockTimeoutTimer", "setTimeout", "resume", "buffer", "createBuffer", "createBufferSource", "ended", "connect", "destination", "onended", "noteOn", "playbackState", "PLAYING_STATE", "FINISHED_STATE", "clearTimeout", "isUnlocked", "loadables", "_resourceList", "_playButtonShown", "_resourceCount", "_numLoaded", "_progressCounts", "_totalCounts", "logo", "logoWidth", "logoHeight", "loadingBarColor", "backgroundColor", "suppressPlayButton", "_playButtonStyles", "playButtonText", "startButtonFactory", "buttonElement", "textContent", "addResources", "_imageElement", "_playButtonRootElement", "_playButtonElement", "_styleBlock", "head", "addResource", "loadable", "showPlayButton", "_playButton", "hidePlayButton", "removeChild", "resource", "updateResourceProgress", "markResourceComplete", "loadNext", "loadedBytes", "totalBytes", "totalProgress", "progress", "canvasHeight", "canvasWidth", "buttonWidth", "buttonHeight", "playButtonPosition", "logoY", "logoX", "logoPosition", "imageHeight", "oldAntialias", "getAntialiasing", "setAntialiasing", "_image", "loadingX", "loadingY", "loadingBarPosition", "progressWidth", "REPORTED_FEATURES", "webgl", "webaudio", "gamepadapi", "_features", "failedTests", "_criticalTests", "canvasSupport", "elem", "arrayBufferSupport", "xhr", "dataUrlSupport", "toDataURL", "objectUrlSupport", "rgbaSupport", "cssText", "_warningTest", "webAudioSupport", "webglSupport", "_loadBrowserFeatures", "getBrowserFeatures", "logBrowserFeatures", "msg", "supported", "arraybuffer", "dataurl", "objecturl", "rgba", "navigator", "getGamepads", "failedCritical", "warning", "isLeaf", "worldBounds", "nodes", "_insert", "leaf", "leafAABB", "currentRoot", "area", "combinedArea", "cost", "inheritanceCost", "leftCost", "leftCombined", "oldArea", "rightCost", "rightCombined", "oldParent", "newParent", "currentNode", "_balance", "_remove", "sibling", "grandParent", "trackBody", "node", "updateBody", "untrackBody", "multdx", "multdy", "balance", "getHeight", "query", "helper", "rayCastQuery", "getNodes", "_dynamicCollisionTree", "_collisionHash", "_collisionPairCache", "_lastFramePairs", "_lastFramePairsHash", "track", "untrack", "_shouldGenerateCollisionPair", "hash", "broadphase", "targets", "potentialColliders", "physics", "pairs", "updateDistance", "minDimension", "fastBodies", "updateVec", "centerPoint", "hitPoint", "fastBodyCollisions", "narrowphase", "collisions", "collidersHash", "runCollisionStartEnd", "currentFrameHash", "actor1", "actor2", "updated", "getComparable", "_getComparable", "_find", "_root", "getKey", "getLeft", "getRight", "_get", "BinaryTreeNode", "setLeft", "setRight", "removeByComparable", "elementIndex", "_findMinNode", "setKey", "_cleanup", "comparable", "_list", "treeNode", "_key", "_data", "_left", "_right", "getTheKey", "lockToActor", "addStrategy", "LockCameraToActorStrategy", "lockToActorAxis", "elasticToActor", "cameraElasticity", "cameraFriction", "ElasticToActorStrategy", "radiusAroundActor", "RadiusAroundActorStrategy", "limitCameraBounds", "box", "FontUnit", "TextAlign", "BaseAlign", "FontStyle", "_cam", "_eng", "cam", "currentFocus", "getFocus", "X", "focus", "cameraVel", "stretch", "boundSizeChecked", "_cameraStrategies", "StrategyContainer", "dz", "az", "_cameraMoving", "_isShaking", "_shakeMagnitudeX", "_shakeMagnitudeY", "_shakeDuration", "_elapsedShakeTime", "_xShake", "_yShake", "_isZooming", "_zoomStart", "_zoomEnd", "_currentZoomTime", "_zoomDuration", "_zoomEasing", "_easing", "_follow", "move", "easingFn", "_lerpPromise", "shake", "magnitudeX", "magnitudeY", "zoom", "_zoomPromise", "getZoom", "halfWidth", "halfHeight", "cameraStrategy", "removeStrategy", "clearAllStrategies", "newZoom", "zoomEasing", "lerpPoint", "_isDoneShaking", "newCanvasWidth", "newCanvasHeight", "setLineDash", "textOrConfig", "fontFamily", "spriteFont", "bold", "fontSize", "fontStyle", "Normal", "fontUnit", "Px", "baseAlign", "letterSpacing", "caseInsensitive", "text", "_textShadowOn", "_shadowOffsetX", "_shadowOffsetY", "getTextWidth", "_fontString", "measureText", "_lookupFontUnit", "Em", "Rem", "Pt", "Percent", "_lookupTextAlign", "Center", "End", "Start", "_lookupBaseAlign", "Alphabetic", "Hanging", "Ideographic", "Middle", "_lookupFontStyle", "boldstring", "Italic", "Oblique", "setTextShadow", "shadowColor", "useTextShadow", "clearTextShadow", "_fontDraw", "oldAlign", "oldTextBaseline", "textBaseline", "maxWidth", "triggerDefaults", "opts", "EnterTriggerEvent", "_dispatchAction", "ExitTriggerEvent", "wp", "Violet", "isScreenElement", "SystemType", "buildTypeKey", "localeCompare", "priority", "_entityAddedOrRemoved", "isAddedSystemEntity", "isRemoveSystemEntity", "ColorBlindness", "entities", "addEntity", "matches", "AddedEntity", "removeEntity", "RemovedEntity", "typesOrEntity", "_queries", "_addQuery", "entityManager", "maybeRemoveQuery", "queryType", "createQuery", "maybeExistingQuery", "getQuery", "_entityIndex", "queryManager", "idOrEntity", "processRemovals", "getById", "systems", "addSystem", "system", "removeSystem", "updateSystems", "systemType", "preupdate", "postupdate", "actors", "systemManager", "_bodies", "triggers", "screenElements", "_sortedDrawingTree", "SortedList", "_broadphase", "_killQueue", "_triggerKillQueue", "_timers", "_cancelQueue", "onActivate", "_oldScene", "_newScene", "onDeactivate", "_initializeChildren", "_activate", "_deactivate", "PostDrawEvent", "Update", "removeTimer", "_collectActorStats", "dispatchPointerEvents", "beforeBroadphase", "afterBroadphase", "beforeNarrowphase", "iter", "collisionDelta", "afterNarrowphase", "killed", "_processKillQueue", "killQueue", "collection", "actorIndex", "Draw", "sortedChildren", "isDebug", "addScreenElement", "_addChild", "addTimer", "TileMap", "addTileMap", "removeScreenElement", "_removeChild", "removeTileMap", "tileMap", "timer", "isTimerActive", "isActorInDrawTree", "isCurrentScene", "ui", "alive", "Keys", "simulate", "colorMode", "Protanope", "_vertexShader", "_fragmentShader", "_internalCanvas", "_gl", "preserveDrawingBuffer", "_program", "createProgram", "fragmentShader", "_getShader", "_getFragmentShaderByMode", "vertextShader", "attachShader", "linkProgram", "getProgramParameter", "LINK_STATUS", "useProgram", "code", "Deuteranope", "Tritanope", "_setRectangle", "bufferData", "ARRAY_BUFFER", "Float32Array", "STATIC_DRAW", "program", "shader", "createShader", "FRAGMENT_SHADER", "VERTEX_SHADER", "shaderSource", "compileShader", "getShaderParameter", "COMPILE_STATUS", "getShaderInfoLog", "out", "positionLocation", "getAttribLocation", "texCoordLocation", "texCoordBuffer", "bindBuffer", "enableVertexAttribArray", "vertexAttribPointer", "FLOAT", "texture", "createTexture", "bindTexture", "TEXTURE_2D", "texParameteri", "TEXTURE_WRAP_S", "CLAMP_TO_EDGE", "TEXTURE_WRAP_T", "TEXTURE_MIN_FILTER", "NEAREST", "TEXTURE_MAG_FILTER", "pixelStorei", "UNPACK_FLIP_Y_WEBGL", "texImage2D", "RGBA", "UNSIGNED_BYTE", "resolutionLocation", "getUniformLocation", "uniform2f", "positionBuffer", "drawArrays", "TRIANGLES", "pixelData", "Uint8Array", "readPixels", "correct", "colorBlindness", "postProcessors", "FrameStats", "prevFrame", "colorBlindMode", "_id", "_fps", "_actorStats", "remaining", "_durationStats", "_physicsStats", "PhysicsStats", "otherStats", "fps", "fs", "_pairs", "_collisions", "_collidersHash", "_fastBodies", "_fastBodyCollisions", "_narrowphase", "ps", "colliders", "PointerType", "PointerScope", "_keys", "_keysUp", "_keysDown", "init", "noop", "_normalizeKeyCode", "keyCode", "keyEvent", "KeyEvent", "getKeys", "wasPressed", "isHeld", "wasReleased", "Semicolon", "NativePointerButton", "PointerButton", "WheelDeltaMode", "Pointer", "_MAX_ID", "_isDown", "_wasDown", "_actorsUnderPointer", "_actorsLastFrame", "_actorsNoLongerUnderPointer", "lastPagePos", "lastScreenPos", "dragTarget", "_onPointerMove", "_onPointerDown", "_onPointerUp", "addActorUnderPointer", "isActorAliveUnderPointer", "removeActorUnderPointer", "getActorsUnderPointer", "getActorsUnderPointerLastFrame", "getActorsForEvents", "checkActorUnderPointer", "wasActorUnderPointer", "_ev", "coordinates", "pointerType", "propagate", "doAction", "_onActionStart", "_onActionEnd", "_pointerEventType", "PointerEvent", "isDragEnd", "isDragStart", "isDragging", "deltaX", "deltaY", "deltaZ", "deltaMode", "createPointerEventByName", "PointerEventFactory", "PointerUpEvent", "PointerDownEvent", "PointerMoveEvent", "PointerCancelEvent", "PointerEnterEvent", "PointerLeaveEvent", "Buttons", "Axes", "_pointerDown", "_pointerUp", "_pointerMove", "_pointerCancel", "_wheel", "_pointers", "_activePointers", "primary", "_handleTouchEvent", "touchAction", "_handlePointerEvent", "MSPointerEvent", "msTouchAction", "_handleMouseEvent", "wheelOptions", "passive", "pageScrollPreventionMode", "ScrollPreventionMode", "Canvas", "_handleWheelEvent", "onmousewheel", "triggerEvent", "pointerId", "eventish", "preventDefault", "CapturePointer", "at", "_dispatchWithBubble", "_dispatchPointerLeaveEvents", "lastMoveEventPerPointerPerActor", "pointerLeave", "_dispatchPointerEnterEvents", "lastMoveEventPerPointer", "pointerEnter", "_propagateWheelPointerEvent", "wheelEvent", "eventArr", "Mouse", "_nativeButtonToPointerButton", "changedTouches", "_getPointerIndex", "identifier", "Touch", "Unknown", "_stringToPointerType", "transformedPoint", "wheelDeltaX", "wheelDeltaY", "wheelDelta", "detail", "Pixel", "Page", "we", "WheelEvent", "idx", "NoButton", "Pen", "_gamePadTimeStamps", "_oldPads", "_pads", "_initSuccess", "_navigator", "_minimumConfiguration", "_clonePads", "setMinimumGamepadConfiguration", "_enableAndUpdate", "_isGamepadValid", "pad", "axesLength", "buttonLength", "buttons", "connected", "gamepads", "GamepadConnectEvent", "timestamp", "navigatorGamepad", "bi", "ai", "getButton", "pressed", "updateButton", "GamepadButtonEvent", "getAxes", "updateAxes", "GamepadAxisEvent", "_clonePad", "GamepadDisconnectEvent", "Gamepad", "getValidGamepads", "pads", "arr", "clonedPad", "MinAxisMoveThreshold", "_buttons", "isButtonPressed", "buttonIndex", "axesIndex", "_nativeHandlers", "_decorate", "_windowGlobal", "_documentGlobal", "_windowComponent", "BrowserComponent", "_documentComponent", "EmitterType", "_hasStarted", "scenes", "_animations", "_suppressPlayButton", "pauseAudioWhenHidden", "debugColor", "enableCanvasTransparency", "onFatalException", "_timescale", "_isLoading", "Engine", "_DefaultEngineOptions", "BrowserEvents", "detector", "suppressMinimumBrowserFeatureDetection", "_compatible", "innerText", "testMessage", "canvasElementId", "getElementById", "suppressConsoleBootMessage", "EX_VERSION", "canvasElement", "alpha", "suppressHiDPIScaling", "_loader", "rootScene", "addScene", "goToScene", "halfCanvasWidth", "halfCanvasHeight", "isHiDpi", "isFullScreen", "animation", "AnimationNode", "removeScene", "DeactivateEvent", "ActivateEvent", "hidden", "visibilityChange", "scrollPreventionMode", "keyboard", "pointerScope", "Document", "HiddenEvent", "VisibleEvent", "_overrideInitialize", "_update", "_draw", "loader", "loadingComplete", "GameStartEvent", "createMainLoop", "game", "raf", "nowFn", "lastTime", "mainloop", "_requestId", "PreFrameEvent", "timescale", "frameId", "beforeUpdate", "afterUpdate", "afterDraw", "PostFrameEvent", "GameStopEvent", "isPaused", "screenshot", "raw", "_val", "layPath", "MediaEvent", "processedData", "emitterOrConfig", "life", "beginColor", "endColor", "velocity", "acceleration", "startSize", "endSize", "particleRotationalVelocity", "currentRotation", "focusAccel", "fadeFlag", "_rRate", "_gRate", "_bRate", "_aRate", "_currentColor", "emitter", "particleSize", "particleSprite", "sizeRate", "elapsedMultiplier", "ParticleEmitter", "removeParticle", "accel", "numParticles", "isEmitting", "particles", "deadParticles", "minVel", "maxVel", "minAngle", "maxAngle", "emitRate", "particleLife", "minSize", "maxSize", "emitterType", "Rectangle", "randomRotation", "_particlesToEmit", "particle", "emitParticles", "particleCount", "_createParticle", "clearParticles", "ranX", "ranY", "Particle", "Internal", "Actions", "_currentGroup", "_MAX_GROUPS", "_groups", "_currentBit", "groupByName", "Map", "_STARTING_BIT", "CollisionGroupManager", "filled", "_points", "prev", "curr", "fillColor", "lineColor", "imageOrConfigOrSprites", "columns", "spWidth", "spHeight", "spacing", "loadFromImage", "RangeError", "getAnimationByIndices", "indices", "getAnimationBetween", "beginIndex", "endIndex", "getAnimationForAll", "getAnimationByCoords", "spriteCoordinates", "maxHeight", "coord", "anim", "alphabet", "_currentOpacity", "_sprites", "_textShadowDirty", "_textShadowColor", "_textShadowSprites", "_alphabet", "_caseInsensitive", "getTextSprites", "lookup", "char", "character", "_parseOptions", "characterShadow", "currX", "currY", "charSprite", "SpriteSheet", "any", "blob", "json", "has_initialize", "hasOnInitialize", "has_preupdate", "hasOnPreUpdate", "has_postupdate", "hasOnPostUpdate", "hasPreDraw", "hasPostDraw", "_lerp", "_fade", "_perm", "_p", "_defaultPerlinOptions", "octaves", "frequency", "amplitude", "persistance", "_random", "noise", "amp", "freq", "maxValue", "_noise1d", "_noise2d", "_noise3d", "sequence", "grid", "_gradient3d", "_gradient2d", "_gradient1d", "intX", "intY", "fadeX", "fadeY", "intZ", "fadeZ", "aa", "ba", "ab", "generator", "colorFcn", "AudioBuffer", "_src", "_volume", "_loop", "_isPlaying", "_isPaused", "_wireUpOnEnded", "isPlaying", "_resumePlayBack", "_startPlayBack", "_playingPromise", "_handleOnEnded", "_audioContext", "_volumeNode", "createGain", "_currentOffset", "_createNewBufferSource", "gain", "setTargetAtTime", "playbackRate", "_setPauseOffset", "_rememberStartTime", "_playbackRate", "restartTime", "amend", "_startTime", "getTime", "setValueAtTime", "canPlayFile", "file", "Audio", "canPlayType", "_isStopped", "_tracks", "_wasPlayingOnHidden", "_processedData", "_detectResponseType", "paths", "volume", "NativeSoundEvent", "instanceCount", "_resumePlayback", "_startPlayback", "ArrayBuffer", "_processArrayBufferData", "_processBlobData", "_setProcessedData", "getTrackId", "resumed", "newTrack", "_createNewTrack", "playPromise", "resolved", "decodeAudioData", "NativeSoundProcessedEvent", "aiPromise", "_getTrackInstance", "AudioInstanceFactory", "ExResponse", "_stream", "_gif", "_animation", "_transparentColor", "Stream", "imageIndex", "asSpriteSheet", "spriteArray", "asAnimation", "checkBytes", "bitsToNum", "byteToBitArr", "bite", "dataArray", "readByte", "byteLength", "readBytes", "bytes", "read", "fromCharCode", "readUnsigned", "stream", "_st", "_handler", "globalColorTable", "parseColorTable", "ct", "readSubBlocks", "parseHeader", "hdr", "sig", "ver", "colorRes", "globalColorTableSize", "gctFlag", "sorted", "bgColor", "pixelAspectRatio", "bits", "parseExt", "block", "label", "extType", "reserved", "disposalMethod", "userInput", "transparencyGiven", "delayTime", "transparencyIndex", "terminator", "gce", "comment", "com", "ptHeader", "ptData", "pte", "authCode", "unknown", "iterations", "app", "NETSCAPE", "appData", "parseImg", "img", "leftPos", "topPos", "lctFlag", "interlaced", "lctSize", "lct", "lzwMinCodeSize", "lzwData", "pixels", "minCodeSize", "last", "readCode", "output", "clearCode", "eoiCode", "codeSize", "dict", "newPixels", "cpRow", "toRow", "fromRow", "fromPixels", "offsets", "steps", "pass", "arrayToImage", "parseBlock", "sentinel", "eof", "frame"]
}
